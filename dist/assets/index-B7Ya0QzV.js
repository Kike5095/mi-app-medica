(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function RR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dm={exports:{}},vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function CR(){if(g0)return vc;g0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var h in r)h!=="key"&&(o[h]=r[h])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return vc.Fragment=t,vc.jsx=e,vc.jsxs=e,vc}var m0;function IR(){return m0||(m0=1,Dm.exports=CR()),Dm.exports}var w=IR(),Mm={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function DR(){if(p0)return Ct;p0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,D={};function M(L,st,ut){this.props=L,this.context=st,this.refs=D,this.updater=ut||S}M.prototype.isReactComponent={},M.prototype.setState=function(L,st){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,st,"setState")},M.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function j(){}j.prototype=M.prototype;function W(L,st,ut){this.props=L,this.context=st,this.refs=D,this.updater=ut||S}var $=W.prototype=new j;$.constructor=W,x($,M.prototype),$.isPureReactComponent=!0;var rt=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},ot=Object.prototype.hasOwnProperty;function N(L,st,ut,at,gt,xt){return ut=xt.ref,{$$typeof:n,type:L,key:st,ref:ut!==void 0?ut:null,props:xt}}function C(L,st){return N(L.type,st,void 0,void 0,void 0,L.props)}function I(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function O(L){var st={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ut){return st[ut]})}var V=/\/+/g;function U(L,st){return typeof L=="object"&&L!==null&&L.key!=null?O(""+L.key):st.toString(36)}function k(){}function Ft(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(k,k):(L.status="pending",L.then(function(st){L.status==="pending"&&(L.status="fulfilled",L.value=st)},function(st){L.status==="pending"&&(L.status="rejected",L.reason=st)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function bt(L,st,ut,at,gt){var xt=typeof L;(xt==="undefined"||xt==="boolean")&&(L=null);var _t=!1;if(L===null)_t=!0;else switch(xt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(L.$$typeof){case n:case t:_t=!0;break;case y:return _t=L._init,bt(_t(L._payload),st,ut,at,gt)}}if(_t)return gt=gt(L),_t=at===""?"."+U(L,0):at,rt(gt)?(ut="",_t!=null&&(ut=_t.replace(V,"$&/")+"/"),bt(gt,st,ut,"",function(oi){return oi})):gt!=null&&(I(gt)&&(gt=C(gt,ut+(gt.key==null||L&&L.key===gt.key?"":(""+gt.key).replace(V,"$&/")+"/")+_t)),st.push(gt)),1;_t=0;var Pe=at===""?".":at+":";if(rt(L))for(var ie=0;ie<L.length;ie++)at=L[ie],xt=Pe+U(at,ie),_t+=bt(at,st,ut,xt,gt);else if(ie=b(L),typeof ie=="function")for(L=ie.call(L),ie=0;!(at=L.next()).done;)at=at.value,xt=Pe+U(at,ie++),_t+=bt(at,st,ut,xt,gt);else if(xt==="object"){if(typeof L.then=="function")return bt(Ft(L),st,ut,at,gt);throw st=String(L),Error("Objects are not valid as a React child (found: "+(st==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":st)+"). If you meant to render a collection of children, use an array instead.")}return _t}function Q(L,st,ut){if(L==null)return L;var at=[],gt=0;return bt(L,at,"","",function(xt){return st.call(ut,xt,gt++)}),at}function lt(L){if(L._status===-1){var st=L._result;st=st(),st.then(function(ut){(L._status===0||L._status===-1)&&(L._status=1,L._result=ut)},function(ut){(L._status===0||L._status===-1)&&(L._status=2,L._result=ut)}),L._status===-1&&(L._status=0,L._result=st)}if(L._status===1)return L._result.default;throw L._result}var mt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Nt(){}return Ct.Children={map:Q,forEach:function(L,st,ut){Q(L,function(){st.apply(this,arguments)},ut)},count:function(L){var st=0;return Q(L,function(){st++}),st},toArray:function(L){return Q(L,function(st){return st})||[]},only:function(L){if(!I(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ct.Component=M,Ct.Fragment=e,Ct.Profiler=r,Ct.PureComponent=W,Ct.StrictMode=i,Ct.Suspense=f,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(L){return Z.H.useMemoCache(L)}},Ct.cache=function(L){return function(){return L.apply(null,arguments)}},Ct.cloneElement=function(L,st,ut){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var at=x({},L.props),gt=L.key,xt=void 0;if(st!=null)for(_t in st.ref!==void 0&&(xt=void 0),st.key!==void 0&&(gt=""+st.key),st)!ot.call(st,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&st.ref===void 0||(at[_t]=st[_t]);var _t=arguments.length-2;if(_t===1)at.children=ut;else if(1<_t){for(var Pe=Array(_t),ie=0;ie<_t;ie++)Pe[ie]=arguments[ie+2];at.children=Pe}return N(L.type,gt,void 0,void 0,xt,at)},Ct.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ct.createElement=function(L,st,ut){var at,gt={},xt=null;if(st!=null)for(at in st.key!==void 0&&(xt=""+st.key),st)ot.call(st,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(gt[at]=st[at]);var _t=arguments.length-2;if(_t===1)gt.children=ut;else if(1<_t){for(var Pe=Array(_t),ie=0;ie<_t;ie++)Pe[ie]=arguments[ie+2];gt.children=Pe}if(L&&L.defaultProps)for(at in _t=L.defaultProps,_t)gt[at]===void 0&&(gt[at]=_t[at]);return N(L,xt,void 0,void 0,null,gt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(L){return{$$typeof:h,render:L}},Ct.isValidElement=I,Ct.lazy=function(L){return{$$typeof:y,_payload:{_status:-1,_result:L},_init:lt}},Ct.memo=function(L,st){return{$$typeof:g,type:L,compare:st===void 0?null:st}},Ct.startTransition=function(L){var st=Z.T,ut={};Z.T=ut;try{var at=L(),gt=Z.S;gt!==null&&gt(ut,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(Nt,mt)}catch(xt){mt(xt)}finally{Z.T=st}},Ct.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Ct.use=function(L){return Z.H.use(L)},Ct.useActionState=function(L,st,ut){return Z.H.useActionState(L,st,ut)},Ct.useCallback=function(L,st){return Z.H.useCallback(L,st)},Ct.useContext=function(L){return Z.H.useContext(L)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(L,st){return Z.H.useDeferredValue(L,st)},Ct.useEffect=function(L,st,ut){var at=Z.H;if(typeof ut=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(L,st)},Ct.useId=function(){return Z.H.useId()},Ct.useImperativeHandle=function(L,st,ut){return Z.H.useImperativeHandle(L,st,ut)},Ct.useInsertionEffect=function(L,st){return Z.H.useInsertionEffect(L,st)},Ct.useLayoutEffect=function(L,st){return Z.H.useLayoutEffect(L,st)},Ct.useMemo=function(L,st){return Z.H.useMemo(L,st)},Ct.useOptimistic=function(L,st){return Z.H.useOptimistic(L,st)},Ct.useReducer=function(L,st,ut){return Z.H.useReducer(L,st,ut)},Ct.useRef=function(L){return Z.H.useRef(L)},Ct.useState=function(L){return Z.H.useState(L)},Ct.useSyncExternalStore=function(L,st,ut){return Z.H.useSyncExternalStore(L,st,ut)},Ct.useTransition=function(){return Z.H.useTransition()},Ct.version="19.1.1",Ct}var y0;function Bp(){return y0||(y0=1,Mm.exports=DR()),Mm.exports}var Y=Bp();const dS=RR(Y);var Om={exports:{}},bc={},Nm={exports:{}},km={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0;function MR(){return _0||(_0=1,function(n){function t(Q,lt){var mt=Q.length;Q.push(lt);t:for(;0<mt;){var Nt=mt-1>>>1,L=Q[Nt];if(0<r(L,lt))Q[Nt]=lt,Q[mt]=L,mt=Nt;else break t}}function e(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var lt=Q[0],mt=Q.pop();if(mt!==lt){Q[0]=mt;t:for(var Nt=0,L=Q.length,st=L>>>1;Nt<st;){var ut=2*(Nt+1)-1,at=Q[ut],gt=ut+1,xt=Q[gt];if(0>r(at,mt))gt<L&&0>r(xt,at)?(Q[Nt]=xt,Q[gt]=mt,Nt=gt):(Q[Nt]=at,Q[ut]=mt,Nt=ut);else if(gt<L&&0>r(xt,mt))Q[Nt]=xt,Q[gt]=mt,Nt=gt;else break t}}return lt}function r(Q,lt){var mt=Q.sortIndex-lt.sortIndex;return mt!==0?mt:Q.id-lt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],g=[],y=1,v=null,b=3,S=!1,x=!1,D=!1,M=!1,j=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function rt(Q){for(var lt=e(g);lt!==null;){if(lt.callback===null)i(g);else if(lt.startTime<=Q)i(g),lt.sortIndex=lt.expirationTime,t(f,lt);else break;lt=e(g)}}function Z(Q){if(D=!1,rt(Q),!x)if(e(f)!==null)x=!0,ot||(ot=!0,U());else{var lt=e(g);lt!==null&&bt(Z,lt.startTime-Q)}}var ot=!1,N=-1,C=5,I=-1;function O(){return M?!0:!(n.unstable_now()-I<C)}function V(){if(M=!1,ot){var Q=n.unstable_now();I=Q;var lt=!0;try{t:{x=!1,D&&(D=!1,W(N),N=-1),S=!0;var mt=b;try{e:{for(rt(Q),v=e(f);v!==null&&!(v.expirationTime>Q&&O());){var Nt=v.callback;if(typeof Nt=="function"){v.callback=null,b=v.priorityLevel;var L=Nt(v.expirationTime<=Q);if(Q=n.unstable_now(),typeof L=="function"){v.callback=L,rt(Q),lt=!0;break e}v===e(f)&&i(f),rt(Q)}else i(f);v=e(f)}if(v!==null)lt=!0;else{var st=e(g);st!==null&&bt(Z,st.startTime-Q),lt=!1}}break t}finally{v=null,b=mt,S=!1}lt=void 0}}finally{lt?U():ot=!1}}}var U;if(typeof $=="function")U=function(){$(V)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Ft=k.port2;k.port1.onmessage=V,U=function(){Ft.postMessage(null)}}else U=function(){j(V,0)};function bt(Q,lt){N=j(function(){Q(n.unstable_now())},lt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var lt=3;break;default:lt=b}var mt=b;b=lt;try{return Q()}finally{b=mt}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(Q,lt){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var mt=b;b=Q;try{return lt()}finally{b=mt}},n.unstable_scheduleCallback=function(Q,lt,mt){var Nt=n.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Nt+mt:Nt):mt=Nt,Q){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=mt+L,Q={id:y++,callback:lt,priorityLevel:Q,startTime:mt,expirationTime:L,sortIndex:-1},mt>Nt?(Q.sortIndex=mt,t(g,Q),e(f)===null&&Q===e(g)&&(D?(W(N),N=-1):D=!0,bt(Z,mt-Nt))):(Q.sortIndex=L,t(f,Q),x||S||(x=!0,ot||(ot=!0,U()))),Q},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(Q){var lt=b;return function(){var mt=b;b=lt;try{return Q.apply(this,arguments)}finally{b=mt}}}}(km)),km}var v0;function OR(){return v0||(v0=1,Nm.exports=MR()),Nm.exports}var Pm={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function NR(){if(b0)return en;b0=1;var n=Bp();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(f,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(f,g,null,y)},en.flushSync=function(f){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=g,i.p=y,i.d.f()}},en.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},en.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},en.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var y=g.as,v=h(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},en.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=h(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},en.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=h(y,g.crossOrigin);i.d.L(f,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},en.preloadModule=function(f,g){if(typeof f=="string")if(g){var y=h(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},en.requestFormReset=function(f){i.d.r(f)},en.unstable_batchedUpdates=function(f,g){return f(g)},en.useFormState=function(f,g,y){return c.H.useFormState(f,g,y)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.1.1",en}var E0;function kR(){if(E0)return Pm.exports;E0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Pm.exports=NR(),Pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function PR(){if(T0)return bc;T0=1;var n=OR(),t=Bp(),e=kR();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function f(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,u=a;;){var m=l.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===l)return h(m),s;if(p===u)return h(m),a;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=m,u=p;else{for(var T=!1,A=m.child;A;){if(A===l){T=!0,l=m,u=p;break}if(A===u){T=!0,u=m,l=p;break}A=A.sibling}if(!T){for(A=p.child;A;){if(A===l){T=!0,l=p,u=m;break}if(A===u){T=!0,u=p,l=m;break}A=A.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),$=Symbol.for("react.context"),rt=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function Ft(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case M:return"Profiler";case D:return"StrictMode";case Z:return"Suspense";case ot:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case $:return(s.displayName||"Context")+".Provider";case W:return(s._context.displayName||"Context")+".Consumer";case rt:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case N:return a=s.displayName||null,a!==null?a:Ft(s.type)||"Memo";case C:a=s._payload,s=s._init;try{return Ft(s(a))}catch{}}return null}var bt=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Nt=[],L=-1;function st(s){return{current:s}}function ut(s){0>L||(s.current=Nt[L],Nt[L]=null,L--)}function at(s,a){L++,Nt[L]=s.current,s.current=a}var gt=st(null),xt=st(null),_t=st(null),Pe=st(null);function ie(s,a){switch(at(_t,a),at(xt,s),at(gt,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Fb(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Fb(a),s=Hb(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ut(gt),at(gt,s)}function oi(){ut(gt),ut(xt),ut(_t)}function Is(s){s.memoizedState!==null&&at(Pe,s);var a=gt.current,l=Hb(a,s.type);a!==l&&(at(xt,s),at(gt,l))}function ji(s){xt.current===s&&(ut(gt),ut(xt)),Pe.current===s&&(ut(Pe),gc._currentValue=mt)}var Or=Object.prototype.hasOwnProperty,Nr=n.unstable_scheduleCallback,kr=n.unstable_cancelCallback,hl=n.unstable_shouldYield,Tu=n.unstable_requestPaint,Nn=n.unstable_now,Dd=n.unstable_getCurrentPriorityLevel,fl=n.unstable_ImmediatePriority,ja=n.unstable_UserBlockingPriority,Pr=n.unstable_NormalPriority,Md=n.unstable_LowPriority,za=n.unstable_IdlePriority,dl=n.log,Su=n.unstable_setDisableYieldValue,de=null,Qt=null;function Tn(s){if(typeof dl=="function"&&Su(s),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(de,s)}catch{}}var Je=Math.clz32?Math.clz32:Vr,Au=Math.log,Od=Math.LN2;function Vr(s){return s>>>=0,s===0?32:31-(Au(s)/Od|0)|0}var Lr=256,Ur=4194304;function Zn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ba(s,a,l){var u=s.pendingLanes;if(u===0)return 0;var m=0,p=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?m=Zn(u):(T&=A,T!==0?m=Zn(T):l||(l=A&~s,l!==0&&(m=Zn(l))))):(A=u&~p,A!==0?m=Zn(A):T!==0?m=Zn(T):l||(l=u&~s,l!==0&&(m=Zn(l)))),m===0?0:a!==0&&a!==m&&(a&p)===0&&(p=m&-m,l=a&-a,p>=l||p===32&&(l&4194048)!==0)?a:m}function jr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function gl(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ml(){var s=Lr;return Lr<<=1,(Lr&4194048)===0&&(Lr=256),s}function pl(){var s=Ur;return Ur<<=1,(Ur&62914560)===0&&(Ur=4194304),s}function zi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function Bi(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function yl(s,a,l,u,m,p){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var A=s.entanglements,P=s.expirationTimes,q=s.hiddenUpdates;for(l=T&~l;0<l;){var J=31-Je(l),nt=1<<J;A[J]=0,P[J]=-1;var G=q[J];if(G!==null)for(q[J]=null,J=0;J<G.length;J++){var K=G[J];K!==null&&(K.lane&=-536870913)}l&=~nt}u!==0&&li(s,u,0),p!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=p&~(T&~a))}function li(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var u=31-Je(a);s.entangledLanes|=a,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function _l(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var u=31-Je(l),m=1<<u;m&a|s[u]&a&&(s[u]|=a),l&=~m}}function Ds(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Fa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ms(){var s=lt.p;return s!==0?s:(s=window.event,s===void 0?32:l0(s.type))}function wu(s,a){var l=lt.p;try{return lt.p=s,a()}finally{lt.p=l}}var ce=Math.random().toString(36).slice(2),Ie="__reactFiber$"+ce,Ee="__reactProps$"+ce,kn="__reactContainer$"+ce,vl="__reactEvents$"+ce,Nd="__reactListeners$"+ce,Os="__reactHandles$"+ce,xu="__reactResources$"+ce,zr="__reactMarker$"+ce;function Ns(s){delete s[Ie],delete s[Ee],delete s[vl],delete s[Nd],delete s[Os]}function Fi(s){var a=s[Ie];if(a)return a;for(var l=s.parentNode;l;){if(a=l[kn]||l[Ie]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=Kb(s);s!==null;){if(l=s[Ie])return l;s=Kb(s)}return a}s=l,l=s.parentNode}return null}function ci(s){if(s=s[Ie]||s[kn]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function ui(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function hn(s){var a=s[xu];return a||(a=s[xu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function pe(s){s[zr]=!0}var bl=new Set,Ha={};function Jn(s,a){Hi(s,a),Hi(s+"Capture",a)}function Hi(s,a){for(Ha[s]=a,s=0;s<a.length;s++)bl.add(a[s])}var Ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cu={},Br={};function Iu(s){return Or.call(Br,s)?!0:Or.call(Cu,s)?!1:Ru.test(s)?Br[s]=!0:(Cu[s]=!0,!1)}function ks(s,a,l){if(Iu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function hi(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function qe(s,a,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+u)}}var Fr,Du;function qi(s){if(Fr===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Fr=a&&a[1]||"",Du=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fr+s+Du}var qa=!1;function Ga(s,a){if(!s||qa)return"";qa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(K){var G=K}Reflect.construct(s,[],nt)}else{try{nt.call()}catch(K){G=K}s.call(nt.prototype)}}else{try{throw Error()}catch(K){G=K}(nt=s())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],A=p[1];if(T&&A){var P=T.split(`
`),q=A.split(`
`);for(m=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;m<q.length&&!q[m].includes("DetermineComponentFrameRoot");)m++;if(u===P.length||m===q.length)for(u=P.length-1,m=q.length-1;1<=u&&0<=m&&P[u]!==q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(P[u]!==q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||P[u]!==q[m]){var J=`
`+P[u].replace(" at new "," at ");return s.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",s.displayName)),J}while(1<=u&&0<=m);break}}}finally{qa=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?qi(l):""}function El(s){switch(s.tag){case 26:case 27:case 5:return qi(s.type);case 16:return qi("Lazy");case 13:return qi("Suspense");case 19:return qi("SuspenseList");case 0:case 15:return Ga(s.type,!1);case 11:return Ga(s.type.render,!1);case 1:return Ga(s.type,!0);case 31:return qi("Activity");default:return""}}function Ya(s){try{var a="";do a+=El(s),s=s.return;while(s);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function fn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Tl(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function kd(s){var a=Tl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),u=""+s[a];if(!s.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,p=l.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){u=""+T,p.call(this,T)}}),Object.defineProperty(s,a,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ka(s){s._valueTracker||(s._valueTracker=kd(s))}function Sl(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),u="";return s&&(u=Tl(s)?s.checked?"true":"false":s.value),s=u,s!==l?(a.setValue(s),!0):!1}function Hr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Pd=/[\n"\\]/g;function Te(s){return s.replace(Pd,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Sn(s,a,l,u,m,p,T,A){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+fn(a)):s.value!==""+fn(a)&&(s.value=""+fn(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?Ps(s,T,fn(a)):l!=null?Ps(s,T,fn(l)):u!=null&&s.removeAttribute("value"),m==null&&p!=null&&(s.defaultChecked=!!p),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+fn(A):s.removeAttribute("name")}function qr(s,a,l,u,m,p,T,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),a!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||a!=null))return;l=l!=null?""+fn(l):"",a=a!=null?""+fn(a):l,A||a===s.value||(s.value=a),s.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=A?s.checked:!!u,s.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function Ps(s,a,l){a==="number"&&Hr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Gi(s,a,l,u){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&u&&(s[l].defaultSelected=!0)}else{for(l=""+fn(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,u&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Zt(s,a,l){if(a!=null&&(a=""+fn(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+fn(l):""}function Gr(s,a,l,u){if(a==null){if(u!=null){if(l!=null)throw Error(i(92));if(bt(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),a=l}l=fn(a),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Pn(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Yr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(s,a,l){var u=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":u?s.setProperty(a,l):typeof l!="number"||l===0||Yr.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Al(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&l[m]!==u&&Mu(s,m,u)}else for(var p in a)a.hasOwnProperty(p)&&Mu(s,p,a[p])}function wl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ld=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(s){return Ld.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Yi=null;function Vn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ki=null,Qi=null;function xl(s){var a=ci(s);if(a&&(s=a.stateNode)){var l=s[Ee]||null;t:switch(s=a.stateNode,a.type){case"input":if(Sn(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Te(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var u=l[a];if(u!==s&&u.form===s.form){var m=u[Ee]||null;if(!m)throw Error(i(90));Sn(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)u=l[a],u.form===s.form&&Sl(u)}break t;case"textarea":Zt(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Gi(s,!!l.multiple,a,!1)}}}var fi=!1;function Ou(s,a,l){if(fi)return s(a,l);fi=!0;try{var u=s(a);return u}finally{if(fi=!1,(Ki!==null||Qi!==null)&&(wh(),Ki&&(a=Ki,s=Qi,Qi=Ki=null,xl(a),s)))for(a=0;a<s.length;a++)xl(s[a])}}function Kr(s,a){var l=s.stateNode;if(l===null)return null;var u=l[Ee]||null;if(u===null)return null;l=u[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ln=!1;if(ti)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Ln=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{Ln=!1}var di=null,Vs=null,$i=null;function Rl(){if($i)return $i;var s,a=Vs,l=a.length,u,m="value"in di?di.value:di.textContent,p=m.length;for(s=0;s<l&&a[s]===m[s];s++);var T=l-s;for(u=1;u<=T&&a[l-u]===m[p-u];u++);return $i=m.slice(s,1<u?1-u:void 0)}function gi(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function mi(){return!0}function Cl(){return!1}function Ve(s){function a(l,u,m,p,T){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(l=s[A],this[A]=l?l(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?mi:Cl,this.isPropagationStopped=Cl,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),a}var Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$a=Ve(Yt),$r=y({},Yt,{view:0,detail:0}),Nu=Ve($r),Xa,Wa,pi,Xr=y({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==pi&&(pi&&s.type==="mousemove"?(Xa=s.screenX-pi.screenX,Wa=s.screenY-pi.screenY):Wa=Xa=0,pi=s),Xa)},movementY:function(s){return"movementY"in s?s.movementY:Wa}}),Un=Ve(Xr),ku=y({},Xr,{dataTransfer:0}),Ud=Ve(ku),Wr=y({},$r,{relatedTarget:0}),Za=Ve(Wr),Il=y({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ja=Ve(Il),Pu=y({},Yt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),to=Ve(Pu),jd=y({},Yt,{data:0}),Dl=Ve(jd),Zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ml(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Lu[s])?!!a[s]:!1}function Jr(){return Ml}var Uu=y({},$r,{key:function(s){if(s.key){var a=Zr[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=gi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Vu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(s){return s.type==="keypress"?gi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?gi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),eo=Ve(Uu),ju=y({},Xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ol=Ve(ju),Xi=y({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),zu=Ve(Xi),Bu=y({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fu=Ve(Bu),Hu=y({},Xr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),no=Ve(Hu),dn=y({},Yt,{newState:0,oldState:0}),qu=Ve(dn),Gu=[9,13,27,32],yi=ti&&"CompositionEvent"in window,d=null;ti&&"documentMode"in document&&(d=document.documentMode);var _=ti&&"TextEvent"in window&&!d,E=ti&&(!yi||d&&8<d&&11>=d),R=" ",F=!1;function X(s,a){switch(s){case"keyup":return Gu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ct(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lt=!1;function De(s,a){switch(s){case"compositionend":return ct(a);case"keypress":return a.which!==32?null:(F=!0,R);case"textInput":return s=a.data,s===R&&F?null:s;default:return null}}function Ut(s,a){if(Lt)return s==="compositionend"||!yi&&X(s,a)?(s=Rl(),$i=Vs=di=null,Lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return E&&a.locale!=="ko"?null:a.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Me(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Le[s.type]:a==="textarea"}function Wi(s,a,l,u){Ki?Qi?Qi.push(u):Qi=[u]:Ki=u,a=Mh(a,"onChange"),0<a.length&&(l=new $a("onChange","change",null,l,u),s.push({event:l,listeners:a}))}var Ge=null,_i=null;function Nl(s){Lb(s,0)}function Yu(s){var a=ui(s);if(Sl(a))return s}function s_(s,a){if(s==="change")return a}var r_=!1;if(ti){var zd;if(ti){var Bd="oninput"in document;if(!Bd){var a_=document.createElement("div");a_.setAttribute("oninput","return;"),Bd=typeof a_.oninput=="function"}zd=Bd}else zd=!1;r_=zd&&(!document.documentMode||9<document.documentMode)}function o_(){Ge&&(Ge.detachEvent("onpropertychange",l_),_i=Ge=null)}function l_(s){if(s.propertyName==="value"&&Yu(_i)){var a=[];Wi(a,_i,s,Vn(s)),Ou(Nl,a)}}function ix(s,a,l){s==="focusin"?(o_(),Ge=a,_i=l,Ge.attachEvent("onpropertychange",l_)):s==="focusout"&&o_()}function sx(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Yu(_i)}function rx(s,a){if(s==="click")return Yu(a)}function ax(s,a){if(s==="input"||s==="change")return Yu(a)}function ox(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var An=typeof Object.is=="function"?Object.is:ox;function kl(s,a){if(An(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),u=Object.keys(a);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!Or.call(a,m)||!An(s[m],a[m]))return!1}return!0}function c_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function u_(s,a){var l=c_(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=a&&u>=a)return{node:l,offset:a-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=c_(l)}}function h_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?h_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function f_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Hr(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=Hr(s.document)}return a}function Fd(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var lx=ti&&"documentMode"in document&&11>=document.documentMode,io=null,Hd=null,Pl=null,qd=!1;function d_(s,a,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;qd||io==null||io!==Hr(u)||(u=io,"selectionStart"in u&&Fd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pl&&kl(Pl,u)||(Pl=u,u=Mh(Hd,"onSelect"),0<u.length&&(a=new $a("onSelect","select",null,a,l),s.push({event:a,listeners:u}),a.target=io)))}function ta(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var so={animationend:ta("Animation","AnimationEnd"),animationiteration:ta("Animation","AnimationIteration"),animationstart:ta("Animation","AnimationStart"),transitionrun:ta("Transition","TransitionRun"),transitionstart:ta("Transition","TransitionStart"),transitioncancel:ta("Transition","TransitionCancel"),transitionend:ta("Transition","TransitionEnd")},Gd={},g_={};ti&&(g_=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ea(s){if(Gd[s])return Gd[s];if(!so[s])return s;var a=so[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in g_)return Gd[s]=a[l];return s}var m_=ea("animationend"),p_=ea("animationiteration"),y_=ea("animationstart"),cx=ea("transitionrun"),ux=ea("transitionstart"),hx=ea("transitioncancel"),__=ea("transitionend"),v_=new Map,Yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yd.push("scrollEnd");function ei(s,a){v_.set(s,a),Jn(a,[s])}var b_=new WeakMap;function jn(s,a){if(typeof s=="object"&&s!==null){var l=b_.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Ya(a)},b_.set(s,a),a)}return{value:s,source:a,stack:Ya(a)}}var zn=[],ro=0,Kd=0;function Ku(){for(var s=ro,a=Kd=ro=0;a<s;){var l=zn[a];zn[a++]=null;var u=zn[a];zn[a++]=null;var m=zn[a];zn[a++]=null;var p=zn[a];if(zn[a++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}p!==0&&E_(l,m,p)}}function Qu(s,a,l,u){zn[ro++]=s,zn[ro++]=a,zn[ro++]=l,zn[ro++]=u,Kd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Qd(s,a,l,u){return Qu(s,a,l,u),$u(s)}function ao(s,a){return Qu(s,null,null,a),$u(s)}function E_(s,a,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var m=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(m=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,m&&a!==null&&(m=31-Je(l),s=p.hiddenUpdates,u=s[m],u===null?s[m]=[a]:u.push(a),a.lane=l|536870912),p):null}function $u(s){if(50<ac)throw ac=0,tm=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var oo={};function fx(s,a,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(s,a,l,u){return new fx(s,a,l,u)}function $d(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zi(s,a){var l=s.alternate;return l===null?(l=wn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function T_(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Xu(s,a,l,u,m,p){var T=0;if(u=s,typeof s=="function")$d(s)&&(T=1);else if(typeof s=="string")T=gR(s,l,gt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=wn(31,l,a,m),s.elementType=I,s.lanes=p,s;case x:return na(l.children,m,p,a);case D:T=8,m|=24;break;case M:return s=wn(12,l,a,m|2),s.elementType=M,s.lanes=p,s;case Z:return s=wn(13,l,a,m),s.elementType=Z,s.lanes=p,s;case ot:return s=wn(19,l,a,m),s.elementType=ot,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:case $:T=10;break t;case W:T=9;break t;case rt:T=11;break t;case N:T=14;break t;case C:T=16,u=null;break t}T=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return a=wn(T,l,a,m),a.elementType=s,a.type=u,a.lanes=p,a}function na(s,a,l,u){return s=wn(7,s,u,a),s.lanes=l,s}function Xd(s,a,l){return s=wn(6,s,null,a),s.lanes=l,s}function Wd(s,a,l){return a=wn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var lo=[],co=0,Wu=null,Zu=0,Bn=[],Fn=0,ia=null,Ji=1,ts="";function sa(s,a){lo[co++]=Zu,lo[co++]=Wu,Wu=s,Zu=a}function S_(s,a,l){Bn[Fn++]=Ji,Bn[Fn++]=ts,Bn[Fn++]=ia,ia=s;var u=Ji;s=ts;var m=32-Je(u)-1;u&=~(1<<m),l+=1;var p=32-Je(a)+m;if(30<p){var T=m-m%5;p=(u&(1<<T)-1).toString(32),u>>=T,m-=T,Ji=1<<32-Je(a)+m|l<<m|u,ts=p+s}else Ji=1<<p|l<<m|u,ts=s}function Zd(s){s.return!==null&&(sa(s,1),S_(s,1,0))}function Jd(s){for(;s===Wu;)Wu=lo[--co],lo[co]=null,Zu=lo[--co],lo[co]=null;for(;s===ia;)ia=Bn[--Fn],Bn[Fn]=null,ts=Bn[--Fn],Bn[Fn]=null,Ji=Bn[--Fn],Bn[Fn]=null}var gn=null,ge=null,qt=!1,ra=null,vi=!1,tg=Error(i(519));function aa(s){var a=Error(i(418,""));throw Ul(jn(a,s)),tg}function A_(s){var a=s.stateNode,l=s.type,u=s.memoizedProps;switch(a[Ie]=s,a[Ee]=u,l){case"dialog":Ot("cancel",a),Ot("close",a);break;case"iframe":case"object":case"embed":Ot("load",a);break;case"video":case"audio":for(l=0;l<lc.length;l++)Ot(lc[l],a);break;case"source":Ot("error",a);break;case"img":case"image":case"link":Ot("error",a),Ot("load",a);break;case"details":Ot("toggle",a);break;case"input":Ot("invalid",a),qr(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ka(a);break;case"select":Ot("invalid",a);break;case"textarea":Ot("invalid",a),Gr(a,u.value,u.defaultValue,u.children),Ka(a)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||u.suppressHydrationWarning===!0||Bb(a.textContent,l)?(u.popover!=null&&(Ot("beforetoggle",a),Ot("toggle",a)),u.onScroll!=null&&Ot("scroll",a),u.onScrollEnd!=null&&Ot("scrollend",a),u.onClick!=null&&(a.onclick=Oh),a=!0):a=!1,a||aa(s)}function w_(s){for(gn=s.return;gn;)switch(gn.tag){case 5:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:gn=gn.return}}function Vl(s){if(s!==gn)return!1;if(!qt)return w_(s),qt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||pm(s.type,s.memoizedProps)),l=!l),l&&ge&&aa(s),w_(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(a===0){ge=ii(s.nextSibling);break t}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;s=s.nextSibling}ge=null}}else a===27?(a=ge,Zs(s.type)?(s=bm,bm=null,ge=s):ge=a):ge=gn?ii(s.stateNode.nextSibling):null;return!0}function Ll(){ge=gn=null,qt=!1}function x_(){var s=ra;return s!==null&&(yn===null?yn=s:yn.push.apply(yn,s),ra=null),s}function Ul(s){ra===null?ra=[s]:ra.push(s)}var eg=st(null),oa=null,es=null;function Ls(s,a,l){at(eg,a._currentValue),a._currentValue=l}function ns(s){s._currentValue=eg.current,ut(eg)}function ng(s,a,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),s===l)break;s=s.return}}function ig(s,a,l,u){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var p=m.dependencies;if(p!==null){var T=m.child;p=p.firstContext;t:for(;p!==null;){var A=p;p=m;for(var P=0;P<a.length;P++)if(A.context===a[P]){p.lanes|=l,A=p.alternate,A!==null&&(A.lanes|=l),ng(p.return,l,s),u||(T=null);break t}p=A.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=l,p=T.alternate,p!==null&&(p.lanes|=l),ng(T,l,s),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===s){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function jl(s,a,l,u){s=null;for(var m=a,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=m.type;An(m.pendingProps.value,T.value)||(s!==null?s.push(A):s=[A])}}else if(m===Pe.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(gc):s=[gc])}m=m.return}s!==null&&ig(a,s,l,u),a.flags|=262144}function Ju(s){for(s=s.firstContext;s!==null;){if(!An(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function la(s){oa=s,es=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return R_(oa,s)}function th(s,a){return oa===null&&la(s),R_(s,a)}function R_(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},es===null){if(s===null)throw Error(i(308));es=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else es=es.next=a;return l}var dx=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},gx=n.unstable_scheduleCallback,mx=n.unstable_NormalPriority,Oe={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sg(){return{controller:new dx,data:new Map,refCount:0}}function zl(s){s.refCount--,s.refCount===0&&gx(mx,function(){s.controller.abort()})}var Bl=null,rg=0,uo=0,ho=null;function px(s,a){if(Bl===null){var l=Bl=[];rg=0,uo=om(),ho={status:"pending",value:void 0,then:function(u){l.push(u)}}}return rg++,a.then(C_,C_),a}function C_(){if(--rg===0&&Bl!==null){ho!==null&&(ho.status="fulfilled");var s=Bl;Bl=null,uo=0,ho=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function yx(s,a){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var I_=Q.S;Q.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&px(s,a),I_!==null&&I_(s,a)};var ca=st(null);function ag(){var s=ca.current;return s!==null?s:se.pooledCache}function eh(s,a){a===null?at(ca,ca.current):at(ca,a.pool)}function D_(){var s=ag();return s===null?null:{parent:Oe._currentValue,pool:s}}var Fl=Error(i(460)),M_=Error(i(474)),nh=Error(i(542)),og={then:function(){}};function O_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ih(){}function N_(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(ih,ih),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,P_(s),s;default:if(typeof a.status=="string")a.then(ih,ih);else{if(s=se,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,P_(s),s}throw Hl=a,Fl}}var Hl=null;function k_(){if(Hl===null)throw Error(i(459));var s=Hl;return Hl=null,s}function P_(s){if(s===Fl||s===nh)throw Error(i(483))}var Us=!1;function lg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function js(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zs(s,a,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,($t&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=$u(s),E_(s,null,l),a}return Qu(s,u,a,l),$u(s)}function ql(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,_l(s,l)}}function ug(s,a){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?m=p=T:p=p.next=T,l=l.next}while(l!==null);p===null?m=p=a:p=p.next=a}else m=p=a;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var hg=!1;function Gl(){if(hg){var s=ho;if(s!==null)throw s}}function Yl(s,a,l,u){hg=!1;var m=s.updateQueue;Us=!1;var p=m.firstBaseUpdate,T=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var P=A,q=P.next;P.next=null,T===null?p=q:T.next=q,T=P;var J=s.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==T&&(A===null?J.firstBaseUpdate=q:A.next=q,J.lastBaseUpdate=P))}if(p!==null){var nt=m.baseState;T=0,J=q=P=null,A=p;do{var G=A.lane&-536870913,K=G!==A.lane;if(K?(jt&G)===G:(u&G)===G){G!==0&&G===uo&&(hg=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var St=s,vt=A;G=a;var ee=l;switch(vt.tag){case 1:if(St=vt.payload,typeof St=="function"){nt=St.call(ee,nt,G);break t}nt=St;break t;case 3:St.flags=St.flags&-65537|128;case 0:if(St=vt.payload,G=typeof St=="function"?St.call(ee,nt,G):St,G==null)break t;nt=y({},nt,G);break t;case 2:Us=!0}}G=A.callback,G!==null&&(s.flags|=64,K&&(s.flags|=8192),K=m.callbacks,K===null?m.callbacks=[G]:K.push(G))}else K={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(q=J=K,P=nt):J=J.next=K,T|=G;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;K=A,A=K.next,K.next=null,m.lastBaseUpdate=K,m.shared.pending=null}}while(!0);J===null&&(P=nt),m.baseState=P,m.firstBaseUpdate=q,m.lastBaseUpdate=J,p===null&&(m.shared.lanes=0),Qs|=T,s.lanes=T,s.memoizedState=nt}}function V_(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function L_(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)V_(l[s],a)}var fo=st(null),sh=st(0);function U_(s,a){s=cs,at(sh,s),at(fo,a),cs=s|a.baseLanes}function fg(){at(sh,cs),at(fo,fo.current)}function dg(){cs=sh.current,ut(fo),ut(sh)}var Bs=0,It=null,Jt=null,Se=null,rh=!1,go=!1,ua=!1,ah=0,Kl=0,mo=null,_x=0;function ye(){throw Error(i(321))}function gg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!An(s[l],a[l]))return!1;return!0}function mg(s,a,l,u,m,p){return Bs=p,It=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Q.H=s===null||s.memoizedState===null?Ev:Tv,ua=!1,p=l(u,m),ua=!1,go&&(p=z_(a,l,u,m)),j_(s),p}function j_(s){Q.H=fh;var a=Jt!==null&&Jt.next!==null;if(Bs=0,Se=Jt=It=null,rh=!1,Kl=0,mo=null,a)throw Error(i(300));s===null||Ue||(s=s.dependencies,s!==null&&Ju(s)&&(Ue=!0))}function z_(s,a,l,u){It=s;var m=0;do{if(go&&(mo=null),Kl=0,go=!1,25<=m)throw Error(i(301));if(m+=1,Se=Jt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Q.H=wx,p=a(l,u)}while(go);return p}function vx(){var s=Q.H,a=s.useState()[0];return a=typeof a.then=="function"?Ql(a):a,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(It.flags|=1024),a}function pg(){var s=ah!==0;return ah=0,s}function yg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function _g(s){if(rh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}rh=!1}Bs=0,Se=Jt=It=null,go=!1,Kl=ah=0,mo=null}function mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?It.memoizedState=Se=s:Se=Se.next=s,Se}function Ae(){if(Jt===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var a=Se===null?It.memoizedState:Se.next;if(a!==null)Se=a,Jt=s;else{if(s===null)throw It.alternate===null?Error(i(467)):Error(i(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Se===null?It.memoizedState=Se=s:Se=Se.next=s}return Se}function vg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(s){var a=Kl;return Kl+=1,mo===null&&(mo=[]),s=N_(mo,s,a),a=It,(Se===null?a.memoizedState:Se.next)===null&&(a=a.alternate,Q.H=a===null||a.memoizedState===null?Ev:Tv),s}function oh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ql(s);if(s.$$typeof===$)return tn(s)}throw Error(i(438,String(s)))}function bg(s){var a=null,l=It.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var u=It.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=vg(),It.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),u=0;u<s;u++)l[u]=O;return a.index++,l}function is(s,a){return typeof a=="function"?a(s):a}function lh(s){var a=Ae();return Eg(a,Jt,s)}function Eg(s,a,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var m=s.baseQueue,p=u.pending;if(p!==null){if(m!==null){var T=m.next;m.next=p.next,p.next=T}a.baseQueue=m=p,u.pending=null}if(p=s.baseState,m===null)s.memoizedState=p;else{a=m.next;var A=T=null,P=null,q=a,J=!1;do{var nt=q.lane&-536870913;if(nt!==q.lane?(jt&nt)===nt:(Bs&nt)===nt){var G=q.revertLane;if(G===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),nt===uo&&(J=!0);else if((Bs&G)===G){q=q.next,G===uo&&(J=!0);continue}else nt={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},P===null?(A=P=nt,T=p):P=P.next=nt,It.lanes|=G,Qs|=G;nt=q.action,ua&&l(p,nt),p=q.hasEagerState?q.eagerState:l(p,nt)}else G={lane:nt,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},P===null?(A=P=G,T=p):P=P.next=G,It.lanes|=nt,Qs|=nt;q=q.next}while(q!==null&&q!==a);if(P===null?T=p:P.next=A,!An(p,s.memoizedState)&&(Ue=!0,J&&(l=ho,l!==null)))throw l;s.memoizedState=p,s.baseState=T,s.baseQueue=P,u.lastRenderedState=p}return m===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Tg(s){var a=Ae(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,m=l.pending,p=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do p=s(p,T.action),T=T.next;while(T!==m);An(p,a.memoizedState)||(Ue=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),l.lastRenderedState=p}return[p,u]}function B_(s,a,l){var u=It,m=Ae(),p=qt;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=a();var T=!An((Jt||m).memoizedState,l);T&&(m.memoizedState=l,Ue=!0),m=m.queue;var A=q_.bind(null,u,m,s);if($l(2048,8,A,[s]),m.getSnapshot!==a||T||Se!==null&&Se.memoizedState.tag&1){if(u.flags|=2048,po(9,ch(),H_.bind(null,u,m,l,a),null),se===null)throw Error(i(349));p||(Bs&124)!==0||F_(u,a,l)}return l}function F_(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=It.updateQueue,a===null?(a=vg(),It.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function H_(s,a,l,u){a.value=l,a.getSnapshot=u,G_(a)&&Y_(s)}function q_(s,a,l){return l(function(){G_(a)&&Y_(s)})}function G_(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!An(s,l)}catch{return!0}}function Y_(s){var a=ao(s,2);a!==null&&Dn(a,s,2)}function Sg(s){var a=mn();if(typeof s=="function"){var l=s;if(s=l(),ua){Tn(!0);try{l()}finally{Tn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:s},a}function K_(s,a,l,u){return s.baseState=l,Eg(s,Jt,typeof u=="function"?u:is)}function bx(s,a,l,u,m){if(hh(s))throw Error(i(485));if(s=a.action,s!==null){var p={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};Q.T!==null?l(!0):p.isTransition=!1,u(p),l=a.pending,l===null?(p.next=a.pending=p,Q_(a,p)):(p.next=l.next,a.pending=l.next=p)}}function Q_(s,a){var l=a.action,u=a.payload,m=s.state;if(a.isTransition){var p=Q.T,T={};Q.T=T;try{var A=l(m,u),P=Q.S;P!==null&&P(T,A),$_(s,a,A)}catch(q){Ag(s,a,q)}finally{Q.T=p}}else try{p=l(m,u),$_(s,a,p)}catch(q){Ag(s,a,q)}}function $_(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){X_(s,a,u)},function(u){return Ag(s,a,u)}):X_(s,a,l)}function X_(s,a,l){a.status="fulfilled",a.value=l,W_(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,Q_(s,l)))}function Ag(s,a,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=l,W_(a),a=a.next;while(a!==u)}s.action=null}function W_(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Z_(s,a){return a}function J_(s,a){if(qt){var l=se.formState;if(l!==null){t:{var u=It;if(qt){if(ge){e:{for(var m=ge,p=vi;m.nodeType!==8;){if(!p){m=null;break e}if(m=ii(m.nextSibling),m===null){m=null;break e}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){ge=ii(m.nextSibling),u=m.data==="F!";break t}}aa(u)}u=!1}u&&(a=l[0])}}return l=mn(),l.memoizedState=l.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Z_,lastRenderedState:a},l.queue=u,l=_v.bind(null,It,u),u.dispatch=l,u=Sg(!1),p=Ig.bind(null,It,!1,u.queue),u=mn(),m={state:a,dispatch:null,action:s,pending:null},u.queue=m,l=bx.bind(null,It,m,p,l),m.dispatch=l,u.memoizedState=s,[a,l,!1]}function tv(s){var a=Ae();return ev(a,Jt,s)}function ev(s,a,l){if(a=Eg(s,a,Z_)[0],s=lh(is)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=Ql(a)}catch(T){throw T===Fl?nh:T}else u=a;a=Ae();var m=a.queue,p=m.dispatch;return l!==a.memoizedState&&(It.flags|=2048,po(9,ch(),Ex.bind(null,m,l),null)),[u,p,s]}function Ex(s,a){s.action=a}function nv(s){var a=Ae(),l=Jt;if(l!==null)return ev(a,l,s);Ae(),a=a.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[a,u,!1]}function po(s,a,l,u){return s={tag:s,create:l,deps:u,inst:a,next:null},a=It.updateQueue,a===null&&(a=vg(),It.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,a.lastEffect=s),s}function ch(){return{destroy:void 0,resource:void 0}}function iv(){return Ae().memoizedState}function uh(s,a,l,u){var m=mn();u=u===void 0?null:u,It.flags|=s,m.memoizedState=po(1|a,ch(),l,u)}function $l(s,a,l,u){var m=Ae();u=u===void 0?null:u;var p=m.memoizedState.inst;Jt!==null&&u!==null&&gg(u,Jt.memoizedState.deps)?m.memoizedState=po(a,p,l,u):(It.flags|=s,m.memoizedState=po(1|a,p,l,u))}function sv(s,a){uh(8390656,8,s,a)}function rv(s,a){$l(2048,8,s,a)}function av(s,a){return $l(4,2,s,a)}function ov(s,a){return $l(4,4,s,a)}function lv(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function cv(s,a,l){l=l!=null?l.concat([s]):null,$l(4,4,lv.bind(null,a,s),l)}function wg(){}function uv(s,a){var l=Ae();a=a===void 0?null:a;var u=l.memoizedState;return a!==null&&gg(a,u[1])?u[0]:(l.memoizedState=[s,a],s)}function hv(s,a){var l=Ae();a=a===void 0?null:a;var u=l.memoizedState;if(a!==null&&gg(a,u[1]))return u[0];if(u=s(),ua){Tn(!0);try{s()}finally{Tn(!1)}}return l.memoizedState=[u,a],u}function xg(s,a,l){return l===void 0||(Bs&1073741824)!==0?s.memoizedState=a:(s.memoizedState=l,s=gb(),It.lanes|=s,Qs|=s,l)}function fv(s,a,l,u){return An(l,a)?l:fo.current!==null?(s=xg(s,l,u),An(s,a)||(Ue=!0),s):(Bs&42)===0?(Ue=!0,s.memoizedState=l):(s=gb(),It.lanes|=s,Qs|=s,a)}function dv(s,a,l,u,m){var p=lt.p;lt.p=p!==0&&8>p?p:8;var T=Q.T,A={};Q.T=A,Ig(s,!1,a,l);try{var P=m(),q=Q.S;if(q!==null&&q(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var J=yx(P,u);Xl(s,a,J,In(s))}else Xl(s,a,u,In(s))}catch(nt){Xl(s,a,{then:function(){},status:"rejected",reason:nt},In())}finally{lt.p=p,Q.T=T}}function Tx(){}function Rg(s,a,l,u){if(s.tag!==5)throw Error(i(476));var m=gv(s).queue;dv(s,m,a,mt,l===null?Tx:function(){return mv(s),l(u)})}function gv(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:mt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function mv(s){var a=gv(s).next.queue;Xl(s,a,{},In())}function Cg(){return tn(gc)}function pv(){return Ae().memoizedState}function yv(){return Ae().memoizedState}function Sx(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=In();s=js(l);var u=zs(a,s,l);u!==null&&(Dn(u,a,l),ql(u,a,l)),a={cache:sg()},s.payload=a;return}a=a.return}}function Ax(s,a,l){var u=In();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},hh(s)?vv(a,l):(l=Qd(s,a,l,u),l!==null&&(Dn(l,s,u),bv(l,a,u)))}function _v(s,a,l){var u=In();Xl(s,a,l,u)}function Xl(s,a,l,u){var m={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(hh(s))vv(a,m);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var T=a.lastRenderedState,A=p(T,l);if(m.hasEagerState=!0,m.eagerState=A,An(A,T))return Qu(s,a,m,0),se===null&&Ku(),!1}catch{}finally{}if(l=Qd(s,a,m,u),l!==null)return Dn(l,s,u),bv(l,a,u),!0}return!1}function Ig(s,a,l,u){if(u={lane:2,revertLane:om(),action:u,hasEagerState:!1,eagerState:null,next:null},hh(s)){if(a)throw Error(i(479))}else a=Qd(s,l,u,2),a!==null&&Dn(a,s,2)}function hh(s){var a=s.alternate;return s===It||a!==null&&a===It}function vv(s,a){go=rh=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function bv(s,a,l){if((l&4194048)!==0){var u=a.lanes;u&=s.pendingLanes,l|=u,a.lanes=l,_l(s,l)}}var fh={readContext:tn,use:oh,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},Ev={readContext:tn,use:oh,useCallback:function(s,a){return mn().memoizedState=[s,a===void 0?null:a],s},useContext:tn,useEffect:sv,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,uh(4194308,4,lv.bind(null,a,s),l)},useLayoutEffect:function(s,a){return uh(4194308,4,s,a)},useInsertionEffect:function(s,a){uh(4,2,s,a)},useMemo:function(s,a){var l=mn();a=a===void 0?null:a;var u=s();if(ua){Tn(!0);try{s()}finally{Tn(!1)}}return l.memoizedState=[u,a],u},useReducer:function(s,a,l){var u=mn();if(l!==void 0){var m=l(a);if(ua){Tn(!0);try{l(a)}finally{Tn(!1)}}}else m=a;return u.memoizedState=u.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},u.queue=s,s=s.dispatch=Ax.bind(null,It,s),[u.memoizedState,s]},useRef:function(s){var a=mn();return s={current:s},a.memoizedState=s},useState:function(s){s=Sg(s);var a=s.queue,l=_v.bind(null,It,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:wg,useDeferredValue:function(s,a){var l=mn();return xg(l,s,a)},useTransition:function(){var s=Sg(!1);return s=dv.bind(null,It,s.queue,!0,!1),mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var u=It,m=mn();if(qt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),se===null)throw Error(i(349));(jt&124)!==0||F_(u,a,l)}m.memoizedState=l;var p={value:l,getSnapshot:a};return m.queue=p,sv(q_.bind(null,u,p,s),[s]),u.flags|=2048,po(9,ch(),H_.bind(null,u,p,l,a),null),l},useId:function(){var s=mn(),a=se.identifierPrefix;if(qt){var l=ts,u=Ji;l=(u&~(1<<32-Je(u)-1)).toString(32)+l,a=""+a+"R"+l,l=ah++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=_x++,a=""+a+"r"+l.toString(32)+"";return s.memoizedState=a},useHostTransitionStatus:Cg,useFormState:J_,useActionState:J_,useOptimistic:function(s){var a=mn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Ig.bind(null,It,!0,l),l.dispatch=a,[s,a]},useMemoCache:bg,useCacheRefresh:function(){return mn().memoizedState=Sx.bind(null,It)}},Tv={readContext:tn,use:oh,useCallback:uv,useContext:tn,useEffect:rv,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:ov,useMemo:hv,useReducer:lh,useRef:iv,useState:function(){return lh(is)},useDebugValue:wg,useDeferredValue:function(s,a){var l=Ae();return fv(l,Jt.memoizedState,s,a)},useTransition:function(){var s=lh(is)[0],a=Ae().memoizedState;return[typeof s=="boolean"?s:Ql(s),a]},useSyncExternalStore:B_,useId:pv,useHostTransitionStatus:Cg,useFormState:tv,useActionState:tv,useOptimistic:function(s,a){var l=Ae();return K_(l,Jt,s,a)},useMemoCache:bg,useCacheRefresh:yv},wx={readContext:tn,use:oh,useCallback:uv,useContext:tn,useEffect:rv,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:ov,useMemo:hv,useReducer:Tg,useRef:iv,useState:function(){return Tg(is)},useDebugValue:wg,useDeferredValue:function(s,a){var l=Ae();return Jt===null?xg(l,s,a):fv(l,Jt.memoizedState,s,a)},useTransition:function(){var s=Tg(is)[0],a=Ae().memoizedState;return[typeof s=="boolean"?s:Ql(s),a]},useSyncExternalStore:B_,useId:pv,useHostTransitionStatus:Cg,useFormState:nv,useActionState:nv,useOptimistic:function(s,a){var l=Ae();return Jt!==null?K_(l,Jt,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:bg,useCacheRefresh:yv},yo=null,Wl=0;function dh(s){var a=Wl;return Wl+=1,yo===null&&(yo=[]),N_(yo,s,a)}function Zl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function gh(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Sv(s){var a=s._init;return a(s._payload)}function Av(s){function a(B,z){if(s){var H=B.deletions;H===null?(B.deletions=[z],B.flags|=16):H.push(z)}}function l(B,z){if(!s)return null;for(;z!==null;)a(B,z),z=z.sibling;return null}function u(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function m(B,z){return B=Zi(B,z),B.index=0,B.sibling=null,B}function p(B,z,H){return B.index=H,s?(H=B.alternate,H!==null?(H=H.index,H<z?(B.flags|=67108866,z):H):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function A(B,z,H,tt){return z===null||z.tag!==6?(z=Xd(H,B.mode,tt),z.return=B,z):(z=m(z,H),z.return=B,z)}function P(B,z,H,tt){var dt=H.type;return dt===x?J(B,z,H.props.children,tt,H.key):z!==null&&(z.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===C&&Sv(dt)===z.type)?(z=m(z,H.props),Zl(z,H),z.return=B,z):(z=Xu(H.type,H.key,H.props,null,B.mode,tt),Zl(z,H),z.return=B,z)}function q(B,z,H,tt){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Wd(H,B.mode,tt),z.return=B,z):(z=m(z,H.children||[]),z.return=B,z)}function J(B,z,H,tt,dt){return z===null||z.tag!==7?(z=na(H,B.mode,tt,dt),z.return=B,z):(z=m(z,H),z.return=B,z)}function nt(B,z,H){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Xd(""+z,B.mode,H),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return H=Xu(z.type,z.key,z.props,null,B.mode,H),Zl(H,z),H.return=B,H;case S:return z=Wd(z,B.mode,H),z.return=B,z;case C:var tt=z._init;return z=tt(z._payload),nt(B,z,H)}if(bt(z)||U(z))return z=na(z,B.mode,H,null),z.return=B,z;if(typeof z.then=="function")return nt(B,dh(z),H);if(z.$$typeof===$)return nt(B,th(B,z),H);gh(B,z)}return null}function G(B,z,H,tt){var dt=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return dt!==null?null:A(B,z,""+H,tt);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===dt?P(B,z,H,tt):null;case S:return H.key===dt?q(B,z,H,tt):null;case C:return dt=H._init,H=dt(H._payload),G(B,z,H,tt)}if(bt(H)||U(H))return dt!==null?null:J(B,z,H,tt,null);if(typeof H.then=="function")return G(B,z,dh(H),tt);if(H.$$typeof===$)return G(B,z,th(B,H),tt);gh(B,H)}return null}function K(B,z,H,tt,dt){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return B=B.get(H)||null,A(z,B,""+tt,dt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case b:return B=B.get(tt.key===null?H:tt.key)||null,P(z,B,tt,dt);case S:return B=B.get(tt.key===null?H:tt.key)||null,q(z,B,tt,dt);case C:var Dt=tt._init;return tt=Dt(tt._payload),K(B,z,H,tt,dt)}if(bt(tt)||U(tt))return B=B.get(H)||null,J(z,B,tt,dt,null);if(typeof tt.then=="function")return K(B,z,H,dh(tt),dt);if(tt.$$typeof===$)return K(B,z,H,th(z,tt),dt);gh(z,tt)}return null}function St(B,z,H,tt){for(var dt=null,Dt=null,pt=z,Et=z=0,ze=null;pt!==null&&Et<H.length;Et++){pt.index>Et?(ze=pt,pt=null):ze=pt.sibling;var Ht=G(B,pt,H[Et],tt);if(Ht===null){pt===null&&(pt=ze);break}s&&pt&&Ht.alternate===null&&a(B,pt),z=p(Ht,z,Et),Dt===null?dt=Ht:Dt.sibling=Ht,Dt=Ht,pt=ze}if(Et===H.length)return l(B,pt),qt&&sa(B,Et),dt;if(pt===null){for(;Et<H.length;Et++)pt=nt(B,H[Et],tt),pt!==null&&(z=p(pt,z,Et),Dt===null?dt=pt:Dt.sibling=pt,Dt=pt);return qt&&sa(B,Et),dt}for(pt=u(pt);Et<H.length;Et++)ze=K(pt,B,Et,H[Et],tt),ze!==null&&(s&&ze.alternate!==null&&pt.delete(ze.key===null?Et:ze.key),z=p(ze,z,Et),Dt===null?dt=ze:Dt.sibling=ze,Dt=ze);return s&&pt.forEach(function(ir){return a(B,ir)}),qt&&sa(B,Et),dt}function vt(B,z,H,tt){if(H==null)throw Error(i(151));for(var dt=null,Dt=null,pt=z,Et=z=0,ze=null,Ht=H.next();pt!==null&&!Ht.done;Et++,Ht=H.next()){pt.index>Et?(ze=pt,pt=null):ze=pt.sibling;var ir=G(B,pt,Ht.value,tt);if(ir===null){pt===null&&(pt=ze);break}s&&pt&&ir.alternate===null&&a(B,pt),z=p(ir,z,Et),Dt===null?dt=ir:Dt.sibling=ir,Dt=ir,pt=ze}if(Ht.done)return l(B,pt),qt&&sa(B,Et),dt;if(pt===null){for(;!Ht.done;Et++,Ht=H.next())Ht=nt(B,Ht.value,tt),Ht!==null&&(z=p(Ht,z,Et),Dt===null?dt=Ht:Dt.sibling=Ht,Dt=Ht);return qt&&sa(B,Et),dt}for(pt=u(pt);!Ht.done;Et++,Ht=H.next())Ht=K(pt,B,Et,Ht.value,tt),Ht!==null&&(s&&Ht.alternate!==null&&pt.delete(Ht.key===null?Et:Ht.key),z=p(Ht,z,Et),Dt===null?dt=Ht:Dt.sibling=Ht,Dt=Ht);return s&&pt.forEach(function(xR){return a(B,xR)}),qt&&sa(B,Et),dt}function ee(B,z,H,tt){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:t:{for(var dt=H.key;z!==null;){if(z.key===dt){if(dt=H.type,dt===x){if(z.tag===7){l(B,z.sibling),tt=m(z,H.props.children),tt.return=B,B=tt;break t}}else if(z.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===C&&Sv(dt)===z.type){l(B,z.sibling),tt=m(z,H.props),Zl(tt,H),tt.return=B,B=tt;break t}l(B,z);break}else a(B,z);z=z.sibling}H.type===x?(tt=na(H.props.children,B.mode,tt,H.key),tt.return=B,B=tt):(tt=Xu(H.type,H.key,H.props,null,B.mode,tt),Zl(tt,H),tt.return=B,B=tt)}return T(B);case S:t:{for(dt=H.key;z!==null;){if(z.key===dt)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){l(B,z.sibling),tt=m(z,H.children||[]),tt.return=B,B=tt;break t}else{l(B,z);break}else a(B,z);z=z.sibling}tt=Wd(H,B.mode,tt),tt.return=B,B=tt}return T(B);case C:return dt=H._init,H=dt(H._payload),ee(B,z,H,tt)}if(bt(H))return St(B,z,H,tt);if(U(H)){if(dt=U(H),typeof dt!="function")throw Error(i(150));return H=dt.call(H),vt(B,z,H,tt)}if(typeof H.then=="function")return ee(B,z,dh(H),tt);if(H.$$typeof===$)return ee(B,z,th(B,H),tt);gh(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,z!==null&&z.tag===6?(l(B,z.sibling),tt=m(z,H),tt.return=B,B=tt):(l(B,z),tt=Xd(H,B.mode,tt),tt.return=B,B=tt),T(B)):l(B,z)}return function(B,z,H,tt){try{Wl=0;var dt=ee(B,z,H,tt);return yo=null,dt}catch(pt){if(pt===Fl||pt===nh)throw pt;var Dt=wn(29,pt,null,B.mode);return Dt.lanes=tt,Dt.return=B,Dt}finally{}}}var _o=Av(!0),wv=Av(!1),Hn=st(null),bi=null;function Fs(s){var a=s.alternate;at(Ne,Ne.current&1),at(Hn,s),bi===null&&(a===null||fo.current!==null||a.memoizedState!==null)&&(bi=s)}function xv(s){if(s.tag===22){if(at(Ne,Ne.current),at(Hn,s),bi===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(bi=s)}}else Hs()}function Hs(){at(Ne,Ne.current),at(Hn,Hn.current)}function ss(s){ut(Hn),bi===s&&(bi=null),ut(Ne)}var Ne=st(0);function mh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||vm(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Dg(s,a,l,u){a=s.memoizedState,l=l(u,a),l=l==null?a:y({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Mg={enqueueSetState:function(s,a,l){s=s._reactInternals;var u=In(),m=js(u);m.payload=a,l!=null&&(m.callback=l),a=zs(s,m,u),a!==null&&(Dn(a,s,u),ql(a,s,u))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var u=In(),m=js(u);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=zs(s,m,u),a!==null&&(Dn(a,s,u),ql(a,s,u))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=In(),u=js(l);u.tag=2,a!=null&&(u.callback=a),a=zs(s,u,l),a!==null&&(Dn(a,s,l),ql(a,s,l))}};function Rv(s,a,l,u,m,p,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,T):a.prototype&&a.prototype.isPureReactComponent?!kl(l,u)||!kl(m,p):!0}function Cv(s,a,l,u){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,u),a.state!==s&&Mg.enqueueReplaceState(a,a.state,null)}function ha(s,a){var l=a;if("ref"in a){l={};for(var u in a)u!=="ref"&&(l[u]=a[u])}if(s=s.defaultProps){l===a&&(l=y({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}var ph=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Iv(s){ph(s)}function Dv(s){console.error(s)}function Mv(s){ph(s)}function yh(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function Ov(s,a,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Og(s,a,l){return l=js(l),l.tag=3,l.payload={element:null},l.callback=function(){yh(s,a)},l}function Nv(s){return s=js(s),s.tag=3,s}function kv(s,a,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;s.payload=function(){return m(p)},s.callback=function(){Ov(a,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){Ov(a,l,u),typeof m!="function"&&($s===null?$s=new Set([this]):$s.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function xx(s,a,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=l.alternate,a!==null&&jl(a,l,m,!0),l=Hn.current,l!==null){switch(l.tag){case 13:return bi===null?nm():l.alternate===null&&me===0&&(me=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===og?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([u]):a.add(u),sm(s,u,m)),!1;case 22:return l.flags|=65536,u===og?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([u]):l.add(u)),sm(s,u,m)),!1}throw Error(i(435,l.tag))}return sm(s,u,m),nm(),!1}if(qt)return a=Hn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==tg&&(s=Error(i(422),{cause:u}),Ul(jn(s,l)))):(u!==tg&&(a=Error(i(423),{cause:u}),Ul(jn(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,u=jn(u,l),m=Og(s.stateNode,u,m),ug(s,m),me!==4&&(me=2)),!1;var p=Error(i(520),{cause:u});if(p=jn(p,l),rc===null?rc=[p]:rc.push(p),me!==4&&(me=2),a===null)return!0;u=jn(u,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=Og(l.stateNode,u,s),ug(l,s),!1;case 1:if(a=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($s===null||!$s.has(p))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Nv(m),kv(m,s,l,u),ug(l,m),!1}l=l.return}while(l!==null);return!1}var Pv=Error(i(461)),Ue=!1;function Ye(s,a,l,u){a.child=s===null?wv(a,null,l,u):_o(a,s.child,l,u)}function Vv(s,a,l,u,m){l=l.render;var p=a.ref;if("ref"in u){var T={};for(var A in u)A!=="ref"&&(T[A]=u[A])}else T=u;return la(a),u=mg(s,a,l,T,p,m),A=pg(),s!==null&&!Ue?(yg(s,a,m),rs(s,a,m)):(qt&&A&&Zd(a),a.flags|=1,Ye(s,a,u,m),a.child)}function Lv(s,a,l,u,m){if(s===null){var p=l.type;return typeof p=="function"&&!$d(p)&&p.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=p,Uv(s,a,p,u,m)):(s=Xu(l.type,null,u,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(p=s.child,!zg(s,m)){var T=p.memoizedProps;if(l=l.compare,l=l!==null?l:kl,l(T,u)&&s.ref===a.ref)return rs(s,a,m)}return a.flags|=1,s=Zi(p,u),s.ref=a.ref,s.return=a,a.child=s}function Uv(s,a,l,u,m){if(s!==null){var p=s.memoizedProps;if(kl(p,u)&&s.ref===a.ref)if(Ue=!1,a.pendingProps=u=p,zg(s,m))(s.flags&131072)!==0&&(Ue=!0);else return a.lanes=s.lanes,rs(s,a,m)}return Ng(s,a,l,u,m)}function jv(s,a,l){var u=a.pendingProps,m=u.children,p=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((a.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,s!==null){for(m=a.child=s.child,p=0;m!==null;)p=p|m.lanes|m.childLanes,m=m.sibling;a.childLanes=p&~u}else a.childLanes=0,a.child=null;return zv(s,a,u,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&eh(a,p!==null?p.cachePool:null),p!==null?U_(a,p):fg(),xv(a);else return a.lanes=a.childLanes=536870912,zv(s,a,p!==null?p.baseLanes|l:l,l)}else p!==null?(eh(a,p.cachePool),U_(a,p),Hs(),a.memoizedState=null):(s!==null&&eh(a,null),fg(),Hs());return Ye(s,a,m,l),a.child}function zv(s,a,l,u){var m=ag();return m=m===null?null:{parent:Oe._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},s!==null&&eh(a,null),fg(),xv(a),s!==null&&jl(s,a,u,!0),null}function _h(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function Ng(s,a,l,u,m){return la(a),l=mg(s,a,l,u,void 0,m),u=pg(),s!==null&&!Ue?(yg(s,a,m),rs(s,a,m)):(qt&&u&&Zd(a),a.flags|=1,Ye(s,a,l,m),a.child)}function Bv(s,a,l,u,m,p){return la(a),a.updateQueue=null,l=z_(a,u,l,m),j_(s),u=pg(),s!==null&&!Ue?(yg(s,a,p),rs(s,a,p)):(qt&&u&&Zd(a),a.flags|=1,Ye(s,a,l,p),a.child)}function Fv(s,a,l,u,m){if(la(a),a.stateNode===null){var p=oo,T=l.contextType;typeof T=="object"&&T!==null&&(p=tn(T)),p=new l(u,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Mg,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=u,p.state=a.memoizedState,p.refs={},lg(a),T=l.contextType,p.context=typeof T=="object"&&T!==null?tn(T):oo,p.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Dg(a,l,T,u),p.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Mg.enqueueReplaceState(p,p.state,null),Yl(a,u,p,m),Gl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(s===null){p=a.stateNode;var A=a.memoizedProps,P=ha(l,A);p.props=P;var q=p.context,J=l.contextType;T=oo,typeof J=="object"&&J!==null&&(T=tn(J));var nt=l.getDerivedStateFromProps;J=typeof nt=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||q!==T)&&Cv(a,p,u,T),Us=!1;var G=a.memoizedState;p.state=G,Yl(a,u,p,m),Gl(),q=a.memoizedState,A||G!==q||Us?(typeof nt=="function"&&(Dg(a,l,nt,u),q=a.memoizedState),(P=Us||Rv(a,l,P,u,G,q,T))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=q),p.props=u,p.state=q,p.context=T,u=P):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{p=a.stateNode,cg(s,a),T=a.memoizedProps,J=ha(l,T),p.props=J,nt=a.pendingProps,G=p.context,q=l.contextType,P=oo,typeof q=="object"&&q!==null&&(P=tn(q)),A=l.getDerivedStateFromProps,(q=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==nt||G!==P)&&Cv(a,p,u,P),Us=!1,G=a.memoizedState,p.state=G,Yl(a,u,p,m),Gl();var K=a.memoizedState;T!==nt||G!==K||Us||s!==null&&s.dependencies!==null&&Ju(s.dependencies)?(typeof A=="function"&&(Dg(a,l,A,u),K=a.memoizedState),(J=Us||Rv(a,l,J,u,G,K,P)||s!==null&&s.dependencies!==null&&Ju(s.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,K,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,K,P)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=K),p.props=u,p.state=K,p.context=P,u=J):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&G===s.memoizedState||(a.flags|=1024),u=!1)}return p=u,_h(s,a),u=(a.flags&128)!==0,p||u?(p=a.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,s!==null&&u?(a.child=_o(a,s.child,null,m),a.child=_o(a,null,l,m)):Ye(s,a,l,m),a.memoizedState=p.state,s=a.child):s=rs(s,a,m),s}function Hv(s,a,l,u){return Ll(),a.flags|=256,Ye(s,a,l,u),a.child}var kg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pg(s){return{baseLanes:s,cachePool:D_()}}function Vg(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=qn),s}function qv(s,a,l){var u=a.pendingProps,m=!1,p=(a.flags&128)!==0,T;if((T=p)||(T=s!==null&&s.memoizedState===null?!1:(Ne.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(m?Fs(a):Hs(),qt){var A=ge,P;if(P=A){t:{for(P=A,A=vi;P.nodeType!==8;){if(!A){A=null;break t}if(P=ii(P.nextSibling),P===null){A=null;break t}}A=P}A!==null?(a.memoizedState={dehydrated:A,treeContext:ia!==null?{id:Ji,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},P=wn(18,null,null,0),P.stateNode=A,P.return=a,a.child=P,gn=a,ge=null,P=!0):P=!1}P||aa(a)}if(A=a.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return vm(A)?a.lanes=32:a.lanes=536870912,null;ss(a)}return A=u.children,u=u.fallback,m?(Hs(),m=a.mode,A=vh({mode:"hidden",children:A},m),u=na(u,m,l,null),A.return=a,u.return=a,A.sibling=u,a.child=A,m=a.child,m.memoizedState=Pg(l),m.childLanes=Vg(s,T,l),a.memoizedState=kg,u):(Fs(a),Lg(a,A))}if(P=s.memoizedState,P!==null&&(A=P.dehydrated,A!==null)){if(p)a.flags&256?(Fs(a),a.flags&=-257,a=Ug(s,a,l)):a.memoizedState!==null?(Hs(),a.child=s.child,a.flags|=128,a=null):(Hs(),m=u.fallback,A=a.mode,u=vh({mode:"visible",children:u.children},A),m=na(m,A,l,null),m.flags|=2,u.return=a,m.return=a,u.sibling=m,a.child=u,_o(a,s.child,null,l),u=a.child,u.memoizedState=Pg(l),u.childLanes=Vg(s,T,l),a.memoizedState=kg,a=m);else if(Fs(a),vm(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var q=T.dgst;T=q,u=Error(i(419)),u.stack="",u.digest=T,Ul({value:u,source:null,stack:null}),a=Ug(s,a,l)}else if(Ue||jl(s,a,l,!1),T=(l&s.childLanes)!==0,Ue||T){if(T=se,T!==null&&(u=l&-l,u=(u&42)!==0?1:Ds(u),u=(u&(T.suspendedLanes|l))!==0?0:u,u!==0&&u!==P.retryLane))throw P.retryLane=u,ao(s,u),Dn(T,s,u),Pv;A.data==="$?"||nm(),a=Ug(s,a,l)}else A.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=P.treeContext,ge=ii(A.nextSibling),gn=a,qt=!0,ra=null,vi=!1,s!==null&&(Bn[Fn++]=Ji,Bn[Fn++]=ts,Bn[Fn++]=ia,Ji=s.id,ts=s.overflow,ia=a),a=Lg(a,u.children),a.flags|=4096);return a}return m?(Hs(),m=u.fallback,A=a.mode,P=s.child,q=P.sibling,u=Zi(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,q!==null?m=Zi(q,m):(m=na(m,A,l,null),m.flags|=2),m.return=a,u.return=a,u.sibling=m,a.child=u,u=m,m=a.child,A=s.child.memoizedState,A===null?A=Pg(l):(P=A.cachePool,P!==null?(q=Oe._currentValue,P=P.parent!==q?{parent:q,pool:q}:P):P=D_(),A={baseLanes:A.baseLanes|l,cachePool:P}),m.memoizedState=A,m.childLanes=Vg(s,T,l),a.memoizedState=kg,u):(Fs(a),l=s.child,s=l.sibling,l=Zi(l,{mode:"visible",children:u.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function Lg(s,a){return a=vh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function vh(s,a){return s=wn(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ug(s,a,l){return _o(a,s.child,null,l),s=Lg(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Gv(s,a,l){s.lanes|=a;var u=s.alternate;u!==null&&(u.lanes|=a),ng(s.return,a,l)}function jg(s,a,l,u,m){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(p.isBackwards=a,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=m)}function Yv(s,a,l){var u=a.pendingProps,m=u.revealOrder,p=u.tail;if(Ye(s,a,u.children,l),u=Ne.current,(u&2)!==0)u=u&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Gv(s,l,a);else if(s.tag===19)Gv(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(at(Ne,u),m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&mh(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),jg(a,!1,m,l,p);break;case"backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&mh(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}jg(a,!0,l,null,p);break;case"together":jg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function rs(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),Qs|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(jl(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=Zi(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=Zi(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function zg(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Ju(s)))}function Rx(s,a,l){switch(a.tag){case 3:ie(a,a.stateNode.containerInfo),Ls(a,Oe,s.memoizedState.cache),Ll();break;case 27:case 5:Is(a);break;case 4:ie(a,a.stateNode.containerInfo);break;case 10:Ls(a,a.type,a.memoizedProps.value);break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Fs(a),a.flags|=128,null):(l&a.child.childLanes)!==0?qv(s,a,l):(Fs(a),s=rs(s,a,l),s!==null?s.sibling:null);Fs(a);break;case 19:var m=(s.flags&128)!==0;if(u=(l&a.childLanes)!==0,u||(jl(s,a,l,!1),u=(l&a.childLanes)!==0),m){if(u)return Yv(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),at(Ne,Ne.current),u)break;return null;case 22:case 23:return a.lanes=0,jv(s,a,l);case 24:Ls(a,Oe,s.memoizedState.cache)}return rs(s,a,l)}function Kv(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ue=!0;else{if(!zg(s,l)&&(a.flags&128)===0)return Ue=!1,Rx(s,a,l);Ue=(s.flags&131072)!==0}else Ue=!1,qt&&(a.flags&1048576)!==0&&S_(a,Zu,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var u=a.elementType,m=u._init;if(u=m(u._payload),a.type=u,typeof u=="function")$d(u)?(s=ha(u,s),a.tag=1,a=Fv(null,a,u,s,l)):(a.tag=0,a=Ng(null,a,u,s,l));else{if(u!=null){if(m=u.$$typeof,m===rt){a.tag=11,a=Vv(null,a,u,s,l);break t}else if(m===N){a.tag=14,a=Lv(null,a,u,s,l);break t}}throw a=Ft(u)||u,Error(i(306,a,""))}}return a;case 0:return Ng(s,a,a.type,a.pendingProps,l);case 1:return u=a.type,m=ha(u,a.pendingProps),Fv(s,a,u,m,l);case 3:t:{if(ie(a,a.stateNode.containerInfo),s===null)throw Error(i(387));u=a.pendingProps;var p=a.memoizedState;m=p.element,cg(s,a),Yl(a,u,null,l);var T=a.memoizedState;if(u=T.cache,Ls(a,Oe,u),u!==p.cache&&ig(a,[Oe],l,!0),Gl(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Hv(s,a,u,l);break t}else if(u!==m){m=jn(Error(i(424)),a),Ul(m),a=Hv(s,a,u,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ge=ii(s.firstChild),gn=a,qt=!0,ra=null,vi=!0,l=wv(a,null,u,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ll(),u===m){a=rs(s,a,l);break t}Ye(s,a,u,l)}a=a.child}return a;case 26:return _h(s,a),s===null?(l=Wb(a.type,null,a.pendingProps,null))?a.memoizedState=l:qt||(l=a.type,s=a.pendingProps,u=Nh(_t.current).createElement(l),u[Ie]=a,u[Ee]=s,Qe(u,l,s),pe(u),a.stateNode=u):a.memoizedState=Wb(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Is(a),s===null&&qt&&(u=a.stateNode=Qb(a.type,a.pendingProps,_t.current),gn=a,vi=!0,m=ge,Zs(a.type)?(bm=m,ge=ii(u.firstChild)):ge=m),Ye(s,a,a.pendingProps.children,l),_h(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((m=u=ge)&&(u=eR(u,a.type,a.pendingProps,vi),u!==null?(a.stateNode=u,gn=a,ge=ii(u.firstChild),vi=!1,m=!0):m=!1),m||aa(a)),Is(a),m=a.type,p=a.pendingProps,T=s!==null?s.memoizedProps:null,u=p.children,pm(m,p)?u=null:T!==null&&pm(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=mg(s,a,vx,null,null,l),gc._currentValue=m),_h(s,a),Ye(s,a,u,l),a.child;case 6:return s===null&&qt&&((s=l=ge)&&(l=nR(l,a.pendingProps,vi),l!==null?(a.stateNode=l,gn=a,ge=null,s=!0):s=!1),s||aa(a)),null;case 13:return qv(s,a,l);case 4:return ie(a,a.stateNode.containerInfo),u=a.pendingProps,s===null?a.child=_o(a,null,u,l):Ye(s,a,u,l),a.child;case 11:return Vv(s,a,a.type,a.pendingProps,l);case 7:return Ye(s,a,a.pendingProps,l),a.child;case 8:return Ye(s,a,a.pendingProps.children,l),a.child;case 12:return Ye(s,a,a.pendingProps.children,l),a.child;case 10:return u=a.pendingProps,Ls(a,a.type,u.value),Ye(s,a,u.children,l),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,la(a),m=tn(m),u=u(m),a.flags|=1,Ye(s,a,u,l),a.child;case 14:return Lv(s,a,a.type,a.pendingProps,l);case 15:return Uv(s,a,a.type,a.pendingProps,l);case 19:return Yv(s,a,l);case 31:return u=a.pendingProps,l=a.mode,u={mode:u.mode,children:u.children},s===null?(l=vh(u,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Zi(s.child,u),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return jv(s,a,l);case 24:return la(a),u=tn(Oe),s===null?(m=ag(),m===null&&(m=se,p=sg(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=l),m=p),a.memoizedState={parent:u,cache:m},lg(a),Ls(a,Oe,m)):((s.lanes&l)!==0&&(cg(s,a),Yl(a,null,null,l),Gl()),m=s.memoizedState,p=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ls(a,Oe,u)):(u=p.cache,Ls(a,Oe,u),u!==m.cache&&ig(a,[Oe],l,!0))),Ye(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function as(s){s.flags|=4}function Qv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!n0(a)){if(a=Hn.current,a!==null&&((jt&4194048)===jt?bi!==null:(jt&62914560)!==jt&&(jt&536870912)===0||a!==bi))throw Hl=og,M_;s.flags|=8192}}function bh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?pl():536870912,s.lanes|=a,To|=a)}function Jl(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=u,s.childLanes=l,a}function Cx(s,a,l){var u=a.pendingProps;switch(Jd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return l=a.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ns(Oe),oi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Vl(a)?as(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,x_())),he(a),null;case 26:return l=a.memoizedState,s===null?(as(a),l!==null?(he(a),Qv(a,l)):(he(a),a.flags&=-16777217)):l?l!==s.memoizedState?(as(a),he(a),Qv(a,l)):(he(a),a.flags&=-16777217):(s.memoizedProps!==u&&as(a),he(a),a.flags&=-16777217),null;case 27:ji(a),l=_t.current;var m=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==u&&as(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=gt.current,Vl(a)?A_(a):(s=Qb(m,u,l),a.stateNode=s,as(a))}return he(a),null;case 5:if(ji(a),l=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==u&&as(a);else{if(!u){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(s=gt.current,Vl(a))A_(a);else{switch(m=Nh(_t.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?m.createElement(l,{is:u.is}):m.createElement(l)}}s[Ie]=a,s[Ee]=u;t:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break t;for(;m.sibling===null;){if(m.return===null||m.return===a)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=s;t:switch(Qe(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&as(a)}}return he(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==u&&as(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(i(166));if(s=_t.current,Vl(a)){if(s=a.stateNode,l=a.memoizedProps,u=null,m=gn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}s[Ie]=a,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Bb(s.nodeValue,l)),s||aa(a)}else s=Nh(s).createTextNode(u),s[Ie]=a,a.stateNode=s}return he(a),null;case 13:if(u=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Vl(a),u!==null&&u.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Ie]=a}else Ll(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),m=!1}else m=x_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(ss(a),a):(ss(a),null)}if(ss(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)}return l!==s&&l&&(a.child.flags|=8192),bh(a,a.updateQueue),he(a),null;case 4:return oi(),s===null&&hm(a.stateNode.containerInfo),he(a),null;case 10:return ns(a.type),he(a),null;case 19:if(ut(Ne),m=a.memoizedState,m===null)return he(a),null;if(u=(a.flags&128)!==0,p=m.rendering,p===null)if(u)Jl(m,!1);else{if(me!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(p=mh(s),p!==null){for(a.flags|=128,Jl(m,!1),s=p.updateQueue,a.updateQueue=s,bh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)T_(l,s),l=l.sibling;return at(Ne,Ne.current&1|2),a.child}s=s.sibling}m.tail!==null&&Nn()>Sh&&(a.flags|=128,u=!0,Jl(m,!1),a.lanes=4194304)}else{if(!u)if(s=mh(p),s!==null){if(a.flags|=128,u=!0,s=s.updateQueue,a.updateQueue=s,bh(a,s),Jl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!p.alternate&&!qt)return he(a),null}else 2*Nn()-m.renderingStartTime>Sh&&l!==536870912&&(a.flags|=128,u=!0,Jl(m,!1),a.lanes=4194304);m.isBackwards?(p.sibling=a.child,a.child=p):(s=m.last,s!==null?s.sibling=p:a.child=p,m.last=p)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Nn(),a.sibling=null,s=Ne.current,at(Ne,u?s&1|2:s&1),a):(he(a),null);case 22:case 23:return ss(a),dg(),u=a.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(l&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),l=a.updateQueue,l!==null&&bh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==l&&(a.flags|=2048),s!==null&&ut(ca),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ns(Oe),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Ix(s,a){switch(Jd(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ns(Oe),oi(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return ji(a),null;case 13:if(ss(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ll()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ut(Ne),null;case 4:return oi(),null;case 10:return ns(a.type),null;case 22:case 23:return ss(a),dg(),s!==null&&ut(ca),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ns(Oe),null;case 25:return null;default:return null}}function $v(s,a){switch(Jd(a),a.tag){case 3:ns(Oe),oi();break;case 26:case 27:case 5:ji(a);break;case 4:oi();break;case 13:ss(a);break;case 19:ut(Ne);break;case 10:ns(a.type);break;case 22:case 23:ss(a),dg(),s!==null&&ut(ca);break;case 24:ns(Oe)}}function tc(s,a){try{var l=a.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&s)===s){u=void 0;var p=l.create,T=l.inst;u=p(),T.destroy=u}l=l.next}while(l!==m)}}catch(A){ne(a,a.return,A)}}function qs(s,a,l){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&s)===s){var T=u.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,m=a;var P=l,q=A;try{q()}catch(J){ne(m,P,J)}}}u=u.next}while(u!==p)}}catch(J){ne(a,a.return,J)}}function Xv(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{L_(a,l)}catch(u){ne(s,s.return,u)}}}function Wv(s,a,l){l.props=ha(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ne(s,a,u)}}function ec(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(m){ne(s,a,m)}}function Ei(s,a){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){ne(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){ne(s,a,m)}else l.current=null}function Zv(s){var a=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){ne(s,s.return,m)}}function Bg(s,a,l){try{var u=s.stateNode;Xx(u,s.type,l,a),u[Ee]=a}catch(m){ne(s,s.return,m)}}function Jv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Zs(s.type)||s.tag===4}function Fg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Jv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Zs(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hg(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Oh));else if(u!==4&&(u===27&&Zs(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(Hg(s,a,l),s=s.sibling;s!==null;)Hg(s,a,l),s=s.sibling}function Eh(s,a,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(u!==4&&(u===27&&Zs(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Eh(s,a,l),s=s.sibling;s!==null;)Eh(s,a,l),s=s.sibling}function tb(s){var a=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Qe(a,u,l),a[Ie]=s,a[Ee]=l}catch(p){ne(s,s.return,p)}}var os=!1,_e=!1,qg=!1,eb=typeof WeakSet=="function"?WeakSet:Set,je=null;function Dx(s,a){if(s=s.containerInfo,gm=jh,s=f_(s),Fd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var T=0,A=-1,P=-1,q=0,J=0,nt=s,G=null;e:for(;;){for(var K;nt!==l||m!==0&&nt.nodeType!==3||(A=T+m),nt!==p||u!==0&&nt.nodeType!==3||(P=T+u),nt.nodeType===3&&(T+=nt.nodeValue.length),(K=nt.firstChild)!==null;)G=nt,nt=K;for(;;){if(nt===s)break e;if(G===l&&++q===m&&(A=T),G===p&&++J===u&&(P=T),(K=nt.nextSibling)!==null)break;nt=G,G=nt.parentNode}nt=K}l=A===-1||P===-1?null:{start:A,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(mm={focusedElem:s,selectionRange:l},jh=!1,je=a;je!==null;)if(a=je,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,je=s;else for(;je!==null;){switch(a=je,p=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=a,m=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var St=ha(l.type,m,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(St,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(vt){ne(l,l.return,vt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)_m(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":_m(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,je=s;break}je=a.return}}function nb(s,a,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Gs(s,l),u&4&&tc(5,l);break;case 1:if(Gs(s,l),u&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){ne(l,l.return,T)}else{var m=ha(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ne(l,l.return,T)}}u&64&&Xv(l),u&512&&ec(l,l.return);break;case 3:if(Gs(s,l),u&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{L_(s,a)}catch(T){ne(l,l.return,T)}}break;case 27:a===null&&u&4&&tb(l);case 26:case 5:Gs(s,l),a===null&&u&4&&Zv(l),u&512&&ec(l,l.return);break;case 12:Gs(s,l);break;case 13:Gs(s,l),u&4&&rb(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=jx.bind(null,l),iR(s,l))));break;case 22:if(u=l.memoizedState!==null||os,!u){a=a!==null&&a.memoizedState!==null||_e,m=os;var p=_e;os=u,(_e=a)&&!p?Ys(s,l,(l.subtreeFlags&8772)!==0):Gs(s,l),os=m,_e=p}break;case 30:break;default:Gs(s,l)}}function ib(s){var a=s.alternate;a!==null&&(s.alternate=null,ib(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Ns(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,pn=!1;function ls(s,a,l){for(l=l.child;l!==null;)sb(s,a,l),l=l.sibling}function sb(s,a,l){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:_e||Ei(l,a),ls(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:_e||Ei(l,a);var u=ue,m=pn;Zs(l.type)&&(ue=l.stateNode,pn=!1),ls(s,a,l),uc(l.stateNode),ue=u,pn=m;break;case 5:_e||Ei(l,a);case 6:if(u=ue,m=pn,ue=null,ls(s,a,l),ue=u,pn=m,ue!==null)if(pn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(l.stateNode)}catch(p){ne(l,a,p)}else try{ue.removeChild(l.stateNode)}catch(p){ne(l,a,p)}break;case 18:ue!==null&&(pn?(s=ue,Yb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),_c(s)):Yb(ue,l.stateNode));break;case 4:u=ue,m=pn,ue=l.stateNode.containerInfo,pn=!0,ls(s,a,l),ue=u,pn=m;break;case 0:case 11:case 14:case 15:_e||qs(2,l,a),_e||qs(4,l,a),ls(s,a,l);break;case 1:_e||(Ei(l,a),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Wv(l,a,u)),ls(s,a,l);break;case 21:ls(s,a,l);break;case 22:_e=(u=_e)||l.memoizedState!==null,ls(s,a,l),_e=u;break;default:ls(s,a,l)}}function rb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{_c(s)}catch(l){ne(a,a.return,l)}}function Mx(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new eb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new eb),a;default:throw Error(i(435,s.tag))}}function Gg(s,a){var l=Mx(s);a.forEach(function(u){var m=zx.bind(null,s,u);l.has(u)||(l.add(u),u.then(m,m))})}function xn(s,a){var l=a.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],p=s,T=a,A=T;t:for(;A!==null;){switch(A.tag){case 27:if(Zs(A.type)){ue=A.stateNode,pn=!1;break t}break;case 5:ue=A.stateNode,pn=!1;break t;case 3:case 4:ue=A.stateNode.containerInfo,pn=!0;break t}A=A.return}if(ue===null)throw Error(i(160));sb(p,T,m),ue=null,pn=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)ab(a,s),a=a.sibling}var ni=null;function ab(s,a){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:xn(a,s),Rn(s),u&4&&(qs(3,s,s.return),tc(3,s),qs(5,s,s.return));break;case 1:xn(a,s),Rn(s),u&512&&(_e||l===null||Ei(l,l.return)),u&64&&os&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=ni;if(xn(a,s),Rn(s),u&512&&(_e||l===null||Ei(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[zr]||p[Ie]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),Qe(p,u,l),p[Ie]=s,pe(p),u=p;break t;case"link":var T=t0("link","href",m).get(u+(l.href||""));if(T){for(var A=0;A<T.length;A++)if(p=T[A],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(A,1);break e}}p=m.createElement(u),Qe(p,u,l),m.head.appendChild(p);break;case"meta":if(T=t0("meta","content",m).get(u+(l.content||""))){for(A=0;A<T.length;A++)if(p=T[A],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(A,1);break e}}p=m.createElement(u),Qe(p,u,l),m.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ie]=s,pe(p),u=p}s.stateNode=u}else e0(m,s.type,s.stateNode);else s.stateNode=Jb(m,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?e0(m,s.type,s.stateNode):Jb(m,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Bg(s,s.memoizedProps,l.memoizedProps)}break;case 27:xn(a,s),Rn(s),u&512&&(_e||l===null||Ei(l,l.return)),l!==null&&u&4&&Bg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(xn(a,s),Rn(s),u&512&&(_e||l===null||Ei(l,l.return)),s.flags&32){m=s.stateNode;try{Pn(m,"")}catch(K){ne(s,s.return,K)}}u&4&&s.stateNode!=null&&(m=s.memoizedProps,Bg(s,m,l!==null?l.memoizedProps:m)),u&1024&&(qg=!0);break;case 6:if(xn(a,s),Rn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(K){ne(s,s.return,K)}}break;case 3:if(Vh=null,m=ni,ni=kh(a.containerInfo),xn(a,s),ni=m,Rn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{_c(a.containerInfo)}catch(K){ne(s,s.return,K)}qg&&(qg=!1,ob(s));break;case 4:u=ni,ni=kh(s.stateNode.containerInfo),xn(a,s),Rn(s),ni=u;break;case 12:xn(a,s),Rn(s);break;case 13:xn(a,s),Rn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wg=Nn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Gg(s,u)));break;case 22:m=s.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,q=os,J=_e;if(os=q||m,_e=J||P,xn(a,s),_e=J,os=q,Rn(s),u&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||P||os||_e||fa(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){P=l=a;try{if(p=P.stateNode,m)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=P.stateNode;var nt=P.memoizedProps.style,G=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){ne(P,P.return,K)}}}else if(a.tag===6){if(l===null){P=a;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(K){ne(P,P.return,K)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Gg(s,l))));break;case 19:xn(a,s),Rn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Gg(s,u)));break;case 30:break;case 21:break;default:xn(a,s),Rn(s)}}function Rn(s){var a=s.flags;if(a&2){try{for(var l,u=s.return;u!==null;){if(Jv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,p=Fg(s);Eh(s,p,m);break;case 5:var T=l.stateNode;l.flags&32&&(Pn(T,""),l.flags&=-33);var A=Fg(s);Eh(s,A,T);break;case 3:case 4:var P=l.stateNode.containerInfo,q=Fg(s);Hg(s,q,P);break;default:throw Error(i(161))}}catch(J){ne(s,s.return,J)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function ob(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;ob(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Gs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)nb(s,a.alternate,a),a=a.sibling}function fa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:qs(4,a,a.return),fa(a);break;case 1:Ei(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Wv(a,a.return,l),fa(a);break;case 27:uc(a.stateNode);case 26:case 5:Ei(a,a.return),fa(a);break;case 22:a.memoizedState===null&&fa(a);break;case 30:fa(a);break;default:fa(a)}s=s.sibling}}function Ys(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=s,p=a,T=p.flags;switch(p.tag){case 0:case 11:case 15:Ys(m,p,l),tc(4,p);break;case 1:if(Ys(m,p,l),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(q){ne(u,u.return,q)}if(u=p,m=u.updateQueue,m!==null){var A=u.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)V_(P[m],A)}catch(q){ne(u,u.return,q)}}l&&T&64&&Xv(p),ec(p,p.return);break;case 27:tb(p);case 26:case 5:Ys(m,p,l),l&&u===null&&T&4&&Zv(p),ec(p,p.return);break;case 12:Ys(m,p,l);break;case 13:Ys(m,p,l),l&&T&4&&rb(m,p);break;case 22:p.memoizedState===null&&Ys(m,p,l),ec(p,p.return);break;case 30:break;default:Ys(m,p,l)}a=a.sibling}}function Yg(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&zl(l))}function Kg(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&zl(s))}function Ti(s,a,l,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lb(s,a,l,u),a=a.sibling}function lb(s,a,l,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(s,a,l,u),m&2048&&tc(9,a);break;case 1:Ti(s,a,l,u);break;case 3:Ti(s,a,l,u),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&zl(s)));break;case 12:if(m&2048){Ti(s,a,l,u),s=a.stateNode;try{var p=a.memoizedProps,T=p.id,A=p.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){ne(a,a.return,P)}}else Ti(s,a,l,u);break;case 13:Ti(s,a,l,u);break;case 23:break;case 22:p=a.stateNode,T=a.alternate,a.memoizedState!==null?p._visibility&2?Ti(s,a,l,u):nc(s,a):p._visibility&2?Ti(s,a,l,u):(p._visibility|=2,vo(s,a,l,u,(a.subtreeFlags&10256)!==0)),m&2048&&Yg(T,a);break;case 24:Ti(s,a,l,u),m&2048&&Kg(a.alternate,a);break;default:Ti(s,a,l,u)}}function vo(s,a,l,u,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var p=s,T=a,A=l,P=u,q=T.flags;switch(T.tag){case 0:case 11:case 15:vo(p,T,A,P,m),tc(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?vo(p,T,A,P,m):nc(p,T):(J._visibility|=2,vo(p,T,A,P,m)),m&&q&2048&&Yg(T.alternate,T);break;case 24:vo(p,T,A,P,m),m&&q&2048&&Kg(T.alternate,T);break;default:vo(p,T,A,P,m)}a=a.sibling}}function nc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,u=a,m=u.flags;switch(u.tag){case 22:nc(l,u),m&2048&&Yg(u.alternate,u);break;case 24:nc(l,u),m&2048&&Kg(u.alternate,u);break;default:nc(l,u)}a=a.sibling}}var ic=8192;function bo(s){if(s.subtreeFlags&ic)for(s=s.child;s!==null;)cb(s),s=s.sibling}function cb(s){switch(s.tag){case 26:bo(s),s.flags&ic&&s.memoizedState!==null&&pR(ni,s.memoizedState,s.memoizedProps);break;case 5:bo(s);break;case 3:case 4:var a=ni;ni=kh(s.stateNode.containerInfo),bo(s),ni=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=ic,ic=16777216,bo(s),ic=a):bo(s));break;default:bo(s)}}function ub(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function sc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];je=u,fb(u,s)}ub(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)hb(s),s=s.sibling}function hb(s){switch(s.tag){case 0:case 11:case 15:sc(s),s.flags&2048&&qs(9,s,s.return);break;case 3:sc(s);break;case 12:sc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Th(s)):sc(s);break;default:sc(s)}}function Th(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var u=a[l];je=u,fb(u,s)}ub(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:qs(8,a,a.return),Th(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Th(a));break;default:Th(a)}s=s.sibling}}function fb(s,a){for(;je!==null;){var l=je;switch(l.tag){case 0:case 11:case 15:qs(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:zl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,je=u;else t:for(l=s;je!==null;){u=je;var m=u.sibling,p=u.return;if(ib(u),u===l){je=null;break t}if(m!==null){m.return=p,je=m;break t}je=p}}}var Ox={getCacheForType:function(s){var a=tn(Oe),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l}},Nx=typeof WeakMap=="function"?WeakMap:Map,$t=0,se=null,Mt=null,jt=0,Xt=0,Cn=null,Ks=!1,Eo=!1,Qg=!1,cs=0,me=0,Qs=0,da=0,$g=0,qn=0,To=0,rc=null,yn=null,Xg=!1,Wg=0,Sh=1/0,Ah=null,$s=null,Ke=0,Xs=null,So=null,Ao=0,Zg=0,Jg=null,db=null,ac=0,tm=null;function In(){if(($t&2)!==0&&jt!==0)return jt&-jt;if(Q.T!==null){var s=uo;return s!==0?s:om()}return Ms()}function gb(){qn===0&&(qn=(jt&536870912)===0||qt?ml():536870912);var s=Hn.current;return s!==null&&(s.flags|=32),qn}function Dn(s,a,l){(s===se&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)&&(wo(s,0),Ws(s,jt,qn,!1)),Bi(s,l),(($t&2)===0||s!==se)&&(s===se&&(($t&2)===0&&(da|=l),me===4&&Ws(s,jt,qn,!1)),Si(s))}function mb(s,a,l){if(($t&6)!==0)throw Error(i(327));var u=!l&&(a&124)===0&&(a&s.expiredLanes)===0||jr(s,a),m=u?Vx(s,a):im(s,a,!0),p=u;do{if(m===0){Eo&&!u&&Ws(s,a,0,!1);break}else{if(l=s.current.alternate,p&&!kx(l)){m=im(s,a,!1),p=!1;continue}if(m===2){if(p=a,s.errorRecoveryDisabledLanes&p)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var A=s;m=rc;var P=A.current.memoizedState.isDehydrated;if(P&&(wo(A,T).flags|=256),T=im(A,T,!1),T!==2){if(Qg&&!P){A.errorRecoveryDisabledLanes|=p,da|=p,m=4;break t}p=yn,yn=m,p!==null&&(yn===null?yn=p:yn.push.apply(yn,p))}m=T}if(p=!1,m!==2)continue}}if(m===1){wo(s,0),Ws(s,a,0,!0);break}t:{switch(u=s,p=m,p){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ws(u,a,qn,!Ks);break t;case 2:yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Wg+300-Nn(),10<m)){if(Ws(u,a,qn,!Ks),Ba(u,0,!0)!==0)break t;u.timeoutHandle=qb(pb.bind(null,u,l,yn,Ah,Xg,a,qn,da,To,Ks,p,2,-0,0),m);break t}pb(u,l,yn,Ah,Xg,a,qn,da,To,Ks,p,0,-0,0)}}break}while(!0);Si(s)}function pb(s,a,l,u,m,p,T,A,P,q,J,nt,G,K){if(s.timeoutHandle=-1,nt=a.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(dc={stylesheets:null,count:0,unsuspend:mR},cb(a),nt=yR(),nt!==null)){s.cancelPendingCommit=nt(Sb.bind(null,s,a,p,l,u,m,T,A,P,J,1,G,K)),Ws(s,p,T,!q);return}Sb(s,a,p,l,u,m,T,A,P)}function kx(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],p=m.getSnapshot;m=m.value;try{if(!An(p(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ws(s,a,l,u){a&=~$g,a&=~da,s.suspendedLanes|=a,s.pingedLanes&=~a,u&&(s.warmLanes|=a),u=s.expirationTimes;for(var m=a;0<m;){var p=31-Je(m),T=1<<p;u[p]=-1,m&=~T}l!==0&&li(s,l,a)}function wh(){return($t&6)===0?(oc(0),!1):!0}function em(){if(Mt!==null){if(Xt===0)var s=Mt.return;else s=Mt,es=oa=null,_g(s),yo=null,Wl=0,s=Mt;for(;s!==null;)$v(s.alternate,s),s=s.return;Mt=null}}function wo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Zx(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),em(),se=s,Mt=l=Zi(s.current,null),jt=a,Xt=0,Cn=null,Ks=!1,Eo=jr(s,a),Qg=!1,To=qn=$g=da=Qs=me=0,yn=rc=null,Xg=!1,(a&8)!==0&&(a|=a&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=a;0<u;){var m=31-Je(u),p=1<<m;a|=s[m],u&=~p}return cs=a,Ku(),l}function yb(s,a){It=null,Q.H=fh,a===Fl||a===nh?(a=k_(),Xt=3):a===M_?(a=k_(),Xt=4):Xt=a===Pv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Cn=a,Mt===null&&(me=1,yh(s,jn(a,s.current)))}function _b(){var s=Q.H;return Q.H=fh,s===null?fh:s}function vb(){var s=Q.A;return Q.A=Ox,s}function nm(){me=4,Ks||(jt&4194048)!==jt&&Hn.current!==null||(Eo=!0),(Qs&134217727)===0&&(da&134217727)===0||se===null||Ws(se,jt,qn,!1)}function im(s,a,l){var u=$t;$t|=2;var m=_b(),p=vb();(se!==s||jt!==a)&&(Ah=null,wo(s,a)),a=!1;var T=me;t:do try{if(Xt!==0&&Mt!==null){var A=Mt,P=Cn;switch(Xt){case 8:em(),T=6;break t;case 3:case 2:case 9:case 6:Hn.current===null&&(a=!0);var q=Xt;if(Xt=0,Cn=null,xo(s,A,P,q),l&&Eo){T=0;break t}break;default:q=Xt,Xt=0,Cn=null,xo(s,A,P,q)}}Px(),T=me;break}catch(J){yb(s,J)}while(!0);return a&&s.shellSuspendCounter++,es=oa=null,$t=u,Q.H=m,Q.A=p,Mt===null&&(se=null,jt=0,Ku()),T}function Px(){for(;Mt!==null;)bb(Mt)}function Vx(s,a){var l=$t;$t|=2;var u=_b(),m=vb();se!==s||jt!==a?(Ah=null,Sh=Nn()+500,wo(s,a)):Eo=jr(s,a);t:do try{if(Xt!==0&&Mt!==null){a=Mt;var p=Cn;e:switch(Xt){case 1:Xt=0,Cn=null,xo(s,a,p,1);break;case 2:case 9:if(O_(p)){Xt=0,Cn=null,Eb(a);break}a=function(){Xt!==2&&Xt!==9||se!==s||(Xt=7),Si(s)},p.then(a,a);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:O_(p)?(Xt=0,Cn=null,Eb(a)):(Xt=0,Cn=null,xo(s,a,p,7));break;case 5:var T=null;switch(Mt.tag){case 26:T=Mt.memoizedState;case 5:case 27:var A=Mt;if(!T||n0(T)){Xt=0,Cn=null;var P=A.sibling;if(P!==null)Mt=P;else{var q=A.return;q!==null?(Mt=q,xh(q)):Mt=null}break e}}Xt=0,Cn=null,xo(s,a,p,5);break;case 6:Xt=0,Cn=null,xo(s,a,p,6);break;case 8:em(),me=6;break t;default:throw Error(i(462))}}Lx();break}catch(J){yb(s,J)}while(!0);return es=oa=null,Q.H=u,Q.A=m,$t=l,Mt!==null?0:(se=null,jt=0,Ku(),me)}function Lx(){for(;Mt!==null&&!hl();)bb(Mt)}function bb(s){var a=Kv(s.alternate,s,cs);s.memoizedProps=s.pendingProps,a===null?xh(s):Mt=a}function Eb(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=Bv(l,a,a.pendingProps,a.type,void 0,jt);break;case 11:a=Bv(l,a,a.pendingProps,a.type.render,a.ref,jt);break;case 5:_g(a);default:$v(l,a),a=Mt=T_(a,cs),a=Kv(l,a,cs)}s.memoizedProps=s.pendingProps,a===null?xh(s):Mt=a}function xo(s,a,l,u){es=oa=null,_g(a),yo=null,Wl=0;var m=a.return;try{if(xx(s,m,a,l,jt)){me=1,yh(s,jn(l,s.current)),Mt=null;return}}catch(p){if(m!==null)throw Mt=m,p;me=1,yh(s,jn(l,s.current)),Mt=null;return}a.flags&32768?(qt||u===1?s=!0:Eo||(jt&536870912)!==0?s=!1:(Ks=s=!0,(u===2||u===9||u===3||u===6)&&(u=Hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Tb(a,s)):xh(a)}function xh(s){var a=s;do{if((a.flags&32768)!==0){Tb(a,Ks);return}s=a.return;var l=Cx(a.alternate,a,cs);if(l!==null){Mt=l;return}if(a=a.sibling,a!==null){Mt=a;return}Mt=a=s}while(a!==null);me===0&&(me=5)}function Tb(s,a){do{var l=Ix(s.alternate,s);if(l!==null){l.flags&=32767,Mt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Mt=s;return}Mt=s=l}while(s!==null);me=6,Mt=null}function Sb(s,a,l,u,m,p,T,A,P){s.cancelPendingCommit=null;do Rh();while(Ke!==0);if(($t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(p=a.lanes|a.childLanes,p|=Kd,yl(s,l,p,T,A,P),s===se&&(Mt=se=null,jt=0),So=a,Xs=s,Ao=l,Zg=p,Jg=m,db=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Bx(Pr,function(){return Cb(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,m=lt.p,lt.p=2,T=$t,$t|=4;try{Dx(s,a,l)}finally{$t=T,lt.p=m,Q.T=u}}Ke=1,Ab(),wb(),xb()}}function Ab(){if(Ke===1){Ke=0;var s=Xs,a=So,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var u=lt.p;lt.p=2;var m=$t;$t|=4;try{ab(a,s);var p=mm,T=f_(s.containerInfo),A=p.focusedElem,P=p.selectionRange;if(T!==A&&A&&A.ownerDocument&&h_(A.ownerDocument.documentElement,A)){if(P!==null&&Fd(A)){var q=P.start,J=P.end;if(J===void 0&&(J=q),"selectionStart"in A)A.selectionStart=q,A.selectionEnd=Math.min(J,A.value.length);else{var nt=A.ownerDocument||document,G=nt&&nt.defaultView||window;if(G.getSelection){var K=G.getSelection(),St=A.textContent.length,vt=Math.min(P.start,St),ee=P.end===void 0?vt:Math.min(P.end,St);!K.extend&&vt>ee&&(T=ee,ee=vt,vt=T);var B=u_(A,vt),z=u_(A,ee);if(B&&z&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==z.node||K.focusOffset!==z.offset)){var H=nt.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),vt>ee?(K.addRange(H),K.extend(z.node,z.offset)):(H.setEnd(z.node,z.offset),K.addRange(H))}}}}for(nt=[],K=A;K=K.parentNode;)K.nodeType===1&&nt.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<nt.length;A++){var tt=nt[A];tt.element.scrollLeft=tt.left,tt.element.scrollTop=tt.top}}jh=!!gm,mm=gm=null}finally{$t=m,lt.p=u,Q.T=l}}s.current=a,Ke=2}}function wb(){if(Ke===2){Ke=0;var s=Xs,a=So,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var u=lt.p;lt.p=2;var m=$t;$t|=4;try{nb(s,a.alternate,a)}finally{$t=m,lt.p=u,Q.T=l}}Ke=3}}function xb(){if(Ke===4||Ke===3){Ke=0,Tu();var s=Xs,a=So,l=Ao,u=db;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ke=5:(Ke=0,So=Xs=null,Rb(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&($s=null),Fa(l),a=a.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(de,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=Q.T,m=lt.p,lt.p=2,Q.T=null;try{for(var p=s.onRecoverableError,T=0;T<u.length;T++){var A=u[T];p(A.value,{componentStack:A.stack})}}finally{Q.T=a,lt.p=m}}(Ao&3)!==0&&Rh(),Si(s),m=s.pendingLanes,(l&4194090)!==0&&(m&42)!==0?s===tm?ac++:(ac=0,tm=s):ac=0,oc(0)}}function Rb(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,zl(a)))}function Rh(s){return Ab(),wb(),xb(),Cb()}function Cb(){if(Ke!==5)return!1;var s=Xs,a=Zg;Zg=0;var l=Fa(Ao),u=Q.T,m=lt.p;try{lt.p=32>l?32:l,Q.T=null,l=Jg,Jg=null;var p=Xs,T=Ao;if(Ke=0,So=Xs=null,Ao=0,($t&6)!==0)throw Error(i(331));var A=$t;if($t|=4,hb(p.current),lb(p,p.current,T,l),$t=A,oc(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(de,p)}catch{}return!0}finally{lt.p=m,Q.T=u,Rb(s,a)}}function Ib(s,a,l){a=jn(l,a),a=Og(s.stateNode,a,2),s=zs(s,a,2),s!==null&&(Bi(s,2),Si(s))}function ne(s,a,l){if(s.tag===3)Ib(s,s,l);else for(;a!==null;){if(a.tag===3){Ib(a,s,l);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&($s===null||!$s.has(u))){s=jn(l,s),l=Nv(2),u=zs(a,l,2),u!==null&&(kv(l,u,a,s),Bi(u,2),Si(u));break}}a=a.return}}function sm(s,a,l){var u=s.pingCache;if(u===null){u=s.pingCache=new Nx;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(l)||(Qg=!0,m.add(l),s=Ux.bind(null,s,a,l),a.then(s,s))}function Ux(s,a,l){var u=s.pingCache;u!==null&&u.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,se===s&&(jt&l)===l&&(me===4||me===3&&(jt&62914560)===jt&&300>Nn()-Wg?($t&2)===0&&wo(s,0):$g|=l,To===jt&&(To=0)),Si(s)}function Db(s,a){a===0&&(a=pl()),s=ao(s,a),s!==null&&(Bi(s,a),Si(s))}function jx(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),Db(s,l)}function zx(s,a){var l=0;switch(s.tag){case 13:var u=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(a),Db(s,l)}function Bx(s,a){return Nr(s,a)}var Ch=null,Ro=null,rm=!1,Ih=!1,am=!1,ga=0;function Si(s){s!==Ro&&s.next===null&&(Ro===null?Ch=Ro=s:Ro=Ro.next=s),Ih=!0,rm||(rm=!0,Hx())}function oc(s,a){if(!am&&Ih){am=!0;do for(var l=!1,u=Ch;u!==null;){if(s!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var T=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Je(42|s)+1)-1,p&=m&~(T&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,kb(u,p))}else p=jt,p=Ba(u,u===se?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||jr(u,p)||(l=!0,kb(u,p));u=u.next}while(l);am=!1}}function Fx(){Mb()}function Mb(){Ih=rm=!1;var s=0;ga!==0&&(Wx()&&(s=ga),ga=0);for(var a=Nn(),l=null,u=Ch;u!==null;){var m=u.next,p=Ob(u,a);p===0?(u.next=null,l===null?Ch=m:l.next=m,m===null&&(Ro=l)):(l=u,(s!==0||(p&3)!==0)&&(Ih=!0)),u=m}oc(s)}function Ob(s,a){for(var l=s.suspendedLanes,u=s.pingedLanes,m=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var T=31-Je(p),A=1<<T,P=m[T];P===-1?((A&l)===0||(A&u)!==0)&&(m[T]=gl(A,a)):P<=a&&(s.expiredLanes|=A),p&=~A}if(a=se,l=jt,l=Ba(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===a&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&kr(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||jr(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(u!==null&&kr(u),Fa(l)){case 2:case 8:l=ja;break;case 32:l=Pr;break;case 268435456:l=za;break;default:l=Pr}return u=Nb.bind(null,s),l=Nr(l,u),s.callbackPriority=a,s.callbackNode=l,a}return u!==null&&u!==null&&kr(u),s.callbackPriority=2,s.callbackNode=null,2}function Nb(s,a){if(Ke!==0&&Ke!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Rh()&&s.callbackNode!==l)return null;var u=jt;return u=Ba(s,s===se?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(mb(s,u,a),Ob(s,Nn()),s.callbackNode!=null&&s.callbackNode===l?Nb.bind(null,s):null)}function kb(s,a){if(Rh())return null;mb(s,a,!0)}function Hx(){Jx(function(){($t&6)!==0?Nr(fl,Fx):Mb()})}function om(){return ga===0&&(ga=ml()),ga}function Pb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Qa(""+s)}function Vb(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function qx(s,a,l,u,m){if(a==="submit"&&l&&l.stateNode===m){var p=Pb((m[Ee]||null).action),T=u.submitter;T&&(a=(a=T[Ee]||null)?Pb(a.formAction):T.getAttribute("formAction"),a!==null&&(p=a,T=null));var A=new $a("action","action",null,u,m);s.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ga!==0){var P=T?Vb(m,T):new FormData(m);Rg(l,{pending:!0,data:P,method:m.method,action:p},null,P)}}else typeof p=="function"&&(A.preventDefault(),P=T?Vb(m,T):new FormData(m),Rg(l,{pending:!0,data:P,method:m.method,action:p},p,P))},currentTarget:m}]})}}for(var lm=0;lm<Yd.length;lm++){var cm=Yd[lm],Gx=cm.toLowerCase(),Yx=cm[0].toUpperCase()+cm.slice(1);ei(Gx,"on"+Yx)}ei(m_,"onAnimationEnd"),ei(p_,"onAnimationIteration"),ei(y_,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(cx,"onTransitionRun"),ei(ux,"onTransitionStart"),ei(hx,"onTransitionCancel"),ei(__,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function Lb(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],m=u.event;u=u.listeners;t:{var p=void 0;if(a)for(var T=u.length-1;0<=T;T--){var A=u[T],P=A.instance,q=A.currentTarget;if(A=A.listener,P!==p&&m.isPropagationStopped())break t;p=A,m.currentTarget=q;try{p(m)}catch(J){ph(J)}m.currentTarget=null,p=P}else for(T=0;T<u.length;T++){if(A=u[T],P=A.instance,q=A.currentTarget,A=A.listener,P!==p&&m.isPropagationStopped())break t;p=A,m.currentTarget=q;try{p(m)}catch(J){ph(J)}m.currentTarget=null,p=P}}}}function Ot(s,a){var l=a[vl];l===void 0&&(l=a[vl]=new Set);var u=s+"__bubble";l.has(u)||(Ub(a,s,2,!1),l.add(u))}function um(s,a,l){var u=0;a&&(u|=4),Ub(l,s,u,a)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function hm(s){if(!s[Dh]){s[Dh]=!0,bl.forEach(function(l){l!=="selectionchange"&&(Kx.has(l)||um(l,!1,s),um(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Dh]||(a[Dh]=!0,um("selectionchange",!1,a))}}function Ub(s,a,l,u){switch(l0(a)){case 2:var m=bR;break;case 8:m=ER;break;default:m=wm}l=m.bind(null,a,l,s),m=void 0,!Ln||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function fm(s,a,l,u,m){var p=u;if((a&1)===0&&(a&2)===0&&u!==null)t:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var A=u.stateNode.containerInfo;if(A===m)break;if(T===4)for(T=u.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;A!==null;){if(T=Fi(A),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){u=p=T;continue t}A=A.parentNode}}u=u.return}Ou(function(){var q=p,J=Vn(l),nt=[];t:{var G=v_.get(s);if(G!==void 0){var K=$a,St=s;switch(s){case"keypress":if(gi(l)===0)break t;case"keydown":case"keyup":K=eo;break;case"focusin":St="focus",K=Za;break;case"focusout":St="blur",K=Za;break;case"beforeblur":case"afterblur":K=Za;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=zu;break;case m_:case p_:case y_:K=Ja;break;case __:K=Fu;break;case"scroll":case"scrollend":K=Nu;break;case"wheel":K=no;break;case"copy":case"cut":case"paste":K=to;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ol;break;case"toggle":case"beforetoggle":K=qu}var vt=(a&4)!==0,ee=!vt&&(s==="scroll"||s==="scrollend"),B=vt?G!==null?G+"Capture":null:G;vt=[];for(var z=q,H;z!==null;){var tt=z;if(H=tt.stateNode,tt=tt.tag,tt!==5&&tt!==26&&tt!==27||H===null||B===null||(tt=Kr(z,B),tt!=null&&vt.push(cc(z,tt,H))),ee)break;z=z.return}0<vt.length&&(G=new K(G,St,null,l,J),nt.push({event:G,listeners:vt}))}}if((a&7)===0){t:{if(G=s==="mouseover"||s==="pointerover",K=s==="mouseout"||s==="pointerout",G&&l!==Yi&&(St=l.relatedTarget||l.fromElement)&&(Fi(St)||St[kn]))break t;if((K||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,K?(St=l.relatedTarget||l.toElement,K=q,St=St?Fi(St):null,St!==null&&(ee=o(St),vt=St.tag,St!==ee||vt!==5&&vt!==27&&vt!==6)&&(St=null)):(K=null,St=q),K!==St)){if(vt=Un,tt="onMouseLeave",B="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(vt=Ol,tt="onPointerLeave",B="onPointerEnter",z="pointer"),ee=K==null?G:ui(K),H=St==null?G:ui(St),G=new vt(tt,z+"leave",K,l,J),G.target=ee,G.relatedTarget=H,tt=null,Fi(J)===q&&(vt=new vt(B,z+"enter",St,l,J),vt.target=H,vt.relatedTarget=ee,tt=vt),ee=tt,K&&St)e:{for(vt=K,B=St,z=0,H=vt;H;H=Co(H))z++;for(H=0,tt=B;tt;tt=Co(tt))H++;for(;0<z-H;)vt=Co(vt),z--;for(;0<H-z;)B=Co(B),H--;for(;z--;){if(vt===B||B!==null&&vt===B.alternate)break e;vt=Co(vt),B=Co(B)}vt=null}else vt=null;K!==null&&jb(nt,G,K,vt,!1),St!==null&&ee!==null&&jb(nt,ee,St,vt,!0)}}t:{if(G=q?ui(q):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var dt=s_;else if(Me(G))if(r_)dt=ax;else{dt=sx;var Dt=ix}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&wl(q.elementType)&&(dt=s_):dt=rx;if(dt&&(dt=dt(s,q))){Wi(nt,dt,l,J);break t}Dt&&Dt(s,G,q),s==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Ps(G,"number",G.value)}switch(Dt=q?ui(q):window,s){case"focusin":(Me(Dt)||Dt.contentEditable==="true")&&(io=Dt,Hd=q,Pl=null);break;case"focusout":Pl=Hd=io=null;break;case"mousedown":qd=!0;break;case"contextmenu":case"mouseup":case"dragend":qd=!1,d_(nt,l,J);break;case"selectionchange":if(lx)break;case"keydown":case"keyup":d_(nt,l,J)}var pt;if(yi)t:{switch(s){case"compositionstart":var Et="onCompositionStart";break t;case"compositionend":Et="onCompositionEnd";break t;case"compositionupdate":Et="onCompositionUpdate";break t}Et=void 0}else Lt?X(s,l)&&(Et="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Et="onCompositionStart");Et&&(E&&l.locale!=="ko"&&(Lt||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Lt&&(pt=Rl()):(di=J,Vs="value"in di?di.value:di.textContent,Lt=!0)),Dt=Mh(q,Et),0<Dt.length&&(Et=new Dl(Et,s,null,l,J),nt.push({event:Et,listeners:Dt}),pt?Et.data=pt:(pt=ct(l),pt!==null&&(Et.data=pt)))),(pt=_?De(s,l):Ut(s,l))&&(Et=Mh(q,"onBeforeInput"),0<Et.length&&(Dt=new Dl("onBeforeInput","beforeinput",null,l,J),nt.push({event:Dt,listeners:Et}),Dt.data=pt)),qx(nt,s,q,l,J)}Lb(nt,a)})}function cc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Mh(s,a){for(var l=a+"Capture",u=[];s!==null;){var m=s,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Kr(s,l),m!=null&&u.unshift(cc(s,m,p)),m=Kr(s,a),m!=null&&u.push(cc(s,m,p))),s.tag===3)return u;s=s.return}return[]}function Co(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function jb(s,a,l,u,m){for(var p=a._reactName,T=[];l!==null&&l!==u;){var A=l,P=A.alternate,q=A.stateNode;if(A=A.tag,P!==null&&P===u)break;A!==5&&A!==26&&A!==27||q===null||(P=q,m?(q=Kr(l,p),q!=null&&T.unshift(cc(l,q,P))):m||(q=Kr(l,p),q!=null&&T.push(cc(l,q,P)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var Qx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function zb(s){return(typeof s=="string"?s:""+s).replace(Qx,`
`).replace($x,"")}function Bb(s,a){return a=zb(a),zb(s)===a}function Oh(){}function te(s,a,l,u,m,p){switch(l){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||Pn(s,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&Pn(s,""+u);break;case"className":hi(s,"class",u);break;case"tabIndex":hi(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(s,l,u);break;case"style":Al(s,u,p);break;case"data":if(a!=="object"){hi(s,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Qa(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(a!=="input"&&te(s,a,"name",m.name,m,null),te(s,a,"formEncType",m.formEncType,m,null),te(s,a,"formMethod",m.formMethod,m,null),te(s,a,"formTarget",m.formTarget,m,null)):(te(s,a,"encType",m.encType,m,null),te(s,a,"method",m.method,m,null),te(s,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Qa(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Oh);break;case"onScroll":u!=null&&Ot("scroll",s);break;case"onScrollEnd":u!=null&&Ot("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Qa(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Ot("beforetoggle",s),Ot("toggle",s),ks(s,"popover",u);break;case"xlinkActuate":qe(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qe(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qe(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qe(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qe(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qe(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qe(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qe(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qe(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ks(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Vd.get(l)||l,ks(s,l,u))}}function dm(s,a,l,u,m,p){switch(l){case"style":Al(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Pn(s,u):(typeof u=="number"||typeof u=="bigint")&&Pn(s,""+u);break;case"onScroll":u!=null&&Ot("scroll",s);break;case"onScrollEnd":u!=null&&Ot("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ha.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),p=s[Ee]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(a,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,u,m);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):ks(s,l,u)}}}function Qe(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",s),Ot("load",s);var u=!1,m=!1,p;for(p in l)if(l.hasOwnProperty(p)){var T=l[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:te(s,a,p,T,l,null)}}m&&te(s,a,"srcSet",l.srcSet,l,null),u&&te(s,a,"src",l.src,l,null);return;case"input":Ot("invalid",s);var A=p=T=m=null,P=null,q=null;for(u in l)if(l.hasOwnProperty(u)){var J=l[u];if(J!=null)switch(u){case"name":m=J;break;case"type":T=J;break;case"checked":P=J;break;case"defaultChecked":q=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:te(s,a,u,J,l,null)}}qr(s,p,A,P,q,T,m,!1),Ka(s);return;case"select":Ot("invalid",s),u=T=p=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":p=A;break;case"defaultValue":T=A;break;case"multiple":u=A;default:te(s,a,m,A,l,null)}a=p,l=T,s.multiple=!!u,a!=null?Gi(s,!!u,a,!1):l!=null&&Gi(s,!!u,l,!0);return;case"textarea":Ot("invalid",s),p=m=u=null;for(T in l)if(l.hasOwnProperty(T)&&(A=l[T],A!=null))switch(T){case"value":u=A;break;case"defaultValue":m=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:te(s,a,T,A,l,null)}Gr(s,u,m,p),Ka(s);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(u=l[P],u!=null))switch(P){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(s,a,P,u,l,null)}return;case"dialog":Ot("beforetoggle",s),Ot("toggle",s),Ot("cancel",s),Ot("close",s);break;case"iframe":case"object":Ot("load",s);break;case"video":case"audio":for(u=0;u<lc.length;u++)Ot(lc[u],s);break;case"image":Ot("error",s),Ot("load",s);break;case"details":Ot("toggle",s);break;case"embed":case"source":case"link":Ot("error",s),Ot("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in l)if(l.hasOwnProperty(q)&&(u=l[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:te(s,a,q,u,l,null)}return;default:if(wl(a)){for(J in l)l.hasOwnProperty(J)&&(u=l[J],u!==void 0&&dm(s,a,J,u,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(u=l[A],u!=null&&te(s,a,A,u,l,null))}function Xx(s,a,l,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,T=null,A=null,P=null,q=null,J=null;for(K in l){var nt=l[K];if(l.hasOwnProperty(K)&&nt!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=nt;default:u.hasOwnProperty(K)||te(s,a,K,null,u,nt)}}for(var G in u){var K=u[G];if(nt=l[G],u.hasOwnProperty(G)&&(K!=null||nt!=null))switch(G){case"type":p=K;break;case"name":m=K;break;case"checked":q=K;break;case"defaultChecked":J=K;break;case"value":T=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:K!==nt&&te(s,a,G,K,u,nt)}}Sn(s,T,A,P,q,J,p,m);return;case"select":K=T=A=G=null;for(p in l)if(P=l[p],l.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":K=P;default:u.hasOwnProperty(p)||te(s,a,p,null,u,P)}for(m in u)if(p=u[m],P=l[m],u.hasOwnProperty(m)&&(p!=null||P!=null))switch(m){case"value":G=p;break;case"defaultValue":A=p;break;case"multiple":T=p;default:p!==P&&te(s,a,m,p,u,P)}a=A,l=T,u=K,G!=null?Gi(s,!!l,G,!1):!!u!=!!l&&(a!=null?Gi(s,!!l,a,!0):Gi(s,!!l,l?[]:"",!1));return;case"textarea":K=G=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:te(s,a,A,null,u,m)}for(T in u)if(m=u[T],p=l[T],u.hasOwnProperty(T)&&(m!=null||p!=null))switch(T){case"value":G=m;break;case"defaultValue":K=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==p&&te(s,a,T,m,u,p)}Zt(s,G,K);return;case"option":for(var St in l)if(G=l[St],l.hasOwnProperty(St)&&G!=null&&!u.hasOwnProperty(St))switch(St){case"selected":s.selected=!1;break;default:te(s,a,St,null,u,G)}for(P in u)if(G=u[P],K=l[P],u.hasOwnProperty(P)&&G!==K&&(G!=null||K!=null))switch(P){case"selected":s.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:te(s,a,P,G,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in l)G=l[vt],l.hasOwnProperty(vt)&&G!=null&&!u.hasOwnProperty(vt)&&te(s,a,vt,null,u,G);for(q in u)if(G=u[q],K=l[q],u.hasOwnProperty(q)&&G!==K&&(G!=null||K!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,a));break;default:te(s,a,q,G,u,K)}return;default:if(wl(a)){for(var ee in l)G=l[ee],l.hasOwnProperty(ee)&&G!==void 0&&!u.hasOwnProperty(ee)&&dm(s,a,ee,void 0,u,G);for(J in u)G=u[J],K=l[J],!u.hasOwnProperty(J)||G===K||G===void 0&&K===void 0||dm(s,a,J,G,u,K);return}}for(var B in l)G=l[B],l.hasOwnProperty(B)&&G!=null&&!u.hasOwnProperty(B)&&te(s,a,B,null,u,G);for(nt in u)G=u[nt],K=l[nt],!u.hasOwnProperty(nt)||G===K||G==null&&K==null||te(s,a,nt,G,u,K)}var gm=null,mm=null;function Nh(s){return s.nodeType===9?s:s.ownerDocument}function Fb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hb(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function pm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ym=null;function Wx(){var s=window.event;return s&&s.type==="popstate"?s===ym?!1:(ym=s,!0):(ym=null,!1)}var qb=typeof setTimeout=="function"?setTimeout:void 0,Zx=typeof clearTimeout=="function"?clearTimeout:void 0,Gb=typeof Promise=="function"?Promise:void 0,Jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Gb<"u"?function(s){return Gb.resolve(null).then(s).catch(tR)}:qb;function tR(s){setTimeout(function(){throw s})}function Zs(s){return s==="head"}function Yb(s,a){var l=a,u=0,m=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var T=s.ownerDocument;if(l&1&&uc(T.documentElement),l&2&&uc(T.body),l&4)for(l=T.head,uc(l),T=l.firstChild;T;){var A=T.nextSibling,P=T.nodeName;T[zr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&T.rel.toLowerCase()==="stylesheet"||l.removeChild(T),T=A}}if(m===0){s.removeChild(p),_c(a);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);_c(a)}function _m(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":_m(l),Ns(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function eR(s,a,l,u){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[zr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=ii(s.nextSibling),s===null)break}return null}function nR(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ii(s.nextSibling),s===null))return null;return s}function vm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function iR(s,a){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")a();else{var u=function(){a(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ii(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var bm=null;function Kb(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return s;a--}else l==="/$"&&a++}s=s.previousSibling}return null}function Qb(s,a,l){switch(a=Nh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function uc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Ns(s)}var Gn=new Map,$b=new Set;function kh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var us=lt.d;lt.d={f:sR,r:rR,D:aR,C:oR,L:lR,m:cR,X:hR,S:uR,M:fR};function sR(){var s=us.f(),a=wh();return s||a}function rR(s){var a=ci(s);a!==null&&a.tag===5&&a.type==="form"?mv(a):us.r(s)}var Io=typeof document>"u"?null:document;function Xb(s,a,l){var u=Io;if(u&&typeof a=="string"&&a){var m=Te(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),$b.has(m)||($b.add(m),s={rel:s,crossOrigin:l,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),Qe(a,"link",s),pe(a),u.head.appendChild(a)))}}function aR(s){us.D(s),Xb("dns-prefetch",s,null)}function oR(s,a){us.C(s,a),Xb("preconnect",s,a)}function lR(s,a,l){us.L(s,a,l);var u=Io;if(u&&s&&a){var m='link[rel="preload"][as="'+Te(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Te(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Te(l.imageSizes)+'"]')):m+='[href="'+Te(s)+'"]';var p=m;switch(a){case"style":p=Do(s);break;case"script":p=Mo(s)}Gn.has(p)||(s=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),Gn.set(p,s),u.querySelector(m)!==null||a==="style"&&u.querySelector(hc(p))||a==="script"&&u.querySelector(fc(p))||(a=u.createElement("link"),Qe(a,"link",s),pe(a),u.head.appendChild(a)))}}function cR(s,a){us.m(s,a);var l=Io;if(l&&s){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Te(u)+'"][href="'+Te(s)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Mo(s)}if(!Gn.has(p)&&(s=y({rel:"modulepreload",href:s},a),Gn.set(p,s),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(fc(p)))return}u=l.createElement("link"),Qe(u,"link",s),pe(u),l.head.appendChild(u)}}}function uR(s,a,l){us.S(s,a,l);var u=Io;if(u&&s){var m=hn(u).hoistableStyles,p=Do(s);a=a||"default";var T=m.get(p);if(!T){var A={loading:0,preload:null};if(T=u.querySelector(hc(p)))A.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},l),(l=Gn.get(p))&&Em(s,l);var P=T=u.createElement("link");pe(P),Qe(P,"link",s),P._p=new Promise(function(q,J){P.onload=q,P.onerror=J}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ph(T,a,u)}T={type:"stylesheet",instance:T,count:1,state:A},m.set(p,T)}}}function hR(s,a){us.X(s,a);var l=Io;if(l&&s){var u=hn(l).hoistableScripts,m=Mo(s),p=u.get(m);p||(p=l.querySelector(fc(m)),p||(s=y({src:s,async:!0},a),(a=Gn.get(m))&&Tm(s,a),p=l.createElement("script"),pe(p),Qe(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function fR(s,a){us.M(s,a);var l=Io;if(l&&s){var u=hn(l).hoistableScripts,m=Mo(s),p=u.get(m);p||(p=l.querySelector(fc(m)),p||(s=y({src:s,async:!0,type:"module"},a),(a=Gn.get(m))&&Tm(s,a),p=l.createElement("script"),pe(p),Qe(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function Wb(s,a,l,u){var m=(m=_t.current)?kh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Do(l.href),l=hn(m).hoistableStyles,u=l.get(a),u||(u={type:"style",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Do(l.href);var p=hn(m).hoistableStyles,T=p.get(s);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,T),(p=m.querySelector(hc(s)))&&!p._p&&(T.instance=p,T.state.loading=5),Gn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gn.set(s,l),p||dR(m,s,l,T.state))),a&&u===null)throw Error(i(528,""));return T}if(a&&u!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Mo(l),l=hn(m).hoistableScripts,u=l.get(a),u||(u={type:"script",instance:null,count:0,state:null},l.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Do(s){return'href="'+Te(s)+'"'}function hc(s){return'link[rel="stylesheet"]['+s+"]"}function Zb(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function dR(s,a,l,u){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=s.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),Qe(a,"link",l),pe(a),s.head.appendChild(a))}function Mo(s){return'[src="'+Te(s)+'"]'}function fc(s){return"script[async]"+s}function Jb(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var u=s.querySelector('style[data-href~="'+Te(l.href)+'"]');if(u)return a.instance=u,pe(u),u;var m=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pe(u),Qe(u,"style",m),Ph(u,l.precedence,s),a.instance=u;case"stylesheet":m=Do(l.href);var p=s.querySelector(hc(m));if(p)return a.state.loading|=4,a.instance=p,pe(p),p;u=Zb(l),(m=Gn.get(m))&&Em(u,m),p=(s.ownerDocument||s).createElement("link"),pe(p);var T=p;return T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),Qe(p,"link",u),a.state.loading|=4,Ph(p,l.precedence,s),a.instance=p;case"script":return p=Mo(l.src),(m=s.querySelector(fc(p)))?(a.instance=m,pe(m),m):(u=l,(m=Gn.get(p))&&(u=y({},l),Tm(u,m)),s=s.ownerDocument||s,m=s.createElement("script"),pe(m),Qe(m,"link",u),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,Ph(u,l.precedence,s));return a.instance}function Ph(s,a,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,T=0;T<u.length;T++){var A=u[T];if(A.dataset.precedence===a)p=A;else if(p!==m)break}p?p.parentNode.insertBefore(s,p.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Em(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Tm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Vh=null;function t0(s,a,l){if(Vh===null){var u=new Map,m=Vh=new Map;m.set(l,u)}else m=Vh,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var p=l[m];if(!(p[zr]||p[Ie]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(a)||"";T=s+T;var A=u.get(T);A?A.push(p):u.set(T,[p])}}return u}function e0(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function gR(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function n0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var dc=null;function mR(){}function pR(s,a,l){if(dc===null)throw Error(i(475));var u=dc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Do(l.href),p=s.querySelector(hc(m));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Lh.bind(u),s.then(u,u)),a.state.loading|=4,a.instance=p,pe(p);return}p=s.ownerDocument||s,l=Zb(l),(m=Gn.get(m))&&Em(l,m),p=p.createElement("link"),pe(p);var T=p;T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),Qe(p,"link",l),a.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(u.count++,a=Lh.bind(u),s.addEventListener("load",a),s.addEventListener("error",a))}}function yR(){if(dc===null)throw Error(i(475));var s=dc;return s.stylesheets&&s.count===0&&Sm(s,s.stylesheets),0<s.count?function(a){var l=setTimeout(function(){if(s.stylesheets&&Sm(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Lh(){if(this.count--,this.count===0){if(this.stylesheets)Sm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Uh=null;function Sm(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Uh=new Map,a.forEach(_R,s),Uh=null,Lh.call(s))}function _R(s,a){if(!(a.state.loading&4)){var l=Uh.get(s);if(l)var u=l.get(null);else{l=new Map,Uh.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var T=m[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}m=a.instance,T=m.getAttribute("data-precedence"),p=l.get(T)||u,p===u&&l.set(null,m),l.set(T,m),this.count++,u=Lh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var gc={$$typeof:$,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function vR(s,a,l,u,m,p,T,A){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function i0(s,a,l,u,m,p,T,A,P,q,J,nt){return s=new vR(s,a,l,T,A,P,q,nt),a=1,p===!0&&(a|=24),p=wn(3,null,null,a),s.current=p,p.stateNode=s,a=sg(),a.refCount++,s.pooledCache=a,a.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:a},lg(p),s}function s0(s){return s?(s=oo,s):oo}function r0(s,a,l,u,m,p){m=s0(m),u.context===null?u.context=m:u.pendingContext=m,u=js(a),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=zs(s,u,a),l!==null&&(Dn(l,s,a),ql(l,s,a))}function a0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Am(s,a){a0(s,a),(s=s.alternate)&&a0(s,a)}function o0(s){if(s.tag===13){var a=ao(s,67108864);a!==null&&Dn(a,s,67108864),Am(s,67108864)}}var jh=!0;function bR(s,a,l,u){var m=Q.T;Q.T=null;var p=lt.p;try{lt.p=2,wm(s,a,l,u)}finally{lt.p=p,Q.T=m}}function ER(s,a,l,u){var m=Q.T;Q.T=null;var p=lt.p;try{lt.p=8,wm(s,a,l,u)}finally{lt.p=p,Q.T=m}}function wm(s,a,l,u){if(jh){var m=xm(u);if(m===null)fm(s,a,u,zh,l),c0(s,u);else if(SR(m,s,a,l,u))u.stopPropagation();else if(c0(s,u),a&4&&-1<TR.indexOf(s)){for(;m!==null;){var p=ci(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Zn(p.pendingLanes);if(T!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var P=1<<31-Je(T);A.entanglements[1]|=P,T&=~P}Si(p),($t&6)===0&&(Sh=Nn()+500,oc(0))}}break;case 13:A=ao(p,2),A!==null&&Dn(A,p,2),wh(),Am(p,2)}if(p=xm(u),p===null&&fm(s,a,u,zh,l),p===m)break;m=p}m!==null&&u.stopPropagation()}else fm(s,a,u,null,l)}}function xm(s){return s=Vn(s),Rm(s)}var zh=null;function Rm(s){if(zh=null,s=Fi(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return zh=s,null}function l0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dd()){case fl:return 2;case ja:return 8;case Pr:case Md:return 32;case za:return 268435456;default:return 32}default:return 32}}var Cm=!1,Js=null,tr=null,er=null,mc=new Map,pc=new Map,nr=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c0(s,a){switch(s){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":mc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(a.pointerId)}}function yc(s,a,l,u,m,p){return s===null||s.nativeEvent!==p?(s={blockedOn:a,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},a!==null&&(a=ci(a),a!==null&&o0(a)),s):(s.eventSystemFlags|=u,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function SR(s,a,l,u,m){switch(a){case"focusin":return Js=yc(Js,s,a,l,u,m),!0;case"dragenter":return tr=yc(tr,s,a,l,u,m),!0;case"mouseover":return er=yc(er,s,a,l,u,m),!0;case"pointerover":var p=m.pointerId;return mc.set(p,yc(mc.get(p)||null,s,a,l,u,m)),!0;case"gotpointercapture":return p=m.pointerId,pc.set(p,yc(pc.get(p)||null,s,a,l,u,m)),!0}return!1}function u0(s){var a=Fi(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,wu(s.priority,function(){if(l.tag===13){var u=In();u=Ds(u);var m=ao(l,u);m!==null&&Dn(m,l,u),Am(l,u)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Bh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=xm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Yi=u,l.target.dispatchEvent(u),Yi=null}else return a=ci(l),a!==null&&o0(a),s.blockedOn=l,!1;a.shift()}return!0}function h0(s,a,l){Bh(s)&&l.delete(a)}function AR(){Cm=!1,Js!==null&&Bh(Js)&&(Js=null),tr!==null&&Bh(tr)&&(tr=null),er!==null&&Bh(er)&&(er=null),mc.forEach(h0),pc.forEach(h0)}function Fh(s,a){s.blockedOn===a&&(s.blockedOn=null,Cm||(Cm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AR)))}var Hh=null;function f0(s){Hh!==s&&(Hh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hh===s&&(Hh=null);for(var a=0;a<s.length;a+=3){var l=s[a],u=s[a+1],m=s[a+2];if(typeof u!="function"){if(Rm(u||l)===null)continue;break}var p=ci(l);p!==null&&(s.splice(a,3),a-=3,Rg(p,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function _c(s){function a(P){return Fh(P,s)}Js!==null&&Fh(Js,s),tr!==null&&Fh(tr,s),er!==null&&Fh(er,s),mc.forEach(a),pc.forEach(a);for(var l=0;l<nr.length;l++){var u=nr[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<nr.length&&(l=nr[0],l.blockedOn===null);)u0(l),l.blockedOn===null&&nr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],p=l[u+1],T=m[Ee]||null;if(typeof p=="function")T||f0(l);else if(T){var A=null;if(p&&p.hasAttribute("formAction")){if(m=p,T=p[Ee]||null)A=T.formAction;else if(Rm(m)!==null)continue}else A=T.action;typeof A=="function"?l[u+1]=A:(l.splice(u,3),u-=3),f0(l)}}}function Im(s){this._internalRoot=s}qh.prototype.render=Im.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,u=In();r0(l,u,s,a,null,null)},qh.prototype.unmount=Im.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;r0(s.current,2,null,s,null,null),wh(),a[kn]=null}};function qh(s){this._internalRoot=s}qh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ms();s={blockedOn:null,target:s,priority:a};for(var l=0;l<nr.length&&a!==0&&a<nr[l].priority;l++);nr.splice(l,0,s),l===0&&u0(s)}};var d0=t.version;if(d0!=="19.1.1")throw Error(i(527,d0,"19.1.1"));lt.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var wR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{de=Gh.inject(wR),Qt=Gh}catch{}}return bc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,u="",m=Iv,p=Dv,T=Mv,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(A=a.unstable_transitionCallbacks)),a=i0(s,1,!1,null,null,l,u,m,p,T,A,null),s[kn]=a.current,hm(s),new Im(a)},bc.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var u=!1,m="",p=Iv,T=Dv,A=Mv,P=null,q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&(q=l.formState)),a=i0(s,1,!0,a,l??null,u,m,p,T,A,P,q),a.context=s0(null),l=a.current,u=In(),u=Ds(u),m=js(u),m.callback=null,zs(l,m,u),l=u,a.current.lanes=l,Bi(a,l),Si(a),s[kn]=a.current,hm(s),new qh(a)},bc.version="19.1.1",bc}var S0;function VR(){if(S0)return Om.exports;S0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Om.exports=PR(),Om.exports}var LR=VR();const UR=()=>{};var A0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},jR=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],h=n[e++],f=((r&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},mS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,h=c?n[r+1]:0,f=r+2<n.length,g=f?n[r+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let b=(h&15)<<2|g>>6,S=g&63;f||(S=64,c||(b=64)),i.push(e[y],e[v],e[b],e[S])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(gS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):jR(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],h=r<n.length?e[n.charAt(r)]:0;++r;const g=r<n.length?e[n.charAt(r)]:64;++r;const v=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||h==null||g==null||v==null)throw new zR;const b=o<<2|h>>4;if(i.push(b),g!==64){const S=h<<4&240|g>>2;if(i.push(S),v!==64){const x=g<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BR=function(n){const t=gS(n);return mS.encodeByteArray(t,!0)},Cf=function(n){return BR(n).replace(/\./g,"")},pS=function(n){try{return mS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=()=>FR().__FIREBASE_DEFAULTS__,qR=()=>{if(typeof process>"u"||typeof A0>"u")return;const n=A0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&pS(n[1]);return t&&JSON.parse(t)},nd=()=>{try{return UR()||HR()||qR()||GR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yS=n=>nd()?.emulatorHosts?.[n],YR=n=>{const t=yS(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},_S=()=>nd()?.config,vS=n=>nd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Cf(JSON.stringify(e)),Cf(JSON.stringify(c)),""].join(".")}const Pc={};function $R(){const n={prod:[],emulator:[]};for(const t of Object.keys(Pc))Pc[t]?n.emulator.push(t):n.prod.push(t);return n}function XR(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let w0=!1;function ES(n,t){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||Pc[n]===t||Pc[n]||w0)return;Pc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=$R().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,S){b.setAttribute("width","24"),b.setAttribute("id",S),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{w0=!0,c()},b}function y(b,S){b.setAttribute("id",S),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=XR(i),S=e("text"),x=document.getElementById(S)||document.createElement("span"),D=e("learnmore"),M=document.getElementById(D)||document.createElement("a"),j=e("preprendIcon"),W=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;h($),y(M,D);const rt=g();f(W,j),$.append(W,x,M,rt),document.body.appendChild($)}o?(x.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function ZR(){const n=nd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nC(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iC(){return!ZR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sC(){try{return typeof indexedDB=="object"}catch{return!1}}function rC(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{t(r.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="FirebaseError";class xs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=aC,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?oC(o,i):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new xs(r,h,i)}}function oC(n,t){return n.replace(lC,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const lC=/\{\$([^}]+)}/g;function cC(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ca(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(x0(o)&&x0(c)){if(!Ca(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function x0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function uC(n,t){const e=new hC(n,t);return e.subscribe.bind(e)}class hC{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");fC(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Vm),r.error===void 0&&(r.error=Vm),r.complete===void 0&&(r.complete=Vm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fC(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(n){return n&&n._delegate?n._delegate:n}class Ia{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new KR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(mC(t))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=_a){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=_a){return this.instances.has(t)}getOptions(t=_a){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(r)}return r}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gC(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=_a){return this.component?this.component.multipleInstances?t:_a:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gC(n){return n===_a?void 0:n}function mC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new dC(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(kt||(kt={}));const yC={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},_C=kt.INFO,vC={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},bC=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=vC[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fp{constructor(t){this.name=t,this._logLevel=_C,this._logHandler=bC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?yC[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const EC=(n,t)=>t.some(e=>n instanceof e);let R0,C0;function TC(){return R0||(R0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SC(){return C0||(C0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,rp=new WeakMap,SS=new WeakMap,Lm=new WeakMap,Hp=new WeakMap;function AC(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(fr(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&TS.set(e,n)}).catch(()=>{}),Hp.set(t,n),t}function wC(n){if(rp.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});rp.set(n,t)}let ap={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return rp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||SS.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return fr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function xC(n){ap=n(ap)}function RC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(Um(this),t,...e);return SS.set(i,t.sort?t.sort():[t]),fr(i)}:SC().includes(n)?function(...t){return n.apply(Um(this),t),fr(TS.get(this))}:function(...t){return fr(n.apply(Um(this),t))}}function CC(n){return typeof n=="function"?RC(n):(n instanceof IDBTransaction&&wC(n),EC(n,TC())?new Proxy(n,ap):n)}function fr(n){if(n instanceof IDBRequest)return AC(n);if(Lm.has(n))return Lm.get(n);const t=CC(n);return t!==n&&(Lm.set(n,t),Hp.set(t,n)),t}const Um=n=>Hp.get(n);function IC(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),h=fr(c);return i&&c.addEventListener("upgradeneeded",f=>{i(fr(c.result),f.oldVersion,f.newVersion,fr(c.transaction),f)}),e&&c.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",g=>r(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const DC=["get","getKey","getAll","getAllKeys","count"],MC=["put","add","delete","clear"],jm=new Map;function I0(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(jm.get(t))return jm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=MC.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DC.includes(e)))return;const o=async function(c,...h){const f=this.transaction(c,r?"readwrite":"readonly");let g=f.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[e](...h),r&&f.done]))[0]};return jm.set(t,o),o}xC(n=>({...n,get:(t,e,i)=>I0(t,e)||n.get(t,e,i),has:(t,e)=>!!I0(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(NC(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function NC(n){return n.getComponent()?.type==="VERSION"}const op="@firebase/app",D0="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new Fp("@firebase/app"),kC="@firebase/app-compat",PC="@firebase/analytics-compat",VC="@firebase/analytics",LC="@firebase/app-check-compat",UC="@firebase/app-check",jC="@firebase/auth",zC="@firebase/auth-compat",BC="@firebase/database",FC="@firebase/data-connect",HC="@firebase/database-compat",qC="@firebase/functions",GC="@firebase/functions-compat",YC="@firebase/installations",KC="@firebase/installations-compat",QC="@firebase/messaging",$C="@firebase/messaging-compat",XC="@firebase/performance",WC="@firebase/performance-compat",ZC="@firebase/remote-config",JC="@firebase/remote-config-compat",tI="@firebase/storage",eI="@firebase/storage-compat",nI="@firebase/firestore",iI="@firebase/ai",sI="@firebase/firestore-compat",rI="firebase",aI="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",oI={[op]:"fire-core",[kC]:"fire-core-compat",[VC]:"fire-analytics",[PC]:"fire-analytics-compat",[UC]:"fire-app-check",[LC]:"fire-app-check-compat",[jC]:"fire-auth",[zC]:"fire-auth-compat",[BC]:"fire-rtdb",[FC]:"fire-data-connect",[HC]:"fire-rtdb-compat",[qC]:"fire-fn",[GC]:"fire-fn-compat",[YC]:"fire-iid",[KC]:"fire-iid-compat",[QC]:"fire-fcm",[$C]:"fire-fcm-compat",[XC]:"fire-perf",[WC]:"fire-perf-compat",[ZC]:"fire-rc",[JC]:"fire-rc-compat",[tI]:"fire-gcs",[eI]:"fire-gcs-compat",[nI]:"fire-fst",[sI]:"fire-fst-compat",[iI]:"fire-vertex","fire-js":"fire-js",[rI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Map,lI=new Map,cp=new Map;function M0(n,t){try{n.container.addComponent(t)}catch(e){vs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ho(n){const t=n.name;if(cp.has(t))return vs.debug(`There were multiple attempts to register component ${t}.`),!1;cp.set(t,n);for(const e of If.values())M0(e,n);for(const e of lI.values())M0(e,n);return!0}function qp(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ci(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new lu("app","Firebase",cI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=aI;function AS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:lp,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw dr.create("bad-app-name",{appName:String(r)});if(e||(e=_S()),!e)throw dr.create("no-options");const o=If.get(r);if(o){if(Ca(e,o.options)&&Ca(i,o.config))return o;throw dr.create("duplicate-app",{appName:r})}const c=new pC(r);for(const f of cp.values())c.addComponent(f);const h=new uI(e,i,c);return If.set(r,h),h}function wS(n=lp){const t=If.get(n);if(!t&&n===lp&&_S())return AS();if(!t)throw dr.create("no-app",{appName:n});return t}function gr(n,t,e){let i=oI[n]??n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const c=[`Unable to register library "${i}" with version "${t}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vs.warn(c.join(" "));return}Ho(new Ia(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="firebase-heartbeat-database",fI=1,Yc="firebase-heartbeat-store";let zm=null;function xS(){return zm||(zm=IC(hI,fI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Yc)}catch(e){console.warn(e)}}}}).catch(n=>{throw dr.create("idb-open",{originalErrorMessage:n.message})})),zm}async function dI(n){try{const e=(await xS()).transaction(Yc),i=await e.objectStore(Yc).get(RS(n));return await e.done,i}catch(t){if(t instanceof xs)vs.warn(t.message);else{const e=dr.create("idb-get",{originalErrorMessage:t?.message});vs.warn(e.message)}}}async function O0(n,t){try{const i=(await xS()).transaction(Yc,"readwrite");await i.objectStore(Yc).put(t,RS(n)),await i.done}catch(e){if(e instanceof xs)vs.warn(e.message);else{const i=dr.create("idb-set",{originalErrorMessage:e?.message});vs.warn(i.message)}}}function RS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=1024,mI=30;class pI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new _I(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=N0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>mI){const r=vI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){vs.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=N0(),{heartbeatsToSend:e,unsentEntries:i}=yI(this._heartbeatsCache.heartbeats),r=Cf(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return vs.warn(t),""}}}function N0(){return new Date().toISOString().substring(0,10)}function yI(n,t=gI){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),k0(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),k0(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class _I{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sC()?rC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await dI(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return O0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return O0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function k0(n){return Cf(JSON.stringify({version:2,heartbeats:n})).length}function vI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n){Ho(new Ia("platform-logger",t=>new OC(t),"PRIVATE")),Ho(new Ia("heartbeat",t=>new pI(t),"PRIVATE")),gr(op,D0,n),gr(op,D0,"esm2020"),gr("fire-js","")}bI("");var EI="firebase",TI="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(EI,TI,"app");var P0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mr,CS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,C){function I(){}I.prototype=C.prototype,N.D=C.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(O,V,U){for(var k=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)k[Ft-2]=arguments[Ft];return C.prototype[V].apply(O,k)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,C,I){I||(I=0);var O=Array(16);if(typeof C=="string")for(var V=0;16>V;++V)O[V]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(V=0;16>V;++V)O[V]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=N.g[0],I=N.g[1],V=N.g[2];var U=N.g[3],k=C+(U^I&(V^U))+O[0]+3614090360&4294967295;C=I+(k<<7&4294967295|k>>>25),k=U+(V^C&(I^V))+O[1]+3905402710&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(I^U&(C^I))+O[2]+606105819&4294967295,V=U+(k<<17&4294967295|k>>>15),k=I+(C^V&(U^C))+O[3]+3250441966&4294967295,I=V+(k<<22&4294967295|k>>>10),k=C+(U^I&(V^U))+O[4]+4118548399&4294967295,C=I+(k<<7&4294967295|k>>>25),k=U+(V^C&(I^V))+O[5]+1200080426&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(I^U&(C^I))+O[6]+2821735955&4294967295,V=U+(k<<17&4294967295|k>>>15),k=I+(C^V&(U^C))+O[7]+4249261313&4294967295,I=V+(k<<22&4294967295|k>>>10),k=C+(U^I&(V^U))+O[8]+1770035416&4294967295,C=I+(k<<7&4294967295|k>>>25),k=U+(V^C&(I^V))+O[9]+2336552879&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(I^U&(C^I))+O[10]+4294925233&4294967295,V=U+(k<<17&4294967295|k>>>15),k=I+(C^V&(U^C))+O[11]+2304563134&4294967295,I=V+(k<<22&4294967295|k>>>10),k=C+(U^I&(V^U))+O[12]+1804603682&4294967295,C=I+(k<<7&4294967295|k>>>25),k=U+(V^C&(I^V))+O[13]+4254626195&4294967295,U=C+(k<<12&4294967295|k>>>20),k=V+(I^U&(C^I))+O[14]+2792965006&4294967295,V=U+(k<<17&4294967295|k>>>15),k=I+(C^V&(U^C))+O[15]+1236535329&4294967295,I=V+(k<<22&4294967295|k>>>10),k=C+(V^U&(I^V))+O[1]+4129170786&4294967295,C=I+(k<<5&4294967295|k>>>27),k=U+(I^V&(C^I))+O[6]+3225465664&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^I&(U^C))+O[11]+643717713&4294967295,V=U+(k<<14&4294967295|k>>>18),k=I+(U^C&(V^U))+O[0]+3921069994&4294967295,I=V+(k<<20&4294967295|k>>>12),k=C+(V^U&(I^V))+O[5]+3593408605&4294967295,C=I+(k<<5&4294967295|k>>>27),k=U+(I^V&(C^I))+O[10]+38016083&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^I&(U^C))+O[15]+3634488961&4294967295,V=U+(k<<14&4294967295|k>>>18),k=I+(U^C&(V^U))+O[4]+3889429448&4294967295,I=V+(k<<20&4294967295|k>>>12),k=C+(V^U&(I^V))+O[9]+568446438&4294967295,C=I+(k<<5&4294967295|k>>>27),k=U+(I^V&(C^I))+O[14]+3275163606&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^I&(U^C))+O[3]+4107603335&4294967295,V=U+(k<<14&4294967295|k>>>18),k=I+(U^C&(V^U))+O[8]+1163531501&4294967295,I=V+(k<<20&4294967295|k>>>12),k=C+(V^U&(I^V))+O[13]+2850285829&4294967295,C=I+(k<<5&4294967295|k>>>27),k=U+(I^V&(C^I))+O[2]+4243563512&4294967295,U=C+(k<<9&4294967295|k>>>23),k=V+(C^I&(U^C))+O[7]+1735328473&4294967295,V=U+(k<<14&4294967295|k>>>18),k=I+(U^C&(V^U))+O[12]+2368359562&4294967295,I=V+(k<<20&4294967295|k>>>12),k=C+(I^V^U)+O[5]+4294588738&4294967295,C=I+(k<<4&4294967295|k>>>28),k=U+(C^I^V)+O[8]+2272392833&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^I)+O[11]+1839030562&4294967295,V=U+(k<<16&4294967295|k>>>16),k=I+(V^U^C)+O[14]+4259657740&4294967295,I=V+(k<<23&4294967295|k>>>9),k=C+(I^V^U)+O[1]+2763975236&4294967295,C=I+(k<<4&4294967295|k>>>28),k=U+(C^I^V)+O[4]+1272893353&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^I)+O[7]+4139469664&4294967295,V=U+(k<<16&4294967295|k>>>16),k=I+(V^U^C)+O[10]+3200236656&4294967295,I=V+(k<<23&4294967295|k>>>9),k=C+(I^V^U)+O[13]+681279174&4294967295,C=I+(k<<4&4294967295|k>>>28),k=U+(C^I^V)+O[0]+3936430074&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^I)+O[3]+3572445317&4294967295,V=U+(k<<16&4294967295|k>>>16),k=I+(V^U^C)+O[6]+76029189&4294967295,I=V+(k<<23&4294967295|k>>>9),k=C+(I^V^U)+O[9]+3654602809&4294967295,C=I+(k<<4&4294967295|k>>>28),k=U+(C^I^V)+O[12]+3873151461&4294967295,U=C+(k<<11&4294967295|k>>>21),k=V+(U^C^I)+O[15]+530742520&4294967295,V=U+(k<<16&4294967295|k>>>16),k=I+(V^U^C)+O[2]+3299628645&4294967295,I=V+(k<<23&4294967295|k>>>9),k=C+(V^(I|~U))+O[0]+4096336452&4294967295,C=I+(k<<6&4294967295|k>>>26),k=U+(I^(C|~V))+O[7]+1126891415&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~I))+O[14]+2878612391&4294967295,V=U+(k<<15&4294967295|k>>>17),k=I+(U^(V|~C))+O[5]+4237533241&4294967295,I=V+(k<<21&4294967295|k>>>11),k=C+(V^(I|~U))+O[12]+1700485571&4294967295,C=I+(k<<6&4294967295|k>>>26),k=U+(I^(C|~V))+O[3]+2399980690&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~I))+O[10]+4293915773&4294967295,V=U+(k<<15&4294967295|k>>>17),k=I+(U^(V|~C))+O[1]+2240044497&4294967295,I=V+(k<<21&4294967295|k>>>11),k=C+(V^(I|~U))+O[8]+1873313359&4294967295,C=I+(k<<6&4294967295|k>>>26),k=U+(I^(C|~V))+O[15]+4264355552&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~I))+O[6]+2734768916&4294967295,V=U+(k<<15&4294967295|k>>>17),k=I+(U^(V|~C))+O[13]+1309151649&4294967295,I=V+(k<<21&4294967295|k>>>11),k=C+(V^(I|~U))+O[4]+4149444226&4294967295,C=I+(k<<6&4294967295|k>>>26),k=U+(I^(C|~V))+O[11]+3174756917&4294967295,U=C+(k<<10&4294967295|k>>>22),k=V+(C^(U|~I))+O[2]+718787259&4294967295,V=U+(k<<15&4294967295|k>>>17),k=I+(U^(V|~C))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(V+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.u=function(N,C){C===void 0&&(C=N.length);for(var I=C-this.blockSize,O=this.B,V=this.h,U=0;U<C;){if(V==0)for(;U<=I;)r(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<C;)if(O[V++]=N.charCodeAt(U++),V==this.blockSize){r(this,O),V=0;break}}else for(;U<C;)if(O[V++]=N[U++],V==this.blockSize){r(this,O),V=0;break}}this.h=V,this.o+=C},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;var I=8*this.o;for(C=N.length-8;C<N.length;++C)N[C]=I&255,I/=256;for(this.u(N),N=Array(16),C=I=0;4>C;++C)for(var O=0;32>O;O+=8)N[I++]=this.g[C]>>>O&255;return N};function o(N,C){var I=h;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=C(N)}function c(N,C){this.h=C;for(var I=[],O=!0,V=N.length-1;0<=V;V--){var U=N[V]|0;O&&U==C||(I[V]=U,O=!1)}this.g=I}var h={};function f(N){return-128<=N&&128>N?o(N,function(C){return new c([C|0],0>C?-1:0)}):new c([N|0],0>N?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return M(g(-N));for(var C=[],I=1,O=0;N>=I;O++)C[O]=N/I|0,I*=4294967296;return new c(C,0)}function y(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return M(y(N.substring(1),C));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(C,8)),O=v,V=0;V<N.length;V+=8){var U=Math.min(8,N.length-V),k=parseInt(N.substring(V,V+U),C);8>U?(U=g(Math.pow(C,U)),O=O.j(U).add(g(k))):(O=O.j(I),O=O.add(g(k)))}return O}var v=f(0),b=f(1),S=f(16777216);n=c.prototype,n.m=function(){if(D(this))return-M(this).m();for(var N=0,C=1,I=0;I<this.g.length;I++){var O=this.i(I);N+=(0<=O?O:4294967296+O)*C,C*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(D(this))return"-"+M(this).toString(N);for(var C=g(Math.pow(N,6)),I=this,O="";;){var V=rt(I,C).g;I=j(I,V.j(C));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=V,x(I))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function D(N){return N.h==-1}n.l=function(N){return N=j(this,N),D(N)?-1:x(N)?0:1};function M(N){for(var C=N.g.length,I=[],O=0;O<C;O++)I[O]=~N.g[O];return new c(I,~N.h).add(b)}n.abs=function(){return D(this)?M(this):this},n.add=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],O=0,V=0;V<=C;V++){var U=O+(this.i(V)&65535)+(N.i(V)&65535),k=(U>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);O=k>>>16,U&=65535,k&=65535,I[V]=k<<16|U}return new c(I,I[I.length-1]&-2147483648?-1:0)};function j(N,C){return N.add(M(C))}n.j=function(N){if(x(this)||x(N))return v;if(D(this))return D(N)?M(this).j(M(N)):M(M(this).j(N));if(D(N))return M(this.j(M(N)));if(0>this.l(S)&&0>N.l(S))return g(this.m()*N.m());for(var C=this.g.length+N.g.length,I=[],O=0;O<2*C;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<N.g.length;V++){var U=this.i(O)>>>16,k=this.i(O)&65535,Ft=N.i(V)>>>16,bt=N.i(V)&65535;I[2*O+2*V]+=k*bt,W(I,2*O+2*V),I[2*O+2*V+1]+=U*bt,W(I,2*O+2*V+1),I[2*O+2*V+1]+=k*Ft,W(I,2*O+2*V+1),I[2*O+2*V+2]+=U*Ft,W(I,2*O+2*V+2)}for(O=0;O<C;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=C;O<2*C;O++)I[O]=0;return new c(I,0)};function W(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function $(N,C){this.g=N,this.h=C}function rt(N,C){if(x(C))throw Error("division by zero");if(x(N))return new $(v,v);if(D(N))return C=rt(M(N),C),new $(M(C.g),M(C.h));if(D(C))return C=rt(N,M(C)),new $(M(C.g),C.h);if(30<N.g.length){if(D(N)||D(C))throw Error("slowDivide_ only works with positive integers.");for(var I=b,O=C;0>=O.l(N);)I=Z(I),O=Z(O);var V=ot(I,1),U=ot(O,1);for(O=ot(O,2),I=ot(I,2);!x(O);){var k=U.add(O);0>=k.l(N)&&(V=V.add(I),U=k),O=ot(O,1),I=ot(I,1)}return C=j(N,V.j(C)),new $(V,C)}for(V=v;0<=N.l(C);){for(I=Math.max(1,Math.floor(N.m()/C.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=g(I),k=U.j(C);D(k)||0<k.l(N);)I-=O,U=g(I),k=U.j(C);x(U)&&(U=b),V=V.add(U),N=j(N,k)}return new $(V,N)}n.A=function(N){return rt(this,N).h},n.and=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],O=0;O<C;O++)I[O]=this.i(O)&N.i(O);return new c(I,this.h&N.h)},n.or=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],O=0;O<C;O++)I[O]=this.i(O)|N.i(O);return new c(I,this.h|N.h)},n.xor=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],O=0;O<C;O++)I[O]=this.i(O)^N.i(O);return new c(I,this.h^N.h)};function Z(N){for(var C=N.g.length+1,I=[],O=0;O<C;O++)I[O]=N.i(O)<<1|N.i(O-1)>>>31;return new c(I,N.h)}function ot(N,C){var I=C>>5;C%=32;for(var O=N.g.length-I,V=[],U=0;U<O;U++)V[U]=0<C?N.i(U+I)>>>C|N.i(U+I+1)<<32-C:N.i(U+I);return new c(V,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,mr=c}).apply(typeof P0<"u"?P0:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IS,Rc,DS,gf,up,MS,OS,NS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function e(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function r(d,_){if(_)t:{var E=i;d=d.split(".");for(var R=0;R<d.length-1;R++){var F=d[R];if(!(F in E))break t;E=E[F]}d=d[d.length-1],R=E[d],_=_(R),_!=R&&_!=null&&t(E,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var E=0,R=!1,F={next:function(){if(!R&&E<d.length){var X=E++;return{value:_(X,d[X]),done:!1}}return R=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(d){return d||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function f(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function g(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function y(d,_,E){return d.call.apply(d.bind,arguments)}function v(d,_,E){if(!d)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,R),d.apply(_,F)}}return function(){return d.apply(_,arguments)}}function b(d,_,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function S(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function x(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(R,F,X){for(var ct=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)ct[Lt-2]=arguments[Lt];return _.prototype[F].apply(R,ct)}}function D(d){const _=d.length;if(0<_){const E=Array(_);for(let R=0;R<_;R++)E[R]=d[R];return E}return[]}function M(d,_){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(f(R)){const F=d.length||0,X=R.length||0;d.length=F+X;for(let ct=0;ct<X;ct++)d[F+ct]=R[ct]}else d.push(R)}}class j{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function W(d){return/^[\s\xa0]*$/.test(d)}function $(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function rt(d){return rt[" "](d),d}rt[" "]=function(){};var Z=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ot(d,_,E){for(const R in d)_.call(E,d[R],R,d)}function N(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function C(d){const _={};for(const E in d)_[E]=d[E];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,_){let E,R;for(let F=1;F<arguments.length;F++){R=arguments[F];for(E in R)d[E]=R[E];for(let X=0;X<I.length;X++)E=I[X],Object.prototype.hasOwnProperty.call(R,E)&&(d[E]=R[E])}}function V(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function U(d){h.setTimeout(()=>{throw d},0)}function k(){var d=Nt;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class Ft{constructor(){this.h=this.g=null}add(_,E){const R=bt.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var bt=new j(()=>new Q,d=>d.reset());class Q{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,mt=!1,Nt=new Ft,L=()=>{const d=h.Promise.resolve(void 0);lt=()=>{d.then(st)}};var st=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(E){U(E)}var _=bt;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}mt=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};h.addEventListener("test",E,_),h.removeEventListener("test",E,_)}catch{}return d}();function xt(d,_){if(at.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(Z){t:{try{rt(_.nodeName);var F=!0;break t}catch{}F=!1}F||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:_t[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&xt.aa.h.call(this)}}x(xt,at);var _t={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oi(d,_,E,R,F){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=F,this.key=++ie,this.da=this.fa=!1}function Is(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ji(d){this.src=d,this.g={},this.h=0}ji.prototype.add=function(d,_,E,R,F){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var ct=Nr(d,_,R,F);return-1<ct?(_=d[ct],E||(_.fa=!1)):(_=new oi(_,this.src,X,!!R,F),_.fa=E,d.push(_)),_};function Or(d,_){var E=_.type;if(E in d.g){var R=d.g[E],F=Array.prototype.indexOf.call(R,_,void 0),X;(X=0<=F)&&Array.prototype.splice.call(R,F,1),X&&(Is(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Nr(d,_,E,R){for(var F=0;F<d.length;++F){var X=d[F];if(!X.da&&X.listener==_&&X.capture==!!E&&X.ha==R)return F}return-1}var kr="closure_lm_"+(1e6*Math.random()|0),hl={};function Tu(d,_,E,R,F){if(Array.isArray(_)){for(var X=0;X<_.length;X++)Tu(d,_[X],E,R,F);return null}return E=Su(E),d&&d[Pe]?d.K(_,E,g(R)?!!R.capture:!1,F):Nn(d,_,E,!1,R,F)}function Nn(d,_,E,R,F,X){if(!_)throw Error("Invalid event type");var ct=g(F)?!!F.capture:!!F,Lt=za(d);if(Lt||(d[kr]=Lt=new ji(d)),E=Lt.add(_,E,R,ct,X),E.proxy)return E;if(R=Dd(),E.proxy=R,R.src=d,R.listener=E,d.addEventListener)gt||(F=ct),F===void 0&&(F=!1),d.addEventListener(_.toString(),R,F);else if(d.attachEvent)d.attachEvent(Pr(_.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Dd(){function d(E){return _.call(d.src,d.listener,E)}const _=Md;return d}function fl(d,_,E,R,F){if(Array.isArray(_))for(var X=0;X<_.length;X++)fl(d,_[X],E,R,F);else R=g(R)?!!R.capture:!!R,E=Su(E),d&&d[Pe]?(d=d.i,_=String(_).toString(),_ in d.g&&(X=d.g[_],E=Nr(X,E,R,F),-1<E&&(Is(X[E]),Array.prototype.splice.call(X,E,1),X.length==0&&(delete d.g[_],d.h--)))):d&&(d=za(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Nr(_,E,R,F)),(E=-1<d?_[d]:null)&&ja(E))}function ja(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Pe])Or(_.i,d);else{var E=d.type,R=d.proxy;_.removeEventListener?_.removeEventListener(E,R,d.capture):_.detachEvent?_.detachEvent(Pr(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=za(_))?(Or(E,d),E.h==0&&(E.src=null,_[kr]=null)):Is(d)}}}function Pr(d){return d in hl?hl[d]:hl[d]="on"+d}function Md(d,_){if(d.da)d=!0;else{_=new xt(_,this);var E=d.listener,R=d.ha||d.src;d.fa&&ja(d),d=E.call(R,_)}return d}function za(d){return d=d[kr],d instanceof ji?d:null}var dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Su(d){return typeof d=="function"?d:(d[dl]||(d[dl]=function(_){return d.handleEvent(_)}),d[dl])}function de(){ut.call(this),this.i=new ji(this),this.M=this,this.F=null}x(de,ut),de.prototype[Pe]=!0,de.prototype.removeEventListener=function(d,_,E,R){fl(this,d,_,E,R)};function Qt(d,_){var E,R=d.F;if(R)for(E=[];R;R=R.F)E.push(R);if(d=d.M,R=_.type||_,typeof _=="string")_=new at(_,d);else if(_ instanceof at)_.target=_.target||d;else{var F=_;_=new at(R,d),O(_,F)}if(F=!0,E)for(var X=E.length-1;0<=X;X--){var ct=_.g=E[X];F=Tn(ct,R,!0,_)&&F}if(ct=_.g=d,F=Tn(ct,R,!0,_)&&F,F=Tn(ct,R,!1,_)&&F,E)for(X=0;X<E.length;X++)ct=_.g=E[X],F=Tn(ct,R,!1,_)&&F}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],R=0;R<E.length;R++)Is(E[R]);delete d.g[_],d.h--}}this.F=null},de.prototype.K=function(d,_,E,R){return this.i.add(String(d),_,!1,E,R)},de.prototype.L=function(d,_,E,R){return this.i.add(String(d),_,!0,E,R)};function Tn(d,_,E,R){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,X=0;X<_.length;++X){var ct=_[X];if(ct&&!ct.da&&ct.capture==E){var Lt=ct.listener,De=ct.ha||ct.src;ct.fa&&Or(d.i,ct),F=Lt.call(De,R)!==!1&&F}}return F&&!R.defaultPrevented}function Je(d,_,E){if(typeof d=="function")E&&(d=b(d,E));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(d,_||0)}function Au(d){d.g=Je(()=>{d.g=null,d.i&&(d.i=!1,Au(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Od extends ut{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Au(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(d){ut.call(this),this.h=d,this.g={}}x(Vr,ut);var Lr=[];function Ur(d){ot(d.g,function(_,E){this.g.hasOwnProperty(E)&&ja(_)},d),d.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),Ur(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zn=h.JSON.stringify,Ba=h.JSON.parse,jr=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function gl(){}gl.prototype.h=null;function ml(d){return d.h||(d.h=d.i())}function pl(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){at.call(this,"d")}x(Bi,at);function yl(){at.call(this,"c")}x(yl,at);var li={},_l=null;function Ds(){return _l=_l||new de}li.La="serverreachability";function Fa(d){at.call(this,li.La,d)}x(Fa,at);function Ms(d){const _=Ds();Qt(_,new Fa(_))}li.STAT_EVENT="statevent";function wu(d,_){at.call(this,li.STAT_EVENT,d),this.stat=_}x(wu,at);function ce(d){const _=Ds();Qt(_,new wu(_,d))}li.Ma="timingevent";function Ie(d,_){at.call(this,li.Ma,d),this.size=_}x(Ie,at);function Ee(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},_)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function vl(d,_,E,R,F,X){d.info(function(){if(d.g)if(X)for(var ct="",Lt=X.split("&"),De=0;De<Lt.length;De++){var Ut=Lt[De].split("=");if(1<Ut.length){var Le=Ut[0];Ut=Ut[1];var Me=Le.split("_");ct=2<=Me.length&&Me[1]=="type"?ct+(Le+"="+Ut+"&"):ct+(Le+"=redacted&")}}else ct=null;else ct=X;return"XMLHTTP REQ ("+R+") [attempt "+F+"]: "+_+`
`+E+`
`+ct})}function Nd(d,_,E,R,F,X,ct){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+F+"]: "+_+`
`+E+`
`+X+" "+ct})}function Os(d,_,E,R){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+zr(d,E)+(R?" "+R:"")})}function xu(d,_){d.info(function(){return"TIMEOUT: "+_})}kn.prototype.info=function(){};function zr(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var R=E[d];if(!(2>R.length)){var F=R[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ct=1;ct<F.length;ct++)F[ct]=""}}}}return Zn(E)}catch{return _}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function ui(){}x(ui,gl),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},ci=new ui;function hn(d,_,E,R){this.j=d,this.i=_,this.l=E,this.R=R||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var bl={},Ha={};function Jn(d,_,E){d.L=1,d.v=Gr(Sn(_)),d.m=E,d.P=!0,Hi(d,null)}function Hi(d,_){d.F=Date.now(),Br(d),d.A=Sn(d.v);var E=d.A,R=d.R;Array.isArray(R)||(R=[String(R)]),xl(E.i,"t",R),d.C=0,E=d.j.J,d.h=new pe,d.g=Fu(d.j,E?_:null,!d.m),0<d.O&&(d.M=new Od(b(d.Y,d,d.g),d.O)),_=d.U,E=d.g,R=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Lr[0]=F.toString()),F=Lr);for(var X=0;X<F.length;X++){var ct=Tu(E,F[X],R||_.handleEvent,!1,_.h||_);if(!ct)break;_.g[ct.key]=ct}_=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Ms(),vl(d.i,d.u,d.A,d.l,d.R,d.m)}hn.prototype.ca=function(d){d=d.target;const _=this.M;_&&Un(d)==3?_.j():this.Y(d)},hn.prototype.Y=function(d){try{if(d==this.g)t:{const Me=Un(this.g);var _=this.g.Ba();const Wi=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||ku(this.g)))){this.J||Me!=4||_==7||(_==8||0>=Wi?Ms(3):Ms(2)),ks(this);var E=this.g.Z();this.X=E;e:if(Ru(this)){var R=ku(this.g);d="";var F=R.length,X=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qe(this),hi(this);var ct="";break e}this.h.i=new h.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,d+=this.h.i.decode(R[_],{stream:!(X&&_==F-1)});R.length=0,this.h.g+=d,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=E==200,Nd(this.i,this.u,this.A,this.l,this.R,Me,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,De=this.g;if((Lt=De.g?De.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Lt)){var Ut=Lt;break e}}Ut=null}if(E=Ut)Os(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,E);else{this.o=!1,this.s=3,ce(12),qe(this),hi(this);break t}}if(this.P){E=!0;let Ge;for(;!this.J&&this.C<ct.length;)if(Ge=Cu(this,ct),Ge==Ha){Me==4&&(this.s=4,ce(14),E=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==bl){this.s=4,ce(15),Os(this.i,this.l,ct,"[Invalid Chunk]"),E=!1;break}else Os(this.i,this.l,Ge,null),Fr(this,Ge);if(Ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||ct.length!=0||this.h.h||(this.s=1,ce(16),E=!1),this.o=this.o&&E,!E)Os(this.i,this.l,ct,"[Invalid Chunked Response]"),qe(this),hi(this);else if(0<ct.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),Jr(Le),Le.M=!0,ce(11))}}else Os(this.i,this.l,ct,null),Fr(this,ct);Me==4&&qe(this),this.o&&!this.J&&(Me==4?ju(this.j,this):(this.o=!1,Br(this)))}else Ud(this.g),E==400&&0<ct.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),qe(this),hi(this)}}}catch{}finally{}};function Ru(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Cu(d,_){var E=d.C,R=_.indexOf(`
`,E);return R==-1?Ha:(E=Number(_.substring(E,R)),isNaN(E)?bl:(R+=1,R+E>_.length?Ha:(_=_.slice(R,R+E),d.C=R+E,_)))}hn.prototype.cancel=function(){this.J=!0,qe(this)};function Br(d){d.S=Date.now()+d.I,Iu(d,d.I)}function Iu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ee(b(d.ba,d),_)}function ks(d){d.B&&(h.clearTimeout(d.B),d.B=null)}hn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(xu(this.i,this.A),this.L!=2&&(Ms(),ce(17)),qe(this),this.s=2,hi(this)):Iu(this,this.S-d)};function hi(d){d.j.G==0||d.J||ju(d.j,d)}function qe(d){ks(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,Ur(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Fr(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||El(E.h,d))){if(!d.K&&El(E.h,d)&&E.G==3){try{var R=E.Da.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var F=R;if(F[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)eo(E),Ja(E);else break t;Ml(E),ce(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ee(b(E.Za,E),6e3));if(1>=Ga(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Xi(E,11)}else if((d.K||E.g==d)&&eo(E),!W(_))for(F=E.Da.g.parse(_),_=0;_<F.length;_++){let Ut=F[_];if(E.T=Ut[0],Ut=Ut[1],E.G==2)if(Ut[0]=="c"){E.K=Ut[1],E.ia=Ut[2];const Le=Ut[3];Le!=null&&(E.la=Le,E.j.info("VER="+E.la));const Me=Ut[4];Me!=null&&(E.Aa=Me,E.j.info("SVER="+E.Aa));const Wi=Ut[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(R=1.5*Wi,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const Ge=d.g;if(Ge){const _i=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var X=R.h;X.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ya(X,X.h),X.h=null))}if(R.D){const Nl=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;Nl&&(R.ya=Nl,Zt(R.I,R.D,Nl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var ct=d;if(R.qa=Bu(R,R.J?R.ia:null,R.W),ct.K){fn(R.h,ct);var Lt=ct,De=R.L;De&&(Lt.I=De),Lt.B&&(ks(Lt),Br(Lt)),R.g=ct}else Lu(R);0<E.i.length&&to(E)}else Ut[0]!="stop"&&Ut[0]!="close"||Xi(E,7);else E.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Xi(E,7):Il(E):Ut[0]!="noop"&&E.l&&E.l.ta(Ut),E.v=0)}}Ms(4)}catch{}}var Du=class{constructor(d,_){this.g=d,this.map=_}};function qi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ga(d){return d.h?1:d.g?d.g.size:0}function El(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Ya(d,_){d.g?d.g.add(_):d.h=_}function fn(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}qi.prototype.cancel=function(){if(this.i=Tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Tl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return D(d.i)}function kd(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var _=[],E=d.length,R=0;R<E;R++)_.push(d[R]);return _}_=[],E=0;for(R in d)_[E++]=d[R];return _}function Ka(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const R in d)_[E++]=R;return _}}}function Sl(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=Ka(d),R=kd(d),F=R.length,X=0;X<F;X++)_.call(void 0,R[X],E&&E[X],d)}var Hr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pd(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var R=d[E].indexOf("="),F=null;if(0<=R){var X=d[E].substring(0,R);F=d[E].substring(R+1)}else X=d[E];_(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Te(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Te){this.h=d.h,qr(this,d.j),this.o=d.o,this.g=d.g,Ps(this,d.s),this.l=d.l;var _=d.i,E=new Yi;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Gi(this,E),this.m=d.m}else d&&(_=String(d).match(Hr))?(this.h=!1,qr(this,_[1]||"",!0),this.o=Pn(_[2]||""),this.g=Pn(_[3]||"",!0),Ps(this,_[4]),this.l=Pn(_[5]||"",!0),Gi(this,_[6]||"",!0),this.m=Pn(_[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Te.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Yr(_,Al,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Yr(_,Al,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Yr(E,E.charAt(0)=="/"?Vd:wl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Yr(E,Qa)),d.join("")};function Sn(d){return new Te(d)}function qr(d,_,E){d.j=E?Pn(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Ps(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Gi(d,_,E){_ instanceof Yi?(d.i=_,Ou(d.i,d.h)):(E||(_=Yr(_,Ld)),d.i=new Yi(_,d.h))}function Zt(d,_,E){d.i.set(_,E)}function Gr(d){return Zt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Pn(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Yr(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,Mu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Mu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Al=/[#\/\?@]/g,wl=/[#\?:]/g,Vd=/[#\?]/g,Ld=/[#\?@]/g,Qa=/#/g;function Yi(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Vn(d){d.g||(d.g=new Map,d.h=0,d.i&&Pd(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Yi.prototype,n.add=function(d,_){Vn(this),this.i=null,d=fi(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function Ki(d,_){Vn(d),_=fi(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Qi(d,_){return Vn(d),_=fi(d,_),d.g.has(_)}n.forEach=function(d,_){Vn(this),this.g.forEach(function(E,R){E.forEach(function(F){d.call(_,F,R,this)},this)},this)},n.na=function(){Vn(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let R=0;R<_.length;R++){const F=d[R];for(let X=0;X<F.length;X++)E.push(_[R])}return E},n.V=function(d){Vn(this);let _=[];if(typeof d=="string")Qi(this,d)&&(_=_.concat(this.g.get(fi(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return Vn(this),this.i=null,d=fi(this,d),Qi(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function xl(d,_,E){Ki(d,_),0<E.length&&(d.i=null,d.g.set(fi(d,_),D(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var R=_[E];const X=encodeURIComponent(String(R)),ct=this.V(R);for(R=0;R<ct.length;R++){var F=X;ct[R]!==""&&(F+="="+encodeURIComponent(String(ct[R]))),d.push(F)}}return this.i=d.join("&")};function fi(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Ou(d,_){_&&!d.j&&(Vn(d),d.i=null,d.g.forEach(function(E,R){var F=R.toLowerCase();R!=F&&(Ki(this,R),xl(this,F,E))},d)),d.j=_}function Kr(d,_){const E=new kn;if(h.Image){const R=new Image;R.onload=S(Ln,E,"TestLoadImage: loaded",!0,_,R),R.onerror=S(Ln,E,"TestLoadImage: error",!1,_,R),R.onabort=S(Ln,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=S(Ln,E,"TestLoadImage: timeout",!1,_,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else _(!1)}function ti(d,_){const E=new kn,R=new AbortController,F=setTimeout(()=>{R.abort(),Ln(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:R.signal}).then(X=>{clearTimeout(F),X.ok?Ln(E,"TestPingServer: ok",!0,_):Ln(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Ln(E,"TestPingServer: error",!1,_)})}function Ln(d,_,E,R,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),R(E)}catch{}}function Qr(){this.g=new jr}function di(d,_,E){const R=E||"";try{Sl(d,function(F,X){let ct=F;g(F)&&(ct=Zn(F)),_.push(R+X+"="+encodeURIComponent(ct))})}catch(F){throw _.push(R+"type="+encodeURIComponent("_badmap")),F}}function Vs(d){this.l=d.Ub||null,this.j=d.eb||!1}x(Vs,gl),Vs.prototype.g=function(){return new $i(this.l,this.j)},Vs.prototype.i=function(d){return function(){return d}}({});function $i(d,_){de.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x($i,de),n=$i.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,mi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?gi(this):mi(this),this.readyState==3&&Rl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,gi(this))},n.Qa=function(d){this.g&&(this.response=d,gi(this))},n.ga=function(){this.g&&gi(this)};function gi(d){d.readyState=4,d.l=null,d.j=null,d.v=null,mi(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function mi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Cl(d){let _="";return ot(d,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function Ve(d,_,E){t:{for(R in E){var R=!1;break t}R=!0}R||(E=Cl(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Zt(d,_,E))}function Yt(d){de.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Yt,de);var $a=/^https?$/i,$r=["POST","PUT"];n=Yt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?ml(this.o):ml(ci),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(X){Nu(this,X);return}if(d=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var F in R)E.set(F,R[F]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())E.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),F=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call($r,_,void 0))||R||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ct]of E)this.g.setRequestHeader(X,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xr(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){Nu(this,X)}};function Nu(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Xa(d),pi(d)}function Xa(d){d.A||(d.A=!0,Qt(d,"complete"),Qt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Qt(this,"complete"),Qt(this,"abort"),pi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),Yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Wa(this):this.bb())},n.bb=function(){Wa(this)};function Wa(d){if(d.h&&typeof c<"u"&&(!d.v[1]||Un(d)!=4||d.Z()!=2)){if(d.u&&Un(d)==4)Je(d.Ea,0,d);else if(Qt(d,"readystatechange"),Un(d)==4){d.h=!1;try{const ct=d.Z();t:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var R;if(R=ct===0){var F=String(d.D).match(Hr)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),R=!$a.test(F?F.toLowerCase():"")}E=R}if(E)Qt(d,"complete"),Qt(d,"success");else{d.m=6;try{var X=2<Un(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Xa(d)}}finally{pi(d)}}}}function pi(d,_){if(d.g){Xr(d);const E=d.g,R=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Qt(d,"ready");try{E.onreadystatechange=R}catch{}}}function Xr(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Un(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Ba(_)}};function ku(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ud(d){const _={};d=(d.g&&2<=Un(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(W(d[R]))continue;var E=V(d[R]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=_[F]||[];_[F]=X,X.push(E)}N(_,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Za(d){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,d),this.cb=Wr("retryDelaySeedMs",1e4,d),this.Wa=Wr("forwardChannelMaxRetries",2,d),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new qi(d&&d.concurrentRequestLimit),this.Da=new Qr,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Za.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,R){ce(0),this.W=d,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=Bu(this,null,this.W),to(this)};function Il(d){if(Pu(d),d.G==3){var _=d.U++,E=Sn(d.I);if(Zt(E,"SID",d.K),Zt(E,"RID",_),Zt(E,"TYPE","terminate"),Zr(d,E),_=new hn(d,d.j,_),_.L=2,_.v=Gr(Sn(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&h.Image&&(new Image().src=_.v,E=!0),E||(_.g=Fu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Br(_)}zu(d)}function Ja(d){d.g&&(Jr(d),d.g.cancel(),d.g=null)}function Pu(d){Ja(d),d.u&&(h.clearTimeout(d.u),d.u=null),eo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function to(d){if(!qa(d.h)&&!d.s){d.s=!0;var _=d.Ga;lt||L(),mt||(lt(),mt=!0),Nt.add(_,d),d.B=0}}function jd(d,_){return Ga(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ee(b(d.Ga,d,_),Ol(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new hn(this,this.j,d);let X=this.o;if(this.S&&(X?(X=C(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break e}R=void 0}if(R===void 0)break;if(_+=R,4096<_){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=Vu(this,F,_),E=Sn(this.I),Zt(E,"RID",d),Zt(E,"CVER",22),this.D&&Zt(E,"X-HTTP-Session-Id",this.D),Zr(this,E),X&&(this.O?_="headers="+encodeURIComponent(String(Cl(X)))+"&"+_:this.m&&Ve(E,this.m,X)),Ya(this.h,F),this.Ua&&Zt(E,"TYPE","init"),this.P?(Zt(E,"$req",_),Zt(E,"SID","null"),F.T=!0,Jn(F,E,null)):Jn(F,E,_),this.G=2}}else this.G==3&&(d?Dl(this,d):this.i.length==0||qa(this.h)||Dl(this))};function Dl(d,_){var E;_?E=_.l:E=d.U++;const R=Sn(d.I);Zt(R,"SID",d.K),Zt(R,"RID",E),Zt(R,"AID",d.T),Zr(d,R),d.m&&d.o&&Ve(R,d.m,d.o),E=new hn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Vu(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ya(d.h,E),Jn(E,R,_)}function Zr(d,_){d.H&&ot(d.H,function(E,R){Zt(_,R,E)}),d.l&&Sl({},function(E,R){Zt(_,R,E)})}function Vu(d,_,E){E=Math.min(d.i.length,E);var R=d.l?b(d.l.Na,d.l,d):null;t:{var F=d.i;let X=-1;for(;;){const ct=["count="+E];X==-1?0<E?(X=F[0].g,ct.push("ofs="+X)):X=0:ct.push("ofs="+X);let Lt=!0;for(let De=0;De<E;De++){let Ut=F[De].g;const Le=F[De].map;if(Ut-=X,0>Ut)X=Math.max(0,F[De].g-100),Lt=!1;else try{di(Le,ct,"req"+Ut+"_")}catch{R&&R(Le)}}if(Lt){R=ct.join("&");break t}}}return d=d.i.splice(0,E),_.D=d,R}function Lu(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;lt||L(),mt||(lt(),mt=!0),Nt.add(_,d),d.v=0}}function Ml(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ee(b(d.Fa,d),Ol(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Uu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ee(b(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Ja(this),Uu(this))};function Jr(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function Uu(d){d.g=new hn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Sn(d.qa);Zt(_,"RID","rpc"),Zt(_,"SID",d.K),Zt(_,"AID",d.T),Zt(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Zt(_,"TO",d.ja),Zt(_,"TYPE","xmlhttp"),Zr(d,_),d.m&&d.o&&Ve(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Gr(Sn(_)),E.m=null,E.P=!0,Hi(E,d)}n.Za=function(){this.C!=null&&(this.C=null,Ja(this),Ml(this),ce(19))};function eo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function ju(d,_){var E=null;if(d.g==_){eo(d),Jr(d),d.g=null;var R=2}else if(El(d.h,_))E=_.D,fn(d.h,_),R=1;else return;if(d.G!=0){if(_.o)if(R==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var F=d.B;R=Ds(),Qt(R,new Ie(R,E)),to(d)}else Lu(d);else if(F=_.s,F==3||F==0&&0<_.X||!(R==1&&jd(d,_)||R==2&&Ml(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),F){case 1:Xi(d,5);break;case 4:Xi(d,10);break;case 3:Xi(d,6);break;default:Xi(d,2)}}}function Ol(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function Xi(d,_){if(d.j.info("Error code "+_),_==2){var E=b(d.fb,d),R=d.Xa;const F=!R;R=new Te(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qr(R,"https"),Gr(R),F?Kr(R.toString(),E):ti(R.toString(),E)}else ce(2);d.G=0,d.l&&d.l.sa(_),zu(d),Pu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function zu(d){if(d.G=0,d.ka=[],d.l){const _=Tl(d.h);(_.length!=0||d.i.length!=0)&&(M(d.ka,_),M(d.ka,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.ra()}}function Bu(d,_,E){var R=E instanceof Te?Sn(E):new Te(E);if(R.g!="")_&&(R.g=_+"."+R.g),Ps(R,R.s);else{var F=h.location;R=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var X=new Te(null);R&&qr(X,R),_&&(X.g=_),F&&Ps(X,F),E&&(X.l=E),R=X}return E=d.D,_=d.ya,E&&_&&Zt(R,E,_),Zt(R,"VER",d.la),Zr(d,R),R}function Fu(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new Yt(new Vs({eb:E})):new Yt(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}n=Hu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function no(){}no.prototype.g=function(d,_){return new dn(d,_)};function dn(d,_){de.call(this),this.g=new Za(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!W(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!W(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new yi(this)}x(dn,de),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Il(this.g)},dn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Zn(d),d=E);_.i.push(new Du(_.Ya++,d)),_.G==3&&to(_)},dn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,dn.aa.N.call(this)};function qu(d){Bi.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){t:{for(const E in _){d=E;break t}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}x(qu,Bi);function Gu(){yl.call(this),this.status=1}x(Gu,yl);function yi(d){this.g=d}x(yi,Hu),yi.prototype.ua=function(){Qt(this.g,"a")},yi.prototype.ta=function(d){Qt(this.g,new qu(d))},yi.prototype.sa=function(d){Qt(this.g,new Gu)},yi.prototype.ra=function(){Qt(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,NS=function(){return new no},OS=function(){return Ds()},MS=li,up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,gf=Ns,Fi.COMPLETE="complete",DS=Fi,pl.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",de.prototype.listen=de.prototype.K,Rc=pl,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,IS=Yt}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore",L0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Fp("@firebase/firestore");function No(){return Da.logLevel}function ft(n,...t){if(Da.logLevel<=kt.DEBUG){const e=t.map(Gp);Da.debug(`Firestore (${il}): ${n}`,...e)}}function bs(n,...t){if(Da.logLevel<=kt.ERROR){const e=t.map(Gp);Da.error(`Firestore (${il}): ${n}`,...e)}}function qo(n,...t){if(Da.logLevel<=kt.WARN){const e=t.map(Gp);Da.warn(`Firestore (${il}): ${n}`,...e)}}function Gp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,kS(n,i,e)}function kS(n,t,e){let i=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw bs(i),new Error(i)}function Kt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||kS(t,r,i)}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends xs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class SI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(rn.UNAUTHENTICATED))}shutdown(){}}class AI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class wI{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Kt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,t.enqueueRetryable(()=>r(this.currentUser))};const c=()=>{const f=o;t.enqueueRetryable(async()=>{await f.promise,await r(this.currentUser)})},h=f=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Kt(typeof i.accessToken=="string",31837,{l:i}),new PS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kt(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class xI{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RI{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new xI(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CI{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Kt(this.o===void 0,3512);const i=o=>{o.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const r=o=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Kt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new U0(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=II(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Pt(n,t){return n<t?-1:n>t?1:0}function hp(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const r=n.charAt(i),o=t.charAt(i);if(r!==o)return Bm(r)===Bm(o)?Pt(r,o):Bm(r)?1:-1}return Pt(n.length,t.length)}const DI=55296,MI=57343;function Bm(n){const t=n.charCodeAt(0);return t>=DI&&t<=MI}function Go(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="__name__";class Ri{constructor(t,e,i){e===void 0?e=0:e>t.length&&Tt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Tt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Ri.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ri?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=Ri.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Pt(t.length,e.length)}static compareSegments(t,e){const i=Ri.isNumericId(t),r=Ri.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?Ri.extractNumericId(t).compare(Ri.extractNumericId(e)):hp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return mr.fromString(t.substring(4,t.length-2))}}class re extends Ri{construct(t,e,i){return new re(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ht(et.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new re(e)}static emptyPath(){return new re([])}}const OI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Ri{construct(t,e,i){return new Xe(t,e,i)}static isValidIdentifier(t){return OI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j0}static keyField(){return new Xe([j0])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ht(et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const h=t[r];if(h==="\\"){if(r+1===t.length)throw new ht(et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ht(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(i+=h,r++):(o(),r++)}if(o(),c)throw new ht(et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(e)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.path=t}static fromPath(t){return new yt(re.fromString(t))}static fromName(t){return new yt(re.fromString(t).popFirst(5))}static empty(){return new yt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return re.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yt(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n,t,e){if(!e)throw new ht(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function NI(n,t,e,i){if(t===!0&&i===!0)throw new ht(et.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function z0(n){if(!yt.isDocumentKey(n))throw new ht(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B0(n){if(yt.isDocumentKey(n))throw new ht(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function LS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function id(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Tt(12329,{type:typeof n})}function ys(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=id(n);throw new ht(et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,t){const e={typeString:n};return t&&(e.value=t),e}function uu(n,t){if(!LS(n))throw new ht(et.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ht(et.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=-62135596800,H0=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*H0);return new le(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<F0)throw new ht(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H0}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(uu(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-F0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Re("string",le._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new le(0,0))}static max(){return new wt(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=-1;function kI(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=wt.fromTimestamp(i===1e9?new le(e+1,0):new le(e,i));return new br(r,yt.empty(),t)}function PI(n){return new br(n.readTime,n.key,Kc)}class br{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new br(wt.min(),yt.empty(),Kc)}static max(){return new br(wt.max(),yt.empty(),Kc)}}function VI(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=yt.comparator(n.documentKey,t.documentKey),e!==0?e:Pt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==LI)throw n;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new it((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof it?e:it.resolve(e)}catch(e){return it.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):it.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):it.reject(e)}static resolve(t){return new it((e,i)=>{e(t)})}static reject(t){return new it((e,i)=>{i(t)})}static waitFor(t){return new it((e,i)=>{let r=0,o=0,c=!1;t.forEach(h=>{++r,h.next(()=>{++o,c&&o===r&&e()},f=>i(f))}),c=!0,o===r&&e()})}static or(t){let e=it.resolve(!1);for(const i of t)e=e.next(r=>r?it.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new it((i,r)=>{const o=t.length,c=new Array(o);let h=0;for(let f=0;f<o;f++){const g=f;e(t[g]).next(y=>{c[g]=y,++h,h===o&&i(c)},y=>r(y))}})}static doWhile(t,e){return new it((i,r)=>{const o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}}function jI(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function rl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}sd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=-1;function rd(n){return n==null}function Df(n){return n===0&&1/n==-1/0}function zI(n){return typeof n=="number"&&Number.isInteger(n)&&!Df(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="";function BI(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=q0(t)),t=FI(n.get(e),t);return q0(t)}function FI(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case US:e+="";break;default:e+=o}}return e}function q0(n){return n+US+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Cr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function jS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||$e.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$e.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Kh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Kh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Kh(this.root,t,this.comparator,!0)}}class Kh{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class $e{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??$e.RED,this.left=r??$e.EMPTY,this.right=o??$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new $e(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return $e.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new $e(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(t){return new Y0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof ke)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ke(this.comparator);return e.data=t,e}}class Y0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new Mn([])}unionWith(t){let e=new ke(Xe.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Mn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Go(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zS("Invalid base64 string: "+o):o}}(t);return new Ze(e)}static fromUint8Array(t){const e=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(t);return new Ze(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const HI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(Kt(!!n,39018),typeof n=="string"){let t=0;const e=HI.exec(n);if(Kt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Tr(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="server_timestamp",FS="__type__",HS="__previous_value__",qS="__local_write_time__";function Qp(n){return(n?.mapValue?.fields||{})[FS]?.stringValue===BS}function ad(n){const t=n.mapValue.fields[HS];return Qp(t)?ad(t):t}function Qc(n){const t=Er(n.mapValue.fields[qS].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t,e,i,r,o,c,h,f,g,y){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=g,this.isUsingEmulator=y}}const Mf="(default)";class $c{constructor(t,e){this.projectId=t,this.database=e||Mf}static empty(){return new $c("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(t){return t instanceof $c&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="__type__",GI="__max__",Qh={mapValue:{}},YS="__vector__",Of="value";function Sr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qp(n)?4:KI(n)?9007199254740991:YI(n)?10:11:Tt(28295,{value:n})}function Ui(n,t){if(n===t)return!0;const e=Sr(n);if(e!==Sr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Qc(n).isEqual(Qc(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Er(r.timestampValue),h=Er(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return Tr(r.bytesValue).isEqual(Tr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return ve(r.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(r.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ve(r.integerValue)===ve(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=ve(r.doubleValue),h=ve(o.doubleValue);return c===h?Df(c)===Df(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return Go(n.arrayValue.values||[],t.arrayValue.values||[],Ui);case 10:case 11:return function(r,o){const c=r.mapValue.fields||{},h=o.mapValue.fields||{};if(G0(c)!==G0(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!Ui(c[f],h[f])))return!1;return!0}(n,t);default:return Tt(52216,{left:n})}}function Xc(n,t){return(n.values||[]).find(e=>Ui(e,t))!==void 0}function Yo(n,t){if(n===t)return 0;const e=Sr(n),i=Sr(t);if(e!==i)return Pt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,t.booleanValue);case 2:return function(o,c){const h=ve(o.integerValue||o.doubleValue),f=ve(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,t);case 3:return K0(n.timestampValue,t.timestampValue);case 4:return K0(Qc(n),Qc(t));case 5:return hp(n.stringValue,t.stringValue);case 6:return function(o,c){const h=Tr(o),f=Tr(c);return h.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const h=o.split("/"),f=c.split("/");for(let g=0;g<h.length&&g<f.length;g++){const y=Pt(h[g],f[g]);if(y!==0)return y}return Pt(h.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const h=Pt(ve(o.latitude),ve(c.latitude));return h!==0?h:Pt(ve(o.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Q0(n.arrayValue,t.arrayValue);case 10:return function(o,c){const h=o.fields||{},f=c.fields||{},g=h[Of]?.arrayValue,y=f[Of]?.arrayValue,v=Pt(g?.values?.length||0,y?.values?.length||0);return v!==0?v:Q0(g,y)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===Qh.mapValue&&c===Qh.mapValue)return 0;if(o===Qh.mapValue)return 1;if(c===Qh.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),g=c.fields||{},y=Object.keys(g);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const b=hp(f[v],y[v]);if(b!==0)return b;const S=Yo(h[f[v]],g[y[v]]);if(S!==0)return S}return Pt(f.length,y.length)}(n.mapValue,t.mapValue);default:throw Tt(23264,{he:e})}}function K0(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Pt(n,t);const e=Er(n),i=Er(t),r=Pt(e.seconds,i.seconds);return r!==0?r:Pt(e.nanos,i.nanos)}function Q0(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=Yo(e[r],i[r]);if(o)return o}return Pt(e.length,i.length)}function Ko(n){return fp(n)}function fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=Er(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Tr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return yt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=fp(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${fp(e.fields[c])}`;return r+"}"}(n.mapValue):Tt(61005,{value:n})}function mf(n){switch(Sr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ad(n);return t?16+mf(t):16;case 5:return 2*n.stringValue.length;case 6:return Tr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+mf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Cr(i.fields,(o,c)=>{r+=o.length+mf(c)}),r}(n.mapValue);default:throw Tt(13486,{value:n})}}function $0(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function dp(n){return!!n&&"integerValue"in n}function $p(n){return!!n&&"arrayValue"in n}function X0(n){return!!n&&"nullValue"in n}function W0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pf(n){return!!n&&"mapValue"in n}function YI(n){return(n?.mapValue?.fields||{})[GS]?.stringValue===YS}function Vc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Cr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Vc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Vc(n.arrayValue.values[e]);return t}return{...n}}function KI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===GI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.value=t}static empty(){return new bn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!pf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vc(e)}setAll(t){let e=Xe.emptyPath(),i={},r=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=h.popLast()}c?i[h.lastSegment()]=Vc(c):r.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());pf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ui(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];pf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Cr(e,(r,o)=>t[r]=o);for(const r of i)delete t[r]}clone(){return new bn(Vc(this.value))}}function KS(n){const t=[];return Cr(n.fields,(e,i)=>{const r=new Xe([e]);if(pf(i)){const o=KS(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)}),new Mn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,e,i,r,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new an(t,0,wt.min(),wt.min(),wt.min(),bn.empty(),0)}static newFoundDocument(t,e,i,r){return new an(t,1,e,wt.min(),i,r,0)}static newNoDocument(t,e){return new an(t,2,e,wt.min(),wt.min(),bn.empty(),0)}static newUnknownDocument(t,e){return new an(t,3,e,wt.min(),wt.min(),bn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof an&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,e){this.position=t,this.inclusive=e}}function Z0(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=yt.comparator(yt.fromName(c.referenceValue),e.key):i=Yo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function J0(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ui(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,e="asc"){this.field=t,this.dir=e}}function QI(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{}class xe extends QS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new XI(t,e,i):e==="array-contains"?new JI(t,i):e==="in"?new t2(t,i):e==="not-in"?new e2(t,i):e==="array-contains-any"?new n2(t,i):new xe(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new WI(t,i):new ZI(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Yo(e,this.value)):e!==null&&Sr(this.value)===Sr(e)&&this.matchesComparison(Yo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends QS{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ai(t,e)}matches(t){return $S(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $S(n){return n.op==="and"}function XS(n){return $I(n)&&$S(n)}function $I(n){for(const t of n.filters)if(t instanceof ai)return!1;return!0}function gp(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+Ko(n.value);if(XS(n))return n.filters.map(t=>gp(t)).join(",");{const t=n.filters.map(e=>gp(e)).join(",");return`${n.op}(${t})`}}function WS(n,t){return n instanceof xe?function(i,r){return r instanceof xe&&i.op===r.op&&i.field.isEqual(r.field)&&Ui(i.value,r.value)}(n,t):n instanceof ai?function(i,r){return r instanceof ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,c,h)=>o&&WS(c,r.filters[h]),!0):!1}(n,t):void Tt(19439)}function ZS(n){return n instanceof xe?function(e){return`${e.field.canonicalString()} ${e.op} ${Ko(e.value)}`}(n):n instanceof ai?function(e){return e.op.toString()+" {"+e.getFilters().map(ZS).join(" ,")+"}"}(n):"Filter"}class XI extends xe{constructor(t,e,i){super(t,e,i),this.key=yt.fromName(i.referenceValue)}matches(t){const e=yt.comparator(t.key,this.key);return this.matchesComparison(e)}}class WI extends xe{constructor(t,e){super(t,"in",e),this.keys=JS("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ZI extends xe{constructor(t,e){super(t,"not-in",e),this.keys=JS("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function JS(n,t){return(t.arrayValue?.values||[]).map(e=>yt.fromName(e.referenceValue))}class JI extends xe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return $p(e)&&Xc(e.arrayValue,this.value)}}class t2 extends xe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Xc(this.value.arrayValue,e)}}class e2 extends xe{constructor(t,e){super(t,"not-in",e)}matches(t){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Xc(this.value.arrayValue,e)}}class n2 extends xe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!$p(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Xc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,e=null,i=[],r=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function tE(n,t=null,e=[],i=[],r=null,o=null,c=null){return new i2(n,t,e,i,r,o,c)}function Xp(n){const t=Rt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>gp(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),rd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ko(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ko(i)).join(",")),t.Te=e}return t.Te}function Wp(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!QI(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!WS(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!J0(n.startAt,t.startAt)&&J0(n.endAt,t.endAt)}function mp(n){return yt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,e=null,i=[],r=[],o=null,c="F",h=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s2(n,t,e,i,r,o,c,h){return new al(n,t,e,i,r,o,c,h)}function Zp(n){return new al(n)}function eE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tA(n){return n.collectionGroup!==null}function Lc(n){const t=Rt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new ke(Xe.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Wc(o,i))}),e.has(Xe.keyField().canonicalString())||t.Ie.push(new Wc(Xe.keyField(),i))}return t.Ie}function Di(n){const t=Rt(n);return t.Ee||(t.Ee=r2(t,Lc(n))),t.Ee}function r2(n,t){if(n.limitType==="F")return tE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Wc(r.field,o)});const e=n.endAt?new Nf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Nf(n.startAt.position,n.startAt.inclusive):null;return tE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function pp(n,t){const e=n.filters.concat([t]);return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function yp(n,t,e){return new al(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function od(n,t){return Wp(Di(n),Di(t))&&n.limitType===t.limitType}function eA(n){return`${Xp(Di(n))}|lt:${n.limitType}`}function ko(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>ZS(r)).join(", ")}]`),rd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>Ko(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>Ko(r)).join(",")),`Target(${i})`}(Di(n))}; limitType=${n.limitType})`}function ld(n,t){return t.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):yt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(const o of Lc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(c,h,f){const g=Z0(c,h,f);return c.inclusive?g<=0:g<0}(i.startAt,Lc(i),r)||i.endAt&&!function(c,h,f){const g=Z0(c,h,f);return c.inclusive?g>=0:g>0}(i.endAt,Lc(i),r))}(n,t)}function a2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nA(n){return(t,e)=>{let i=!1;for(const r of Lc(n)){const o=o2(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function o2(n,t,e){const i=n.field.isKeyField()?yt.comparator(t.key,e.key):function(o,c,h){const f=c.data.field(o),g=h.data.field(o);return f!==null&&g!==null?Yo(f,g):Tt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Cr(this.inner,(e,i)=>{for(const[r,o]of i)t(r,o)})}isEmpty(){return jS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new fe(yt.comparator);function Es(){return l2}const iA=new fe(yt.comparator);function Cc(...n){let t=iA;for(const e of n)t=t.insert(e.key,e);return t}function sA(n){let t=iA;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Ea(){return Uc()}function rA(){return Uc()}function Uc(){return new Pa(n=>n.toString(),(n,t)=>n.isEqual(t))}const c2=new fe(yt.comparator),u2=new ke(yt.comparator);function Vt(...n){let t=u2;for(const e of n)t=t.add(e);return t}const h2=new ke(Pt);function f2(){return h2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Df(t)?"-0":t}}function aA(n){return{integerValue:""+n}}function d2(n,t){return zI(t)?aA(t):Jp(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(){this._=void 0}}function g2(n,t,e){return n instanceof kf?function(r,o){const c={fields:{[FS]:{stringValue:BS},[qS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Qp(o)&&(o=ad(o)),o&&(c.fields[HS]=o),{mapValue:c}}(e,t):n instanceof Zc?lA(n,t):n instanceof Jc?cA(n,t):function(r,o){const c=oA(r,o),h=nE(c)+nE(r.Ae);return dp(c)&&dp(r.Ae)?aA(h):Jp(r.serializer,h)}(n,t)}function m2(n,t,e){return n instanceof Zc?lA(n,t):n instanceof Jc?cA(n,t):e}function oA(n,t){return n instanceof Pf?function(i){return dp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class kf extends cd{}class Zc extends cd{constructor(t){super(),this.elements=t}}function lA(n,t){const e=uA(t);for(const i of n.elements)e.some(r=>Ui(r,i))||e.push(i);return{arrayValue:{values:e}}}class Jc extends cd{constructor(t){super(),this.elements=t}}function cA(n,t){let e=uA(t);for(const i of n.elements)e=e.filter(r=>!Ui(r,i));return{arrayValue:{values:e}}}class Pf extends cd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function nE(n){return ve(n.integerValue||n.doubleValue)}function uA(n){return $p(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function p2(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Zc&&r instanceof Zc||i instanceof Jc&&r instanceof Jc?Go(i.elements,r.elements,Ui):i instanceof Pf&&r instanceof Pf?Ui(i.Ae,r.Ae):i instanceof kf&&r instanceof kf}(n.transform,t.transform)}class y2{constructor(t,e){this.version=t,this.transformResults=e}}class Mi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Mi}static exists(t){return new Mi(void 0,t)}static updateTime(t){return new Mi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function yf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ud{}function hA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new dA(n.key,Mi.none()):new hu(n.key,n.data,Mi.none());{const e=n.data,i=bn.empty();let r=new ke(Xe.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new Ir(n.key,i,new Mn(r.toArray()),Mi.none())}}function _2(n,t,e){n instanceof hu?function(r,o,c){const h=r.value.clone(),f=sE(r.fieldTransforms,o,c.transformResults);h.setAll(f),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof Ir?function(r,o,c){if(!yf(r.precondition,o))return void o.convertToUnknownDocument(c.version);const h=sE(r.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(fA(r)),f.setAll(h),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,t,e):function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function jc(n,t,e,i){return n instanceof hu?function(o,c,h,f){if(!yf(o.precondition,c))return h;const g=o.value.clone(),y=rE(o.fieldTransforms,f,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,t,e,i):n instanceof Ir?function(o,c,h,f){if(!yf(o.precondition,c))return h;const g=rE(o.fieldTransforms,f,c),y=c.data;return y.setAll(fA(o)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,c,h){return yf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function v2(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=oA(i.transform,r||null);o!=null&&(e===null&&(e=bn.empty()),e.set(i.field,o))}return e||null}function iE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Go(i,r,(o,c)=>p2(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class hu extends ud{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ir extends ud{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function sE(n,t,e){const i=new Map;Kt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,h=t.data.field(o.field);i.set(o.field,m2(c,h,e[r]))}return i}function rE(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,g2(o,c,t))}return i}class dA extends ud{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b2 extends ud{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&_2(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=jc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=jc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=rA();return this.mutations.forEach(r=>{const o=t.get(r.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(r.key)?null:h;const f=hA(c,h);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(wt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Go(this.mutations,t.mutations,(e,i)=>iE(e,i))&&Go(this.baseMutations,t.baseMutations,(e,i)=>iE(e,i))}}class ty{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Kt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=function(){return c2}();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new ty(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,zt;function A2(n){switch(n){case et.OK:return Tt(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return Tt(15467,{code:n})}}function gA(n){if(n===void 0)return bs("GRPC error has no .code"),et.UNKNOWN;switch(n){case we.OK:return et.OK;case we.CANCELLED:return et.CANCELLED;case we.UNKNOWN:return et.UNKNOWN;case we.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case we.INTERNAL:return et.INTERNAL;case we.UNAVAILABLE:return et.UNAVAILABLE;case we.UNAUTHENTICATED:return et.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case we.NOT_FOUND:return et.NOT_FOUND;case we.ALREADY_EXISTS:return et.ALREADY_EXISTS;case we.PERMISSION_DENIED:return et.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case we.ABORTED:return et.ABORTED;case we.OUT_OF_RANGE:return et.OUT_OF_RANGE;case we.UNIMPLEMENTED:return et.UNIMPLEMENTED;case we.DATA_LOSS:return et.DATA_LOSS;default:return Tt(39323,{code:n})}}(zt=we||(we={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new mr([4294967295,4294967295],0);function aE(n){const t=w2().encode(n),e=new CS;return e.update(t),new Uint8Array(e.digest())}function oE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new mr([e,i],0),new mr([r,o],0)]}class ey{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Ic(`Invalid padding: ${e}`);if(i<0)throw new Ic(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=mr.fromNumber(this.ge)}ye(t,e,i){let r=t.add(e.multiply(mr.fromNumber(i)));return r.compare(x2)===1&&(r=new mr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=aE(t),[i,r]=oE(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new ey(o,r,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.ge===0)return;const e=aE(t),[i,r]=oE(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,fu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new hd(wt.min(),r,new fe(Pt),Es(),Vt())}}class fu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new fu(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(t,e,i,r){this.be=t,this.removedTargetIds=e,this.key=i,this.De=r}}class mA{constructor(t,e){this.targetId=t,this.Ce=e}}class pA{constructor(t,e,i=Ze.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class lE{constructor(){this.ve=0,this.Fe=cE(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),e=Vt(),i=Vt();return this.Fe.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Tt(38017,{changeType:o})}}),new fu(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=cE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R2{constructor(t){this.Ge=t,this.ze=new Map,this.je=Es(),this.Je=$h(),this.He=$h(),this.Ye=new fe(Pt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:Tt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,r)=>{this.rt(r)&&e(r)})}st(t){const e=t.targetId,i=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(mp(o))if(i===0){const c=new yt(o.path);this.et(e,c,an.newNoDocument(c,wt.min()))}else Kt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const h=this.ut(t),f=h?this.ct(h,t,c):1;if(f!==0){this.it(e);const g=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,g)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,h;try{c=Tr(i).toUint8Array()}catch(f){if(f instanceof zS)return qo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new ey(c,r,o)}catch(f){return qo(f instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.et(e,o,null),r++)}),r}Tt(t){const e=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&mp(h.target)){const f=new yt(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,an.newNoDocument(f,t))}o.Be&&(e.set(c,o.ke()),o.qe())}});let i=Vt();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(f=>{const g=this.ot(f);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,c)=>c.setReadTime(t));const r=new hd(t,e,this.Ye,this.je,i);return this.je=Es(),this.Je=$h(),this.He=$h(),this.Ye=new fe(Pt),r}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new lE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ke(Pt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ke(Pt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ft("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new lE),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function $h(){return new fe(yt.comparator)}function cE(){return new fe(yt.comparator)}const C2={asc:"ASCENDING",desc:"DESCENDING"},I2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D2={and:"AND",or:"OR"};class M2{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function _p(n,t){return n.useProto3Json||rd(t)?t:{value:t}}function Vf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function O2(n,t){return Vf(n,t.toTimestamp())}function Oi(n){return Kt(!!n,49232),wt.fromTimestamp(function(e){const i=Er(e);return new le(i.seconds,i.nanos)}(n))}function ny(n,t){return vp(n,t).canonicalString()}function vp(n,t){const e=function(r){return new re(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function _A(n){const t=re.fromString(n);return Kt(SA(t),10190,{key:t.toString()}),t}function bp(n,t){return ny(n.databaseId,t.path)}function Fm(n,t){const e=_A(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new yt(bA(e))}function vA(n,t){return ny(n.databaseId,t)}function N2(n){const t=_A(n);return t.length===4?re.emptyPath():bA(t)}function Ep(n){return new re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bA(n){return Kt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function uE(n,t,e){return{name:bp(n,t),fields:e.value.mapValue.fields}}function k2(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Tt(39313,{state:g})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(g,y){return g.useProto3Json?(Kt(y===void 0||typeof y=="string",58123),Ze.fromBase64String(y||"")):(Kt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Ze.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(g){const y=g.code===void 0?et.UNKNOWN:gA(g.code);return new ht(y,g.message||"")}(c);e=new pA(i,r,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Fm(n,i.document.name),o=Oi(i.document.updateTime),c=i.document.createTime?Oi(i.document.createTime):wt.min(),h=new bn({mapValue:{fields:i.document.fields}}),f=an.newFoundDocument(r,o,c,h),g=i.targetIds||[],y=i.removedTargetIds||[];e=new _f(g,y,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Fm(n,i.document),o=i.readTime?Oi(i.readTime):wt.min(),c=an.newNoDocument(r,o),h=i.removedTargetIds||[];e=new _f([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Fm(n,i.document),o=i.removedTargetIds||[];e=new _f([],o,r,null)}else{if(!("filter"in t))return Tt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new S2(r,o),h=i.targetId;e=new mA(h,c)}}return e}function P2(n,t){let e;if(t instanceof hu)e={update:uE(n,t.key,t.value)};else if(t instanceof dA)e={delete:bp(n,t.key)};else if(t instanceof Ir)e={update:uE(n,t.key,t.data),updateMask:q2(t.fieldMask)};else{if(!(t instanceof b2))return Tt(16599,{Vt:t.type});e={verify:bp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof kf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Jc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Pf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Tt(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:O2(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Tt(27497)}(n,t.precondition)),e}function V2(n,t){return n&&n.length>0?(Kt(t!==void 0,14353),n.map(e=>function(r,o){let c=r.updateTime?Oi(r.updateTime):Oi(o);return c.isEqual(wt.min())&&(c=Oi(o)),new y2(c,r.transformResults||[])}(e,t))):[]}function L2(n,t){return{documents:[vA(n,t.path)]}}function U2(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=vA(n,r);const o=function(g){if(g.length!==0)return TA(ai.create(g,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(y=>function(b){return{field:Po(b.field),direction:B2(b.dir)}}(y))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=_p(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(t.endAt)),{ft:e,parent:r}}function j2(n){let t=N2(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Kt(i===1,65062);const y=e.from[0];y.allDescendants?r=y.collectionId:t=t.child(y.collectionId)}let o=[];e.where&&(o=function(v){const b=EA(v);return b instanceof ai&&XS(b)?b.getFilters():[b]}(e.where));let c=[];e.orderBy&&(c=function(v){return v.map(b=>function(x){return new Wc(Vo(x.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(b))}(e.orderBy));let h=null;e.limit&&(h=function(v){let b;return b=typeof v=="object"?v.value:v,rd(b)?null:b}(e.limit));let f=null;e.startAt&&(f=function(v){const b=!!v.before,S=v.values||[];return new Nf(S,b)}(e.startAt));let g=null;return e.endAt&&(g=function(v){const b=!v.before,S=v.values||[];return new Nf(S,b)}(e.endAt)),s2(t,r,c,o,h,"F",f,g)}function z2(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:r})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function EA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Vo(e.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Vo(e.unaryFilter.field);return xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Vo(e.unaryFilter.field);return xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Vo(e.unaryFilter.field);return xe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(n):n.fieldFilter!==void 0?function(e){return xe.create(Vo(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ai.create(e.compositeFilter.filters.map(i=>EA(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(e.compositeFilter.op))}(n):Tt(30097,{filter:n})}function B2(n){return C2[n]}function F2(n){return I2[n]}function H2(n){return D2[n]}function Po(n){return{fieldPath:n.canonicalString()}}function Vo(n){return Xe.fromServerFormat(n.fieldPath)}function TA(n){return n instanceof xe?function(e){if(e.op==="=="){if(W0(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NAN"}};if(X0(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(W0(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NOT_NAN"}};if(X0(e.value))return{unaryFilter:{field:Po(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(e.field),op:F2(e.op),value:e.value}}}(n):n instanceof ai?function(e){const i=e.getFilters().map(r=>TA(r));return i.length===1?i[0]:{compositeFilter:{op:H2(e.op),filters:i}}}(n):Tt(54877,{filter:n})}function q2(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function SA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,e,i,r,o=wt.min(),c=wt.min(),h=Ze.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(t){return new ur(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(t){this.yt=t}}function Y2(n){const t=j2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.Cn=new Q2}addToCollectionParentIndex(t,e){return this.Cn.add(e),it.resolve()}getCollectionParents(t,e){return it.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return it.resolve()}deleteFieldIndex(t,e){return it.resolve()}deleteAllFieldIndexes(t){return it.resolve()}createTargetIndexes(t,e){return it.resolve()}getDocumentsMatchingTarget(t,e){return it.resolve(null)}getIndexType(t,e){return it.resolve(0)}getFieldIndexes(t,e){return it.resolve([])}getNextCollectionGroupToUpdate(t){return it.resolve(null)}getMinOffset(t,e){return it.resolve(br.min())}getMinOffsetFromCollectionGroup(t,e){return it.resolve(br.min())}updateCollectionGroup(t,e,i){return it.resolve()}updateIndexEntries(t,e){return it.resolve()}}class Q2{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new ke(re.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ke(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AA=41943040;class vn{static withCacheSize(t){return new vn(t,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(AA,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Qo(0)}static cr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="LruGarbageCollector",$2=1048576;function dE([n,t],[e,i]){const r=Pt(n,e);return r===0?Pt(t,i):r}class X2{constructor(t){this.Ir=t,this.buffer=new ke(dE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();dE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class W2{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ft(fE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){rl(e)?ft(fE,"Ignoring IndexedDB error during garbage collection: ",e):await sl(e)}await this.Vr(3e5)})}}class Z2{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return it.resolve(sd.ce);const i=new X2(e);return this.mr.forEachTarget(t,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(t,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),it.resolve(hE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,r,o,c,h,f,g;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,c=Date.now(),this.nthSequenceNumber(t,r))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(g=Date.now(),No()<=kt.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(g-f)+`ms
Total Duration: ${g-y}ms`),it.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}}function J2(n,t){return new Z2(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.changes=new Pa(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,an.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?it.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&jc(i.mutation,r,Mn.empty(),le.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const r=Ea();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let c=Cc();return o.forEach((h,f)=>{c=c.insert(h,f.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=Ea();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,r){let o=Es();const c=Uc(),h=function(){return Uc()}();return e.forEach((f,g)=>{const y=i.get(g.key);r.has(g.key)&&(y===void 0||y.mutation instanceof Ir)?o=o.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),jc(y.mutation,g,y.mutation.getFieldMask(),le.now())):c.set(g.key,Mn.empty())}),this.recalculateAndSaveOverlays(t,o).next(f=>(f.forEach((g,y)=>c.set(g,y)),e.forEach((g,y)=>h.set(g,new eD(y,c.get(g)??null))),h))}recalculateAndSaveOverlays(t,e){const i=Uc();let r=new fe((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(f=>{const g=e.get(f);if(g===null)return;let y=i.get(f)||Mn.empty();y=h.applyToLocalView(g,y),i.set(f,y);const v=(r.get(h.batchId)||Vt()).add(f);r=r.insert(h.batchId,v)})}).next(()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),g=f.key,y=f.value,v=rA();y.forEach(b=>{if(!o.has(b)){const S=hA(e.get(b),i.get(b));S!==null&&v.set(b,S),o=o.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(t,g,v))}return it.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(c){return yt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):tA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):it.resolve(Ea());let h=Kc,f=o;return c.next(g=>it.forEach(g,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?it.resolve():this.remoteDocumentCache.getEntry(t,y).next(b=>{f=f.insert(y,b)}))).next(()=>this.populateOverlays(t,g,o)).next(()=>this.computeViews(t,f,g,Vt())).next(y=>({batchId:h,changes:sA(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new yt(e)).next(i=>{let r=Cc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=Cc();return this.indexManager.getCollectionParents(t,o).next(h=>it.forEach(h,f=>{const g=function(v,b){return new al(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,g,i,r).next(y=>{y.forEach((v,b)=>{c=c.insert(v,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(c=>{o.forEach((f,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,an.newInvalidDocument(y)))});let h=Cc();return c.forEach((f,g)=>{const y=o.get(f);y!==void 0&&jc(y.mutation,g,Mn.empty(),le.now()),ld(e,g)&&(h=h.insert(f,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return it.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Oi(r.createTime)}}(e)),it.resolve()}getNamedQuery(t,e){return it.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(r){return{name:r.name,query:Y2(r.bundledQuery),readTime:Oi(r.readTime)}}(e)),it.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.overlays=new fe(yt.comparator),this.qr=new Map}getOverlay(t,e){return it.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Ea();return it.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.St(t,e,o)}),it.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),it.resolve()}getOverlaysForCollection(t,e,i){const r=Ea(),o=e.length+1,c=new yt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,g=f.getKey();if(!e.isPrefixOf(g.path))break;g.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return it.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new fe((g,y)=>g-y);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===e&&g.largestBatchId>i){let y=o.get(g.largestBatchId);y===null&&(y=Ea(),o=o.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const h=Ea(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((g,y)=>h.set(g,y)),!(h.size()>=r)););return it.resolve(h)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new T2(e,i));let o=this.qr.get(e);o===void 0&&(o=Vt(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(t){return it.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,it.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.Qr=new ke(Be.$r),this.Ur=new ke(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new Be(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new Be(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new yt(new re([])),i=new Be(e,t),r=new Be(e,t+1),o=[];return this.Ur.forEachInRange([i,r],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new yt(new re([])),i=new Be(e,t),r=new Be(e,t+1);let o=Vt();return this.Ur.forEachInRange([i,r],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Be(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Be{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return yt.comparator(t.key,e.key)||Pt(t.Yr,e.Yr)}static Kr(t,e){return Pt(t.Yr,e.Yr)||yt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ke(Be.$r)}checkEmpty(t){return it.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new E2(o,e,i,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new Be(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return it.resolve(c)}lookupMutationBatch(t,e){return it.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ei(i),o=r<0?0:r;return it.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return it.resolve(this.mutationQueue.length===0?Kp:this.tr-1)}getAllMutationBatches(t){return it.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Be(e,0),r=new Be(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],c=>{const h=this.Xr(c.Yr);o.push(h)}),it.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ke(Pt);return e.forEach(r=>{const o=new Be(r,0),c=new Be(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{i=i.add(h.Yr)})}),it.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;yt.isDocumentKey(o)||(o=o.child(""));const c=new Be(new yt(o),0);let h=new ke(Pt);return this.Zr.forEachWhile(f=>{const g=f.key.path;return!!i.isPrefixOf(g)&&(g.length===r&&(h=h.add(f.Yr)),!0)},c),it.resolve(this.ti(h))}ti(t){const e=[];return t.forEach(i=>{const r=this.Xr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Kt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return it.forEach(e.mutations,r=>{const o=new Be(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new Be(e,0),r=this.Zr.firstAfterOrEqual(i);return it.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,it.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t){this.ri=t,this.docs=function(){return new fe(yt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return it.resolve(i?i.document.mutableCopy():an.newInvalidDocument(e))}getEntries(t,e){let i=Es();return e.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():an.newInvalidDocument(r))}),it.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=Es();const c=e.path,h=new yt(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:g,value:{document:y}}=f.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||VI(PI(y),i)<=0||(r.has(y.key)||ld(e,y))&&(o=o.insert(y.key,y.mutableCopy()))}return it.resolve(o)}getAllFromCollectionGroup(t,e,i,r){Tt(9500)}ii(t,e){return it.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new lD(this)}getSize(t){return it.resolve(this.size)}}class lD extends tD{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)}),it.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t){this.persistence=t,this.si=new Pa(e=>Xp(e),Wp),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new iy,this.targetCount=0,this.ai=Qo.ur()}forEachTarget(t,e){return this.si.forEach((i,r)=>e(r)),it.resolve()}getLastRemoteSnapshotVersion(t){return it.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return it.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),it.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),it.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Qo(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,it.resolve()}updateTargetData(t,e){return this.Pr(e),it.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,it.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),r++)}),it.waitFor(o).next(()=>r)}getTargetCount(t){return it.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return it.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),it.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(c=>{o.push(r.markPotentiallyOrphaned(t,c))}),it.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),it.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return it.resolve(i)}containsKey(t,e){return it.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t,e){this.ui={},this.overlays={},this.ci=new sd(0),this.li=!1,this.li=!0,this.hi=new rD,this.referenceDelegate=t(this),this.Pi=new cD(this),this.indexManager=new K2,this.remoteDocumentCache=function(r){return new oD(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new G2(e),this.Ii=new iD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new sD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new aD(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){ft("MemoryPersistence","Starting transaction:",t);const r=new uD(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(t,e){return it.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class uD extends UI{constructor(t){super(),this.currentSequenceNumber=t}}class sy{constructor(t){this.persistence=t,this.Ri=new iy,this.Vi=null}static mi(t){return new sy(t)}get fi(){if(this.Vi)return this.Vi;throw Tt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),it.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),it.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),it.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return it.forEach(this.fi,i=>{const r=yt.fromPath(i);return this.gi(t,r).next(o=>{o||e.removeEntry(r,wt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return it.or([()=>it.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Lf{constructor(t,e){this.persistence=t,this.pi=new Pa(i=>BI(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=J2(this,e)}static mi(t,e){return new Lf(t,e)}Ei(){}di(t){return it.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return it.forEach(this.pi,(i,r)=>this.br(t,i,r).next(o=>o?it.resolve():e(r)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,c=>this.br(t,c,e).next(h=>{h||(i++,o.removeEntry(c,wt.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),it.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),it.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),it.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),it.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=mf(t.data.value)),e}br(t,e,i){return it.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return it.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=r}static As(t,e){let i=Vt(),r=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new ry(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return iC()?8:jI(cn())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ys(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(t,e,r,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new hD;return this.Ss(t,e,c).next(h=>{if(o.result=h,this.Vs)return this.bs(t,e,c,h.size)})}).next(()=>o.result)}bs(t,e,i,r){return i.documentReadCount<this.fs?(No()<=kt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",ko(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),it.resolve()):(No()<=kt.DEBUG&&ft("QueryEngine","Query:",ko(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(No()<=kt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",ko(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Di(e))):it.resolve())}ys(t,e){if(eE(e))return it.resolve(null);let i=Di(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=yp(e,null,"F"),i=Di(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Vt(...o);return this.ps.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(f=>{const g=this.Ds(e,h);return this.Cs(e,g,c,f.readTime)?this.ys(t,yp(e,null,"F")):this.vs(t,g,e,f)}))})))}ws(t,e,i,r){return eE(e)||r.isEqual(wt.min())?it.resolve(null):this.ps.getDocuments(t,i).next(o=>{const c=this.Ds(e,o);return this.Cs(e,c,i,r)?it.resolve(null):(No()<=kt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ko(e)),this.vs(t,c,e,kI(r,Kc)).next(h=>h))})}Ds(t,e){let i=new ke(nA(t));return e.forEach((r,o)=>{ld(t,o)&&(i=i.add(o))}),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,i){return No()<=kt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",ko(e)),this.ps.getDocumentsMatchingQuery(t,e,br.min(),i)}vs(t,e,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="LocalStore",dD=3e8;class gD{constructor(t,e,i,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new fe(Pt),this.xs=new Pa(o=>Xp(o),Wp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new nD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function mD(n,t,e,i){return new gD(n,t,e,i)}async function xA(n,t){const e=Rt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let f=Vt();for(const g of r){c.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}for(const g of o){h.push(g.batchId);for(const y of g.mutations)f=f.add(y.key)}return e.localDocuments.getDocuments(i,f).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:h}))})})}function pD(n,t){const e=Rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return function(h,f,g,y){const v=g.batch,b=v.keys();let S=it.resolve();return b.forEach(x=>{S=S.next(()=>y.getEntry(f,x)).next(D=>{const M=g.docVersions.get(x);Kt(M!==null,48541),D.version.compareTo(M)<0&&(v.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),y.addEntry(D)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(f,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=Vt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(f=f.add(h.batch.mutations[g].key));return f}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function RA(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function yD(n,t){const e=Rt(n),i=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const h=[];t.targetChanges.forEach((y,v)=>{const b=r.get(v);if(!b)return;h.push(e.Pi.removeMatchingKeys(o,y.removedDocuments,v).next(()=>e.Pi.addMatchingKeys(o,y.addedDocuments,v)));let S=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?S=S.withResumeToken(Ze.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,i)),r=r.insert(v,S),function(D,M,j){return D.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=dD?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(b,S,y)&&h.push(e.Pi.updateTargetData(o,S))});let f=Es(),g=Vt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(_D(o,c,t.documentUpdates).next(y=>{f=y.ks,g=y.qs})),!i.isEqual(wt.min())){const y=e.Pi.getLastRemoteSnapshotVersion(o).next(v=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return it.waitFor(h).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,f,g)).next(()=>f)}).then(o=>(e.Ms=r,o))}function _D(n,t,e){let i=Vt(),r=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=Es();return e.forEach((h,f)=>{const g=o.get(h);f.isFoundDocument()!==g.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(wt.min())?(t.removeEntry(h,f.readTime),c=c.insert(h,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||f.version.compareTo(g.version)===0&&g.hasPendingWrites?(t.addEntry(f),c=c.insert(h,f)):ft(ay,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",f.version)}),{ks:c,qs:r}})}function vD(n,t){const e=Rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Kp),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function bD(n,t){const e=Rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Pi.getTargetData(i,t).next(o=>o?(r=o,it.resolve(r)):e.Pi.allocateTargetId(i).next(c=>(r=new ur(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function Tp(n,t,e){const i=Rt(n),r=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,r))}catch(c){if(!rl(c))throw c;ft(ay,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function gE(n,t,e){const i=Rt(n);let r=wt.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,g,y){const v=Rt(f),b=v.xs.get(y);return b!==void 0?it.resolve(v.Ms.get(b)):v.Pi.getTargetData(g,y)}(i,c,Di(t)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next(f=>{o=f})}).next(()=>i.Fs.getDocumentsMatchingQuery(c,t,e?r:wt.min(),e?o:Vt())).next(h=>(ED(i,a2(t),h),{documents:h,Qs:o})))}function ED(n,t,e){let i=n.Os.get(t)||wt.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Os.set(t,i)}class mE{constructor(){this.activeTargetIds=f2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class TD{constructor(){this.Mo=new mE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new mE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="ConnectivityMonitor";class yE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(pE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ft(pE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh=null;function Sp(){return Xh===null?Xh=function(){return 268435456+Math.round(2147483648*Math.random())}():Xh++,"0x"+Xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="RestConnection",AD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Mf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,e,i,r,o){const c=Sp(),h=this.zo(t,e.toUriEncodedString());ft(Hm,`Sending RPC '${t}' ${c}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:g}=new URL(h),y=el(g);return this.Jo(t,h,f,i,y).then(v=>(ft(Hm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw qo(Hm,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(t,e,i,r,o,c){return this.Go(t,e,i,r,o)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+il}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,o)=>t[o]=r),i&&i.headers.forEach((r,o)=>t[o]=r)}zo(t,e){const i=AD[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class RD extends wD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,o){const c=Sp();return new Promise((h,f)=>{const g=new IS;g.setWithCredentials(!0),g.listenOnce(DS.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case gf.NO_ERROR:const v=g.getResponseJson();ft(nn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case gf.TIMEOUT:ft(nn,`RPC '${t}' ${c} timed out`),f(new ht(et.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const b=g.getStatus();if(ft(nn,`RPC '${t}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const x=S?.error;if(x&&x.status&&x.message){const D=function(j){const W=j.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(W)>=0?W:et.UNKNOWN}(x.status);f(new ht(D,x.message))}else f(new ht(et.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ht(et.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{l_:t,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ft(nn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(r);ft(nn,`RPC '${t}' ${c} sending request:`,r),g.send(e,"POST",y,i,15)})}T_(t,e,i){const r=Sp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=NS(),h=OS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(f.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const y=o.join("");ft(nn,`Creating RPC '${t}' stream ${r}: ${y}`,f);const v=c.createWebChannel(y,f);this.I_(v);let b=!1,S=!1;const x=new xD({Yo:M=>{S?ft(nn,`Not sending because RPC '${t}' stream ${r} is closed:`,M):(b||(ft(nn,`Opening RPC '${t}' stream ${r} transport.`),v.open(),b=!0),ft(nn,`RPC '${t}' stream ${r} sending:`,M),v.send(M))},Zo:()=>v.close()}),D=(M,j,W)=>{M.listen(j,$=>{try{W($)}catch(rt){setTimeout(()=>{throw rt},0)}})};return D(v,Rc.EventType.OPEN,()=>{S||(ft(nn,`RPC '${t}' stream ${r} transport opened.`),x.o_())}),D(v,Rc.EventType.CLOSE,()=>{S||(S=!0,ft(nn,`RPC '${t}' stream ${r} transport closed`),x.a_(),this.E_(v))}),D(v,Rc.EventType.ERROR,M=>{S||(S=!0,qo(nn,`RPC '${t}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),x.a_(new ht(et.UNAVAILABLE,"The operation could not be completed")))}),D(v,Rc.EventType.MESSAGE,M=>{if(!S){const j=M.data[0];Kt(!!j,16349);const W=j,$=W?.error||W[0]?.error;if($){ft(nn,`RPC '${t}' stream ${r} received error:`,$);const rt=$.status;let Z=function(C){const I=we[C];if(I!==void 0)return gA(I)}(rt),ot=$.message;Z===void 0&&(Z=et.INTERNAL,ot="Unknown error status: "+rt+" with message "+$.message),S=!0,x.a_(new ht(Z,ot)),v.close()}else ft(nn,`RPC '${t}' stream ${r} received:`,j),x.u_(j)}}),D(h,MS.STAT_EVENT,M=>{M.stat===up.PROXY?ft(nn,`RPC '${t}' stream ${r} detected buffering proxy`):M.stat===up.NOPROXY&&ft(nn,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(n){return new M2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-i);r>0&&ft("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="PersistentStream";class IA{constructor(t,e,i,r,o,c,h,f){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CA(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===et.RESOURCE_EXHAUSTED?(bs(e.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===e&&this.G_(i,r)},i=>{t(()=>{const r=new ht(et.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ft(_E,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(ft(_E,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CD extends IA{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=k2(this.serializer,t),i=function(o){if(!("targetChange"in o))return wt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?wt.min():c.readTime?Oi(c.readTime):wt.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=Ep(this.serializer),e.addTarget=function(o,c){let h;const f=c.target;if(h=mp(f)?{documents:L2(o,f)}:{query:U2(o,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=yA(o,c.resumeToken);const g=_p(o,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(wt.min())>0){h.readTime=Vf(o,c.snapshotVersion.toTimestamp());const g=_p(o,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,t);const i=z2(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=Ep(this.serializer),e.removeTarget=t,this.q_(e)}}class ID extends IA{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Kt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Kt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Kt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=V2(t.writeResults,t.commitTime),i=Oi(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Ep(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>P2(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{}class MD extends DD{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ht(et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(t,vp(e,i),r,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ht(et.UNKNOWN,o.toString())})}Ho(t,e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(t,vp(e,i),r,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ht(et.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class OD{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bs(e),this.aa=!1):ft("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class ND{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{i.enqueueAndForget(async()=>{Va(this)&&(ft(Ma,"Restarting streams for network reachability change."),await async function(f){const g=Rt(f);g.Ea.add(4),await du(g),g.Ra.set("Unknown"),g.Ea.delete(4),await dd(g)}(this))})}),this.Ra=new OD(i,r)}}async function dd(n){if(Va(n))for(const t of n.da)await t(!0)}async function du(n){for(const t of n.da)await t(!1)}function DA(n,t){const e=Rt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),uy(e)?cy(e):ol(e).O_()&&ly(e,t))}function oy(n,t){const e=Rt(n),i=ol(e);e.Ia.delete(t),i.O_()&&MA(e,t),e.Ia.size===0&&(i.O_()?i.L_():Va(e)&&e.Ra.set("Unknown"))}function ly(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ol(n).Y_(t)}function MA(n,t){n.Va.Ue(t),ol(n).Z_(t)}function cy(n){n.Va=new R2({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),ol(n).start(),n.Ra.ua()}function uy(n){return Va(n)&&!ol(n).x_()&&n.Ia.size>0}function Va(n){return Rt(n).Ea.size===0}function OA(n){n.Va=void 0}async function kD(n){n.Ra.set("Online")}async function PD(n){n.Ia.forEach((t,e)=>{ly(n,t)})}async function VD(n,t){OA(n),uy(n)?(n.Ra.ha(t),cy(n)):n.Ra.set("Unknown")}async function LD(n,t,e){if(n.Ra.set("Online"),t instanceof pA&&t.state===2&&t.cause)try{await async function(r,o){const c=o.cause;for(const h of o.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))}(n,t)}catch(i){ft(Ma,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Uf(n,i)}else if(t instanceof _f?n.Va.Ze(t):t instanceof mA?n.Va.st(t):n.Va.tt(t),!e.isEqual(wt.min()))try{const i=await RA(n.localStore);e.compareTo(i)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(g);y&&o.Ia.set(g,y.withResumeToken(f.resumeToken,c))}}),h.targetMismatches.forEach((f,g)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(Ze.EMPTY_BYTE_STRING,y.snapshotVersion)),MA(o,f);const v=new ur(y.target,f,g,y.sequenceNumber);ly(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ft(Ma,"Failed to raise snapshot:",i),await Uf(n,i)}}async function Uf(n,t,e){if(!rl(t))throw t;n.Ea.add(1),await du(n),n.Ra.set("Offline"),e||(e=()=>RA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ft(Ma,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await dd(n)})}function NA(n,t){return t().catch(e=>Uf(n,e,t))}async function gd(n){const t=Rt(n),e=Ar(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Kp;for(;UD(t);)try{const r=await vD(t.localStore,i);if(r===null){t.Ta.length===0&&e.L_();break}i=r.batchId,jD(t,r)}catch(r){await Uf(t,r)}kA(t)&&PA(t)}function UD(n){return Va(n)&&n.Ta.length<10}function jD(n,t){n.Ta.push(t);const e=Ar(n);e.O_()&&e.X_&&e.ea(t.mutations)}function kA(n){return Va(n)&&!Ar(n).x_()&&n.Ta.length>0}function PA(n){Ar(n).start()}async function zD(n){Ar(n).ra()}async function BD(n){const t=Ar(n);for(const e of n.Ta)t.ea(e.mutations)}async function FD(n,t,e){const i=n.Ta.shift(),r=ty.from(i,t,e);await NA(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await gd(n)}async function HD(n,t){t&&Ar(n).X_&&await async function(i,r){if(function(c){return A2(c)&&c!==et.ABORTED}(r.code)){const o=i.Ta.shift();Ar(i).B_(),await NA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await gd(i)}}(n,t),kA(n)&&PA(n)}async function vE(n,t){const e=Rt(n);e.asyncQueue.verifyOperationInProgress(),ft(Ma,"RemoteStore received new credentials");const i=Va(e);e.Ea.add(3),await du(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await dd(e)}async function qD(n,t){const e=Rt(n);t?(e.Ea.delete(2),await dd(e)):t||(e.Ea.add(2),await du(e),e.Ra.set("Unknown"))}function ol(n){return n.ma||(n.ma=function(e,i,r){const o=Rt(e);return o.sa(),new CD(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Xo:kD.bind(null,n),t_:PD.bind(null,n),r_:VD.bind(null,n),H_:LD.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),uy(n)?cy(n):n.Ra.set("Unknown")):(await n.ma.stop(),OA(n))})),n.ma}function Ar(n){return n.fa||(n.fa=function(e,i,r){const o=Rt(e);return o.sa(),new ID(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zD.bind(null,n),r_:HD.bind(null,n),ta:BD.bind(null,n),na:FD.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await gd(n)):(await n.fa.stop(),n.Ta.length>0&&(ft(Ma,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,h=new hy(t,e,c,r,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,t){if(bs("AsyncQueue",`${t}: ${n}`),rl(n))return new ht(et.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(t){return new Uo(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||yt.comparator(e.key,i.key):(e,i)=>yt.comparator(e.key,i.key),this.keyedMap=Cc(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Uo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.ga=new fe(yt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Tt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class $o{constructor(t,e,i,r,o,c,h,f,g){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=g}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new $o(t,e,Uo.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&od(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class YD{constructor(){this.queries=EE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=Rt(e),o=r.queries;r.queries=EE(),o.forEach((c,h)=>{for(const f of h.Sa)f.onError(i)})})(this,new ht(et.ABORTED,"Firestore shutting down"))}}function EE(){return new Pa(n=>eA(n),od)}async function VA(n,t){const e=Rt(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new GD,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const h=fy(c,`Initialization of query '${ko(t.query)}' failed`);return void t.onError(h)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&dy(e)}async function LA(n,t){const e=Rt(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.Sa.indexOf(t);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function KD(n,t){const e=Rt(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const h of c.Sa)h.Fa(r)&&(i=!0);c.wa=r}}i&&dy(e)}function QD(n,t,e){const i=Rt(n),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);i.queries.delete(t)}function dy(n){n.Ca.forEach(t=>{t.next()})}var Ap,TE;(TE=Ap||(Ap={})).Ma="default",TE.Cache="cache";class UA{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new $o(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this.key=t}}class zA{constructor(t){this.key=t}}class $D{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=nA(t),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new bE,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,g=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((y,v)=>{const b=r.get(y),S=ld(this.query,v)?v:null,x=!!b&&this.mutatedKeys.has(b.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let M=!1;b&&S?b.data.isEqual(S.data)?x!==D&&(i.track({type:3,doc:S}),M=!0):this.su(b,S)||(i.track({type:2,doc:S}),M=!0,(f&&this.eu(S,f)>0||g&&this.eu(S,g)<0)&&(h=!0)):!b&&S?(i.track({type:0,doc:S}),M=!0):b&&!S&&(i.track({type:1,doc:b}),M=!0,(f||g)&&(h=!0)),M&&(S?(c=c.add(S),o=D?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Cs:h,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort((y,v)=>function(S,x){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{Rt:M})}};return D(S)-D(x)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(i),r=r??!1;const h=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,g=f!==this.Za;return this.Za=f,c.length!==0||g?{snapshot:new $o(this.query,t.tu,o,c,t.mutatedKeys,f===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new zA(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new jA(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=Vt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return $o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gy="SyncEngine";class XD{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class WD{constructor(t){this.key=t,this.hu=!1}}class ZD{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Pa(h=>eA(h),od),this.Iu=new Map,this.Eu=new Set,this.du=new fe(yt.comparator),this.Au=new Map,this.Ru=new iy,this.Vu={},this.mu=new Map,this.fu=Qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JD(n,t,e=!0){const i=YA(n);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await BA(i,t,e,!0),r}async function tM(n,t){const e=YA(n);await BA(e,t,!0,!1)}async function BA(n,t,e,i){const r=await bD(n.localStore,Di(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await eM(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&DA(n.remoteStore,r),h}async function eM(n,t,e,i,r){n.pu=(v,b,S)=>async function(D,M,j,W){let $=M.view.ru(j);$.Cs&&($=await gE(D.localStore,M.query,!1).then(({documents:N})=>M.view.ru(N,$)));const rt=W&&W.targetChanges.get(M.targetId),Z=W&&W.targetMismatches.get(M.targetId)!=null,ot=M.view.applyChanges($,D.isPrimaryClient,rt,Z);return AE(D,M.targetId,ot.au),ot.snapshot}(n,v,b,S);const o=await gE(n.localStore,t,!0),c=new $D(t,o.Qs),h=c.ru(o.documents),f=fu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),g=c.applyChanges(h,n.isPrimaryClient,f);AE(n,e,g.au);const y=new XD(t,e,c);return n.Tu.set(t,y),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),g.snapshot}async function nM(n,t,e){const i=Rt(n),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(c=>!od(c,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Tp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&oy(i.remoteStore,r.targetId),wp(i,r.targetId)}).catch(sl)):(wp(i,r.targetId),await Tp(i.localStore,r.targetId,!0))}async function iM(n,t){const e=Rt(n),i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),oy(e.remoteStore,i.targetId))}async function sM(n,t,e){const i=hM(n);try{const r=await function(c,h){const f=Rt(c),g=le.now(),y=h.reduce((S,x)=>S.add(x.key),Vt());let v,b;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let x=Es(),D=Vt();return f.Ns.getEntries(S,y).next(M=>{x=M,x.forEach((j,W)=>{W.isValidDocument()||(D=D.add(j))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,x)).next(M=>{v=M;const j=[];for(const W of h){const $=v2(W,v.get(W.key).overlayedDocument);$!=null&&j.push(new Ir(W.key,$,KS($.value.mapValue),Mi.exists(!0)))}return f.mutationQueue.addMutationBatch(S,g,j,h)}).next(M=>{b=M;const j=M.applyToLocalDocumentSet(v,D);return f.documentOverlayCache.saveOverlays(S,M.batchId,j)})}).then(()=>({batchId:b.batchId,changes:sA(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(c,h,f){let g=c.Vu[c.currentUser.toKey()];g||(g=new fe(Pt)),g=g.insert(h,f),c.Vu[c.currentUser.toKey()]=g}(i,r.batchId,e),await gu(i,r.changes),await gd(i.remoteStore)}catch(r){const o=fy(r,"Failed to persist write");e.reject(o)}}async function FA(n,t){const e=Rt(n);try{const i=await yD(e.localStore,t);t.targetChanges.forEach((r,o)=>{const c=e.Au.get(o);c&&(Kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Kt(c.hu,14607):r.removedDocuments.size>0&&(Kt(c.hu,42227),c.hu=!1))}),await gu(e,i,t)}catch(i){await sl(i)}}function SE(n,t,e){const i=Rt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Tu.forEach((o,c)=>{const h=c.view.va(t);h.snapshot&&r.push(h.snapshot)}),function(c,h){const f=Rt(c);f.onlineState=h;let g=!1;f.queries.forEach((y,v)=>{for(const b of v.Sa)b.va(h)&&(g=!0)}),g&&dy(f)}(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function rM(n,t,e){const i=Rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Au.get(t),o=r&&r.key;if(o){let c=new fe(yt.comparator);c=c.insert(o,an.newNoDocument(o,wt.min()));const h=Vt().add(o),f=new hd(wt.min(),new Map,new fe(Pt),c,h);await FA(i,f),i.du=i.du.remove(o),i.Au.delete(t),my(i)}else await Tp(i.localStore,t,!1).then(()=>wp(i,t,e)).catch(sl)}async function aM(n,t){const e=Rt(n),i=t.batch.batchId;try{const r=await pD(e.localStore,t);qA(e,i,null),HA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await gu(e,r)}catch(r){await sl(r)}}async function oM(n,t,e){const i=Rt(n);try{const r=await function(c,h){const f=Rt(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return f.mutationQueue.lookupMutationBatch(g,h).next(v=>(Kt(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(g,v))).next(()=>f.mutationQueue.performConsistencyCheck(g)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(g,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>f.localDocuments.getDocuments(g,y))})}(i.localStore,t);qA(i,t,e),HA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await gu(i,r)}catch(r){await sl(r)}}function HA(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function qA(n,t,e){const i=Rt(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function wp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||GA(n,i)})}function GA(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(oy(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),my(n))}function AE(n,t,e){for(const i of e)i instanceof jA?(n.Ru.addReference(i.key,t),lM(n,i)):i instanceof zA?(ft(gy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||GA(n,i.key)):Tt(19791,{wu:i})}function lM(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(ft(gy,"New document in limbo: "+e),n.Eu.add(i),my(n))}function my(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new yt(re.fromString(t)),i=n.fu.next();n.Au.set(i,new WD(e)),n.du=n.du.insert(e,i),DA(n.remoteStore,new ur(Di(Zp(e.path)),i,"TargetPurposeLimboResolution",sd.ce))}}async function gu(n,t,e){const i=Rt(n),r=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach((h,f)=>{c.push(i.pu(f,t,e).then(g=>{if((g||e)&&i.isPrimaryClient){const y=g?!g.fromCache:e?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(g){r.push(g);const y=ry.As(f.targetId,g);o.push(y)}}))}),await Promise.all(c),i.Pu.H_(r),await async function(f,g){const y=Rt(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>it.forEach(g,b=>it.forEach(b.Es,S=>y.persistence.referenceDelegate.addReference(v,b.targetId,S)).next(()=>it.forEach(b.ds,S=>y.persistence.referenceDelegate.removeReference(v,b.targetId,S)))))}catch(v){if(!rl(v))throw v;ft(ay,"Failed to update sequence numbers: "+v)}for(const v of g){const b=v.targetId;if(!v.fromCache){const S=y.Ms.get(b),x=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(x);y.Ms=y.Ms.insert(b,D)}}}(i.localStore,o))}async function cM(n,t){const e=Rt(n);if(!e.currentUser.isEqual(t)){ft(gy,"User change. New user:",t.toKey());const i=await xA(e.localStore,t);e.currentUser=t,function(o,c){o.mu.forEach(h=>{h.forEach(f=>{f.reject(new ht(et.CANCELLED,c))})}),o.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await gu(e,i.Ls)}}function uM(n,t){const e=Rt(n),i=e.Au.get(t);if(i&&i.hu)return Vt().add(i.key);{let r=Vt();const o=e.Iu.get(t);if(!o)return r;for(const c of o){const h=e.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function YA(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=FA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rM.bind(null,t),t.Pu.H_=KD.bind(null,t.eventManager),t.Pu.yu=QD.bind(null,t.eventManager),t}function hM(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oM.bind(null,t),t}class jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=fd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return mD(this.persistence,new fD,t.initialUser,this.serializer)}Cu(t){return new wA(sy.mi,this.serializer)}Du(t){return new TD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jf.provider={build:()=>new jf};class fM extends jf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Kt(this.persistence.referenceDelegate instanceof Lf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new W2(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new wA(i=>Lf.mi(i,e),this.serializer)}}class xp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cM.bind(null,this.syncEngine),await qD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new YD}()}createDatastore(t){const e=fd(t.databaseInfo.databaseId),i=function(o){return new RD(o)}(t.databaseInfo);return function(o,c,h,f){return new MD(o,c,h,f)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,c,h){return new ND(i,r,o,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>SE(this.syncEngine,e,0),function(){return yE.v()?new yE:new SD}())}createSyncEngine(t,e){return function(r,o,c,h,f,g,y){const v=new ZD(r,o,c,h,f,g);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(e){const i=Rt(e);ft(Ma,"RemoteStore shutting down."),i.Ea.add(5),await du(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}xp.provider={build:()=>new xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):bs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="FirestoreClient";class dM{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=rn.UNAUTHENTICATED,this.clientId=Yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ft(wr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ft(wr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=fy(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Gm(n,t){n.asyncQueue.verifyOperationInProgress(),ft(wr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await xA(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function wE(n,t){n.asyncQueue.verifyOperationInProgress();const e=await gM(n);ft(wr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>vE(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>vE(t.remoteStore,r)),n._onlineComponents=t}async function gM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(wr,"Using user provided OfflineComponentProvider");try{await Gm(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===et.FAILED_PRECONDITION||r.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;qo("Error using user provided cache. Falling back to memory cache: "+e),await Gm(n,new jf)}}else ft(wr,"Using default OfflineComponentProvider"),await Gm(n,new fM(void 0));return n._offlineComponents}async function QA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(wr,"Using user provided OnlineComponentProvider"),await wE(n,n._uninitializedComponentsProvider._online)):(ft(wr,"Using default OnlineComponentProvider"),await wE(n,new xp))),n._onlineComponents}function mM(n){return QA(n).then(t=>t.syncEngine)}async function Rp(n){const t=await QA(n),e=t.eventManager;return e.onListen=JD.bind(null,t.syncEngine),e.onUnlisten=nM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=tM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=iM.bind(null,t.syncEngine),e}function pM(n,t,e={}){const i=new pr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,f,g){const y=new KA({next:b=>{y.Nu(),c.enqueueAndForget(()=>LA(o,v)),b.fromCache&&f.source==="server"?g.reject(new ht(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new UA(h,y,{includeMetadataChanges:!0,qa:!0});return VA(o,v)}(await Rp(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="firestore.googleapis.com",RE=!0;class CE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ht(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XA,this.ssl=RE}else this.host=t.host,this.ssl=t.ssl??RE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=AA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<$2)throw new ht(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}NI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$A(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ht(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ht(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ht(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class md{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new SI;switch(i.type){case"firstParty":return new RI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ht(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=xE.get(e);i&&(ft("ComponentProvider","Removing Datastore"),xE.delete(e),i.terminate())}(this),Promise.resolve()}}function yM(n,t,e,i={}){n=ys(n,md);const r=el(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${t}:${e}`;r&&(bS(`https://${h}`),ES("Firestore",!0)),o.host!==XA&&o.host!==h&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:h,ssl:r,emulatorOptions:i};if(!Ca(f,c)&&(n._setSettings(f),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=rn.MOCK_USER;else{g=QR(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ht(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new rn(v)}n._authCredentials=new AI(new PS(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Dr(this.firestore,t,this._query)}}class Ce{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(uu(e,Ce._jsonSchema))return new Ce(t,i||null,new yt(re.fromString(e.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Re("string",Ce._jsonSchemaVersion),referencePath:Re("string")};class yr extends Dr{constructor(t,e,i){super(t,e,Zp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new yt(t))}withConverter(t){return new yr(this.firestore,t,this._path)}}function On(n,t,...e){if(n=un(n),VS("collection","path",t),n instanceof md){const i=re.fromString(t,...e);return B0(i),new yr(n,null,i)}{if(!(n instanceof Ce||n instanceof yr))throw new ht(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return B0(i),new yr(n.firestore,null,i)}}function pd(n,t,...e){if(n=un(n),arguments.length===1&&(t=Yp.newId()),VS("doc","path",t),n instanceof md){const i=re.fromString(t,...e);return z0(i),new Ce(n,null,new yt(i))}{if(!(n instanceof Ce||n instanceof yr))throw new ht(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return z0(i),new Ce(n.firestore,n instanceof yr?n.converter:null,new yt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="AsyncQueue";class DE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CA(this,"async_queue_retry"),this._c=()=>{const i=qm();i&&ft(IE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=qm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=qm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new pr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!rl(t))throw t;ft(IE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,bs("INTERNAL UNHANDLED ERROR: ",ME(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=hy.createAndSchedule(this,t,e,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&Tt(47125,{Pc:ME(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function ME(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Xo extends md{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new DE,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new DE(t),this._firestoreClient=void 0,await t}}}function _M(n,t){const e=typeof n=="object"?n:wS(),i=typeof n=="string"?n:Mf,r=qp(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=YR("firestore");o&&yM(r,...o)}return r}function py(n){if(n._terminated)throw new ht(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||vM(n),n._firestoreClient}function vM(n){const t=n._freezeSettings(),e=function(r,o,c,h){return new qI(r,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$A(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new dM(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Kn(Ze.fromBase64String(t))}catch(e){throw new ht(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Kn(Ze.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(uu(t,Kn._jsonSchema))return Kn.fromBase64String(t.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Re("string",Kn._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(t){if(uu(t,Ni._jsonSchema))return new Ni(t.latitude,t.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:Re("string",Ni._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(uu(t,ki._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new ki(t.vectorValues);throw new ht(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Re("string",ki._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=/^__.*__$/;class EM{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Ir(t,this.data,this.fieldMask,e,this.fieldTransforms):new hu(t,this.data,e,this.fieldTransforms)}}class WA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Ir(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function ZA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ac:n})}}class _y{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new _y({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return zf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(ZA(this.Ac)&&bM.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class TM{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||fd(t)}Cc(t,e,i,r=!1){return new _y({Ac:t,methodName:e,Dc:i,path:Xe.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vy(n){const t=n._freezeSettings(),e=fd(n._databaseId);return new TM(n._databaseId,!!t.ignoreUndefinedProperties,e)}function SM(n,t,e,i,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,t,e,r);by("Data must be an object, but it was:",c,i);const h=JA(i,c);let f,g;if(o.merge)f=new Mn(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const b=Cp(t,v,e);if(!c.contains(b))throw new ht(et.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);e1(y,b)||y.push(b)}f=new Mn(y),g=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,g=c.fieldTransforms;return new EM(new bn(h),f,g)}class _d extends yy{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _d}}function AM(n,t,e,i){const r=n.Cc(1,t,e);by("Data must be an object, but it was:",r,i);const o=[],c=bn.empty();Cr(i,(f,g)=>{const y=Ey(t,f,e);g=un(g);const v=r.yc(y);if(g instanceof _d)o.push(y);else{const b=mu(g,v);b!=null&&(o.push(y),c.set(y,b))}});const h=new Mn(o);return new WA(c,h,r.fieldTransforms)}function wM(n,t,e,i,r,o){const c=n.Cc(1,t,e),h=[Cp(t,i,e)],f=[r];if(o.length%2!=0)throw new ht(et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)h.push(Cp(t,o[b])),f.push(o[b+1]);const g=[],y=bn.empty();for(let b=h.length-1;b>=0;--b)if(!e1(g,h[b])){const S=h[b];let x=f[b];x=un(x);const D=c.yc(S);if(x instanceof _d)g.push(S);else{const M=mu(x,D);M!=null&&(g.push(S),y.set(S,M))}}const v=new Mn(g);return new WA(y,v,c.fieldTransforms)}function xM(n,t,e,i=!1){return mu(e,n.Cc(i?4:3,t))}function mu(n,t){if(t1(n=un(n)))return by("Unsupported field value:",t,n),JA(n,t);if(n instanceof yy)return function(i,r){if(!ZA(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,r){const o=[];let c=0;for(const h of i){let f=mu(h,r.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=un(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return d2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=le.fromDate(i);return{timestampValue:Vf(r.serializer,o)}}if(i instanceof le){const o=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vf(r.serializer,o)}}if(i instanceof Ni)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:yA(r.serializer,i._byteString)};if(i instanceof Ce){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ny(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ki)return function(c,h){return{mapValue:{fields:{[GS]:{stringValue:YS},[Of]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Jp(h.serializer,g)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${id(i)}`)}(n,t)}function JA(n,t){const e={};return jS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cr(n,(i,r)=>{const o=mu(r,t.mc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function t1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof Ni||n instanceof Kn||n instanceof Ce||n instanceof yy||n instanceof ki)}function by(n,t,e){if(!t1(e)||!LS(e)){const i=id(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function Cp(n,t,e){if((t=un(t))instanceof yd)return t._internalPath;if(typeof t=="string")return Ey(n,t);throw zf("Field path arguments must be of type string or ",n,!1,void 0,e)}const RM=new RegExp("[~\\*/\\[\\]]");function Ey(n,t,e){if(t.search(RM)>=0)throw zf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new yd(...t.split("."))._internalPath}catch{throw zf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function zf(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new ht(et.INVALID_ARGUMENT,h+n+f)}function e1(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new CM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(vd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class CM extends n1{data(){return super.data()}}function vd(n,t){return typeof t=="string"?Ey(n,t):t instanceof yd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class s1 extends Ty{}function Ts(n,t,...e){let i=[];t instanceof Ty&&i.push(t),i=i.concat(e),function(o){const c=o.filter(f=>f instanceof Sy).length,h=o.filter(f=>f instanceof bd).length;if(c>1||c>0&&h>0)throw new ht(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class bd extends s1{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new bd(t,e,i)}_apply(t){const e=this._parse(t);return r1(t._query,e),new Dr(t.firestore,t.converter,pp(t._query,e))}_parse(t){const e=vy(t.firestore);return function(o,c,h,f,g,y,v){let b;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ht(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){kE(v,y);const x=[];for(const D of v)x.push(NE(f,o,D));b={arrayValue:{values:x}}}else b=NE(f,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||kE(v,y),b=xM(h,c,v,y==="in"||y==="not-in");return xe.create(g,y,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function tu(n,t,e){const i=t,r=vd("where",n);return bd._create(r,i,e)}class Sy extends Ty{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Sy(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ai.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let c=r;const h=o.getFlattenedFilters();for(const f of h)r1(c,f),c=pp(c,f)}(t._query,e),new Dr(t.firestore,t.converter,pp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ay extends s1{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ay(t,e)}_apply(t){const e=function(r,o,c){if(r.startAt!==null)throw new ht(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ht(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wc(o,c)}(t._query,this._field,this._direction);return new Dr(t.firestore,t.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new al(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}function _r(n,t="asc"){const e=t,i=vd("orderBy",n);return Ay._create(i,e)}function NE(n,t,e){if(typeof(e=un(e))=="string"){if(e==="")throw new ht(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tA(t)&&e.indexOf("/")!==-1)throw new ht(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(re.fromString(e));if(!yt.isDocumentKey(i))throw new ht(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $0(n,new yt(i))}if(e instanceof Ce)return $0(n,e._key);throw new ht(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(e)}.`)}function kE(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function r1(n,t){const e=function(r,o){for(const c of r)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ht(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class IM{convertValue(t,e="none"){switch(Sr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Tr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Cr(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertVectorValue(t){const e=t.fields?.[Of].arrayValue?.values?.map(i=>ve(i.doubleValue));return new ki(e)}convertGeoPoint(t){return new Ni(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=ad(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Qc(t));default:return null}}convertTimestamp(t){const e=Er(t);return new le(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=re.fromString(t);Kt(SA(i),9688,{name:t});const r=new $c(i.get(1),i.get(3)),o=new yt(i.popFirst(5));return r.isEqual(e)||bs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class Dc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Aa extends n1{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new vf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(vd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Aa._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Aa._jsonSchema={type:Re("string",Aa._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class vf extends Aa{data(t={}){return super.data(t)}}class wa{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Dc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new vf(this._firestore,this._userDataWriter,i.key,i,new Dc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>{const f=new vf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Dc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const f=new vf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Dc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:MM(h.type),doc:f,oldIndex:g,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=wa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function MM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:n})}}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:Re("string",wa._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class wy extends IM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Kn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,e)}}function a1(n){n=ys(n,Dr);const t=ys(n.firestore,Xo),e=py(t),i=new wy(t);return i1(n._query),pM(e,n._query).then(r=>new wa(t,i,n,r))}function xy(n,t,e,...i){n=ys(n,Ce);const r=ys(n.firestore,Xo),o=vy(r);let c;return c=typeof(t=un(t))=="string"||t instanceof yd?wM(o,"updateDoc",n._key,t,e,i):AM(o,"updateDoc",n._key,t),o1(r,[c.toMutation(n._key,Mi.exists(!0))])}function Ed(n,t){const e=ys(n.firestore,Xo),i=pd(n),r=DM(n.converter,t);return o1(e,[SM(vy(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Mi.exists(!1))]).then(()=>i)}function Oa(n,...t){n=un(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||OE(t[i])||(e=t[i++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(OE(t[i])){const f=t[i];t[i]=f.next?.bind(f),t[i+1]=f.error?.bind(f),t[i+2]=f.complete?.bind(f)}let o,c,h;if(n instanceof Ce)c=ys(n.firestore,Xo),h=Zp(n._key.path),o={next:f=>{t[i]&&t[i](OM(c,n,f))},error:t[i+1],complete:t[i+2]};else{const f=ys(n,Dr);c=ys(f.firestore,Xo),h=f._query;const g=new wy(c);o={next:y=>{t[i]&&t[i](new wa(c,g,f,y))},error:t[i+1],complete:t[i+2]},i1(n._query)}return function(g,y,v,b){const S=new KA(b),x=new UA(y,S,v);return g.asyncQueue.enqueueAndForget(async()=>VA(await Rp(g),x)),()=>{S.Nu(),g.asyncQueue.enqueueAndForget(async()=>LA(await Rp(g),x))}}(py(c),h,r,o)}function o1(n,t){return function(i,r){const o=new pr;return i.asyncQueue.enqueueAndForget(async()=>sM(await mM(i),r,o)),o.promise}(py(n),t)}function OM(n,t,e){const i=e.docs.get(t._key),r=new wy(n);return new Aa(n,r,t._key,i,new Dc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){il=r})(nl),Ho(new Ia("firestore",(i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new Xo(new wI(i.getProvider("auth-internal")),new CI(c,i.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ht(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(g.options.projectId,y)}(c,r),c);return o={useFetchStreams:e,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),gr(V0,L0,t),gr(V0,L0,"esm2020")})();function l1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NM=l1,c1=new lu("auth","Firebase",l1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Fp("@firebase/auth");function kM(n,...t){Bf.logLevel<=kt.WARN&&Bf.warn(`Auth (${nl}): ${n}`,...t)}function bf(n,...t){Bf.logLevel<=kt.ERROR&&Bf.error(`Auth (${nl}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(n,...t){throw Ry(n,...t)}function Pi(n,...t){return Ry(n,...t)}function u1(n,t,e){const i={...NM(),[t]:e};return new lu("auth","Firebase",i).create(t,{appName:n.name})}function xa(n){return u1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ry(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return c1.create(n,...t)}function At(n,t,...e){if(!n)throw Ry(t,...e)}function ms(n){const t="INTERNAL ASSERTION FAILED: "+n;throw bf(t),new Error(t)}function As(n,t){n||ms(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(){return typeof self<"u"&&self.location?.href||""}function PM(){return PE()==="http:"||PE()==="https:"}function PE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PM()||tC()||"connection"in navigator)?navigator.onLine:!0}function LM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t,e){this.shortDelay=t,this.longDelay=e,As(e>t,"Short delay should be less than long delay!"),this.isMobile=WR()||eC()}get(){return VM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n,t){As(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zM=new pu(3e4,6e4);function Iy(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function ll(n,t,e,i,r={}){return f1(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=cu({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const g={method:t,headers:f,...o};return JR()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&el(n.emulatorConfig.host)&&(g.credentials="include"),h1.fetch()(await d1(n,n.config.apiHost,e,h),g)})}async function f1(n,t,e){n._canInitEmulator=!1;const i={...UM,...t};try{const r=new FM(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Wh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[f,g]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Wh(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Wh(n,"user-disabled",c);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw u1(n,y,g);Ss(n,y)}}catch(r){if(r instanceof xs)throw r;Ss(n,"network-request-failed",{message:String(r)})}}async function BM(n,t,e,i,r={}){const o=await ll(n,t,e,i,r);return"mfaPendingCredential"in o&&Ss(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function d1(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?Cy(n.config,r):`${n.config.apiScheme}://${r}`;return jM.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class FM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Pi(this.auth,"network-request-failed")),zM.get())})}}function Wh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Pi(n,t,i);return r.customData._tokenResponse=e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(n,t){return ll(n,"POST","/v1/accounts:delete",t)}async function Ff(n,t){return ll(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function qM(n,t=!1){const e=un(n),i=await e.getIdToken(t),r=Dy(i);At(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o?.sign_in_provider;return{claims:r,token:i,authTime:zc(Ym(r.auth_time)),issuedAtTime:zc(Ym(r.iat)),expirationTime:zc(Ym(r.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Ym(n){return Number(n)*1e3}function Dy(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const r=pS(e);return r?JSON.parse(r):(bf("Failed to decode base64 JWT payload"),null)}catch(r){return bf("Caught error parsing JWT payload as JSON",r?.toString()),null}}function VE(n){const t=Dy(n);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof xs&&GM(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function GM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=zc(this.lastLoginAt),this.creationTime=zc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(n){const t=n.auth,e=await n.getIdToken(),i=await eu(n,Ff(t,{idToken:e}));At(i?.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=r.providerUserInfo?.length?g1(r.providerUserInfo):[],c=QM(n.providerData,o),h=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!c?.length,g=h?f:!1,y={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new Dp(r.createdAt,r.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function KM(n){const t=un(n);await Hf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function QM(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function g1(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(n,t){const e=await f1(n,{},async()=>{const i=cu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await d1(n,r,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return n.emulatorConfig&&el(n.emulatorConfig.host)&&(f.credentials="include"),h1.fetch()(c,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function XM(n,t){return ll(n,"POST","/v2/accounts:revokeToken",Iy(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):VE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){At(t.length!==0,"internal-error");const e=VE(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await $M(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new jo;return i&&(At(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(At(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(At(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(n,t){At(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class si{constructor({uid:t,auth:e,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new YM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Dp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await eu(this,this.stsTokenManager.getToken(this.auth,t));return At(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return qM(this,t)}reload(){return KM(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new si({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Hf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(xa(this.auth));const t=await this.getIdToken();return await eu(this,HM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,r=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,f=e._redirectEventId??void 0,g=e.createdAt??void 0,y=e.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:S,providerData:x,stsTokenManager:D}=e;At(v&&D,t,"internal-error");const M=jo.fromJSON(this.name,D);At(typeof v=="string",t,"internal-error"),sr(i,t.name),sr(r,t.name),At(typeof b=="boolean",t,"internal-error"),At(typeof S=="boolean",t,"internal-error"),sr(o,t.name),sr(c,t.name),sr(h,t.name),sr(f,t.name),sr(g,t.name),sr(y,t.name);const j=new si({uid:v,auth:t,email:r,emailVerified:b,displayName:i,isAnonymous:S,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:M,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(j.providerData=x.map(W=>({...W}))),f&&(j._redirectEventId=f),j}static async _fromIdTokenResponse(t,e,i=!1){const r=new jo;r.updateFromServerResponse(e);const o=new si({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Hf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];At(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?g1(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!o?.length,h=new jo;h.updateFromIdToken(i);const f=new si({uid:r.localId,auth:t,stsTokenManager:h,isAnonymous:c}),g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Dp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(f,g),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;function ps(n){As(n instanceof Function,"Expected a class definition");let t=LE.get(n);return t?(As(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,LE.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}m1.type="NONE";const UE=m1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(n,t,e){return`firebase:${n}:${t}:${e}`}class zo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Ef(this.userKey,r.apiKey,o),this.fullPersistenceKey=Ef("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Ff(this.auth,{idToken:t}).catch(()=>{});return e?si._fromGetAccountInfoResponse(this.auth,e,t):null}return si._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new zo(ps(UE),t,i);const r=(await Promise.all(e.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=r[0]||ps(UE);const c=Ef(i,t.config.apiKey,t.name);let h=null;for(const g of e)try{const y=await g._get(c);if(y){let v;if(typeof y=="string"){const b=await Ff(t,{idToken:y}).catch(()=>{});if(!b)break;v=await si._fromGetAccountInfoResponse(t,b,y)}else v=si._fromJSON(t,y);g!==o&&(h=v),o=g;break}}catch{}const f=r.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new zo(o,t,i):(o=f[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new zo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(v1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(p1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(E1(t))return"Blackberry";if(T1(t))return"Webos";if(y1(t))return"Safari";if((t.includes("chrome/")||_1(t))&&!t.includes("edge/"))return"Chrome";if(b1(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function p1(n=cn()){return/firefox\//i.test(n)}function y1(n=cn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _1(n=cn()){return/crios\//i.test(n)}function v1(n=cn()){return/iemobile/i.test(n)}function b1(n=cn()){return/android/i.test(n)}function E1(n=cn()){return/blackberry/i.test(n)}function T1(n=cn()){return/webos/i.test(n)}function My(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WM(n=cn()){return My(n)&&!!window.navigator?.standalone}function ZM(){return nC()&&document.documentMode===10}function S1(n=cn()){return My(n)||b1(n)||T1(n)||E1(n)||/windows phone/i.test(n)||v1(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n,t=[]){let e;switch(n){case"Browser":e=jE(cn());break;case"Worker":e=`${jE(cn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${nl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const f=t(o);c(f)}catch(f){h(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(n,t={}){return ll(n,"GET","/v2/passwordPolicy",Iy(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=6;class nO{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??eO,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zE(this),this.idTokenSubscription=new zE(this),this.beforeStateQueue=new JM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ps(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Ff(this,{idToken:t}),i=await si._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ci(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!o||o===c)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Hf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=LM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ci(this.app))return Promise.reject(xa(this));const e=t?un(t):null;return e&&At(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ci(this.app)?Promise.reject(xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await tO(this),e=new nO(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await XM(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ps(t)||this._popupRedirectResolver;At(e,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[ps(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{c=!0,f()}}else{const f=t.addObserver(e);return()=>{c=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=A1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&kM(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Oy(n){return un(n)}class zE{constructor(t){this.auth=t,this.observer=null,this.addObserver=uC(e=>this.observer=e)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ny={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sO(n){Ny=n}function rO(n){return Ny.loadJS(n)}function aO(){return Ny.gapiScript}function oO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n,t){const e=qp(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Ca(o,t??{}))return r;Ss(r,"already-initialized")}return e.initialize({options:t})}function cO(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ps);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function uO(n,t,e){const i=Oy(n);At(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=w1(t),{host:c,port:h}=hO(t),f=h===null?"":`:${h}`,g={url:`${o}//${c}${f}/`},y=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){At(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),At(Ca(g,i.config.emulator)&&Ca(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,el(c)?(bS(`${o}//${c}${f}`),ES("Auth",!0)):fO()}function w1(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function hO(n){const t=w1(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:BE(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:BE(c)}}}function BE(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function fO(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ms("not implemented")}_getIdTokenResponse(t){return ms("not implemented")}_linkToIdToken(t,e){return ms("not implemented")}_getReauthenticationResolver(t){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(n,t){return BM(n,"POST","/v1/accounts:signInWithIdp",Iy(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="http://localhost";class Na extends x1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Na(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ss("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=e;if(!i||!r)return null;const c=new Na(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Bo(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Bo(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Bo(t,e)}buildRequest(){const t={requestUri:dO,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=cu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends R1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends yu{constructor(){super("facebook.com")}static credential(t){return Na._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ar.credentialFromTaggedObject(t)}static credentialFromError(t){return ar.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ar.credential(t.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Na._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return or.credentialFromTaggedObject(t)}static credentialFromError(t){return or.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return or.credential(e,i)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends yu{constructor(){super("github.com")}static credential(t){return Na._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return lr.credentialFromTaggedObject(t)}static credentialFromError(t){return lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return lr.credential(t.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends yu{constructor(){super("twitter.com")}static credential(t,e){return Na._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return cr.credentialFromTaggedObject(t)}static credentialFromError(t){return cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return cr.credential(e,i)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await si._fromIdTokenResponse(t,i,r),c=FE(i);return new Wo({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=FE(i);return new Wo({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function FE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends xs{constructor(t,e,i,r){super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new qf(t,e,i,r)}}function C1(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qf._fromErrorAndOperation(n,o,t,i):o})}async function gO(n,t,e=!1){const i=await eu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Wo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(n,t,e=!1){const{auth:i}=n;if(Ci(i.app))return Promise.reject(xa(i));const r="reauthenticate";try{const o=await eu(n,C1(i,r,t,n),e);At(o.idToken,i,"internal-error");const c=Dy(o.idToken);At(c,i,"internal-error");const{sub:h}=c;return At(n.uid===h,i,"user-mismatch"),Wo._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ss(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(n,t,e=!1){if(Ci(n.app))return Promise.reject(xa(n));const i="signIn",r=await C1(n,i,t),o=await Wo._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}function yO(n,t,e,i){return un(n).onIdTokenChanged(t,e,i)}function _O(n,t,e){return un(n).beforeAuthStateChanged(t,e)}const Gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Gf,"1"),this.storage.removeItem(Gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=1e3,bO=10;class D1 extends I1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);ZM()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,bO):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},vO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}D1.type="LOCAL";const EO=D1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends I1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}M1.type="SESSION";const O1=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Td(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(c).map(async g=>g(e.origin,o)),f=await TO(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Td.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((h,f)=>{const g=ky("",20);r.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:g,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function AO(n){Vi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function wO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xO(){return navigator?.serviceWorker?.controller||null}function RO(){return N1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firebaseLocalStorageDb",CO=1,Yf="firebaseLocalStorage",P1="fbase_key";class _u{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Sd(n,t){return n.transaction([Yf],t?"readwrite":"readonly").objectStore(Yf)}function IO(){const n=indexedDB.deleteDatabase(k1);return new _u(n).toPromise()}function Mp(){const n=indexedDB.open(k1,CO);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Yf,{keyPath:P1})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Yf)?t(i):(i.close(),await IO(),t(await Mp()))})})}async function HE(n,t,e){const i=Sd(n,!0).put({[P1]:t,value:e});return new _u(i).toPromise()}async function DO(n,t){const e=Sd(n,!1).get(t),i=await new _u(e).toPromise();return i===void 0?null:i.value}function qE(n,t){const e=Sd(n,!0).delete(t);return new _u(e).toPromise()}const MO=800,OO=3;class V1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>OO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Td._getInstance(RO()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wO(),!this.activeServiceWorker)return;this.sender=new SO(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||xO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Mp();return await HE(t,Gf,"1"),await qE(t,Gf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>HE(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>DO(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>qE(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=Sd(r,!1).getAll();return new _u(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V1.type="LOCAL";const NO=V1;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(n,t){return t?ps(t):(At(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends x1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Bo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Bo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Bo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function PO(n){return pO(n.auth,new Py(n),n.bypassAuthState)}function VO(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),mO(e,new Py(n),n.bypassAuthState)}async function LO(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),gO(e,new Py(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(g){this.reject(g)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PO;case"linkViaPopup":case"linkViaRedirect":return LO;case"reauthViaPopup":case"reauthViaRedirect":return VO;default:Ss(this.auth,"internal-error")}}resolve(t){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=new pu(2e3,1e4);class Lo extends L1{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Lo.currentPopupAction&&Lo.currentPopupAction.cancel(),Lo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const t=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lo.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,UO.get())};t()}}Lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="pendingRedirect",Tf=new Map;class zO extends L1{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Tf.get(this.auth._key());if(!t){try{const i=await BO(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Tf.set(this.auth._key(),t)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BO(n,t){const e=qO(t),i=HO(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function FO(n,t){Tf.set(n._key(),t)}function HO(n){return ps(n._redirectPersistence)}function qO(n){return Ef(jO,n.config.apiKey,n.name)}async function GO(n,t,e=!1){if(Ci(n.app))return Promise.reject(xa(n));const i=Oy(n),r=kO(i,t),c=await new zO(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=600*1e3;class KO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!QO(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!U1(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Pi(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=YO&&this.cachedEventUids.clear(),this.cachedEventUids.has(GE(t))}saveEventToCache(t){this.cachedEventUids.add(GE(t)),this.lastProcessedEventTime=Date.now()}}function GE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function U1({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function QO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n,t={}){return ll(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WO=/^https?/;async function ZO(n){if(n.config.emulator)return;const{authorizedDomains:t}=await $O(n);for(const e of t)try{if(JO(e))return}catch{}Ss(n,"unauthorized-domain")}function JO(n){const t=Ip(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!WO.test(e))return!1;if(XO.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new pu(3e4,6e4);function YE(){const n=Vi().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function eN(n){return new Promise((t,e)=>{function i(){YE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{YE(),e(Pi(n,"network-request-failed"))},timeout:tN.get()})}if(Vi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Vi().gapi?.load)i();else{const r=oO("iframefcb");return Vi()[r]=()=>{gapi.load?i():e(Pi(n,"network-request-failed"))},rO(`${aO()}?onload=${r}`).catch(o=>e(o))}}).catch(t=>{throw Sf=null,t})}let Sf=null;function nN(n){return Sf=Sf||eN(n),Sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new pu(5e3,15e3),sN="__/auth/iframe",rN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lN(n){const t=n.config;At(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Cy(t,rN):`https://${n.config.authDomain}/${sN}`,i={apiKey:t.apiKey,appName:n.name,v:nl},r=oN.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${cu(i).slice(1)}`}async function cN(n){const t=await nN(n),e=Vi().gapi;return At(e,n,"internal-error"),t.open({where:document.body,url:lN(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=Pi(n,"network-request-failed"),h=Vi().setTimeout(()=>{o(c)},iN.get());function f(){Vi().clearTimeout(h),r(i)}i.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hN=500,fN=600,dN="_blank",gN="http://localhost";class KE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mN(n,t,e,i=hN,r=fN){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={...uN,width:i.toString(),height:r.toString(),top:o,left:c},g=cn().toLowerCase();e&&(h=_1(g)?dN:e),p1(g)&&(t=t||gN,f.scrollbars="yes");const y=Object.entries(f).reduce((b,[S,x])=>`${b}${S}=${x},`,"");if(WM(g)&&h!=="_self")return pN(t||"",h),new KE(null);const v=window.open(t||"",h,y);At(v,n,"popup-blocked");try{v.focus()}catch{}return new KE(v)}function pN(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="__/auth/handler",_N="emulator/auth/handler",vN=encodeURIComponent("fac");async function QE(n,t,e,i,r,o){At(n.config.authDomain,n,"auth-domain-config-required"),At(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:nl,eventId:r};if(t instanceof R1){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",cC(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof yu){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),g=f?`#${vN}=${encodeURIComponent(f)}`:"";return`${bN(n)}?${cu(h).slice(1)}${g}`}function bN({config:n}){return n.emulator?Cy(n,_N):`https://${n.authDomain}/${yN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="webStorageSupport";class EN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O1,this._completeRedirectFn=GO,this._overrideRedirectResult=FO}async _openPopup(t,e,i,r){As(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await QE(t,e,i,Ip(),r);return mN(t,o,ky())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await QE(t,e,i,Ip(),r);return AO(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(As(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await cN(t),i=new KO(t);return e.register("authEvent",r=>(At(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Km,{type:Km},r=>{const o=r?.[0]?.[Km];o!==void 0&&e(!!o),Ss(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=ZO(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return S1()||y1()||My()}}const TN=EN;var $E="@firebase/auth",XE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wN(n){Ho(new Ia("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;At(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A1(n)},g=new iO(i,r,o,f);return cO(g,e),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ho(new Ia("auth-internal",t=>{const e=Oy(t.getProvider("auth").getImmediate());return(i=>new SN(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr($E,XE,AN(n)),gr($E,XE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=300,RN=vS("authIdTokenMaxAge")||xN;let WE=null;const CN=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>RN)return;const r=e?.token;WE!==r&&(WE=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function IN(n=wS()){const t=qp(n,"auth");if(t.isInitialized())return t.getImmediate();const e=lO(n,{popupRedirectResolver:TN,persistence:[NO,EO,O1]}),i=vS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=CN(o.toString());_O(e,c,()=>c(e.currentUser)),yO(e,h=>c(h))}}const r=yS("auth");return r&&uO(e,`http://${r}`),e}function DN(){return document.getElementsByTagName("head")?.[0]??document}sO({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Pi("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",DN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wN("Browser");const MN={apiKey:"AIzaSyD5qQ2fQN7fZoQ4zvjDfsdzO1wTmI5oNF4",authDomain:"mi-app-medica-ef3fa.firebaseapp.com",projectId:"mi-app-medica-ef3fa",storageBucket:"mi-app-medica-ef3fa.firebasestorage.app",messagingSenderId:"713331216336",appId:"1:713331216336:web:db2026dfc8b98c60c133d5"},j1=AS(MN),ln=_M(j1),Kf=IN(j1),ON=({onLoginSuccess:n})=>{const[t,e]=Y.useState(""),[i,r]=Y.useState(""),o=async c=>{if(c.preventDefault(),r(""),!t.trim()){r("Por favor ingresa tu cdula.");return}try{const h=Ts(On(ln,"personal"),tu("cedula","==",t)),f=await a1(h);if(f.empty)r("Usuario no encontrado. Redirigiendo a registro..."),setTimeout(()=>{window.location.href="/register?cedula="+t},1500);else{const g=f.docs[0].data();n(g)}}catch(h){console.error("Error al iniciar sesin:",h),r("Ocurri un error al iniciar sesin.")}};return w.jsxs("div",{className:"container",children:[w.jsx("h2",{children:"Ingreso de Personal"}),w.jsxs("form",{onSubmit:o,children:[w.jsx("label",{children:"Cdula:"}),w.jsx("input",{type:"text",value:t,onChange:c=>e(c.target.value)}),w.jsx("button",{type:"submit",children:"Ingresar"})]}),i&&w.jsx("p",{children:i})]})},z1=()=>{const[n,t]=Y.useState(""),[e,i]=Y.useState(""),[r,o]=Y.useState(""),c=async h=>{if(h.preventDefault(),!n||!e||!r){alert("Por favor, llena todos los campos");return}try{await Ed(On(ln,"patients"),{name:n,id:e,treatmentEndDate:new Date(r),createdAt:new Date,status:"Activo"}),alert("Paciente guardado con xito!"),t(""),i(""),o("")}catch(f){console.error("Error al aadir el documento: ",f),alert("Hubo un error al guardar el paciente.")}};return w.jsxs("article",{children:[w.jsx("h4",{children:"Aadir Nuevo Paciente"}),w.jsxs("form",{onSubmit:c,children:[w.jsx("label",{htmlFor:"patientName",children:"Nombre Completo"}),w.jsx("input",{type:"text",id:"patientName",value:n,onChange:h=>t(h.target.value),required:!0}),w.jsx("label",{htmlFor:"patientId",children:"Cdula"}),w.jsx("input",{type:"text",id:"patientId",value:e,onChange:h=>i(h.target.value),required:!0}),w.jsx("label",{htmlFor:"endDate",children:"Fecha de Fin de Tratamiento"}),w.jsx("input",{type:"date",id:"endDate",value:r,onChange:h=>o(h.target.value),required:!0}),w.jsx("button",{type:"submit",children:"Guardar Paciente"})]})]})},B1=({onPatientSelect:n})=>{const[t,e]=Y.useState([]),[i,r]=Y.useState([]);Y.useEffect(()=>{const c=Ts(On(ln,"patients"),tu("status","!=","Finalizado"),_r("status"),_r("createdAt","desc")),h=Oa(c,y=>{e(y.docs.map(v=>({docId:v.id,...v.data()})))}),f=Ts(On(ln,"patients"),tu("status","==","Finalizado"),_r("createdAt","desc")),g=Oa(f,y=>{r(y.docs.map(v=>({docId:v.id,...v.data()})))});return()=>{h(),g()}},[]);const o=async(c,h)=>{if(window.confirm(`Seguro que quieres cambiar el estado a "${h}"?`)){const f=pd(ln,"patients",c);await xy(f,{status:h})}};return w.jsxs(w.Fragment,{children:[w.jsxs("article",{children:[w.jsx("h4",{children:"Pacientes Activos y Pendientes"}),w.jsx("div",{style:{overflowX:"auto"},children:w.jsxs("table",{role:"grid",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",children:"Nombre"}),w.jsx("th",{scope:"col",children:"Cdula"}),w.jsx("th",{scope:"col",children:"Estado"}),w.jsx("th",{scope:"col",children:"Acciones"})]})}),w.jsx("tbody",{children:t.map(c=>w.jsxs("tr",{children:[w.jsx("td",{children:c.name}),w.jsx("td",{children:w.jsx("a",{href:"#",onClick:h=>h.preventDefault(),children:c.id})}),w.jsx("td",{children:c.status||"N/A"}),w.jsx("td",{children:w.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.status==="Pendiente"&&w.jsx("button",{style:{"--pico-background-color":"#28a745","--pico-color":"white"},onClick:()=>o(c.docId,"Activo"),children:"Activar"}),c.status==="Activo"&&w.jsx("button",{style:{"--pico-background-color":"#dc3545","--pico-color":"white"},onClick:()=>o(c.docId,"Finalizado"),children:"Finalizar"}),w.jsx("button",{className:"secondary",onClick:()=>n(c),children:"Ver Detalles"})]})})]},c.docId))})]})})]}),w.jsxs("article",{children:[w.jsx("h4",{children:"Historial de Pacientes Finalizados"}),w.jsx("div",{style:{overflowX:"auto"},children:w.jsxs("table",{role:"grid",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",children:"Nombre"}),w.jsx("th",{scope:"col",children:"Cdula"}),w.jsx("th",{scope:"col",children:"Estado"}),w.jsx("th",{scope:"col",children:"Acciones"})]})}),w.jsx("tbody",{children:i.map(c=>w.jsxs("tr",{children:[w.jsx("td",{children:c.name}),w.jsx("td",{children:w.jsx("a",{href:"#",onClick:h=>h.preventDefault(),children:c.id})}),w.jsx("td",{children:c.status}),w.jsx("td",{children:w.jsx("button",{className:"secondary",onClick:()=>n(c),children:"Ver Detalles"})})]},c.docId))})]})})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function vu(n){return n+.5|0}const hr=(n,t,e)=>Math.max(Math.min(n,e),t);function Mc(n){return hr(vu(n*2.55),0,255)}function vr(n){return hr(vu(n*255),0,255)}function gs(n){return hr(vu(n/2.55)/100,0,1)}function ZE(n){return hr(vu(n*100),0,100)}const Yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Op=[..."0123456789ABCDEF"],NN=n=>Op[n&15],kN=n=>Op[(n&240)>>4]+Op[n&15],Zh=n=>(n&240)>>4===(n&15),PN=n=>Zh(n.r)&&Zh(n.g)&&Zh(n.b)&&Zh(n.a);function VN(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Yn[n[1]]*17,g:255&Yn[n[2]]*17,b:255&Yn[n[3]]*17,a:t===5?Yn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Yn[n[1]]<<4|Yn[n[2]],g:Yn[n[3]]<<4|Yn[n[4]],b:Yn[n[5]]<<4|Yn[n[6]],a:t===9?Yn[n[7]]<<4|Yn[n[8]]:255})),e}const LN=(n,t)=>n<255?t(n):"";function UN(n){var t=PN(n)?NN:kN;return n?"#"+t(n.r)+t(n.g)+t(n.b)+LN(n.a,t):void 0}const jN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function F1(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function zN(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function BN(n,t,e){const i=F1(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function FN(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function Vy(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),h=(o+c)/2;let f,g,y;return o!==c&&(y=o-c,g=h>.5?y/(2-o-c):y/(o+c),f=FN(e,i,r,y,o),f=f*60+.5),[f|0,g||0,h]}function Ly(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(vr)}function Uy(n,t,e){return Ly(F1,n,t,e)}function HN(n,t,e){return Ly(BN,n,t,e)}function qN(n,t,e){return Ly(zN,n,t,e)}function H1(n){return(n%360+360)%360}function GN(n){const t=jN.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Mc(+t[5]):vr(+t[5]));const r=H1(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=HN(r,o,c):t[1]==="hsv"?i=qN(r,o,c):i=Uy(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function YN(n,t){var e=Vy(n);e[0]=H1(e[0]+t),e=Uy(e),n.r=e[0],n.g=e[1],n.b=e[2]}function KN(n){if(!n)return;const t=Vy(n),e=t[0],i=ZE(t[1]),r=ZE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${gs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const JE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function QN(){const n={},t=Object.keys(tT),e=Object.keys(JE);let i,r,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],r=0;r<e.length;r++)o=e[r],h=h.replace(o,JE[o]);o=parseInt(tT[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let Jh;function $N(n){Jh||(Jh=QN(),Jh.transparent=[0,0,0,0]);const t=Jh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const XN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function WN(n){const t=XN.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Mc(c):hr(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Mc(i):hr(i,0,255)),r=255&(t[4]?Mc(r):hr(r,0,255)),o=255&(t[6]?Mc(o):hr(o,0,255)),{r:i,g:r,b:o,a:e}}}function ZN(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${gs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Qm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Oo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function JN(n,t,e){const i=Oo(gs(n.r)),r=Oo(gs(n.g)),o=Oo(gs(n.b));return{r:vr(Qm(i+e*(Oo(gs(t.r))-i))),g:vr(Qm(r+e*(Oo(gs(t.g))-r))),b:vr(Qm(o+e*(Oo(gs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function tf(n,t,e){if(n){let i=Vy(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Uy(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function q1(n,t){return n&&Object.assign(t||{},n)}function eT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=vr(n[3]))):(t=q1(n,{r:0,g:0,b:0,a:1}),t.a=vr(t.a)),t}function tk(n){return n.charAt(0)==="r"?WN(n):GN(n)}class nu{constructor(t){if(t instanceof nu)return t;const e=typeof t;let i;e==="object"?i=eT(t):e==="string"&&(i=VN(t)||$N(t)||tk(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=q1(this._rgb);return t&&(t.a=gs(t.a)),t}set rgb(t){this._rgb=eT(t)}rgbString(){return this._valid?ZN(this._rgb):void 0}hexString(){return this._valid?UN(this._rgb):void 0}hslString(){return this._valid?KN(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,f=i.a-r.a,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2;o=1-g,i.r=255&g*i.r+o*r.r+.5,i.g=255&g*i.g+o*r.g+.5,i.b=255&g*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=JN(this._rgb,t._rgb,e)),this}clone(){return new nu(this.rgb)}alpha(t){return this._rgb.a=vr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=vu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return tf(this._rgb,2,t),this}darken(t){return tf(this._rgb,2,-t),this}saturate(t){return tf(this._rgb,1,t),this}desaturate(t){return tf(this._rgb,1,-t),this}rotate(t){return YN(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function hs(){}const ek=(()=>{let n=0;return()=>n++})();function ae(n){return n==null}function Fe(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Gt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Xn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ai(n,t){return Xn(n)?n:t}function Bt(n,t){return typeof n>"u"?t:n}const nk=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function oe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Wt(n,t,e,i){let r,o,c;if(Fe(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Gt(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function Qf(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function $f(n){if(Fe(n))return n.map($f);if(Gt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=$f(n[e[r]]);return t}return n}function G1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function ik(n,t,e,i){if(!G1(n))return;const r=t[n],o=e[n];Gt(r)&&Gt(o)?iu(r,o,i):t[n]=$f(o)}function iu(n,t,e){const i=Fe(t)?t:[t],r=i.length;if(!Gt(n))return n;e=e||{};const o=e.merger||ik;let c;for(let h=0;h<r;++h){if(c=i[h],!Gt(c))continue;const f=Object.keys(c);for(let g=0,y=f.length;g<y;++g)o(f[g],n,c,e)}return n}function Bc(n,t){return iu(n,t,{merger:sk})}function sk(n,t,e){if(!G1(n))return;const i=t[n],r=e[n];Gt(i)&&Gt(r)?Bc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=$f(r))}const nT={"":n=>n,x:n=>n.x,y:n=>n.y};function rk(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function ak(n){const t=rk(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Xf(n,t){return(nT[t]||(nT[t]=ak(t)))(n)}function jy(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Wf=n=>typeof n<"u",xr=n=>typeof n=="function",iT=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function ok(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const He=Math.PI,Li=2*He,lk=Li+He,Zf=Number.POSITIVE_INFINITY,ck=He/180,ri=He/2,ma=He/4,sT=He*2/3,Y1=Math.log10,Zo=Math.sign;function Fc(n,t,e){return Math.abs(n-t)<e}function rT(n){const t=Math.round(n);n=Fc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Y1(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function uk(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function hk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function su(n){return!hk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function fk(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function dk(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ta(n){return n*(He/180)}function gk(n){return n*(180/He)}function aT(n){if(!Xn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function mk(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*He&&(o+=Li),{angle:o,distance:r}}function Np(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function pk(n,t){return(n-t+lk)%Li-He}function rr(n){return(n%Li+Li)%Li}function K1(n,t,e,i){const r=rr(n),o=rr(t),c=rr(e),h=rr(o-r),f=rr(c-r),g=rr(r-o),y=rr(r-c);return r===o||r===c||i&&o===c||h>f&&g<y}function Qn(n,t,e){return Math.max(t,Math.min(e,n))}function yk(n){return Qn(n,-32768,32767)}function Oc(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function zy(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Sa=(n,t,e,i)=>zy(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),_k=(n,t,e)=>zy(n,e,i=>n[i][t]>=e);function vk(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const Q1=["push","pop","shift","splice","unshift"];function bk(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Q1.forEach(e=>{const i="_onData"+jy(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function oT(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Q1.forEach(o=>{delete n[o]}),delete n._chartjs)}function Ek(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const $1=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function X1(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,$1.call(window,()=>{i=!1,n.apply(t,e)}))}}function Tk(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const By=n=>n==="start"?"left":n==="end"?"right":"center",sn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Sk=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Ak(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:c,vScale:h,_parsed:f}=n,g=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,y=c.axis,{min:v,max:b,minDefined:S,maxDefined:x}=c.getUserBounds();if(S){if(r=Math.min(Sa(f,y,v).lo,e?i:Sa(t,y,c.getPixelForValue(v)).lo),g){const D=f.slice(0,r+1).reverse().findIndex(M=>!ae(M[h.axis]));r-=Math.max(0,D)}r=Qn(r,0,i-1)}if(x){let D=Math.max(Sa(f,c.axis,b,!0).hi+1,e?0:Sa(t,y,c.getPixelForValue(b),!0).hi+1);if(g){const M=f.slice(D-1).findIndex(j=>!ae(j[h.axis]));D+=Math.max(0,M)}o=Qn(D,r,i)-r}else o=i-r}return{start:r,count:o}}function wk(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const ef=n=>n===0||n===1,lT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Li/e)),cT=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Li/e)+1,Hc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ri)+1,easeOutSine:n=>Math.sin(n*ri),easeInOutSine:n=>-.5*(Math.cos(He*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ef(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ef(n)?n:lT(n,.075,.3),easeOutElastic:n=>ef(n)?n:cT(n,.075,.3),easeInOutElastic(n){return ef(n)?n:n<.5?.5*lT(n*2,.1125,.45):.5+.5*cT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Hc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Hc.easeInBounce(n*2)*.5:Hc.easeOutBounce(n*2-1)*.5+.5};function Fy(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function uT(n){return Fy(n)?n:new nu(n)}function $m(n){return Fy(n)?n:new nu(n).saturate(.5).darken(.1).hexString()}const xk=["x","y","borderWidth","radius","tension"],Rk=["color","borderColor","backgroundColor"];function Ck(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Rk},numbers:{type:"number",properties:xk}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ik(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hT=new Map;function Dk(n,t){t=t||{};const e=n+JSON.stringify(t);let i=hT.get(e);return i||(i=new Intl.NumberFormat(n,t),hT.set(e,i)),i}function W1(n,t,e){return Dk(t,e).format(n)}const Mk={values(n){return Fe(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const g=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(g<1e-4||g>1e15)&&(r="scientific"),o=Ok(n,e)}const c=Y1(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:r,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(f,this.options.ticks.format),W1(n,i,f)}};function Ok(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Z1={formatters:Mk};function Nk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Z1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const ka=Object.create(null),kp=Object.create(null);function qc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Xm(n,t,e){return typeof t=="string"?iu(qc(n,t),e):iu(qc(n,""),t)}class kk{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>$m(r.backgroundColor),this.hoverBorderColor=(i,r)=>$m(r.borderColor),this.hoverColor=(i,r)=>$m(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Xm(this,t,e)}get(t){return qc(this,t)}describe(t,e){return Xm(kp,t,e)}override(t,e){return Xm(ka,t,e)}route(t,e,i,r){const o=qc(this,t),c=qc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[h],g=c[r];return Gt(f)?Object.assign({},g,f):Bt(f,g)},set(f){this[h]=f}}})}apply(t){t.forEach(e=>e(this))}}var be=new kk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ck,Ik,Nk]);function Pk(n){return!n||ae(n.size)||ae(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function fT(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function pa(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function dT(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function Pp(n,t,e,i){J1(n,t,e,i,null)}function J1(n,t,e,i,r){let o,c,h,f,g,y,v,b;const S=t.pointStyle,x=t.rotation,D=t.radius;let M=(x||0)*ck;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(M),n.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),n.restore();return}if(!(isNaN(D)||D<=0)){switch(n.beginPath(),S){default:r?n.ellipse(e,i,r/2,D,0,0,Li):n.arc(e,i,D,0,Li),n.closePath();break;case"triangle":y=r?r/2:D,n.moveTo(e+Math.sin(M)*y,i-Math.cos(M)*D),M+=sT,n.lineTo(e+Math.sin(M)*y,i-Math.cos(M)*D),M+=sT,n.lineTo(e+Math.sin(M)*y,i-Math.cos(M)*D),n.closePath();break;case"rectRounded":g=D*.516,f=D-g,c=Math.cos(M+ma)*f,v=Math.cos(M+ma)*(r?r/2-g:f),h=Math.sin(M+ma)*f,b=Math.sin(M+ma)*(r?r/2-g:f),n.arc(e-v,i-h,g,M-He,M-ri),n.arc(e+b,i-c,g,M-ri,M),n.arc(e+v,i+h,g,M,M+ri),n.arc(e-b,i+c,g,M+ri,M+He),n.closePath();break;case"rect":if(!x){f=Math.SQRT1_2*D,y=r?r/2:f,n.rect(e-y,i-f,2*y,2*f);break}M+=ma;case"rectRot":v=Math.cos(M)*(r?r/2:D),c=Math.cos(M)*D,h=Math.sin(M)*D,b=Math.sin(M)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+b,i-c),n.lineTo(e+v,i+h),n.lineTo(e-b,i+c),n.closePath();break;case"crossRot":M+=ma;case"cross":v=Math.cos(M)*(r?r/2:D),c=Math.cos(M)*D,h=Math.sin(M)*D,b=Math.sin(M)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"star":v=Math.cos(M)*(r?r/2:D),c=Math.cos(M)*D,h=Math.sin(M)*D,b=Math.sin(M)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c),M+=ma,v=Math.cos(M)*(r?r/2:D),c=Math.cos(M)*D,h=Math.sin(M)*D,b=Math.sin(M)*(r?r/2:D),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"line":c=r?r/2:Math.cos(M)*D,h=Math.sin(M)*D,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(M)*(r?r/2:D),i+Math.sin(M)*D);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ru(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Hy(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function qy(n){n.restore()}function Vk(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Lk(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Uk(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ae(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function jk(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,g=e+o.actualBoundingBoxDescent,y=r.strikethrough?(f+g)/2:g;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,y),n.lineTo(h,y),n.stroke()}}function zk(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function au(n,t,e,i,r,o={}){const c=Fe(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let f,g;for(n.save(),n.font=r.string,Uk(n,o),f=0;f<c.length;++f)g=c[f],o.backdrop&&zk(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ae(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(g,e,i,o.maxWidth)),n.fillText(g,e,i,o.maxWidth),jk(n,e,i,g,o),i+=Number(r.lineHeight);n.restore()}function Vp(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*He,He,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,He,ri,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,ri,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-ri,!0),n.lineTo(e+c.topLeft,i)}const Bk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Fk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hk(n,t){const e=(""+n).match(Bk);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const qk=n=>+n||0;function tw(n,t){const e={},i=Gt(t),r=i?Object.keys(t):t,o=Gt(n)?i?c=>Bt(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=qk(o(c));return e}function Gk(n){return tw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Gc(n){return tw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Wn(n){const t=Gk(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function on(n,t){n=n||{},t=t||be.font;let e=Bt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Bt(n.style,t.style);i&&!(""+i).match(Fk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Bt(n.family,t.family),lineHeight:Hk(Bt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Bt(n.weight,t.weight),string:""};return r.string=Pk(r),r}function nf(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function Yk(n,t,e){const{min:i,max:r}=n,o=nk(t,(r-i)/2),c=(h,f)=>e&&h===0?0:h+f;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function La(n,t){return Object.assign(Object.create(n),t)}function Gy(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=sw("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:h=>Gy([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,f){return delete h[f],delete h._keys,delete n[0][f],!0},get(h,f){return nw(h,f,()=>tP(f,t,n,h))},getOwnPropertyDescriptor(h,f){return Reflect.getOwnPropertyDescriptor(h._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,f){return mT(h).includes(f)},ownKeys(h){return mT(h)},set(h,f,g){const y=h._storage||(h._storage=r());return h[f]=y[f]=g,delete h._keys,!0}})}function Jo(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:ew(n,i),setContext:o=>Jo(n,o,e,i),override:o=>Jo(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return nw(o,c,()=>Qk(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function ew(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:xr(e)?e:()=>e,isIndexable:xr(i)?i:()=>i}}const Kk=(n,t)=>n?n+jy(t):t,Yy=(n,t)=>Gt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function nw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Qk(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let h=i[t];return xr(h)&&c.isScriptable(t)&&(h=$k(t,h,n,e)),Fe(h)&&h.length&&(h=Xk(t,h,n,c.isIndexable)),Yy(t,h)&&(h=Jo(h,r,o&&o[t],c)),h}function $k(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let f=t(o,c||i);return h.delete(n),Yy(n,f)&&(f=Ky(r._scopes,r,n,f)),f}function Xk(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Gt(t[0])){const f=t,g=r._scopes.filter(y=>y!==f);t=[];for(const y of f){const v=Ky(g,r,n,y);t.push(Jo(v,o,c&&c[n],h))}}return t}function iw(n,t,e){return xr(n)?n(t,e):n}const Wk=(n,t)=>n===!0?t:typeof n=="string"?Xf(t,n):void 0;function Zk(n,t,e,i,r){for(const o of t){const c=Wk(e,o);if(c){n.add(c);const h=iw(c._fallback,e,r);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function Ky(n,t,e,i){const r=t._rootScopes,o=iw(t._fallback,e,i),c=[...n,...r],h=new Set;h.add(i);let f=gT(h,c,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=gT(h,c,o,f,i),f===null)?!1:Gy(Array.from(h),[""],r,o,()=>Jk(t,e,i))}function gT(n,t,e,i,r){for(;e;)e=Zk(n,t,e,i,r);return e}function Jk(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return Fe(r)&&Gt(e)?e:r||{}}function tP(n,t,e,i){let r;for(const o of t)if(r=sw(Kk(o,n),e),typeof r<"u")return Yy(n,r)?Ky(e,i,n,r):r}function sw(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function mT(n){let t=n._keys;return t||(t=n._keys=eP(n._scopes)),t}function eP(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}const nP=Number.EPSILON||1e-14,tl=(n,t)=>t<n.length&&!n[t].skip&&n[t],rw=n=>n==="x"?"y":"x";function iP(n,t,e,i){const r=n.skip?t:n,o=t,c=e.skip?t:e,h=Np(o,r),f=Np(c,o);let g=h/(h+f),y=f/(h+f);g=isNaN(g)?0:g,y=isNaN(y)?0:y;const v=i*g,b=i*y;return{previous:{x:o.x-v*(c.x-r.x),y:o.y-v*(c.y-r.y)},next:{x:o.x+b*(c.x-r.x),y:o.y+b*(c.y-r.y)}}}function sP(n,t,e){const i=n.length;let r,o,c,h,f,g=tl(n,0);for(let y=0;y<i-1;++y)if(f=g,g=tl(n,y+1),!(!f||!g)){if(Fc(t[y],0,nP)){e[y]=e[y+1]=0;continue}r=e[y]/t[y],o=e[y+1]/t[y],h=Math.pow(r,2)+Math.pow(o,2),!(h<=9)&&(c=3/Math.sqrt(h),e[y]=r*c*t[y],e[y+1]=o*c*t[y])}}function rP(n,t,e="x"){const i=rw(e),r=n.length;let o,c,h,f=tl(n,0);for(let g=0;g<r;++g){if(c=h,h=f,f=tl(n,g+1),!h)continue;const y=h[e],v=h[i];c&&(o=(y-c[e])/3,h[`cp1${e}`]=y-o,h[`cp1${i}`]=v-o*t[g]),f&&(o=(f[e]-y)/3,h[`cp2${e}`]=y+o,h[`cp2${i}`]=v+o*t[g])}}function aP(n,t="x"){const e=rw(t),i=n.length,r=Array(i).fill(0),o=Array(i);let c,h,f,g=tl(n,0);for(c=0;c<i;++c)if(h=f,f=g,g=tl(n,c+1),!!f){if(g){const y=g[t]-f[t];r[c]=y!==0?(g[e]-f[e])/y:0}o[c]=h?g?Zo(r[c-1])!==Zo(r[c])?0:(r[c-1]+r[c])/2:r[c-1]:r[c]}sP(n,r,o),rP(n,o,t)}function sf(n,t,e){return Math.max(Math.min(n,e),t)}function oP(n,t){let e,i,r,o,c,h=ru(n[0],t);for(e=0,i=n.length;e<i;++e)c=o,o=h,h=e<i-1&&ru(n[e+1],t),o&&(r=n[e],c&&(r.cp1x=sf(r.cp1x,t.left,t.right),r.cp1y=sf(r.cp1y,t.top,t.bottom)),h&&(r.cp2x=sf(r.cp2x,t.left,t.right),r.cp2y=sf(r.cp2y,t.top,t.bottom)))}function lP(n,t,e,i,r){let o,c,h,f;if(t.spanGaps&&(n=n.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")aP(n,r);else{let g=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)h=n[o],f=iP(g,h,n[Math.min(o+1,c-(i?0:1))%c],t.tension),h.cp1x=f.previous.x,h.cp1y=f.previous.y,h.cp2x=f.next.x,h.cp2y=f.next.y,g=h}t.capBezierPoints&&oP(n,e)}function Qy(){return typeof window<"u"&&typeof document<"u"}function $y(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Jf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Ad=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function cP(n,t){return Ad(n).getPropertyValue(t)}const uP=["top","right","bottom","left"];function Ra(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=uP[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const hP=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function fP(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,h,f;if(hP(r,o,n.target))h=r,f=o;else{const g=t.getBoundingClientRect();h=i.clientX-g.left,f=i.clientY-g.top,c=!0}return{x:h,y:f,box:c}}function va(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Ad(e),o=r.boxSizing==="border-box",c=Ra(r,"padding"),h=Ra(r,"border","width"),{x:f,y:g,box:y}=fP(n,e),v=c.left+(y&&h.left),b=c.top+(y&&h.top);let{width:S,height:x}=t;return o&&(S-=c.width+h.width,x-=c.height+h.height),{x:Math.round((f-v)/S*e.width/i),y:Math.round((g-b)/x*e.height/i)}}function dP(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&$y(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=Ad(o),f=Ra(h,"border","width"),g=Ra(h,"padding");t=c.width-g.width-f.width,e=c.height-g.height-f.height,i=Jf(h.maxWidth,o,"clientWidth"),r=Jf(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Zf,maxHeight:r||Zf}}const rf=n=>Math.round(n*10)/10;function gP(n,t,e,i){const r=Ad(n),o=Ra(r,"margin"),c=Jf(r.maxWidth,n,"clientWidth")||Zf,h=Jf(r.maxHeight,n,"clientHeight")||Zf,f=dP(n,t,e);let{width:g,height:y}=f;if(r.boxSizing==="content-box"){const b=Ra(r,"border","width"),S=Ra(r,"padding");g-=S.width+b.width,y-=S.height+b.height}return g=Math.max(0,g-o.width),y=Math.max(0,i?g/i:y-o.height),g=rf(Math.min(g,c,f.maxWidth)),y=rf(Math.min(y,h,f.maxHeight)),g&&!y&&(y=rf(g/2)),(t!==void 0||e!==void 0)&&i&&f.height&&y>f.height&&(y=f.height,g=rf(Math.floor(y*i))),{width:g,height:y}}function pT(n,t,e){const i=t||1,r=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const mP=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Qy()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function yT(n,t){const e=cP(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ba(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function pP(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function yP(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},c=ba(n,r,e),h=ba(r,o,e),f=ba(o,t,e),g=ba(c,h,e),y=ba(h,f,e);return ba(g,y,e)}const _P=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},vP=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Fo(n,t,e){return n?_P(t,e):vP()}function aw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function ow(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function lw(n){return n==="angle"?{between:K1,compare:pk,normalize:rr}:{between:Oc,compare:(t,e)=>t-e,normalize:t=>t}}function _T({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function bP(n,t,e){const{property:i,start:r,end:o}=e,{between:c,normalize:h}=lw(i),f=t.length;let{start:g,end:y,loop:v}=n,b,S;if(v){for(g+=f,y+=f,b=0,S=f;b<S&&c(h(t[g%f][i]),r,o);++b)g--,y--;g%=f,y%=f}return y<g&&(y+=f),{start:g,end:y,loop:v,style:n.style}}function EP(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,c=t.length,{compare:h,between:f,normalize:g}=lw(i),{start:y,end:v,loop:b,style:S}=bP(n,t,e),x=[];let D=!1,M=null,j,W,$;const rt=()=>f(r,$,j)&&h(r,$)!==0,Z=()=>h(o,j)===0||f(o,$,j),ot=()=>D||rt(),N=()=>!D||Z();for(let C=y,I=y;C<=v;++C)W=t[C%c],!W.skip&&(j=g(W[i]),j!==$&&(D=f(j,r,o),M===null&&ot()&&(M=h(j,r)===0?C:I),M!==null&&N()&&(x.push(_T({start:M,end:C,loop:b,count:c,style:S})),M=null),I=C,$=j));return M!==null&&x.push(_T({start:M,end:v,loop:b,count:c,style:S})),x}function TP(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=EP(i[r],n.points,t);o.length&&e.push(...o)}return e}function SP(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function AP(n,t,e,i){const r=n.length,o=[];let c=t,h=n[t],f;for(f=t+1;f<=e;++f){const g=n[f%r];g.skip||g.stop?h.skip||(i=!1,o.push({start:t%r,end:(f-1)%r,loop:i}),t=c=g.stop?f:null):(c=f,h.skip&&(t=f)),h=g}return c!==null&&o.push({start:t%r,end:c%r,loop:i}),o}function wP(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:c,end:h}=SP(e,r,o,i);if(i===!0)return vT(n,[{start:c,end:h,loop:o}],e,t);const f=h<c?h+r:h,g=!!n._fullLoop&&c===0&&h===r-1;return vT(n,AP(e,c,f,g),e,t)}function vT(n,t,e,i){return!i||!i.setContext||!e?t:xP(n,t,e,i)}function xP(n,t,e,i){const r=n._chart.getContext(),o=bT(n.options),{_datasetIndex:c,options:{spanGaps:h}}=n,f=e.length,g=[];let y=o,v=t[0].start,b=v;function S(x,D,M,j){const W=h?-1:1;if(x!==D){for(x+=f;e[x%f].skip;)x-=W;for(;e[D%f].skip;)D+=W;x%f!==D%f&&(g.push({start:x%f,end:D%f,loop:M,style:j}),y=j,v=D%f)}}for(const x of t){v=h?v:x.start;let D=e[v%f],M;for(b=v+1;b<=x.end;b++){const j=e[b%f];M=bT(i.setContext(La(r,{type:"segment",p0:D,p1:j,p0DataIndex:(b-1)%f,p1DataIndex:b%f,datasetIndex:c}))),RP(M,y)&&S(v,b-1,x.loop,y),D=j,y=M}v<b-1&&S(v,b-1,x.loop,y)}return g}function bT(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function RP(n,t){if(!t)return!1;const e=[],i=function(r,o){return Fy(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function af(n,t,e){return n.options.clip?n[e]:t[e]}function CP(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:af(e,t,"left"),right:af(e,t,"right"),top:af(i,t,"top"),bottom:af(i,t,"bottom")}:t}function IP(n,t){const e=t._clip;if(e.disabled)return!1;const i=CP(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class DP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=$1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,f;for(;c>=0;--c)f=o[c],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fs=new DP;const ET="transparent",MP={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=uT(n||ET),r=i.valid&&uT(t||ET);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class OP{constructor(t,e,i,r){const o=e[i];r=nf([t.to,r,o,t.from]);const c=nf([t.from,o,r]);this._active=!0,this._fn=t.fn||MP[t.type||typeof c],this._easing=Hc[t.easing]||Hc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=nf([t.to,e,r,t.from]),this._from=nf([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,h=this._to;let f;if(this._active=o!==h&&(c||e<i),!this._active){this._target[r]=h,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,h,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class cw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Gt(t))return;const e=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Gt(o))return;const c={};for(const h of e)c[h]=o[h];(Fe(o.properties)&&o.properties||[r]).forEach(h=>{(h===r||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,r=kP(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&NP(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let f;for(f=c.length-1;f>=0;--f){const g=c[f];if(g.charAt(0)==="$")continue;if(g==="options"){r.push(...this._animateOptions(t,e));continue}const y=e[g];let v=o[g];const b=i.get(g);if(v)if(b&&v.active()){v.update(b,y,h);continue}else v.cancel();if(!b||!b.duration){t[g]=y;continue}o[g]=v=new OP(b,t,g,y),r.push(v)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return fs.add(this._chart,i),!0}}function NP(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function kP(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function TT(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function PP(n,t,e){if(e===!1)return!1;const i=TT(n,e),r=TT(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function VP(n){let t,e,i,r;return Gt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function uw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function ST(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,h,f,g;if(t===null)return;let y=!1;for(c=0,h=r.length;c<h;++c){if(f=+r[c],f===e){if(y=!0,i.all)continue;break}g=n.values[f],Xn(g)&&(o||t===0||Zo(t)===Zo(g))&&(t+=g)}return!y&&!i.all?0:t}function LP(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let f,g,y;for(f=0,g=c.length;f<g;++f)y=c[f],h[f]={[r]:y,[o]:n[y]};return h}function Wm(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function UP(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function jP(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function zP(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function AT(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function wT(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,f=o.axis,g=c.axis,y=UP(o,c,i),v=t.length;let b;for(let S=0;S<v;++S){const x=t[S],{[f]:D,[g]:M}=x,j=x._stacks||(x._stacks={});b=j[g]=zP(r,y,D),b[h]=M,b._top=AT(b,c,!0,i.type),b._bottom=AT(b,c,!1,i.type);const W=b._visualValues||(b._visualValues={});W[h]=M}}function Zm(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function BP(n,t){return La(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function FP(n,t,e){return La(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Ec(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Jm=n=>n==="reset"||n==="none",xT=(n,t)=>t?n:Object.assign({},n),HP=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:uw(e,!0),values:null};class hw{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Wm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ec(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(v,b,S,x)=>v==="x"?b:v==="r"?x:S,o=e.xAxisID=Bt(i.xAxisID,Zm(t,"x")),c=e.yAxisID=Bt(i.yAxisID,Zm(t,"y")),h=e.rAxisID=Bt(i.rAxisID,Zm(t,"r")),f=e.indexAxis,g=e.iAxisID=r(f,o,c,h),y=e.vAxisID=r(f,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(g),e.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&oT(this._data,this),t._stacked&&Ec(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Gt(e)){const r=this._cachedMeta;this._data=LP(e,r)}else if(i!==e){if(i){oT(i,this);const r=this._cachedMeta;Ec(r),r._parsed=[]}e&&Object.isExtensible(e)&&bk(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Wm(e.vScale,e),e.stack!==i.stack&&(r=!0,Ec(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(wT(this,e._parsed),e._stacked=Wm(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,h=o.axis;let f=t===0&&e===r.length?!0:i._sorted,g=t>0&&i._parsed[t-1],y,v,b;if(this._parsing===!1)i._parsed=r,i._sorted=!0,b=r;else{Fe(r[t])?b=this.parseArrayData(i,r,t,e):Gt(r[t])?b=this.parseObjectData(i,r,t,e):b=this.parsePrimitiveData(i,r,t,e);const S=()=>v[h]===null||g&&v[h]<g[h];for(y=0;y<e;++y)i._parsed[y+t]=v=b[y],f&&(S()&&(f=!1),g=v);i._sorted=f}c&&wT(this,b)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,h=o.axis,f=c.axis,g=o.getLabels(),y=o===c,v=new Array(r);let b,S,x;for(b=0,S=r;b<S;++b)x=b+i,v[b]={[h]:y||o.parse(g[x],x),[f]:c.parse(e[x],x)};return v}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,h=new Array(r);let f,g,y,v;for(f=0,g=r;f<g;++f)y=f+i,v=e[y],h[f]={x:o.parse(v[0],y),y:c.parse(v[1],y)};return h}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=new Array(r);let y,v,b,S;for(y=0,v=r;y<v;++y)b=y+i,S=e[b],g[y]={x:o.parse(Xf(S,h),b),y:c.parse(Xf(S,f),b)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:uw(r,!0),values:e._stacks[t.axis]._visualValues};return ST(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const h=r&&i._stacks[e.axis];r&&h&&(r.values=h,c=ST(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,h=this._getOtherScale(t),f=HP(e,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:v}=jP(h);let b,S;function x(){S=r[b];const D=S[h.axis];return!Xn(S[t.axis])||y>D||v<D}for(b=0;b<c&&!(!x()&&(this.updateRangeFromParsed(g,t,S,f),o));++b);if(o){for(b=c-1;b>=0;--b)if(!x()){this.updateRangeFromParsed(g,t,S,f);break}}return g}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],Xn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=VP(Bt(this.options.clip,PP(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,f=this._drawCount||r.length-h,g=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(t,o,h,f),y=h;y<h+f;++y){const v=r[y];v.hidden||(v.active&&g?c.push(v):v.draw(t,o))}for(y=0;y<c.length;++y)c[y].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=FP(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=BP(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],f=this.enableOptionSharing&&Wf(i);if(h)return xT(h,f);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,t),v=r?[`${t}Hover`,"hover",t,""]:[t,""],b=g.getOptionScopes(this.getDataset(),y),S=Object.keys(be.elements[t]),x=()=>this.getContext(i,r,e),D=g.resolveNamedOptions(b,S,x,v);return D.$shared&&(D.$shared=f,o[c]=Object.freeze(xT(D,f))),D}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let f;if(r.options.animation!==!1){const y=this.chart.config,v=y.datasetAnimationScopeKeys(this._type,e),b=y.getOptionScopes(this.getDataset(),v);f=y.createResolver(b,this.getContext(t,i,e))}const g=new cw(r,f&&f.animations);return f&&f._cacheable&&(o[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Jm(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){Jm(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Jm(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,f,g]of this._syncList)this[h](f,g);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let h;const f=g=>{for(g.length+=e,h=g.length-1;h>=c;h--)g[h]=g[h-e]};for(f(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Ec(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class qP extends hw{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,c=this.chart._animationsDisabled;let{start:h,count:f}=Ak(e,r,c);this._drawStart=h,this._drawCount=f,wk(e)&&(h=0,f=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:g},t),this.updateElements(r,h,f,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:h,_stacked:f,_dataset:g}=this._cachedMeta,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(e,r),b=c.axis,S=h.axis,{spanGaps:x,segment:D}=this.options,M=su(x)?x:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||o||r==="none",W=e+i,$=t.length;let rt=e>0&&this.getParsed(e-1);for(let Z=0;Z<$;++Z){const ot=t[Z],N=j?ot:{};if(Z<e||Z>=W){N.skip=!0;continue}const C=this.getParsed(Z),I=ae(C[S]),O=N[b]=c.getPixelForValue(C[b],Z),V=N[S]=o||I?h.getBasePixel():h.getPixelForValue(f?this.applyStack(h,C,f):C[S],Z);N.skip=isNaN(O)||isNaN(V)||I,N.stop=Z>0&&Math.abs(C[b]-rt[b])>M,D&&(N.parsed=C,N.raw=g.data[Z]),v&&(N.options=y||this.resolveDataElementOptions(Z,ot.active?"active":r)),j||this.updateElement(ot,Z,N,r),rt=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function ya(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Xy{static override(t){Object.assign(Xy.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ya()}parse(){return ya()}format(){return ya()}add(){return ya()}diff(){return ya()}startOf(){return ya()}endOf(){return ya()}}var GP={_date:Xy};function YP(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,h=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const g=h._reversePixels?_k:Sa;if(i){if(r._sharedOptions){const y=o[0],v=typeof y.getRange=="function"&&y.getRange(t);if(v){const b=g(o,t,e-v),S=g(o,t,e+v);return{lo:b.lo,hi:S.hi}}}}else{const y=g(o,t,e);if(f){const{vScale:v}=r._cachedMeta,{_parsed:b}=n,S=b.slice(0,y.lo+1).reverse().findIndex(D=>!ae(D[v.axis]));y.lo-=Math.max(0,S);const x=b.slice(y.hi).findIndex(D=>!ae(D[v.axis]));y.hi+=Math.max(0,x)}return y}}return{lo:0,hi:o.length-1}}function wd(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,f=o.length;h<f;++h){const{index:g,data:y}=o[h],{lo:v,hi:b}=YP(o[h],t,c,r);for(let S=v;S<=b;++S){const x=y[S];x.skip||i(x,g,S)}}}function KP(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function tp(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||wd(n,e,t,function(h,f,g){!r&&!ru(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:f,index:g})},!0),o}function QP(n,t,e,i){let r=[];function o(c,h,f){const{startAngle:g,endAngle:y}=c.getProps(["startAngle","endAngle"],i),{angle:v}=mk(c,{x:t.x,y:t.y});K1(v,g,y)&&r.push({element:c,datasetIndex:h,index:f})}return wd(n,e,t,o),r}function $P(n,t,e,i,r,o){let c=[];const h=KP(e);let f=Number.POSITIVE_INFINITY;function g(y,v,b){const S=y.inRange(t.x,t.y,r);if(i&&!S)return;const x=y.getCenterPoint(r);if(!(!!o||n.isPointInArea(x))&&!S)return;const M=h(t,x);M<f?(c=[{element:y,datasetIndex:v,index:b}],f=M):M===f&&c.push({element:y,datasetIndex:v,index:b})}return wd(n,e,t,g),c}function ep(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?QP(n,t,e,r):$P(n,t,e,i,r,o)}function RT(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return wd(n,e,t,(f,g,y)=>{f[c]&&f[c](t[e],r)&&(o.push({element:f,datasetIndex:g,index:y}),h=h||f.inRange(t.x,t.y,r))}),i&&!h?[]:o}var XP={modes:{index(n,t,e,i){const r=va(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?tp(n,r,o,i,c):ep(n,r,o,!1,i,c),f=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(g=>{const y=h[0].index,v=g.data[y];v&&!v.skip&&f.push({element:v,datasetIndex:g.index,index:y})}),f):[]},dataset(n,t,e,i){const r=va(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?tp(n,r,o,i,c):ep(n,r,o,!1,i,c);if(h.length>0){const f=h[0].datasetIndex,g=n.getDatasetMeta(f).data;h=[];for(let y=0;y<g.length;++y)h.push({element:g[y],datasetIndex:f,index:y})}return h},point(n,t,e,i){const r=va(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return tp(n,r,o,i,c)},nearest(n,t,e,i){const r=va(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return ep(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=va(t,n);return RT(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=va(t,n);return RT(n,r,"y",e.intersect,i)}}};const fw=["left","top","right","bottom"];function Tc(n,t){return n.filter(e=>e.pos===t)}function CT(n,t){return n.filter(e=>fw.indexOf(e.pos)===-1&&e.box.axis===t)}function Sc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function WP(n){const t=[];let e,i,r,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:h});return t}function ZP(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!fw.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function JP(n,t){const e=ZP(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:f}=h.box,g=e[h.stack],y=g&&h.stackWeight/g.weight;h.horizontal?(h.width=y?y*i:f&&t.availableWidth,h.height=r):(h.width=i,h.height=y?y*r:f&&t.availableHeight)}return e}function tV(n){const t=WP(n),e=Sc(t.filter(g=>g.box.fullSize),!0),i=Sc(Tc(t,"left"),!0),r=Sc(Tc(t,"right")),o=Sc(Tc(t,"top"),!0),c=Sc(Tc(t,"bottom")),h=CT(t,"x"),f=CT(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(c).concat(h),chartArea:Tc(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(c).concat(h)}}function IT(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function dw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function eV(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!Gt(r)){e.size&&(n[r]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[r]+=e.size}o.getPadding&&dw(c,o.getPadding());const h=Math.max(0,t.outerWidth-IT(c,n,"left","right")),f=Math.max(0,t.outerHeight-IT(c,n,"top","bottom")),g=h!==n.w,y=f!==n.h;return n.w=h,n.h=f,e.horizontal?{same:g,other:y}:{same:y,other:g}}function nV(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function iV(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Nc(n,t,e,i){const r=[];let o,c,h,f,g,y;for(o=0,c=n.length,g=0;o<c;++o){h=n[o],f=h.box,f.update(h.width||t.w,h.height||t.h,iV(h.horizontal,t));const{same:v,other:b}=eV(t,e,h,i);g|=v&&r.length,y=y||b,f.fullSize||r.push(h)}return g&&Nc(r,t,e,i)||y}function of(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function DT(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const h of n){const f=h.box,g=i[h.stack]||{placed:0,weight:1},y=h.stackWeight/g.weight||1;if(h.horizontal){const v=t.w*y,b=g.size||f.height;Wf(g.start)&&(c=g.start),f.fullSize?of(f,r.left,c,e.outerWidth-r.right-r.left,b):of(f,t.left+g.placed,c,v,b),g.start=c,g.placed+=v,c=f.bottom}else{const v=t.h*y,b=g.size||f.width;Wf(g.start)&&(o=g.start),f.fullSize?of(f,o,r.top,b,e.outerHeight-r.bottom-r.top):of(f,o,t.top+g.placed,b,v),g.start=o,g.placed+=v,o=f.right}}t.x=o,t.y=c}var $n={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=Wn(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),h=tV(n.boxes),f=h.vertical,g=h.horizontal;Wt(n.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const y=f.reduce((D,M)=>M.box.options&&M.box.options.display===!1?D:D+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/y,hBoxMaxHeight:c/2}),b=Object.assign({},r);dw(b,Wn(i));const S=Object.assign({maxPadding:b,w:o,h:c,x:r.left,y:r.top},r),x=JP(f.concat(g),v);Nc(h.fullSize,S,v,x),Nc(f,S,v,x),Nc(g,S,v,x)&&Nc(f,S,v,x),nV(S),DT(h.leftAndTop,S,v,x),S.x+=S.w,S.y+=S.h,DT(h.rightAndBottom,S,v,x),n.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},Wt(h.chartArea,D=>{const M=D.box;Object.assign(M,n.chartArea),M.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class gw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class sV extends gw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Af="$chartjs",rV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},MT=n=>n===null||n==="";function aV(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Af]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",MT(r)){const o=yT(n,"width");o!==void 0&&(n.width=o)}if(MT(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=yT(n,"height");o!==void 0&&(n.height=o)}return n}const mw=mP?{passive:!0}:!1;function oV(n,t,e){n&&n.addEventListener(t,e,mw)}function lV(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,mw)}function cV(n,t){const e=rV[n.type]||n.type,{x:i,y:r}=va(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function td(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function uV(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||td(h.addedNodes,i),c=c&&!td(h.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function hV(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||td(h.removedNodes,i),c=c&&!td(h.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const ou=new Map;let OT=0;function pw(){const n=window.devicePixelRatio;n!==OT&&(OT=n,ou.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function fV(n,t){ou.size||window.addEventListener("resize",pw),ou.set(n,t)}function dV(n){ou.delete(n),ou.size||window.removeEventListener("resize",pw)}function gV(n,t,e){const i=n.canvas,r=i&&$y(i);if(!r)return;const o=X1((h,f)=>{const g=r.clientWidth;e(h,f),g<r.clientWidth&&e()},window),c=new ResizeObserver(h=>{const f=h[0],g=f.contentRect.width,y=f.contentRect.height;g===0&&y===0||o(g,y)});return c.observe(r),fV(n,o),c}function np(n,t,e){e&&e.disconnect(),t==="resize"&&dV(n)}function mV(n,t,e){const i=n.canvas,r=X1(o=>{n.ctx!==null&&e(cV(o,n))},n);return oV(i,t,r),r}class pV extends gw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(aV(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Af])return!1;const i=e[Af].initial;["height","width"].forEach(o=>{const c=i[o];ae(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Af],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:uV,detach:hV,resize:gV}[e]||mV;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:np,detach:np,resize:np}[e]||lV)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return gP(t,e,i,r)}isAttached(t){const e=t&&$y(t);return!!(e&&e.isConnected)}}function yV(n){return!Qy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?sV:pV}class Ua{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return su(this.x)&&su(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}function _V(n,t){const e=n.options.ticks,i=vV(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?EV(t):[],c=o.length,h=o[0],f=o[c-1],g=[];if(c>r)return TV(t,g,o,c/r),g;const y=bV(o,t,r);if(c>0){let v,b;const S=c>1?Math.round((f-h)/(c-1)):null;for(lf(t,g,y,ae(S)?0:h-S,h),v=0,b=c-1;v<b;v++)lf(t,g,y,o[v],o[v+1]);return lf(t,g,y,f,ae(S)?t.length:f+S),g}return lf(t,g,y),g}function vV(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function bV(n,t,e){const i=SV(n),r=t.length/e;if(!i)return Math.max(r,1);const o=uk(i);for(let c=0,h=o.length-1;c<h;c++){const f=o[c];if(f>r)return f}return Math.max(r,1)}function EV(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function TV(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function lf(n,t,e,i,r){const o=Bt(i,0),c=Math.min(Bt(r,n.length),n.length);let h=0,f,g,y;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),y=o;y<0;)h++,y=Math.round(o+h*e);for(g=Math.max(o,0);g<c;g++)g===y&&(t.push(n[g]),h++,y=Math.round(o+h*e))}function SV(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const AV=n=>n==="left"?"right":n==="right"?"left":n,NT=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,kT=(n,t)=>Math.min(t||n,n);function PT(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function wV(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let f=n.getPixelForTick(r),g;if(!(e&&(i===1?g=Math.max(f-o,c-f):t===0?g=(n.getPixelForTick(1)-f)/2:g=(f-n.getPixelForTick(r-1))/2,f+=r<t?g:-g,f<o-h||f>c+h)))return f}function xV(n,t){Wt(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Ac(n){return n.drawTicks?n.tickLength:0}function VT(n,t){if(!n.display)return 0;const e=on(n.font,t),i=Wn(n.padding);return(Fe(n.text)?n.text.length:1)*e.lineHeight+i.height}function RV(n,t){return La(n,{scale:t,type:"scale"})}function CV(n,t,e){return La(n,{tick:e,index:t,type:"tick"})}function IV(n,t,e){let i=By(n);return(e&&t!=="right"||!e&&t==="right")&&(i=AV(i)),i}function DV(n,t,e,i){const{top:r,left:o,bottom:c,right:h,chart:f}=n,{chartArea:g,scales:y}=f;let v=0,b,S,x;const D=c-r,M=h-o;if(n.isHorizontal()){if(S=sn(i,o,h),Gt(e)){const j=Object.keys(e)[0],W=e[j];x=y[j].getPixelForValue(W)+D-t}else e==="center"?x=(g.bottom+g.top)/2+D-t:x=NT(n,e,t);b=h-o}else{if(Gt(e)){const j=Object.keys(e)[0],W=e[j];S=y[j].getPixelForValue(W)-M+t}else e==="center"?S=(g.left+g.right)/2-M+t:S=NT(n,e,t);x=sn(i,c,r),v=e==="left"?-ri:ri}return{titleX:S,titleY:x,maxWidth:b,rotation:v}}class cl extends Ua{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Ai(t,Number.POSITIVE_INFINITY),e=Ai(e,Number.NEGATIVE_INFINITY),i=Ai(i,Number.POSITIVE_INFINITY),r=Ai(r,Number.NEGATIVE_INFINITY),{min:Ai(t,i),max:Ai(e,r),minDefined:Xn(t),maxDefined:Xn(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let f=0,g=h.length;f<g;++f)c=h[f].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Ai(e,Ai(i,e)),max:Ai(i,Ai(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Yk(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=h<this.ticks.length;this._convertTicksToLabels(f?PT(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=_V(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),oe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=oe(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=kT(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,h,f,g;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const y=this._getLabelSizes(),v=y.widest.width,b=y.highest.height,S=Qn(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:S/(i-1),v+6>h&&(h=S/(i-(t.offset?.5:1)),f=this.maxHeight-Ac(t.grid)-e.padding-VT(t.title,this.chart.options.font),g=Math.sqrt(v*v+b*b),c=gk(Math.min(Math.asin(Qn((y.highest.height+6)/h,-1,1)),Math.asin(Qn(f/g,-1,1))-Math.asin(Qn(b/g,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const f=VT(r,e.options.font);if(h?(t.width=this.maxWidth,t.height=Ac(o)+f):(t.height=this.maxHeight,t.width=Ac(o)+f),i.display&&this.ticks.length){const{first:g,last:y,widest:v,highest:b}=this._getLabelSizes(),S=i.padding*2,x=Ta(this.labelRotation),D=Math.cos(x),M=Math.sin(x);if(h){const j=i.mirror?0:M*v.width+D*b.height;t.height=Math.min(this.maxHeight,t.height+j+S)}else{const j=i.mirror?0:D*v.width+M*b.height;t.width=Math.min(this.maxWidth,t.width+j+S)}this._calculatePadding(g,y,M,D)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:h}=this.options,f=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,S=0;f?g?(b=r*t.width,S=i*e.height):(b=i*t.height,S=r*e.width):o==="start"?S=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,S=e.width/2),this.paddingLeft=Math.max((b-y+c)*this.width/(this.width-y),0),this.paddingRight=Math.max((S-v+c)*this.width/(this.width-v),0)}else{let y=e.height/2,v=t.height/2;o==="start"?(y=0,v=t.height):o==="end"&&(y=e.height,v=0),this.paddingTop=y+c,this.paddingBottom=v+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ae(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=PT(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],h=[],f=Math.floor(e/kT(e,i));let g=0,y=0,v,b,S,x,D,M,j,W,$,rt,Z;for(v=0;v<e;v+=f){if(x=t[v].label,D=this._resolveTickFontOptions(v),r.font=M=D.string,j=o[M]=o[M]||{data:{},gc:[]},W=D.lineHeight,$=rt=0,!ae(x)&&!Fe(x))$=fT(r,j.data,j.gc,$,x),rt=W;else if(Fe(x))for(b=0,S=x.length;b<S;++b)Z=x[b],!ae(Z)&&!Fe(Z)&&($=fT(r,j.data,j.gc,$,Z),rt+=W);c.push($),h.push(rt),g=Math.max($,g),y=Math.max(rt,y)}xV(o,e);const ot=c.indexOf(g),N=h.indexOf(y),C=I=>({width:c[I]||0,height:h[I]||0});return{first:C(0),last:C(e-1),widest:C(ot),highest:C(N),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return yk(this._alignToPixels?pa(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=CV(this.getContext(),t,i))}return this.$context||(this.$context=RV(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ta(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,f=o?o.highest.height+c:0;return this.isHorizontal()?f*i>h*r?h/i:f/r:f*r<h*i?f/i:h/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:h}=r,f=o.offset,g=this.isHorizontal(),v=this.ticks.length+(f?1:0),b=Ac(o),S=[],x=h.setContext(this.getContext()),D=x.display?x.width:0,M=D/2,j=function(Q){return pa(i,Q,D)};let W,$,rt,Z,ot,N,C,I,O,V,U,k;if(c==="top")W=j(this.bottom),N=this.bottom-b,I=W-M,V=j(t.top)+M,k=t.bottom;else if(c==="bottom")W=j(this.top),V=t.top,k=j(t.bottom)-M,N=W+M,I=this.top+b;else if(c==="left")W=j(this.right),ot=this.right-b,C=W-M,O=j(t.left)+M,U=t.right;else if(c==="right")W=j(this.left),O=t.left,U=j(t.right)-M,ot=W+M,C=this.left+b;else if(e==="x"){if(c==="center")W=j((t.top+t.bottom)/2+.5);else if(Gt(c)){const Q=Object.keys(c)[0],lt=c[Q];W=j(this.chart.scales[Q].getPixelForValue(lt))}V=t.top,k=t.bottom,N=W+M,I=N+b}else if(e==="y"){if(c==="center")W=j((t.left+t.right)/2);else if(Gt(c)){const Q=Object.keys(c)[0],lt=c[Q];W=j(this.chart.scales[Q].getPixelForValue(lt))}ot=W-M,C=ot-b,O=t.left,U=t.right}const Ft=Bt(r.ticks.maxTicksLimit,v),bt=Math.max(1,Math.ceil(v/Ft));for($=0;$<v;$+=bt){const Q=this.getContext($),lt=o.setContext(Q),mt=h.setContext(Q),Nt=lt.lineWidth,L=lt.color,st=mt.dash||[],ut=mt.dashOffset,at=lt.tickWidth,gt=lt.tickColor,xt=lt.tickBorderDash||[],_t=lt.tickBorderDashOffset;rt=wV(this,$,f),rt!==void 0&&(Z=pa(i,rt,Nt),g?ot=C=O=U=Z:N=I=V=k=Z,S.push({tx1:ot,ty1:N,tx2:C,ty2:I,x1:O,y1:V,x2:U,y2:k,width:Nt,color:L,borderDash:st,borderDashOffset:ut,tickWidth:at,tickColor:gt,tickBorderDash:xt,tickBorderDashOffset:_t}))}return this._ticksLength=v,this._borderValue=W,S}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:f,crossAlign:g,padding:y,mirror:v}=o,b=Ac(i.grid),S=b+y,x=v?-y:S,D=-Ta(this.labelRotation),M=[];let j,W,$,rt,Z,ot,N,C,I,O,V,U,k="middle";if(r==="top")ot=this.bottom-x,N=this._getXAxisLabelAlignment();else if(r==="bottom")ot=this.top+x,N=this._getXAxisLabelAlignment();else if(r==="left"){const bt=this._getYAxisLabelAlignment(b);N=bt.textAlign,Z=bt.x}else if(r==="right"){const bt=this._getYAxisLabelAlignment(b);N=bt.textAlign,Z=bt.x}else if(e==="x"){if(r==="center")ot=(t.top+t.bottom)/2+S;else if(Gt(r)){const bt=Object.keys(r)[0],Q=r[bt];ot=this.chart.scales[bt].getPixelForValue(Q)+S}N=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")Z=(t.left+t.right)/2-S;else if(Gt(r)){const bt=Object.keys(r)[0],Q=r[bt];Z=this.chart.scales[bt].getPixelForValue(Q)}N=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(f==="start"?k="top":f==="end"&&(k="bottom"));const Ft=this._getLabelSizes();for(j=0,W=h.length;j<W;++j){$=h[j],rt=$.label;const bt=o.setContext(this.getContext(j));C=this.getPixelForTick(j)+o.labelOffset,I=this._resolveTickFontOptions(j),O=I.lineHeight,V=Fe(rt)?rt.length:1;const Q=V/2,lt=bt.color,mt=bt.textStrokeColor,Nt=bt.textStrokeWidth;let L=N;c?(Z=C,N==="inner"&&(j===W-1?L=this.options.reverse?"left":"right":j===0?L=this.options.reverse?"right":"left":L="center"),r==="top"?g==="near"||D!==0?U=-V*O+O/2:g==="center"?U=-Ft.highest.height/2-Q*O+O:U=-Ft.highest.height+O/2:g==="near"||D!==0?U=O/2:g==="center"?U=Ft.highest.height/2-Q*O:U=Ft.highest.height-V*O,v&&(U*=-1),D!==0&&!bt.showLabelBackdrop&&(Z+=O/2*Math.sin(D))):(ot=C,U=(1-V)*O/2);let st;if(bt.showLabelBackdrop){const ut=Wn(bt.backdropPadding),at=Ft.heights[j],gt=Ft.widths[j];let xt=U-ut.top,_t=0-ut.left;switch(k){case"middle":xt-=at/2;break;case"bottom":xt-=at;break}switch(N){case"center":_t-=gt/2;break;case"right":_t-=gt;break;case"inner":j===W-1?_t-=gt:j>0&&(_t-=gt/2);break}st={left:_t,top:xt,width:gt+ut.width,height:at+ut.height,color:bt.backdropColor}}M.push({label:rt,font:I,textOffset:U,options:{rotation:D,color:lt,strokeColor:mt,strokeWidth:Nt,textAlign:L,textBaseline:k,translation:[Z,ot],backdrop:st}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ta(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,f=c.widest.width;let g,y;return e==="left"?r?(y=this.right+o,i==="near"?g="left":i==="center"?(g="center",y+=f/2):(g="right",y+=f)):(y=this.right-h,i==="near"?g="right":i==="center"?(g="center",y-=f/2):(g="left",y=this.left)):e==="right"?r?(y=this.left+o,i==="near"?g="right":i==="center"?(g="center",y-=f/2):(g="left",y-=f)):(y=this.left+h,i==="near"?g="left":i==="center"?(g="center",y+=f/2):(g="right",y=this.right)):g="right",{textAlign:g,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(f,g,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const f=r[o];e.drawOnChartArea&&h({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&h({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,y,v,b;this.isHorizontal()?(g=pa(t,this.left,c)-c/2,y=pa(t,this.right,h)+h/2,v=b=f):(v=pa(t,this.top,c)-c/2,b=pa(t,this.bottom,h)+h/2,g=y=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(g,v),e.lineTo(y,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Hy(i,r);const o=this.getLabelItems(t);for(const c of o){const h=c.options,f=c.font,g=c.label,y=c.textOffset;au(i,g,0,y,f,h)}r&&qy(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=on(i.font),c=Wn(i.padding),h=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Gt(e)?(f+=c.bottom,Fe(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=c.top;const{titleX:g,titleY:y,maxWidth:v,rotation:b}=DV(this,f,e,h);au(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:b,textAlign:IV(h,e,r),textBaseline:"middle",translation:[g,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Bt(t.grid&&t.grid.z,-1),r=Bt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==cl.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&r.push(h)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return on(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class cf{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;NV(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,MV(t,c,i),this.override&&be.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in be[r]&&(delete be[r][i],this.override&&delete ka[i])}}function MV(n,t,e){const i=iu(Object.create(null),[e?be.get(e):{},be.get(t),n.defaults]);be.set(t,i),n.defaultRoutes&&OV(t,n.defaultRoutes),n.descriptors&&be.describe(t,n.descriptors)}function OV(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),f=c.join(".");be.route(o,r,f,h)})}function NV(n){return"id"in n&&"defaults"in n}class kV{constructor(){this.controllers=new cf(hw,"datasets",!0),this.elements=new cf(Ua,"elements"),this.plugins=new cf(Object,"plugins"),this.scales=new cf(cl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):Wt(r,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const r=jy(t);oe(i["before"+r],[],i),e[t](i),oe(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var xi=new kV;class PV{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,h=c[i],f=[e,r,o.options];if(oe(h,f,c)===!1&&r.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Bt(i.options&&i.options.plugins,{}),o=VV(i);return r===!1&&!e?[]:UV(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(h=>!c.some(f=>h.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function VV(n){const t={},e=[],i=Object.keys(xi.plugins.items);for(let o=0;o<i.length;o++)e.push(xi.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function LV(n,t){return!t&&n===!1?null:n===!0?{}:n}function UV(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const h of t){const f=h.id,g=LV(i[f],r);g!==null&&o.push({plugin:h,options:jV(n.config,{plugin:h,local:e[f]},g,c)})}return o}function jV(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lp(n,t){const e=be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function zV(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function BV(n,t){return n===t?"_index_":"_value_"}function LT(n){if(n==="x"||n==="y"||n==="r")return n}function FV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Up(n,...t){if(LT(n))return n;for(const e of t){const i=e.axis||FV(e.position)||n.length>1&&LT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function UT(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function HV(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return UT(n,"x",e[0])||UT(n,"y",e[0])}return{}}function qV(n,t){const e=ka[n.type]||{scales:{}},i=t.scales||{},r=Lp(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!Gt(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=Up(c,h,HV(c,n),be.scales[h.type]),g=BV(f,r),y=e.scales||{};o[c]=Bc(Object.create(null),[{axis:f},h,y[f],y[g]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,f=c.indexAxis||Lp(h,t),y=(ka[h]||{}).scales||{};Object.keys(y).forEach(v=>{const b=zV(v,f),S=c[b+"AxisID"]||b;o[S]=o[S]||Object.create(null),Bc(o[S],[{axis:b},i[S],y[v]])})}),Object.keys(o).forEach(c=>{const h=o[c];Bc(h,[be.scales[h.type],be.scale])}),o}function yw(n){const t=n.options||(n.options={});t.plugins=Bt(t.plugins,{}),t.scales=qV(n,t)}function _w(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function GV(n){return n=n||{},n.data=_w(n.data),yw(n),n}const jT=new Map,vw=new Set;function uf(n,t){let e=jT.get(n);return e||(e=t(),jT.set(n,e),vw.add(e)),e}const wc=(n,t,e)=>{const i=Xf(t,e);i!==void 0&&n.add(i)};class YV{constructor(t){this._config=GV(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_w(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),yw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return uf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return uf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return uf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return uf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const f=new Set;e.forEach(y=>{t&&(f.add(t),y.forEach(v=>wc(f,t,v))),y.forEach(v=>wc(f,r,v)),y.forEach(v=>wc(f,ka[o]||{},v)),y.forEach(v=>wc(f,be,v)),y.forEach(v=>wc(f,kp,v))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),vw.has(e)&&c.set(e,g),g}chartOptionScopes(){const{options:t,type:e}=this;return[t,ka[e]||{},be.datasets[e]||{},{type:e},be,kp]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=zT(this._resolverCache,t,r);let f=c;if(QV(c,e)){o.$shared=!1,i=xr(i)?i():i;const g=this.createResolver(t,i,h);f=Jo(c,i,g)}for(const g of e)o[g]=f[g];return o}createResolver(t,e,i=[""],r){const{resolver:o}=zT(this._resolverCache,t,i);return Gt(e)?Jo(o,e,void 0,r):o}}function zT(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:Gy(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(r,o)),o}const KV=n=>Gt(n)&&Object.getOwnPropertyNames(n).some(t=>xr(n[t]));function QV(n,t){const{isScriptable:e,isIndexable:i}=ew(n);for(const r of t){const o=e(r),c=i(r),h=(c||o)&&n[r];if(o&&(xr(h)||KV(h))||c&&Fe(h))return!0}return!1}var $V="4.5.0";const XV=["top","bottom","left","right","chartArea"];function BT(n,t){return n==="top"||n==="bottom"||XV.indexOf(n)===-1&&t==="x"}function FT(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function HT(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),oe(e&&e.onComplete,[n],t)}function WV(n){const t=n.chart,e=t.options.animation;oe(e&&e.onProgress,[n],t)}function bw(n){return Qy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const wf={},qT=n=>{const t=bw(n);return Object.values(wf).filter(e=>e.canvas===t).pop()};function ZV(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function JV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let bu=class{static defaults=be;static instances=wf;static overrides=ka;static registry=xi;static version=$V;static getChart=qT;static register(...t){xi.add(...t),GT()}static unregister(...t){xi.remove(...t),GT()}constructor(t,e){const i=this.config=new YV(e),r=bw(t),o=qT(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||yV(r)),this.platform.updateConfig(i);const h=this.platform.acquireContext(r,c.aspectRatio),f=h&&h.canvas,g=f&&f.height,y=f&&f.width;if(this.id=ek(),this.ctx=h,this.canvas=f,this.width=y,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Tk(v=>this.update(v),c.resizeDelay||0),this._dataChanges=[],wf[this.id]=this,!h||!f){console.error("Failed to create chart: can't acquire context from the given item");return}fs.listen(this,"complete",HT),fs.listen(this,"progress",WV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return ae(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return dT(this.canvas,this.ctx),this}stop(){return fs.stop(this),this}resize(t,e){fs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,pT(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),oe(i.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Wt(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],f=Up(c,h),g=f==="r",y=f==="x";return{options:h,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),Wt(o,c=>{const h=c.options,f=h.id,g=Up(f,h),y=Bt(h.type,c.dtype);(h.position===void 0||BT(h.position,g)!==BT(c.dposition))&&(h.position=c.dposition),r[f]=!0;let v=null;if(f in i&&i[f].type===y)v=i[f];else{const b=xi.getScale(y);v=new b({id:f,type:y,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),Wt(r,(c,h)=>{c||delete i[h]}),Wt(i,c=>{$n.configure(this,c,c.options),$n.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(FT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||Lp(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const f=xi.getController(h),{datasetElementType:g,dataElementType:y}=be.datasets[h];Object.assign(f,{dataElementType:xi.getElement(y),datasetElementType:g&&xi.getElement(g)}),c.controller=new f(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Wt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:v}=this.getDatasetMeta(g),b=!r&&o.indexOf(v)===-1;v.buildOrUpdateElements(b),c=Math.max(+v.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||Wt(o,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(FT("z","_idx"));const{_active:h,_lastEvent:f}=this;f?this._eventHandler(f,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Wt(this.scales,t=>{$n.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!iT(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;ZV(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!iT(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$n.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Wt(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,xr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fs.has(this)?this.attached&&!fs.running(this)&&fs.start(this):(this.draw(),HT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=IP(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Hy(e,r),t.controller.draw(),r&&qy(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ru(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=XP.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=La(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);Wf(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),dT(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete wf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};Wt(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,g)=>{e.addEventListener(this,f,g),t[f]=g},r=(f,g)=>{t[f]&&(e.removeEventListener(this,f,g),delete t[f])},o=(f,g)=>{this.canvas&&this.resize(f,g)};let c;const h=()=>{r("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){Wt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Wt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,h,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),h=0,f=t.length;h<f;++h){c=t[h];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!Qf(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,g)=>f.filter(y=>!g.some(v=>y.datasetIndex===v.datasetIndex&&y.index===v.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),h.length&&r.mode&&this.updateHoverStyle(h,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,h=this._getActiveElements(t,r,i,c),f=ok(t),g=JV(t,this._lastEvent,i,f);i&&(this._lastEvent=null,oe(o.onHover,[t,h,this],this),f&&oe(o.onClick,[t,h,this],this));const y=!Qf(h,r);return(y||e)&&(this._active=h,this._updateHoverStyles(h,r,e)),this._lastEvent=g,y}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}};function GT(){return Wt(bu.instances,n=>n._plugins.invalidate())}function Ew(n,t,e=t){n.lineCap=Bt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Bt(e.borderDash,t.borderDash)),n.lineDashOffset=Bt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Bt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Bt(e.borderWidth,t.borderWidth),n.strokeStyle=Bt(e.borderColor,t.borderColor)}function tL(n,t,e){n.lineTo(e.x,e.y)}function eL(n){return n.stepped?Vk:n.tension||n.cubicInterpolationMode==="monotone"?Lk:tL}function Tw(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:c,end:h}=t,f=Math.max(r,c),g=Math.min(o,h),y=r<c&&o<c||r>h&&o>h;return{count:i,start:f,loop:t.loop,ilen:g<f&&!y?i+g-f:g-f}}function nL(n,t,e,i){const{points:r,options:o}=t,{count:c,start:h,loop:f,ilen:g}=Tw(r,e,i),y=eL(o);let{move:v=!0,reverse:b}=i||{},S,x,D;for(S=0;S<=g;++S)x=r[(h+(b?g-S:S))%c],!x.skip&&(v?(n.moveTo(x.x,x.y),v=!1):y(n,D,x,b,o.stepped),D=x);return f&&(x=r[(h+(b?g:0))%c],y(n,D,x,b,o.stepped)),!!f}function iL(n,t,e,i){const r=t.points,{count:o,start:c,ilen:h}=Tw(r,e,i),{move:f=!0,reverse:g}=i||{};let y=0,v=0,b,S,x,D,M,j;const W=rt=>(c+(g?h-rt:rt))%o,$=()=>{D!==M&&(n.lineTo(y,M),n.lineTo(y,D),n.lineTo(y,j))};for(f&&(S=r[W(0)],n.moveTo(S.x,S.y)),b=0;b<=h;++b){if(S=r[W(b)],S.skip)continue;const rt=S.x,Z=S.y,ot=rt|0;ot===x?(Z<D?D=Z:Z>M&&(M=Z),y=(v*y+rt)/++v):($(),n.lineTo(rt,Z),x=ot,v=0,D=M=Z),j=Z}$()}function jp(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?iL:nL}function sL(n){return n.stepped?pP:n.tension||n.cubicInterpolationMode==="monotone"?yP:ba}function rL(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),Ew(n,t.options),n.stroke(r)}function aL(n,t,e,i){const{segments:r,options:o}=t,c=jp(t);for(const h of r)Ew(n,o,h.style),n.beginPath(),c(n,t,h,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const oL=typeof Path2D=="function";function lL(n,t,e,i){oL&&!t.options.segment?rL(n,t,e,i):aL(n,t,e,i)}class Sw extends Ua{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;lP(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wP(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,c=TP(this,{property:e,start:r,end:r});if(!c.length)return;const h=[],f=sL(i);let g,y;for(g=0,y=c.length;g<y;++g){const{start:v,end:b}=c[g],S=o[v],x=o[b];if(S===x){h.push(S);continue}const D=Math.abs((r-S[e])/(x[e]-S[e])),M=f(S,x,D,i.stepped);M[e]=t[e],h.push(M)}return h.length===1?h[0]:h}pathSegment(t,e,i){return jp(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=jp(this);let c=this._loop;e=e||0,i=i||this.points.length-e;for(const h of r)c&=o(t,this,h,{start:e,end:e+i-1});return!!c}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),lL(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function YT(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class Aw extends Ua{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return YT(this,t,"x",e)}inYRange(t,e){return YT(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ru(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Pp(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const KT=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},cL=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class QT extends Ua{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=oe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=on(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:f}=KT(i,o);let g,y;e.font=r.string,this.isHorizontal()?(g=this.maxWidth,y=this._fitRows(c,o,h,f)+10):(y=this.maxHeight,g=this._fitCols(c,r,h,f)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],y=r+h;let v=t;o.textAlign="left",o.textBaseline="middle";let b=-1,S=-y;return this.legendItems.forEach((x,D)=>{const M=i+e/2+o.measureText(x.text).width;(D===0||g[g.length-1]+M+2*h>c)&&(v+=y,g[g.length-(D>0?0:1)]=0,S+=y,b++),f[D]={left:0,top:S,row:b,width:M,height:r},g[g.length-1]+=M+h}),v}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],y=c-t;let v=h,b=0,S=0,x=0,D=0;return this.legendItems.forEach((M,j)=>{const{itemWidth:W,itemHeight:$}=uL(i,e,o,M,r);j>0&&S+$+2*h>y&&(v+=b+h,g.push({width:b,height:S}),x+=b+h,D++,b=S=0),f[j]={left:x,top:S,col:D,width:W,height:$},b=Math.max(b,W),S+=$+h}),v+=b,g.push({width:b,height:S}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=Fo(o,this.left,this.width);if(this.isHorizontal()){let h=0,f=sn(i,this.left+r,this.right-this.lineWidths[h]);for(const g of e)h!==g.row&&(h=g.row,f=sn(i,this.left+r,this.right-this.lineWidths[h])),g.top+=this.top+t+r,g.left=c.leftForLtr(c.x(f),g.width),f+=g.width+r}else{let h=0,f=sn(i,this.top+t+r,this.bottom-this.columnSizes[h].height);for(const g of e)g.col!==h&&(h=g.col,f=sn(i,this.top+t+r,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+r,g.left=c.leftForLtr(c.x(g.left),g.width),f+=g.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Hy(t,this),this._draw(),qy(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,h=be.color,f=Fo(t.rtl,this.left,this.width),g=on(c.font),{padding:y}=c,v=g.size,b=v/2;let S;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=g.string;const{boxWidth:x,boxHeight:D,itemHeight:M}=KT(c,v),j=function(ot,N,C){if(isNaN(x)||x<=0||isNaN(D)||D<0)return;r.save();const I=Bt(C.lineWidth,1);if(r.fillStyle=Bt(C.fillStyle,h),r.lineCap=Bt(C.lineCap,"butt"),r.lineDashOffset=Bt(C.lineDashOffset,0),r.lineJoin=Bt(C.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=Bt(C.strokeStyle,h),r.setLineDash(Bt(C.lineDash,[])),c.usePointStyle){const O={radius:D*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:I},V=f.xPlus(ot,x/2),U=N+b;J1(r,O,V,U,c.pointStyleWidth&&x)}else{const O=N+Math.max((v-D)/2,0),V=f.leftForLtr(ot,x),U=Gc(C.borderRadius);r.beginPath(),Object.values(U).some(k=>k!==0)?Vp(r,{x:V,y:O,w:x,h:D,radius:U}):r.rect(V,O,x,D),r.fill(),I!==0&&r.stroke()}r.restore()},W=function(ot,N,C){au(r,C.text,ot,N+M/2,g,{strikethrough:C.hidden,textAlign:f.textAlign(C.textAlign)})},$=this.isHorizontal(),rt=this._computeTitleHeight();$?S={x:sn(o,this.left+y,this.right-i[0]),y:this.top+y+rt,line:0}:S={x:this.left+y,y:sn(o,this.top+rt+y,this.bottom-e[0].height),line:0},aw(this.ctx,t.textDirection);const Z=M+y;this.legendItems.forEach((ot,N)=>{r.strokeStyle=ot.fontColor,r.fillStyle=ot.fontColor;const C=r.measureText(ot.text).width,I=f.textAlign(ot.textAlign||(ot.textAlign=c.textAlign)),O=x+b+C;let V=S.x,U=S.y;f.setWidth(this.width),$?N>0&&V+O+y>this.right&&(U=S.y+=Z,S.line++,V=S.x=sn(o,this.left+y,this.right-i[S.line])):N>0&&U+Z>this.bottom&&(V=S.x=V+e[S.line].width+y,S.line++,U=S.y=sn(o,this.top+rt+y,this.bottom-e[S.line].height));const k=f.x(V);if(j(k,U,ot),V=Sk(I,V+x+b,$?V+O:this.right,t.rtl),W(f.x(V),U,ot),$)S.x+=O+y;else if(typeof ot.text!="string"){const Ft=g.lineHeight;S.y+=ww(ot,Ft)+y}else S.y+=Z}),ow(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=on(e.font),r=Wn(e.padding);if(!e.display)return;const o=Fo(t.rtl,this.left,this.width),c=this.ctx,h=e.position,f=i.size/2,g=r.top+f;let y,v=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),y=this.top+g,v=sn(t.align,v,this.right-b);else{const x=this.columnSizes.reduce((D,M)=>Math.max(D,M.height),0);y=g+sn(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const S=sn(h,v,v+b);c.textAlign=o.textAlign(By(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,au(c,e.text,S,y,i)}_computeTitleHeight(){const t=this.options.title,e=on(t.font),i=Wn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Oc(t,this.left,this.right)&&Oc(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Oc(t,r.left,r.left+r.width)&&Oc(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!dL(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=cL(r,i);r&&!o&&oe(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&oe(e.onHover,[t,i,this],this)}else i&&oe(e.onClick,[t,i,this],this)}}function uL(n,t,e,i,r){const o=hL(i,n,t,e),c=fL(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function hL(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function fL(n,t,e){let i=n;return typeof t.text!="string"&&(i=ww(t,e)),i}function ww(n,t){const e=n.text?n.text.length:0;return t*e}function dL(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var xw={id:"legend",_element:QT,start(n,t,e){const i=n.legend=new QT({ctx:n.ctx,options:e,chart:n});$n.configure(n,i,e),$n.addBox(n,i)},stop(n){$n.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;$n.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(e?0:void 0),y=Wn(g.borderWidth);return{text:t[f.index].label,fillStyle:g.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:r||g.textAlign,borderRadius:c&&(h||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Rw extends Ua{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=Fe(i.text)?i.text.length:1;this._padding=Wn(i.padding);const o=r*on(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:c}=this,h=c.align;let f=0,g,y,v;return this.isHorizontal()?(y=sn(h,i,o),v=e+t,g=o-i):(c.position==="left"?(y=i+t,v=sn(h,r,e),f=He*-.5):(y=o-t,v=sn(h,e,r),f=He*.5),g=r-e),{titleX:y,titleY:v,maxWidth:g,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=on(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:f,rotation:g}=this._drawArgs(o);au(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:g,textAlign:By(e.align),textBaseline:"middle",translation:[c,h]})}}function gL(n,t){const e=new Rw({ctx:n.ctx,options:t,chart:n});$n.configure(n,e,t),$n.addBox(n,e),n.titleBlock=e}var Cw={id:"title",_element:Rw,start(n,t,e){gL(n,e)},stop(n){const t=n.titleBlock;$n.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;$n.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const f=h.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,f)=>h+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const f=n[o].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),y=Np(t,g);y<r&&(r=y,h=f)}}if(h){const f=h.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function wi(n,t){return t&&(Fe(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ds(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function mL(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:h,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function $T(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:h}=t,f=on(t.bodyFont),g=on(t.titleFont),y=on(t.footerFont),v=o.length,b=r.length,S=i.length,x=Wn(t.padding);let D=x.height,M=0,j=i.reduce((rt,Z)=>rt+Z.before.length+Z.lines.length+Z.after.length,0);if(j+=n.beforeBody.length+n.afterBody.length,v&&(D+=v*g.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),j){const rt=t.displayColors?Math.max(h,f.lineHeight):f.lineHeight;D+=S*rt+(j-S)*f.lineHeight+(j-1)*t.bodySpacing}b&&(D+=t.footerMarginTop+b*y.lineHeight+(b-1)*t.footerSpacing);let W=0;const $=function(rt){M=Math.max(M,e.measureText(rt).width+W)};return e.save(),e.font=g.string,Wt(n.title,$),e.font=f.string,Wt(n.beforeBody.concat(n.afterBody),$),W=t.displayColors?c+2+t.boxPadding:0,Wt(i,rt=>{Wt(rt.before,$),Wt(rt.lines,$),Wt(rt.after,$)}),W=0,e.font=y.string,Wt(n.footer,$),e.restore(),M+=x.width,{width:M,height:D}}function pL(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function yL(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function _L(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:h,right:f}}=n;let g="center";return i==="center"?g=r<=(h+f)/2?"left":"right":r<=o/2?g="left":r>=c-o/2&&(g="right"),yL(g,n,t,e)&&(g="center"),g}function XT(n,t,e){const i=e.yAlign||t.yAlign||pL(n,e);return{xAlign:e.xAlign||t.xAlign||_L(n,t,e,i),yAlign:i}}function vL(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function bL(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function WT(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:f}=e,g=r+o,{topLeft:y,topRight:v,bottomLeft:b,bottomRight:S}=Gc(c);let x=vL(t,h);const D=bL(t,f,g);return f==="center"?h==="left"?x+=g:h==="right"&&(x-=g):h==="left"?x-=Math.max(y,b)+r:h==="right"&&(x+=Math.max(v,S)+r),{x:Qn(x,0,i.width-t.width),y:Qn(D,0,i.height-t.height)}}function hf(n,t,e){const i=Wn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ZT(n){return wi([],ds(n))}function EL(n,t,e){return La(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function JT(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Iw={beforeTitle:hs,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:hs,beforeBody:hs,beforeLabel:hs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ae(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:hs,afterBody:hs,beforeFooter:hs,footer:hs,afterFooter:hs};function _n(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?Iw[t].call(e,i):r}class tS extends Ua{static positioners=kc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new cw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=EL(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=_n(i,"beforeTitle",this,t),o=_n(i,"title",this,t),c=_n(i,"afterTitle",this,t);let h=[];return h=wi(h,ds(r)),h=wi(h,ds(o)),h=wi(h,ds(c)),h}getBeforeBody(t,e){return ZT(_n(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return Wt(t,o=>{const c={before:[],lines:[],after:[]},h=JT(i,o);wi(c.before,ds(_n(h,"beforeLabel",this,o))),wi(c.lines,_n(h,"label",this,o)),wi(c.after,ds(_n(h,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return ZT(_n(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=_n(i,"beforeFooter",this,t),o=_n(i,"footer",this,t),c=_n(i,"afterFooter",this,t);let h=[];return h=wi(h,ds(r)),h=wi(h,ds(o)),h=wi(h,ds(c)),h}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let h=[],f,g;for(f=0,g=e.length;f<g;++f)h.push(mL(this.chart,e[f]));return t.filter&&(h=h.filter((y,v,b)=>t.filter(y,v,b,i))),t.itemSort&&(h=h.sort((y,v)=>t.itemSort(y,v,i))),Wt(h,y=>{const v=JT(t.callbacks,y);r.push(_n(v,"labelColor",this,y)),o.push(_n(v,"labelPointStyle",this,y)),c.push(_n(v,"labelTextColor",this,y))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const h=kc[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const f=this._size=$T(this,i),g=Object.assign({},h,f),y=XT(this.chart,i,g),v=WT(i,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:v.x,y:v.y,width:f.width,height:f.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:f,topRight:g,bottomLeft:y,bottomRight:v}=Gc(h),{x:b,y:S}=t,{width:x,height:D}=e;let M,j,W,$,rt,Z;return o==="center"?(rt=S+D/2,r==="left"?(M=b,j=M-c,$=rt+c,Z=rt-c):(M=b+x,j=M+c,$=rt-c,Z=rt+c),W=M):(r==="left"?j=b+Math.max(f,y)+c:r==="right"?j=b+x-Math.max(g,v)-c:j=this.caretX,o==="top"?($=S,rt=$-c,M=j-c,W=j+c):($=S+D,rt=$+c,M=j+c,W=j-c),Z=$),{x1:M,x2:j,x3:W,y1:$,y2:rt,y3:Z}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,h,f;if(o){const g=Fo(i.rtl,this.x,this.width);for(t.x=hf(this,i.titleAlign,i),e.textAlign=g.textAlign(i.titleAlign),e.textBaseline="middle",c=on(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,f=0;f<o;++f)e.fillText(r[f],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,f+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:f,boxWidth:g}=o,y=on(o.bodyFont),v=hf(this,"left",o),b=r.x(v),S=f<y.lineHeight?(y.lineHeight-f)/2:0,x=e.y+S;if(o.usePointStyle){const D={radius:Math.min(g,f)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=r.leftForLtr(b,g)+g/2,j=x+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Pp(t,D,M,j),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,Pp(t,D,M,j)}else{t.lineWidth=Gt(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const D=r.leftForLtr(b,g),M=r.leftForLtr(r.xPlus(b,1),g-2),j=Gc(c.borderRadius);Object.values(j).some(W=>W!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Vp(t,{x:D,y:x,w:g,h:f,radius:j}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),Vp(t,{x:M,y:x+1,w:g-2,h:f-2,radius:j}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(D,x,g,f),t.strokeRect(D,x,g,f),t.fillStyle=c.backgroundColor,t.fillRect(M,x+1,g-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:f,boxWidth:g,boxPadding:y}=i,v=on(i.bodyFont);let b=v.lineHeight,S=0;const x=Fo(i.rtl,this.x,this.width),D=function(C){e.fillText(C,x.x(t.x+S),t.y+b/2),t.y+=b+o},M=x.textAlign(c);let j,W,$,rt,Z,ot,N;for(e.textAlign=c,e.textBaseline="middle",e.font=v.string,t.x=hf(this,M,i),e.fillStyle=i.bodyColor,Wt(this.beforeBody,D),S=h&&M!=="right"?c==="center"?g/2+y:g+2+y:0,rt=0,ot=r.length;rt<ot;++rt){for(j=r[rt],W=this.labelTextColors[rt],e.fillStyle=W,Wt(j.before,D),$=j.lines,h&&$.length&&(this._drawColorBox(e,t,rt,x,i),b=Math.max(v.lineHeight,f)),Z=0,N=$.length;Z<N;++Z)D($[Z]),b=v.lineHeight;Wt(j.after,D)}S=0,b=v.lineHeight,Wt(this.afterBody,D),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,h;if(o){const f=Fo(i.rtl,this.x,this.width);for(t.x=hf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",c=on(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(r[h],f.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:h,y:f}=t,{width:g,height:y}=i,{topLeft:v,topRight:b,bottomLeft:S,bottomRight:x}=Gc(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(h+v,f),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(h+g-b,f),e.quadraticCurveTo(h+g,f,h+g,f+b),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(h+g,f+y-x),e.quadraticCurveTo(h+g,f+y,h+g-x,f+y),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(h+S,f+y),e.quadraticCurveTo(h,f+y,h,f+y-S),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(h,f+v),e.quadraticCurveTo(h,f,h+v,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=kc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=$T(this,t),f=Object.assign({},c,this._size),g=XT(e,t,f),y=WT(t,f,g,e);(r._to!==y.x||o._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Wn(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),aw(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),ow(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:h,index:f})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[f],index:f}}),o=!Qf(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),f=e||!Qf(c,o)||h;return f&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=kc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}var Dw={id:"tooltip",_element:tS,positioners:kc,afterInit(n,t,e){e&&(n.tooltip=new tS({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Iw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const TL=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function SL(n,t,e,i){const r=n.indexOf(t);if(r===-1)return TL(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const AL=(n,t)=>n===null?null:Qn(Math.round(n),0,t);function eS(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class Mw extends cl{static id="category";static defaults={ticks:{callback:eS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ae(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:SL(i,t,Bt(e,t),this._addedLabels),AL(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return eS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function wL(n,t){const e=[],{bounds:r,step:o,min:c,max:h,precision:f,count:g,maxTicks:y,maxDigits:v,includeBounds:b}=n,S=o||1,x=y-1,{min:D,max:M}=t,j=!ae(c),W=!ae(h),$=!ae(g),rt=(M-D)/(v+1);let Z=rT((M-D)/x/S)*S,ot,N,C,I;if(Z<1e-14&&!j&&!W)return[{value:D},{value:M}];I=Math.ceil(M/Z)-Math.floor(D/Z),I>x&&(Z=rT(I*Z/x/S)*S),ae(f)||(ot=Math.pow(10,f),Z=Math.ceil(Z*ot)/ot),r==="ticks"?(N=Math.floor(D/Z)*Z,C=Math.ceil(M/Z)*Z):(N=D,C=M),j&&W&&o&&fk((h-c)/o,Z/1e3)?(I=Math.round(Math.min((h-c)/Z,y)),Z=(h-c)/I,N=c,C=h):$?(N=j?c:N,C=W?h:C,I=g-1,Z=(C-N)/I):(I=(C-N)/Z,Fc(I,Math.round(I),Z/1e3)?I=Math.round(I):I=Math.ceil(I));const O=Math.max(aT(Z),aT(N));ot=Math.pow(10,ae(f)?O:f),N=Math.round(N*ot)/ot,C=Math.round(C*ot)/ot;let V=0;for(j&&(b&&N!==c?(e.push({value:c}),N<c&&V++,Fc(Math.round((N+V*Z)*ot)/ot,c,nS(c,rt,n))&&V++):N<c&&V++);V<I;++V){const U=Math.round((N+V*Z)*ot)/ot;if(W&&U>h)break;e.push({value:U})}return W&&b&&C!==h?e.length&&Fc(e[e.length-1].value,h,nS(h,rt,n))?e[e.length-1].value=h:e.push({value:h}):(!W||C===h)&&e.push({value:C}),e}function nS(n,t,{horizontal:e,minRotation:i}){const r=Ta(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class xL extends cl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=f=>r=e?r:f,h=f=>o=i?o:f;if(t){const f=Zo(r),g=Zo(o);f<0&&g<0?h(0):f>0&&g>0&&c(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);h(o+f),t||c(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=wL(r,o);return t.bounds==="ticks"&&dk(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return W1(t,this.chart.options.locale,this.options.ticks.format)}}class Ow extends xL{static id="linear";static defaults={ticks:{callback:Z1.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xn(t)?t:0,this.max=Xn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ta(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const xd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},En=Object.keys(xd);function iS(n,t){return n-t}function sS(n,t){if(ae(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Xn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(su(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function rS(n,t,e,i){const r=En.length;for(let o=En.indexOf(n);o<r-1;++o){const c=xd[En[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return En[o]}return En[r-1]}function RL(n,t,e,i,r){for(let o=En.length-1;o>=En.indexOf(e);o--){const c=En[o];if(xd[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return En[e?En.indexOf(e):0]}function CL(n){for(let t=En.indexOf(n)+1,e=En.length;t<e;++t)if(xd[En[t]].common)return En[t]}function aS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=zy(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function IL(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let h,f;for(h=o;h<=c;h=+r.add(h,1,i))f=e[h],f>=0&&(t[f].major=!0);return t}function oS(n,t,e){const i=[],r={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],r[h]=c,i.push({value:h,major:!1});return o===0||!e?i:IL(n,i,r,e)}class lS extends cl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new GP._date(t.adapters.date);r.init(e),Bc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:sS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function f(g){!c&&!isNaN(g.min)&&(r=Math.min(r,g.min)),!h&&!isNaN(g.max)&&(o=Math.max(o,g.max))}(!c||!h)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=Xn(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Xn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,h=vk(r,o,c);return this._unit=e.unit||(i.autoSkip?rS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):RL(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:CL(this._unit),this.initOffsets(r),t.reverse&&h.reverse(),oS(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=Qn(e,0,c),i=Qn(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||rS(o.minUnit,e,i,this._getLabelCapacity(e)),h=Bt(r.ticks.stepSize,1),f=c==="week"?o.isoWeekday:!1,g=su(f)||f===!0,y={};let v=e,b,S;if(g&&(v=+t.startOf(v,"isoWeek",f)),v=+t.startOf(v,g?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const x=r.ticks.source==="data"&&this.getDataTimestamps();for(b=v,S=0;b<i;b=+t.add(b,h,c),S++)aS(y,b,x);return(b===i||r.bounds==="ticks"||S===1)&&aS(y,b,x),Object.keys(y).sort(iS).map(D=>+D)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return oe(c,[t,e,i],this);const h=o.time.displayFormats,f=this._unit,g=this._majorUnit,y=f&&h[f],v=g&&h[g],b=i[e],S=g&&v&&b&&b.major;return this._adapter.format(t,r||(S?v:y))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Ta(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,oS(this,[t],this._majorUnit),r),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(sS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ek(t.sort(iS))}}function ff(n,t,e){let i=0,r=n.length-1,o,c,h,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Sa(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Sa(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:f}=n[r]);const g=c-o;return g?h+(f-h)*(t-o)/g:h}class r6 extends lS{static id="timeseries";static defaults=lS.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ff(e,this.min),this._tableRange=ff(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,h,f,g,y;for(c=0,h=t.length;c<h;++c)g=t[c],g>=e&&g<=i&&r.push(g);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=r.length;c<h;++c)y=r[c+1],f=r[c-1],g=r[c],Math.round((y+f)/2)!==g&&o.push({time:g,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ff(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ff(this._table,i*this._tableRange+this._minPos,!0)}}const Nw="label";function cS(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function DL(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function kw(n,t){n.labels=t}function Pw(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nw;const i=[];n.datasets=t.map(r=>{const o=n.datasets.find(c=>c[e]===r[e]);return!o||!r.data||i.includes(o)?{...r}:(i.push(o),Object.assign(o,r),o)})}function ML(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nw;const e={labels:[],datasets:[]};return kw(e,n.labels),Pw(e,n.datasets,t),e}function OL(n,t){const{height:e=150,width:i=300,redraw:r=!1,datasetIdKey:o,type:c,data:h,options:f,plugins:g=[],fallbackContent:y,updateMode:v,...b}=n,S=Y.useRef(null),x=Y.useRef(null),D=()=>{S.current&&(x.current=new bu(S.current,{type:c,data:ML(h,o),options:f&&{...f},plugins:g}),cS(t,x.current))},M=()=>{cS(t,null),x.current&&(x.current.destroy(),x.current=null)};return Y.useEffect(()=>{!r&&x.current&&f&&DL(x.current,f)},[r,f]),Y.useEffect(()=>{!r&&x.current&&kw(x.current.config.data,h.labels)},[r,h.labels]),Y.useEffect(()=>{!r&&x.current&&h.datasets&&Pw(x.current.config.data,h.datasets,o)},[r,h.datasets]),Y.useEffect(()=>{x.current&&(r?(M(),setTimeout(D)):x.current.update(v))},[r,f,h.labels,h.datasets,v]),Y.useEffect(()=>{x.current&&(M(),setTimeout(D))},[c]),Y.useEffect(()=>(D(),()=>M()),[]),dS.createElement("canvas",{ref:S,role:"img",height:e,width:i,...b},y)}const NL=Y.forwardRef(OL);function kL(n,t){return bu.register(t),Y.forwardRef((e,i)=>dS.createElement(NL,{...e,ref:i,type:n}))}const Ii=kL("line",qP);bu.register(Mw,Ow,Aw,Sw,Cw,Dw,xw);const Vw=({patient:n,onBack:t})=>{const[e,i]=Y.useState([]),r=async()=>{await xy(pd(ln,"patients",n.docId),{status:"Finalizado"}),t()};Y.useEffect(()=>{const b=On(ln,"patients",n.docId,"vitals"),S=Ts(b,_r("timestamp","asc")),x=Oa(S,D=>{const M=D.docs.map(j=>({id:j.id,...j.data()}));i(M)});return()=>x()},[n.docId]);const o=e.map(b=>new Date(b.timestamp.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),c=b=>({responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:b}}}),h={labels:o,datasets:[{label:"Temperatura (C)",data:e.map(b=>b.temperature),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},f={labels:o,datasets:[{label:"Frecuencia Cardaca (lpm)",data:e.map(b=>b.heartRate),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]},g={labels:o,datasets:[{label:"Sistlica",data:e.map(b=>b.bloodPressure.split("/")[0]),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Diastlica",data:e.map(b=>b.bloodPressure.split("/")[1]),borderColor:"rgb(153, 102, 255)",backgroundColor:"rgba(153, 102, 255, 0.5)"}]},y={labels:o,datasets:[{label:"Frecuencia Respiratoria (rpm)",data:e.map(b=>b.respiratoryRate),borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)"}]},v={labels:o,datasets:[{label:"Saturacin (%)",data:e.map(b=>b.saturation),borderColor:"rgb(99, 255, 132)",backgroundColor:"rgba(99, 255, 132, 0.5)"}]};return w.jsxs("main",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("button",{className:"secondary outline",onClick:t,children:" Volver a la lista"})})}),w.jsxs("ul",{children:[w.jsx("li",{children:w.jsxs("h2",{children:["Historial de: ",n.name]})}),n.status!=="Finalizado"&&w.jsx("li",{children:w.jsx("button",{onClick:r,children:"Finalizar Tratamiento"})})]})]}),e.length>1&&w.jsxs("div",{className:"grid",children:[w.jsxs("article",{children:[w.jsx("h4",{children:"Temperatura"}),w.jsx(Ii,{options:c(""),data:h})]}),w.jsxs("article",{children:[w.jsx("h4",{children:"Frecuencia Cardaca"}),w.jsx(Ii,{options:c(""),data:f})]}),w.jsxs("article",{children:[w.jsx("h4",{children:"Frecuencia Respiratoria"}),w.jsx(Ii,{options:c(""),data:y})]}),w.jsxs("article",{children:[w.jsx("h4",{children:"Saturacin"}),w.jsx(Ii,{options:c(""),data:v})]})]}),e.length>1&&w.jsxs("article",{children:[w.jsx("h4",{children:"Presin Arterial"}),w.jsx(Ii,{options:c(""),data:g})]}),w.jsx("figure",{children:w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",children:"Fecha y Hora"}),w.jsx("th",{scope:"col",children:"Frec. Cardaca"}),w.jsx("th",{scope:"col",children:"Frec. Respiratoria"}),w.jsx("th",{scope:"col",children:"Presin Arterial"}),w.jsx("th",{scope:"col",children:"Saturacin"}),w.jsx("th",{scope:"col",children:"Temperatura"}),w.jsx("th",{scope:"col",children:"Nota"})]})}),w.jsx("tbody",{children:e.map(b=>w.jsxs("tr",{children:[w.jsx("td",{children:new Date(b.timestamp.seconds*1e3).toLocaleString("es-CO")}),w.jsxs("td",{children:[b.heartRate," lpm"]}),w.jsxs("td",{children:[b.respiratoryRate," rpm"]}),w.jsx("td",{children:b.bloodPressure}),w.jsxs("td",{children:[b.saturation," %"]}),w.jsxs("td",{children:[b.temperature," C"]}),w.jsx("td",{children:b.note})]},b.id)).reverse()})]})})]})},Lw=({usuario:n,handleLogout:t})=>{const[e,i]=Y.useState([]),[r,o]=Y.useState(null),c=async g=>{await xy(pd(ln,"patients",g.docId),{status:"Finalizado"})};if(Y.useEffect(()=>{const g=Ts(On(ln,"patients"),_r("status"),_r("createdAt","desc")),y=Oa(g,v=>{const b=v.docs.map(S=>({docId:S.id,...S.data()}));i(b)});return()=>y()},[]),r)return w.jsx(Vw,{patient:r,onBack:()=>o(null)});const h=e.filter(g=>g.status!=="Finalizado"),f=e.filter(g=>g.status==="Finalizado");return w.jsxs("div",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("strong",{children:"Panel de Mdico"})})}),w.jsxs("ul",{children:[w.jsx("li",{children:n.email}),w.jsx("li",{children:w.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),w.jsxs("main",{children:[w.jsxs("article",{children:[w.jsx("h4",{children:"Pacientes Activos y Pendientes"}),w.jsx("div",{style:{overflowX:"auto"},children:w.jsxs("table",{role:"grid",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",children:"Nombre"}),w.jsx("th",{scope:"col",children:"Cdula"}),w.jsx("th",{scope:"col",children:"Estado"}),w.jsx("th",{scope:"col",children:"Acciones"})]})}),w.jsx("tbody",{children:h.map(g=>w.jsxs("tr",{children:[w.jsx("td",{children:g.name}),w.jsx("td",{children:g.id}),w.jsx("td",{children:g.status}),w.jsxs("td",{children:[w.jsx("button",{onClick:()=>o(g),children:"Ver Historial"}),w.jsx("button",{className:"secondary",onClick:()=>c(g),children:"Finalizar Tratamiento"})]})]},g.docId))})]})})]}),w.jsxs("article",{children:[w.jsx("h4",{children:"Historial de Pacientes Finalizados"}),w.jsx("div",{style:{overflowX:"auto"},children:w.jsxs("table",{role:"grid",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{scope:"col",children:"Nombre"}),w.jsx("th",{scope:"col",children:"Cdula"}),w.jsx("th",{scope:"col",children:"Estado"}),w.jsx("th",{scope:"col",children:"Acciones"})]})}),w.jsx("tbody",{children:f.map(g=>w.jsxs("tr",{style:{opacity:.6},children:[w.jsx("td",{children:g.name}),w.jsx("td",{children:g.id}),w.jsx("td",{children:g.status}),w.jsx("td",{children:w.jsx("button",{className:"secondary",onClick:()=>o(g),children:"Ver Historial"})})]},g.docId))})]})})]})]})]})},PL=({patientId:n})=>{const[t,e]=Y.useState(""),[i,r]=Y.useState([]);Y.useEffect(()=>{const c=On(ln,"patients",n,"notes"),h=Ts(c,_r("timestamp","desc")),f=Oa(h,g=>{const y=g.docs.map(v=>({id:v.id,...v.data()}));r(y)});return()=>f()},[n]);const o=async c=>{if(c.preventDefault(),!!t.trim())try{await Ed(On(ln,"patients",n,"notes"),{text:t,author:Kf.currentUser.displayName||Kf.currentUser.email,timestamp:new Date}),e("")}catch(h){console.error("Error al guardar la nota: ",h)}};return w.jsxs("section",{children:[w.jsx("h4",{children:"Notas de Enfermera"}),w.jsx("article",{children:w.jsxs("form",{onSubmit:o,children:[w.jsx("textarea",{value:t,onChange:c=>e(c.target.value),placeholder:"Escribe una nueva nota general...",required:!0}),w.jsx("button",{type:"submit",children:"Aadir Nota"})]})}),i.map(c=>w.jsxs("article",{children:[w.jsx("p",{children:c.text}),w.jsx("footer",{children:w.jsxs("small",{children:["Por ",c.author," el ",new Date(c.timestamp.seconds*1e3).toLocaleString("es-CO")]})})]},c.id))]})};bu.register(Mw,Ow,Aw,Sw,Cw,Dw,xw);const Uw=({patient:n,onBack:t})=>{const[e,i]=Y.useState(""),[r,o]=Y.useState(""),[c,h]=Y.useState(""),[f,g]=Y.useState(""),[y,v]=Y.useState(""),[b,S]=Y.useState(""),[x,D]=Y.useState([]),[M,j]=Y.useState(!1);Y.useEffect(()=>{const O=On(ln,"patients",n.docId,"vitals"),V=Ts(O,_r("timestamp","asc")),U=Oa(V,k=>{const Ft=k.docs.map(bt=>({id:bt.id,...bt.data()}));D(Ft)});return()=>U()},[n.docId]);const W=async O=>{if(O.preventDefault(),!e||!r||!c||!f||!y){alert("Por favor, llena todos los campos de signos vitales.");return}const V=r.replace(/\D/g,"");let U=r;if(V.length>=3&&V.length<=6){const k=V.length>4?3:2,Ft=V.slice(0,k),bt=V.slice(k);Ft&&bt&&(U=`${Ft}/${bt}`)}else if(!r.includes("/")){alert("Por favor, ingresa la presin arterial en un formato reconocible (ej: 120/80, 12080).");return}try{await Ed(On(ln,"patients",n.docId,"vitals"),{temperature:e,bloodPressure:U,heartRate:c,respiratoryRate:f,saturation:y,note:b,author:Kf.currentUser.displayName||Kf.currentUser.email,timestamp:new Date}),alert("Signos y nota guardados con xito!"),i(""),o(""),h(""),g(""),v(""),S("")}catch(k){console.error("Error al guardar: ",k),alert("Hubo un error al guardar.")}},$=x.map(O=>new Date(O.timestamp.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),rt=O=>({responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:O}}}),Z={labels:$,datasets:[{label:"Temperatura (C)",data:x.map(O=>O.temperature),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},ot={labels:$,datasets:[{label:"Frecuencia Cardaca (lpm)",data:x.map(O=>O.heartRate),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]},N={labels:$,datasets:[{label:"Sistlica",data:x.map(O=>O.bloodPressure.split("/")[0]),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Diastlica",data:x.map(O=>O.bloodPressure.split("/")[1]),borderColor:"rgb(153, 102, 255)",backgroundColor:"rgba(153, 102, 255, 0.5)"}]},C={labels:$,datasets:[{label:"Frecuencia Respiratoria (rpm)",data:x.map(O=>O.respiratoryRate),borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)"}]},I={labels:$,datasets:[{label:"Saturacin (%)",data:x.map(O=>O.saturation),borderColor:"rgb(99, 255, 132)",backgroundColor:"rgba(99, 255, 132, 0.5)"}]};return M?w.jsxs("main",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("button",{className:"secondary outline",onClick:()=>j(!1),children:" Volver al Historial"})})}),w.jsx("ul",{children:w.jsx("li",{children:w.jsxs("h2",{children:["Notas de Enfermera de: ",n.name]})})})]}),w.jsx(PL,{patientId:n.docId})]}):w.jsxs("main",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("button",{className:"secondary outline",onClick:t,children:" Volver a la lista"})})}),w.jsx("ul",{children:w.jsx("li",{children:w.jsxs("h2",{children:["Historial de: ",n.name]})})})]}),w.jsx("article",{children:w.jsxs("form",{onSubmit:W,children:[w.jsx("h4",{children:"Aadir Signos Vitales y Nota"}),w.jsxs("div",{className:"grid",children:[w.jsxs("label",{children:["Frec. Cardaca (lpm)",w.jsx("input",{type:"number",value:c,onChange:O=>h(O.target.value)})]}),w.jsxs("label",{children:["Frec. Respiratoria (rpm)",w.jsx("input",{type:"number",value:f,onChange:O=>g(O.target.value)})]})]}),w.jsxs("div",{className:"grid",children:[w.jsxs("label",{children:["Presin Arterial (Sist/Dias)",w.jsx("input",{type:"text",value:r,onChange:O=>o(O.target.value)})]}),w.jsxs("label",{children:["Saturacin (%)",w.jsx("input",{type:"number",value:y,onChange:O=>v(O.target.value)})]}),w.jsxs("label",{children:["Temperatura (C)",w.jsx("input",{type:"number",step:"0.1",value:e,onChange:O=>i(O.target.value)})]})]}),w.jsx("label",{children:"Nota de Enfermera (adjunta a la toma)"}),w.jsx("textarea",{value:b,onChange:O=>S(O.target.value),placeholder:"Aade una nota..."}),w.jsx("button",{type:"submit",children:"Guardar Signos y Nota"})]})}),w.jsx("button",{className:"contrast",onClick:()=>j(!0),style:{width:"100%",marginTop:"1rem"},children:"Ver / Aadir Notas Generales"}),x.length>1&&w.jsxs("section",{children:[" ",w.jsx("h4",{children:"Grficas de Evolucin"})," ",w.jsxs("div",{className:"grid",children:[" ",w.jsxs("article",{children:[w.jsx("h6",{children:"Temperatura"}),w.jsx(Ii,{options:rt(""),data:Z})]})," ",w.jsxs("article",{children:[w.jsx("h6",{children:"Frecuencia Cardaca"}),w.jsx(Ii,{options:rt(""),data:ot})]})," ",w.jsxs("article",{children:[w.jsx("h6",{children:"Frecuencia Respiratoria"}),w.jsx(Ii,{options:rt(""),data:C})]})," ",w.jsxs("article",{children:[w.jsx("h6",{children:"Saturacin"}),w.jsx(Ii,{options:rt(""),data:I})]})," "]})," ",w.jsx("article",{children:w.jsx(Ii,{options:rt("Evolucin de Presin Arterial"),data:N})})," "]}),w.jsx("figure",{children:w.jsxs("table",{role:"grid",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Fecha y Hora"}),w.jsx("th",{children:"Frec. Cardaca"}),w.jsx("th",{children:"Frec. Respiratoria"}),w.jsx("th",{children:"Presin Arterial"}),w.jsx("th",{children:"Saturacin"}),w.jsx("th",{children:"Temperatura"}),w.jsx("th",{children:"Nota de la Toma"})]})}),w.jsx("tbody",{children:x.map(O=>w.jsxs("tr",{children:[w.jsx("td",{children:new Date(O.timestamp.seconds*1e3).toLocaleString("es-CO")}),w.jsxs("td",{children:[O.heartRate," lpm"]}),w.jsxs("td",{children:[O.respiratoryRate," rpm"]}),w.jsx("td",{children:O.bloodPressure}),w.jsxs("td",{children:[O.saturation," %"]}),w.jsxs("td",{children:[O.temperature," C"]}),w.jsx("td",{children:O.note})]},O.id)).reverse()})]})})]})},VL=()=>{const[n,t]=Y.useState(""),[e,i]=Y.useState(null),[r,o]=Y.useState(!1),[c,h]=Y.useState(!1),f=async g=>{if(g.preventDefault(),!n.trim())return;h(!0),o(!1),i(null);const y=Ts(On(ln,"patients"),tu("id","==",n.trim()));try{const v=await a1(y);if(v.empty)o(!0);else{const b={docId:v.docs[0].id,...v.docs[0].data()};i(b)}}catch{alert("Hubo un error al buscar.")}h(!1)};return e?w.jsx(Uw,{patient:e,onBack:()=>{i(null),t("")}}):w.jsxs("article",{children:[w.jsx("h4",{children:"Buscar Paciente por Cdula"}),w.jsxs("form",{onSubmit:f,children:[w.jsx("input",{type:"text",value:n,onChange:g=>t(g.target.value),placeholder:"Ingresa el nmero de cdula...",required:!0}),w.jsx("button",{type:"submit","aria-busy":c,children:c?"Buscando...":"Buscar Paciente"})]}),r&&w.jsx("p",{style:{color:"var(--pico-color-red-500)"},children:"Paciente no encontrado."})]})},jw=({usuario:n,handleLogout:t})=>w.jsxs("div",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("strong",{children:"Panel de Auxiliar"})})}),w.jsxs("ul",{children:[w.jsx("li",{children:n.email}),w.jsx("li",{children:w.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),w.jsx("main",{children:w.jsx(VL,{})})]}),LL=({usuario:n,handleLogout:t})=>{const[e,i]=Y.useState("admin"),[r,o]=Y.useState(null);if(r)return w.jsx(Vw,{patient:r,onBack:()=>o(null)});const c=()=>{switch(e){case"medico":return w.jsx(Lw,{usuario:n,handleLogout:t});case"auxiliar":return w.jsx(jw,{usuario:n,handleLogout:t});case"admin":default:return w.jsx("main",{children:w.jsxs("section",{children:[w.jsx("h2",{children:"Gestin de Pacientes"}),w.jsx(z1,{}),w.jsx(B1,{onPatientSelect:h=>o(h)})]})})}};return w.jsxs("div",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("strong",{children:"Panel de Super-Administrador"})})}),w.jsxs("ul",{children:[w.jsx("li",{children:n.email}),w.jsx("li",{children:w.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),w.jsx("nav",{children:w.jsxs("ul",{children:[w.jsx("li",{children:w.jsx("strong",{children:"Simular Vista Como:"})}),w.jsx("li",{children:w.jsx("button",{className:e==="admin"?"":"secondary",onClick:()=>i("admin"),children:"Administrador"})}),w.jsx("li",{children:w.jsx("button",{className:e==="medico"?"":"secondary",onClick:()=>i("medico"),children:"Mdico"})}),w.jsx("li",{children:w.jsx("button",{className:e==="auxiliar"?"":"secondary",onClick:()=>i("auxiliar"),children:"Auxiliar"})})]})}),c()]})},UL=({usuario:n,handleLogout:t})=>{const[e,i]=Y.useState(null);return e?w.jsx(Uw,{patient:e,onBack:()=>i(null)}):w.jsxs("div",{className:"container",children:[w.jsxs("nav",{children:[w.jsx("ul",{children:w.jsx("li",{children:w.jsx("strong",{children:"Panel de Administracin"})})}),w.jsxs("ul",{children:[w.jsx("li",{children:n.email}),w.jsx("li",{children:w.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),w.jsx("main",{children:w.jsxs("section",{children:[w.jsx("h2",{children:"Gestin de Pacientes"}),w.jsx(z1,{}),w.jsx(B1,{onPatientSelect:r=>i(r)})]})})]})},jL=({usuario:n,handleLogout:t})=>{const[e,i]=Y.useState(null);if(Y.useEffect(()=>{if(n&&n.cedula){const r=Ts(On(ln,"personal"),tu("cedula","==",n.cedula)),o=Oa(r,c=>{c.empty?i({rol:"Desconocido"}):i(c.docs[0].data())});return()=>o()}},[n]),!e)return w.jsx("div",{className:"container","aria-busy":"true",children:"Verificando permisos..."});if(e.cedula==="1234567890")return w.jsx(LL,{usuario:e,handleLogout:t});switch(e.rol){case"Jefe de Enfermera":case"Auxiliar Admin":return w.jsx(UL,{usuario:e,handleLogout:t});case"Mdico":return w.jsx(Lw,{usuario:e,handleLogout:t});case"Auxiliar":return w.jsx(jw,{usuario:e,handleLogout:t});default:return w.jsxs("div",{className:"container",children:[w.jsx("h1",{children:"Acceso Denegado"}),w.jsx("p",{children:"Tu rol no est reconocido en el sistema."}),w.jsx("button",{onClick:t,children:"Cerrar Sesin"})]})}};/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function We(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function ws(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zp({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Wy(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function zw(n,t,e="/"){return zL(n,t,e,!1)}function zL(n,t,e,i){let r=typeof t=="string"?Wy(t):t,o=Rr(r.pathname||"/",e);if(o==null)return null;let c=Bw(n);BL(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let g=ZL(o);h=XL(c[f],g,i)}return h}function Bw(n,t=[],e=[],i=""){let r=(o,c,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(We(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let g=_s([i,f.relativePath]),y=e.concat(f);o.children&&o.children.length>0&&(We(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Bw(o.children,t,y,g)),!(o.path==null&&!o.index)&&t.push({path:g,score:QL(g,o.index),routesMeta:y})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))r(o,c);else for(let h of Fw(o.path))r(o,c,h)}),t}function Fw(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,r=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let c=Fw(i.join("/")),h=[];return h.push(...c.map(f=>f===""?o:[o,f].join("/"))),r&&h.push(...c),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function BL(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:$L(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var FL=/^:[\w-]+$/,HL=3,qL=2,GL=1,YL=10,KL=-2,uS=n=>n==="*";function QL(n,t){let e=n.split("/"),i=e.length;return e.some(uS)&&(i+=KL),t&&(i+=qL),e.filter(r=>!uS(r)).reduce((r,o)=>r+(FL.test(o)?HL:o===""?GL:YL),i)}function $L(n,t){return n.length===t.length&&n.slice(0,-1).every((i,r)=>i===t[r])?n[n.length-1]-t[t.length-1]:0}function XL(n,t,e=!1){let{routesMeta:i}=n,r={},o="/",c=[];for(let h=0;h<i.length;++h){let f=i[h],g=h===i.length-1,y=o==="/"?t:t.slice(o.length)||"/",v=ed({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},y),b=f.route;if(!v&&g&&e&&!i[i.length-1].route.index&&(v=ed({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!v)return null;Object.assign(r,v.params),c.push({params:r,pathname:_s([o,v.pathname]),pathnameBase:n4(_s([o,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(o=_s([o,v.pathnameBase]))}return c}function ed(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=WL(n.path,n.caseSensitive,n.end),r=t.match(e);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:v},b)=>{if(y==="*"){let x=h[b]||"";c=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const S=h[b];return v&&!S?g[y]=void 0:g[y]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:n}}function WL(n,t=!1,e=!0){ws(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function ZL(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ws(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function Rr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function JL(n,t="/"){let{pathname:e,search:i="",hash:r=""}=typeof n=="string"?Wy(n):n;return{pathname:e?e.startsWith("/")?e:t4(e,t):t,search:i4(i),hash:s4(r)}}function t4(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function ip(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function e4(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function Hw(n){let t=e4(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function qw(n,t,e,i=!1){let r;typeof n=="string"?r=Wy(n):(r={...n},We(!r.pathname||!r.pathname.includes("?"),ip("?","pathname","search",r)),We(!r.pathname||!r.pathname.includes("#"),ip("#","pathname","hash",r)),We(!r.search||!r.search.includes("#"),ip("#","search","hash",r)));let o=n===""||r.pathname==="",c=o?"/":r.pathname,h;if(c==null)h=e;else{let v=t.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),v-=1;r.pathname=b.join("/")}h=v>=0?t[v]:"/"}let f=JL(r,h),g=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(g||y)&&(f.pathname+="/"),f}var _s=n=>n.join("/").replace(/\/\/+/g,"/"),n4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),i4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,s4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function r4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Gw=["POST","PUT","PATCH","DELETE"];new Set(Gw);var a4=["GET",...Gw];new Set(a4);var ul=Y.createContext(null);ul.displayName="DataRouter";var Rd=Y.createContext(null);Rd.displayName="DataRouterState";Y.createContext(!1);var Yw=Y.createContext({isTransitioning:!1});Yw.displayName="ViewTransition";var o4=Y.createContext(new Map);o4.displayName="Fetchers";var l4=Y.createContext(null);l4.displayName="Await";var Rs=Y.createContext(null);Rs.displayName="Navigation";var Zy=Y.createContext(null);Zy.displayName="Location";var Cs=Y.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var Jy=Y.createContext(null);Jy.displayName="RouteError";function c4(n,{relative:t}={}){We(Cd(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=Y.useContext(Rs),{hash:r,pathname:o,search:c}=Eu(n,{relative:t}),h=o;return e!=="/"&&(h=o==="/"?e:_s([e,o])),i.createHref({pathname:h,search:c,hash:r})}function Cd(){return Y.useContext(Zy)!=null}function Mr(){return We(Cd(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(Zy).location}var Kw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Qw(n){Y.useContext(Rs).static||Y.useLayoutEffect(n)}function $w(){let{isDataRoute:n}=Y.useContext(Cs);return n?T4():u4()}function u4(){We(Cd(),"useNavigate() may be used only in the context of a <Router> component.");let n=Y.useContext(ul),{basename:t,navigator:e}=Y.useContext(Rs),{matches:i}=Y.useContext(Cs),{pathname:r}=Mr(),o=JSON.stringify(Hw(i)),c=Y.useRef(!1);return Qw(()=>{c.current=!0}),Y.useCallback((f,g={})=>{if(ws(c.current,Kw),!c.current)return;if(typeof f=="number"){e.go(f);return}let y=qw(f,JSON.parse(o),r,g.relative==="path");n==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:_s([t,y.pathname])),(g.replace?e.replace:e.push)(y,g.state,g)},[t,e,o,r,n])}Y.createContext(null);function Eu(n,{relative:t}={}){let{matches:e}=Y.useContext(Cs),{pathname:i}=Mr(),r=JSON.stringify(Hw(e));return Y.useMemo(()=>qw(n,JSON.parse(r),i,t==="path"),[n,r,i,t])}function h4(n,t,e,i){We(Cd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=Y.useContext(Rs),{matches:o}=Y.useContext(Cs),c=o[o.length-1],h=c?c.params:{},f=c?c.pathname:"/",g=c?c.pathnameBase:"/",y=c&&c.route;{let j=y&&y.path||"";Xw(f,!y||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let v=Mr(),b;b=v;let S=b.pathname||"/",x=S;if(g!=="/"){let j=g.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(j.length).join("/")}let D=zw(n,{pathname:x});return ws(y||D!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ws(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),p4(D&&D.map(j=>Object.assign({},j,{params:Object.assign({},h,j.params),pathname:_s([g,r.encodeLocation?r.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:_s([g,r.encodeLocation?r.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,e,i)}function f4(){let n=E4(),t=r4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=Y.createElement(Y.Fragment,null,Y.createElement("p",null," Hey developer "),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:o},"ErrorBoundary")," or"," ",Y.createElement("code",{style:o},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},t),e?Y.createElement("pre",{style:r},e):null,c)}var d4=Y.createElement(f4,null),g4=class extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?Y.createElement(Cs.Provider,{value:this.props.routeContext},Y.createElement(Jy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function m4({routeContext:n,match:t,children:e}){let i=Y.useContext(ul);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(Cs.Provider,{value:n},e)}function p4(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let r=n,o=e?.errors;if(o!=null){let f=r.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);We(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let c=!1,h=-1;if(e)for(let f=0;f<r.length;f++){let g=r[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:y,errors:v}=e,b=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){c=!0,h>=0?r=r.slice(0,h+1):r=[r[0]];break}}}return r.reduceRight((f,g,y)=>{let v,b=!1,S=null,x=null;e&&(v=o&&g.route.id?o[g.route.id]:void 0,S=g.route.errorElement||d4,c&&(h<0&&y===0?(Xw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):h===y&&(b=!0,x=g.route.hydrateFallbackElement||null)));let D=t.concat(r.slice(0,y+1)),M=()=>{let j;return v?j=S:b?j=x:g.route.Component?j=Y.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=f,Y.createElement(m4,{match:g,routeContext:{outlet:f,matches:D,isDataRoute:e!=null},children:j})};return e&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?Y.createElement(g4,{location:e.location,revalidation:e.revalidation,component:S,error:v,children:M(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):M()},null)}function t_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y4(n){let t=Y.useContext(ul);return We(t,t_(n)),t}function _4(n){let t=Y.useContext(Rd);return We(t,t_(n)),t}function v4(n){let t=Y.useContext(Cs);return We(t,t_(n)),t}function e_(n){let t=v4(n),e=t.matches[t.matches.length-1];return We(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function b4(){return e_("useRouteId")}function E4(){let n=Y.useContext(Jy),t=_4("useRouteError"),e=e_("useRouteError");return n!==void 0?n:t.errors?.[e]}function T4(){let{router:n}=y4("useNavigate"),t=e_("useNavigate"),e=Y.useRef(!1);return Qw(()=>{e.current=!0}),Y.useCallback(async(r,o={})=>{ws(e.current,Kw),e.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:t,...o}))},[n,t])}var hS={};function Xw(n,t,e){!t&&!hS[n]&&(hS[n]=!0,ws(!1,e))}Y.memo(S4);function S4({routes:n,future:t,state:e}){return h4(n,void 0,e,t)}var xf="get",Rf="application/x-www-form-urlencoded";function Id(n){return n!=null&&typeof n.tagName=="string"}function A4(n){return Id(n)&&n.tagName.toLowerCase()==="button"}function w4(n){return Id(n)&&n.tagName.toLowerCase()==="form"}function x4(n){return Id(n)&&n.tagName.toLowerCase()==="input"}function R4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function C4(n,t){return n.button===0&&(!t||t==="_self")&&!R4(n)}var df=null;function I4(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch{df=!0}return df}var D4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sp(n){return n!=null&&!D4.has(n)?(ws(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rf}"`),null):n}function M4(n,t){let e,i,r,o,c;if(w4(n)){let h=n.getAttribute("action");i=h?Rr(h,t):null,e=n.getAttribute("method")||xf,r=sp(n.getAttribute("enctype"))||Rf,o=new FormData(n)}else if(A4(n)||x4(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?Rr(f,t):null,e=n.getAttribute("formmethod")||h.getAttribute("method")||xf,r=sp(n.getAttribute("formenctype"))||sp(h.getAttribute("enctype"))||Rf,o=new FormData(h,n),!I4()){let{name:g,type:y,value:v}=n;if(y==="image"){let b=g?`${g}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else g&&o.append(g,v)}}else{if(Id(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=xf,i=null,r=Rf,c=n}return o&&r==="text/plain"&&(c=o,o=void 0),{action:i,method:e.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function n_(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function O4(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&Rr(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function N4(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function k4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function P4(n,t,e){let i=await Promise.all(n.map(async r=>{let o=t.routes[r.route.id];if(o){let c=await N4(o,e);return c.links?c.links():[]}return[]}));return j4(i.flat(1).filter(k4).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function fS(n,t,e,i,r,o){let c=(f,g)=>e[g]?f.route.id!==e[g].route.id:!0,h=(f,g)=>e[g].pathname!==f.pathname||e[g].route.path?.endsWith("*")&&e[g].params["*"]!==f.params["*"];return o==="assets"?t.filter((f,g)=>c(f,g)||h(f,g)):o==="data"?t.filter((f,g)=>{let y=i.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(c(f,g)||h(f,g))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function V4(n,t,{includeHydrateFallback:e}={}){return L4(n.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),e&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function L4(n){return[...new Set(n)]}function U4(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function j4(n,t){let e=new Set;return new Set(t),n.reduce((i,r)=>{let o=JSON.stringify(U4(r));return e.has(o)||(e.add(o),i.push({key:o,link:r})),i},[])}function Ww(){let n=Y.useContext(ul);return n_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function z4(){let n=Y.useContext(Rd);return n_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var i_=Y.createContext(void 0);i_.displayName="FrameworkContext";function Zw(){let n=Y.useContext(i_);return n_(n,"You must render this element inside a <HydratedRouter> element"),n}function B4(n,t){let e=Y.useContext(i_),[i,r]=Y.useState(!1),[o,c]=Y.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:g,onMouseLeave:y,onTouchStart:v}=t,b=Y.useRef(null);Y.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=j=>{j.forEach(W=>{c(W.isIntersecting)})},M=new IntersectionObserver(D,{threshold:.5});return b.current&&M.observe(b.current),()=>{M.disconnect()}}},[n]),Y.useEffect(()=>{if(i){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[i]);let S=()=>{r(!0)},x=()=>{r(!1),c(!1)};return e?n!=="intent"?[o,b,{}]:[o,b,{onFocus:xc(h,S),onBlur:xc(f,x),onMouseEnter:xc(g,S),onMouseLeave:xc(y,x),onTouchStart:xc(v,S)}]:[!1,b,{}]}function xc(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function F4({page:n,...t}){let{router:e}=Ww(),i=Y.useMemo(()=>zw(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?Y.createElement(q4,{page:n,matches:i,...t}):null}function H4(n){let{manifest:t,routeModules:e}=Zw(),[i,r]=Y.useState([]);return Y.useEffect(()=>{let o=!1;return P4(n,t,e).then(c=>{o||r(c)}),()=>{o=!0}},[n,t,e]),i}function q4({page:n,matches:t,...e}){let i=Mr(),{manifest:r,routeModules:o}=Zw(),{basename:c}=Ww(),{loaderData:h,matches:f}=z4(),g=Y.useMemo(()=>fS(n,t,f,r,i,"data"),[n,t,f,r,i]),y=Y.useMemo(()=>fS(n,t,f,r,i,"assets"),[n,t,f,r,i]),v=Y.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let x=new Set,D=!1;if(t.forEach(j=>{let W=r.routes[j.route.id];!W||!W.hasLoader||(!g.some($=>$.route.id===j.route.id)&&j.route.id in h&&o[j.route.id]?.shouldRevalidate||W.hasClientLoader?D=!0:x.add(j.route.id))}),x.size===0)return[];let M=O4(n,c,"data");return D&&x.size>0&&M.searchParams.set("_routes",t.filter(j=>x.has(j.route.id)).map(j=>j.route.id).join(",")),[M.pathname+M.search]},[c,h,i,r,g,t,n,o]),b=Y.useMemo(()=>V4(y,r),[y,r]),S=H4(y);return Y.createElement(Y.Fragment,null,v.map(x=>Y.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...e})),b.map(x=>Y.createElement("link",{key:x,rel:"modulepreload",href:x,...e})),S.map(({key:x,link:D})=>Y.createElement("link",{key:x,nonce:e.nonce,...D})))}function G4(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var Jw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jw&&(window.__reactRouterVersion="7.8.0")}catch{}var tx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ex=Y.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:r,reloadDocument:o,replace:c,state:h,target:f,to:g,preventScrollReset:y,viewTransition:v,...b},S){let{basename:x}=Y.useContext(Rs),D=typeof g=="string"&&tx.test(g),M,j=!1;if(typeof g=="string"&&D&&(M=g,Jw))try{let I=new URL(window.location.href),O=g.startsWith("//")?new URL(I.protocol+g):new URL(g),V=Rr(O.pathname,x);O.origin===I.origin&&V!=null?g=V+O.search+O.hash:j=!0}catch{ws(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=c4(g,{relative:r}),[$,rt,Z]=B4(i,b),ot=$4(g,{replace:c,state:h,target:f,preventScrollReset:y,relative:r,viewTransition:v});function N(I){t&&t(I),I.defaultPrevented||ot(I)}let C=Y.createElement("a",{...b,...Z,href:M||W,onClick:j||o?t:N,ref:G4(S,rt),target:f,"data-discover":!D&&e==="render"?"true":void 0});return $&&!D?Y.createElement(Y.Fragment,null,C,Y.createElement(F4,{page:W})):C});ex.displayName="Link";var Y4=Y.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:r=!1,style:o,to:c,viewTransition:h,children:f,...g},y){let v=Eu(c,{relative:g.relative}),b=Mr(),S=Y.useContext(Rd),{navigator:x,basename:D}=Y.useContext(Rs),M=S!=null&&t6(v)&&h===!0,j=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,W=b.pathname,$=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;e||(W=W.toLowerCase(),$=$?$.toLowerCase():null,j=j.toLowerCase()),$&&D&&($=Rr($,D)||$);const rt=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let Z=W===j||!r&&W.startsWith(j)&&W.charAt(rt)==="/",ot=$!=null&&($===j||!r&&$.startsWith(j)&&$.charAt(j.length)==="/"),N={isActive:Z,isPending:ot,isTransitioning:M},C=Z?t:void 0,I;typeof i=="function"?I=i(N):I=[i,Z?"active":null,ot?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(N):o;return Y.createElement(ex,{...g,"aria-current":C,className:I,ref:y,style:O,to:c,viewTransition:h},typeof f=="function"?f(N):f)});Y4.displayName="NavLink";var K4=Y.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:r,state:o,method:c=xf,action:h,onSubmit:f,relative:g,preventScrollReset:y,viewTransition:v,...b},S)=>{let x=Z4(),D=J4(h,{relative:g}),M=c.toLowerCase()==="get"?"get":"post",j=typeof h=="string"&&tx.test(h),W=$=>{if(f&&f($),$.defaultPrevented)return;$.preventDefault();let rt=$.nativeEvent.submitter,Z=rt?.getAttribute("formmethod")||c;x(rt||$.currentTarget,{fetcherKey:t,method:Z,navigate:e,replace:r,state:o,relative:g,preventScrollReset:y,viewTransition:v})};return Y.createElement("form",{ref:S,method:M,action:D,onSubmit:i?f:W,...b,"data-discover":!j&&n==="render"?"true":void 0})});K4.displayName="Form";function Q4(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nx(n){let t=Y.useContext(ul);return We(t,Q4(n)),t}function $4(n,{target:t,replace:e,state:i,preventScrollReset:r,relative:o,viewTransition:c}={}){let h=$w(),f=Mr(),g=Eu(n,{relative:o});return Y.useCallback(y=>{if(C4(y,t)){y.preventDefault();let v=e!==void 0?e:zp(f)===zp(g);h(n,{replace:v,state:i,preventScrollReset:r,relative:o,viewTransition:c})}},[f,h,g,e,i,t,n,r,o,c])}var X4=0,W4=()=>`__${String(++X4)}__`;function Z4(){let{router:n}=nx("useSubmit"),{basename:t}=Y.useContext(Rs),e=b4();return Y.useCallback(async(i,r={})=>{let{action:o,method:c,encType:h,formData:f,body:g}=M4(i,t);if(r.navigate===!1){let y=r.fetcherKey||W4();await n.fetch(y,e,r.action||o,{preventScrollReset:r.preventScrollReset,formData:f,body:g,formMethod:r.method||c,formEncType:r.encType||h,flushSync:r.flushSync})}else await n.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:f,body:g,formMethod:r.method||c,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:e,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,t,e])}function J4(n,{relative:t}={}){let{basename:e}=Y.useContext(Rs),i=Y.useContext(Cs);We(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...Eu(n||".",{relative:t})},c=Mr();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(y=>y==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:_s([e,o.pathname])),zp(o)}function t6(n,{relative:t}={}){let e=Y.useContext(Yw);We(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=nx("useViewTransitionState"),r=Eu(n,{relative:t});if(!e.isTransitioning)return!1;let o=Rr(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=Rr(e.nextLocation.pathname,i)||e.nextLocation.pathname;return ed(r.pathname,c)!=null||ed(r.pathname,o)!=null}const e6=()=>{const n=$w(),e=Mr().state?.cedula||"",[i,r]=Y.useState(e),[o,c]=Y.useState(""),[h,f]=Y.useState(""),[g,y]=Y.useState(""),[v,b]=Y.useState("");Y.useEffect(()=>{e&&r(e)},[e]);const S=async x=>{if(x.preventDefault(),b(""),!i||!o||!h||!g){b("Por favor, complete todos los campos.");return}try{await Ed(On(ln,"personal"),{cedula:i,nombre:o,apellido:h,email:g,rol:"Auxiliar"}),alert("Registro exitoso"),n("/")}catch(D){console.error("Error al registrar: ",D),b("Hubo un problema al registrar, intente de nuevo.")}};return w.jsxs("div",{className:"container",children:[w.jsx("h2",{children:"Registro de Personal"}),w.jsxs("form",{onSubmit:S,children:[w.jsxs("div",{children:[w.jsx("label",{children:"Cdula:"}),w.jsx("input",{type:"text",value:i,onChange:x=>r(x.target.value),required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{children:"Nombre:"}),w.jsx("input",{type:"text",value:o,onChange:x=>c(x.target.value),required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{children:"Apellido:"}),w.jsx("input",{type:"text",value:h,onChange:x=>f(x.target.value),required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{children:"Correo:"}),w.jsx("input",{type:"email",value:g,onChange:x=>y(x.target.value),required:!0})]}),v&&w.jsx("p",{style:{color:"red"},children:v}),w.jsx("button",{type:"submit",children:"Registrar"})]})]})};function n6(){const[n,t]=Y.useState(null),[e,i]=Y.useState(null),r=h=>{t(h)},o=h=>{i(h)},c=()=>{t(null),i(null)};return e?w.jsx(e6,{cedulaInicial:e.cedula,onRegisterComplete:t}):n?w.jsx(jL,{usuario:n,handleLogout:c}):w.jsx(ON,{onLoginSuccess:r,onRegisterRedirect:o})}LR.createRoot(document.getElementById("root")).render(w.jsx(Y.StrictMode,{children:w.jsx(n6,{})}));
