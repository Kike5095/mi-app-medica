(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Sx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fp={exports:{}},cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Ax(){if(j0)return cc;j0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:o}}return cc.Fragment=t,cc.jsx=e,cc.jsxs=e,cc}var H0;function wx(){return H0||(H0=1,fp.exports=Ax()),fp.exports}var z=wx(),dp={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function xx(){if(F0)return Rt;F0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,M={};function I(V,it,ct){this.props=V,this.context=it,this.refs=M,this.updater=ct||A}I.prototype.isReactComponent={},I.prototype.setState=function(V,it){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,it,"setState")},I.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function q(){}q.prototype=I.prototype;function Z(V,it,ct){this.props=V,this.context=it,this.refs=M,this.updater=ct||A}var et=Z.prototype=new q;et.constructor=Z,R(et,I.prototype),et.isPureReactComponent=!0;var at=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},ot=Object.prototype.hasOwnProperty;function D(V,it,ct,st,dt,wt){return ct=wt.ref,{$$typeof:n,type:V,key:it,ref:ct!==void 0?ct:null,props:wt}}function x(V,it){return D(V.type,it,void 0,void 0,void 0,V.props)}function C(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function P(V){var it={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ct){return it[ct]})}var N=/\/+/g;function L(V,it){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):it.toString(36)}function O(){}function $t(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(O,O):(V.status="pending",V.then(function(it){V.status==="pending"&&(V.status="fulfilled",V.value=it)},function(it){V.status==="pending"&&(V.status="rejected",V.reason=it)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function At(V,it,ct,st,dt){var wt=typeof V;(wt==="undefined"||wt==="boolean")&&(V=null);var yt=!1;if(V===null)yt=!0;else switch(wt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(V.$$typeof){case n:case t:yt=!0;break;case y:return yt=V._init,At(yt(V._payload),it,ct,st,dt)}}if(yt)return dt=dt(V),yt=st===""?"."+L(V,0):st,at(dt)?(ct="",yt!=null&&(ct=yt.replace(N,"$&/")+"/"),At(dt,it,ct,"",function(oi){return oi})):dt!=null&&(C(dt)&&(dt=x(dt,ct+(dt.key==null||V&&V.key===dt.key?"":(""+dt.key).replace(N,"$&/")+"/")+yt)),it.push(dt)),1;yt=0;var Pe=st===""?".":st+":";if(at(V))for(var ie=0;ie<V.length;ie++)st=V[ie],wt=Pe+L(st,ie),yt+=At(st,it,ct,wt,dt);else if(ie=b(V),typeof ie=="function")for(V=ie.call(V),ie=0;!(st=V.next()).done;)st=st.value,wt=Pe+L(st,ie++),yt+=At(st,it,ct,wt,dt);else if(wt==="object"){if(typeof V.then=="function")return At($t(V),it,ct,st,dt);throw it=String(V),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return yt}function K(V,it,ct){if(V==null)return V;var st=[],dt=0;return At(V,st,"","",function(wt){return it.call(ct,wt,dt++)}),st}function rt(V){if(V._status===-1){var it=V._result;it=it(),it.then(function(ct){(V._status===0||V._status===-1)&&(V._status=1,V._result=ct)},function(ct){(V._status===0||V._status===-1)&&(V._status=2,V._result=ct)}),V._status===-1&&(V._status=0,V._result=it)}if(V._status===1)return V._result.default;throw V._result}var gt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function kt(){}return Rt.Children={map:K,forEach:function(V,it,ct){K(V,function(){it.apply(this,arguments)},ct)},count:function(V){var it=0;return K(V,function(){it++}),it},toArray:function(V){return K(V,function(it){return it})||[]},only:function(V){if(!C(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Rt.Component=I,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=Z,Rt.StrictMode=i,Rt.Suspense=d,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return X.H.useMemoCache(V)}},Rt.cache=function(V){return function(){return V.apply(null,arguments)}},Rt.cloneElement=function(V,it,ct){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var st=R({},V.props),dt=V.key,wt=void 0;if(it!=null)for(yt in it.ref!==void 0&&(wt=void 0),it.key!==void 0&&(dt=""+it.key),it)!ot.call(it,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&it.ref===void 0||(st[yt]=it[yt]);var yt=arguments.length-2;if(yt===1)st.children=ct;else if(1<yt){for(var Pe=Array(yt),ie=0;ie<yt;ie++)Pe[ie]=arguments[ie+2];st.children=Pe}return D(V.type,dt,void 0,void 0,wt,st)},Rt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},Rt.createElement=function(V,it,ct){var st,dt={},wt=null;if(it!=null)for(st in it.key!==void 0&&(wt=""+it.key),it)ot.call(it,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(dt[st]=it[st]);var yt=arguments.length-2;if(yt===1)dt.children=ct;else if(1<yt){for(var Pe=Array(yt),ie=0;ie<yt;ie++)Pe[ie]=arguments[ie+2];dt.children=Pe}if(V&&V.defaultProps)for(st in yt=V.defaultProps,yt)dt[st]===void 0&&(dt[st]=yt[st]);return D(V,wt,void 0,void 0,null,dt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(V){return{$$typeof:h,render:V}},Rt.isValidElement=C,Rt.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:rt}},Rt.memo=function(V,it){return{$$typeof:p,type:V,compare:it===void 0?null:it}},Rt.startTransition=function(V){var it=X.T,ct={};X.T=ct;try{var st=V(),dt=X.S;dt!==null&&dt(ct,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(kt,gt)}catch(wt){gt(wt)}finally{X.T=it}},Rt.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Rt.use=function(V){return X.H.use(V)},Rt.useActionState=function(V,it,ct){return X.H.useActionState(V,it,ct)},Rt.useCallback=function(V,it){return X.H.useCallback(V,it)},Rt.useContext=function(V){return X.H.useContext(V)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(V,it){return X.H.useDeferredValue(V,it)},Rt.useEffect=function(V,it,ct){var st=X.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(V,it)},Rt.useId=function(){return X.H.useId()},Rt.useImperativeHandle=function(V,it,ct){return X.H.useImperativeHandle(V,it,ct)},Rt.useInsertionEffect=function(V,it){return X.H.useInsertionEffect(V,it)},Rt.useLayoutEffect=function(V,it){return X.H.useLayoutEffect(V,it)},Rt.useMemo=function(V,it){return X.H.useMemo(V,it)},Rt.useOptimistic=function(V,it){return X.H.useOptimistic(V,it)},Rt.useReducer=function(V,it,ct){return X.H.useReducer(V,it,ct)},Rt.useRef=function(V){return X.H.useRef(V)},Rt.useState=function(V){return X.H.useState(V)},Rt.useSyncExternalStore=function(V,it,ct){return X.H.useSyncExternalStore(V,it,ct)},Rt.useTransition=function(){return X.H.useTransition()},Rt.version="19.1.1",Rt}var q0;function bm(){return q0||(q0=1,dp.exports=xx()),dp.exports}var Ct=bm();const LE=Sx(Ct);var gp={exports:{}},uc={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Rx(){return G0||(G0=1,function(n){function t(K,rt){var gt=K.length;K.push(rt);t:for(;0<gt;){var kt=gt-1>>>1,V=K[kt];if(0<a(V,rt))K[kt]=rt,K[gt]=V,gt=kt;else break t}}function e(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var rt=K[0],gt=K.pop();if(gt!==rt){K[0]=gt;t:for(var kt=0,V=K.length,it=V>>>1;kt<it;){var ct=2*(kt+1)-1,st=K[ct],dt=ct+1,wt=K[dt];if(0>a(st,gt))dt<V&&0>a(wt,st)?(K[kt]=wt,K[dt]=gt,kt=dt):(K[kt]=st,K[ct]=gt,kt=ct);else if(dt<V&&0>a(wt,gt))K[kt]=wt,K[dt]=gt,kt=dt;else break t}}return rt}function a(K,rt){var gt=K.sortIndex-rt.sortIndex;return gt!==0?gt:K.id-rt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],p=[],y=1,v=null,b=3,A=!1,R=!1,M=!1,I=!1,q=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,et=typeof setImmediate<"u"?setImmediate:null;function at(K){for(var rt=e(p);rt!==null;){if(rt.callback===null)i(p);else if(rt.startTime<=K)i(p),rt.sortIndex=rt.expirationTime,t(d,rt);else break;rt=e(p)}}function X(K){if(M=!1,at(K),!R)if(e(d)!==null)R=!0,ot||(ot=!0,L());else{var rt=e(p);rt!==null&&At(X,rt.startTime-K)}}var ot=!1,D=-1,x=5,C=-1;function P(){return I?!0:!(n.unstable_now()-C<x)}function N(){if(I=!1,ot){var K=n.unstable_now();C=K;var rt=!0;try{t:{R=!1,M&&(M=!1,Z(D),D=-1),A=!0;var gt=b;try{e:{for(at(K),v=e(d);v!==null&&!(v.expirationTime>K&&P());){var kt=v.callback;if(typeof kt=="function"){v.callback=null,b=v.priorityLevel;var V=kt(v.expirationTime<=K);if(K=n.unstable_now(),typeof V=="function"){v.callback=V,at(K),rt=!0;break e}v===e(d)&&i(d),at(K)}else i(d);v=e(d)}if(v!==null)rt=!0;else{var it=e(p);it!==null&&At(X,it.startTime-K),rt=!1}}break t}finally{v=null,b=gt,A=!1}rt=void 0}}finally{rt?L():ot=!1}}}var L;if(typeof et=="function")L=function(){et(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,$t=O.port2;O.port1.onmessage=N,L=function(){$t.postMessage(null)}}else L=function(){q(N,0)};function At(K,rt){D=q(function(){K(n.unstable_now())},rt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var rt=3;break;default:rt=b}var gt=b;b=rt;try{return K()}finally{b=gt}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(K,rt){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var gt=b;b=K;try{return rt()}finally{b=gt}},n.unstable_scheduleCallback=function(K,rt,gt){var kt=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?kt+gt:kt):gt=kt,K){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=gt+V,K={id:y++,callback:rt,priorityLevel:K,startTime:gt,expirationTime:V,sortIndex:-1},gt>kt?(K.sortIndex=gt,t(p,K),e(d)===null&&K===e(p)&&(M?(Z(D),D=-1):M=!0,At(X,gt-kt))):(K.sortIndex=V,t(d,K),R||A||(R=!0,ot||(ot=!0,L()))),K},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(K){var rt=b;return function(){var gt=b;b=rt;try{return K.apply(this,arguments)}finally{b=gt}}}}(mp)),mp}var Y0;function Cx(){return Y0||(Y0=1,pp.exports=Rx()),pp.exports}var yp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function Ix(){if(K0)return en;K0=1;var n=bm();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(d,p,null,y)},en.flushSync=function(d){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=p,i.p=y,i.d.f()}},en.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},en.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},en.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:A}):y==="script"&&i.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},en.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);i.d.L(d,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=h(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},en.requestFormReset=function(d){i.d.r(d)},en.unstable_batchedUpdates=function(d,p){return d(p)},en.useFormState=function(d,p,y){return c.H.useFormState(d,p,y)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.1.1",en}var Q0;function Dx(){if(Q0)return yp.exports;Q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),yp.exports=Ix(),yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function Mx(){if(X0)return uc;X0=1;var n=Cx(),t=bm(),e=Dx();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,u=r;;){var g=l.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===l)return h(g),s;if(m===u)return h(g),r;m=m.sibling}throw Error(i(188))}if(l.return!==u.return)l=g,u=m;else{for(var E=!1,S=g.child;S;){if(S===l){E=!0,l=g,u=m;break}if(S===u){E=!0,u=g,l=m;break}S=S.sibling}if(!E){for(S=m.child;S;){if(S===l){E=!0,l=m,u=g;break}if(S===u){E=!0,u=m,l=g;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function p(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=p(s),r!==null)return r;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),et=Symbol.for("react.context"),at=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=N&&s[N]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function $t(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case I:return"Profiler";case M:return"StrictMode";case X:return"Suspense";case ot:return"SuspenseList";case C:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case et:return(s.displayName||"Context")+".Provider";case Z:return(s._context.displayName||"Context")+".Consumer";case at:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return r=s.displayName||null,r!==null?r:$t(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return $t(s(r))}catch{}}return null}var At=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},kt=[],V=-1;function it(s){return{current:s}}function ct(s){0>V||(s.current=kt[V],kt[V]=null,V--)}function st(s,r){V++,kt[V]=s.current,s.current=r}var dt=it(null),wt=it(null),yt=it(null),Pe=it(null);function ie(s,r){switch(st(yt,r),st(wt,s),st(dt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?p0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=p0(r),s=m0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(dt),st(dt,s)}function oi(){ct(dt),ct(wt),ct(yt)}function Ss(s){s.memoizedState!==null&&st(Pe,s);var r=dt.current,l=m0(r,s.type);r!==l&&(st(wt,s),st(dt,l))}function Ui(s){wt.current===s&&(ct(dt),ct(wt)),Pe.current===s&&(ct(Pe),sc._currentValue=gt)}var Er=Object.prototype.hasOwnProperty,Sr=n.unstable_scheduleCallback,Ar=n.unstable_cancelCallback,el=n.unstable_shouldYield,uu=n.unstable_requestPaint,Dn=n.unstable_now,fd=n.unstable_getCurrentPriorityLevel,nl=n.unstable_ImmediatePriority,Ma=n.unstable_UserBlockingPriority,wr=n.unstable_NormalPriority,dd=n.unstable_LowPriority,Oa=n.unstable_IdlePriority,il=n.log,hu=n.unstable_setDisableYieldValue,de=null,Kt=null;function bn(s){if(typeof il=="function"&&hu(s),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(de,s)}catch{}}var Je=Math.clz32?Math.clz32:xr,fu=Math.log,gd=Math.LN2;function xr(s){return s>>>=0,s===0?32:31-(fu(s)/gd|0)|0}var Rr=256,Cr=4194304;function Wn(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ka(s,r,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,m=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?g=Wn(u):(E&=S,E!==0?g=Wn(E):l||(l=S&~s,l!==0&&(g=Wn(l))))):(S=u&~m,S!==0?g=Wn(S):E!==0?g=Wn(E):l||(l=u&~s,l!==0&&(g=Wn(l)))),g===0?0:r!==0&&r!==g&&(r&m)===0&&(m=g&-g,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:g}function Ir(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function sl(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rl(){var s=Rr;return Rr<<=1,(Rr&4194048)===0&&(Rr=256),s}function al(){var s=Cr;return Cr<<=1,(Cr&62914560)===0&&(Cr=4194304),s}function zi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Bi(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ol(s,r,l,u,g,m){var E=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,k=s.expirationTimes,F=s.hiddenUpdates;for(l=E&~l;0<l;){var W=31-Je(l),tt=1<<W;S[W]=0,k[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var Y=G[W];Y!==null&&(Y.lane&=-536870913)}l&=~tt}u!==0&&li(s,u,0),m!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=m&~(E&~r))}function li(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-Je(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function ll(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var u=31-Je(l),g=1<<u;g&r|s[u]&r&&(s[u]|=r),l&=~g}}function As(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Na(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ws(){var s=rt.p;return s!==0?s:(s=window.event,s===void 0?32:P0(s.type))}function du(s,r){var l=rt.p;try{return rt.p=s,r()}finally{rt.p=l}}var ce=Math.random().toString(36).slice(2),Ie="__reactFiber$"+ce,Te="__reactProps$"+ce,Mn="__reactContainer$"+ce,cl="__reactEvents$"+ce,pd="__reactListeners$"+ce,xs="__reactHandles$"+ce,gu="__reactResources$"+ce,Dr="__reactMarker$"+ce;function Rs(s){delete s[Ie],delete s[Te],delete s[cl],delete s[pd],delete s[xs]}function ji(s){var r=s[Ie];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Mn]||l[Ie]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=b0(s);s!==null;){if(l=s[Ie])return l;s=b0(s)}return r}s=l,l=s.parentNode}return null}function ci(s){if(s=s[Ie]||s[Mn]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function ui(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function cn(s){var r=s[gu];return r||(r=s[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function me(s){s[Dr]=!0}var ul=new Set,Pa={};function $n(s,r){Hi(s,r),Hi(s+"Capture",r)}function Hi(s,r){for(Pa[s]=r,s=0;s<r.length;s++)ul.add(r[s])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Mr={};function yu(s){return Er.call(Mr,s)?!0:Er.call(mu,s)?!1:pu.test(s)?Mr[s]=!0:(mu[s]=!0,!1)}function Cs(s,r,l){if(yu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function hi(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Ge(s,r,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+u)}}var Or,_u;function Fi(s){if(Or===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Or=r&&r[1]||"",_u=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+s+_u}var Va=!1;function La(s,r){if(!s||Va)return"";Va=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Y){var G=Y}Reflect.construct(s,[],tt)}else{try{tt.call()}catch(Y){G=Y}s.call(tt.prototype)}}else{try{throw Error()}catch(Y){G=Y}(tt=s())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],S=m[1];if(E&&S){var k=E.split(`
`),F=S.split(`
`);for(g=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(u===k.length||g===F.length)for(u=k.length-1,g=F.length-1;1<=u&&0<=g&&k[u]!==F[g];)g--;for(;1<=u&&0<=g;u--,g--)if(k[u]!==F[g]){if(u!==1||g!==1)do if(u--,g--,0>g||k[u]!==F[g]){var W=`
`+k[u].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=u&&0<=g);break}}}finally{Va=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Fi(l):""}function hl(s){switch(s.tag){case 26:case 27:case 5:return Fi(s.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return La(s.type,!1);case 11:return La(s.type.render,!1);case 1:return La(s.type,!0);case 31:return Fi("Activity");default:return""}}function Ua(s){try{var r="";do r+=hl(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fl(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function md(s){var r=fl(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),u=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,m=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function za(s){s._valueTracker||(s._valueTracker=md(s))}function dl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return s&&(u=fl(s)?s.checked?"true":"false":s.value),s=u,s!==l?(r.setValue(s),!0):!1}function kr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var yd=/[\n"\\]/g;function Ee(s){return s.replace(yd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Tn(s,r,l,u,g,m,E,S){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+un(r)):s.value!==""+un(r)&&(s.value=""+un(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?Is(s,E,un(r)):l!=null?Is(s,E,un(l)):u!=null&&s.removeAttribute("value"),g==null&&m!=null&&(s.defaultChecked=!!m),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+un(S):s.removeAttribute("name")}function Nr(s,r,l,u,g,m,E,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(s.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;l=l!=null?""+un(l):"",r=r!=null?""+un(r):l,S||r===s.value||(s.value=r),s.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=S?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function Is(s,r,l){r==="number"&&kr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function qi(s,r,l,u){if(s=s.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=r.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+un(l),r=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function Zt(s,r,l){if(r!=null&&(r=""+un(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+un(l):""}function Pr(s,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(i(92));if(At(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=un(r),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function On(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(s,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,l):typeof l!="number"||l===0||Vr.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function gl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&l[g]!==u&&vu(s,g,u)}else for(var m in r)r.hasOwnProperty(m)&&vu(s,m,r[m])}function pl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(s){return vd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Gi=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yi=null,Ki=null;function ml(s){var r=ci(s);if(r&&(s=r.stateNode)){var l=s[Te]||null;t:switch(s=r.stateNode,r.type){case"input":if(Tn(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ee(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==s&&u.form===s.form){var g=u[Te]||null;if(!g)throw Error(i(90));Tn(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===s.form&&dl(u)}break t;case"textarea":Zt(s,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&qi(s,!!l.multiple,r,!1)}}}var fi=!1;function bu(s,r,l){if(fi)return s(r,l);fi=!0;try{var u=s(r);return u}finally{if(fi=!1,(Yi!==null||Ki!==null)&&(dh(),Yi&&(r=Yi,s=Ki,Ki=Yi=null,ml(r),s)))for(r=0;r<s.length;r++)ml(s[r])}}function Lr(s,r){var l=s.stateNode;if(l===null)return null;var u=l[Te]||null;if(u===null)return null;l=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(Zn)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{Nn=!1}var di=null,Ds=null,Qi=null;function yl(){if(Qi)return Qi;var s,r=Ds,l=r.length,u,g="value"in di?di.value:di.textContent,m=g.length;for(s=0;s<l&&r[s]===g[s];s++);var E=l-s;for(u=1;u<=E&&r[l-u]===g[m-u];u++);return Qi=g.slice(s,1<u?1-u:void 0)}function gi(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function pi(){return!0}function _l(){return!1}function Ve(s){function r(l,u,g,m,E){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?pi:_l,this.isPropagationStopped=_l,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=pi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=pi)},persist:function(){},isPersistent:pi}),r}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Ve(Gt),zr=y({},Gt,{view:0,detail:0}),Tu=Ve(zr),Ha,Fa,mi,Br=y({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==mi&&(mi&&s.type==="mousemove"?(Ha=s.screenX-mi.screenX,Fa=s.screenY-mi.screenY):Fa=Ha=0,mi=s),Ha)},movementY:function(s){return"movementY"in s?s.movementY:Fa}}),Pn=Ve(Br),Eu=y({},Br,{dataTransfer:0}),bd=Ve(Eu),jr=y({},zr,{relatedTarget:0}),qa=Ve(jr),vl=y({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ga=Ve(vl),Su=y({},Gt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ya=Ve(Su),Td=y({},Gt,{data:0}),bl=Ve(Td),Hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tl(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=wu[s])?!!r[s]:!1}function Fr(){return Tl}var xu=y({},zr,{key:function(s){if(s.key){var r=Hr[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=gi(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Au[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(s){return s.type==="keypress"?gi(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?gi(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ka=Ve(xu),Ru=y({},Br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),El=Ve(Ru),Xi=y({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Cu=Ve(Xi),Iu=y({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Du=Ve(Iu),Mu=y({},Br,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Qa=Ve(Mu),hn=y({},Gt,{newState:0,oldState:0}),Ou=Ve(hn),ku=[9,13,27,32],yi=Zn&&"CompositionEvent"in window,f=null;Zn&&"documentMode"in document&&(f=document.documentMode);var _=Zn&&"TextEvent"in window&&!f,T=Zn&&(!yi||f&&8<f&&11>=f),w=" ",j=!1;function Q(s,r){switch(s){case"keyup":return ku.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Lt=!1;function De(s,r){switch(s){case"compositionend":return lt(r);case"keypress":return r.which!==32?null:(j=!0,w);case"textInput":return s=r.data,s===w&&j?null:s;default:return null}}function Ut(s,r){if(Lt)return s==="compositionend"||!yi&&Q(s,r)?(s=yl(),Qi=Ds=di=null,Lt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return T&&r.locale!=="ko"?null:r.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Me(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Le[s.type]:r==="textarea"}function Wi(s,r,l,u){Yi?Ki?Ki.push(u):Ki=[u]:Yi=u,r=vh(r,"onChange"),0<r.length&&(l=new ja("onChange","change",null,l,u),s.push({event:l,listeners:r}))}var Ye=null,_i=null;function Sl(s){u0(s,0)}function Nu(s){var r=ui(s);if(dl(r))return s}function My(s,r){if(s==="change")return r}var Oy=!1;if(Zn){var Ed;if(Zn){var Sd="oninput"in document;if(!Sd){var ky=document.createElement("div");ky.setAttribute("oninput","return;"),Sd=typeof ky.oninput=="function"}Ed=Sd}else Ed=!1;Oy=Ed&&(!document.documentMode||9<document.documentMode)}function Ny(){Ye&&(Ye.detachEvent("onpropertychange",Py),_i=Ye=null)}function Py(s){if(s.propertyName==="value"&&Nu(_i)){var r=[];Wi(r,_i,s,kn(s)),bu(Sl,r)}}function JA(s,r,l){s==="focusin"?(Ny(),Ye=r,_i=l,Ye.attachEvent("onpropertychange",Py)):s==="focusout"&&Ny()}function tw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Nu(_i)}function ew(s,r){if(s==="click")return Nu(r)}function nw(s,r){if(s==="input"||s==="change")return Nu(r)}function iw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var En=typeof Object.is=="function"?Object.is:iw;function Al(s,r){if(En(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Er.call(r,g)||!En(s[g],r[g]))return!1}return!0}function Vy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ly(s,r){var l=Vy(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=r&&u>=r)return{node:l,offset:r-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Vy(l)}}function Uy(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Uy(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function zy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=kr(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=kr(s.document)}return r}function Ad(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var sw=Zn&&"documentMode"in document&&11>=document.documentMode,Xa=null,wd=null,wl=null,xd=!1;function By(s,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xd||Xa==null||Xa!==kr(u)||(u=Xa,"selectionStart"in u&&Ad(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wl&&Al(wl,u)||(wl=u,u=vh(wd,"onSelect"),0<u.length&&(r=new ja("onSelect","select",null,r,l),s.push({event:r,listeners:u}),r.target=Xa)))}function qr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Wa={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},Rd={},jy={};Zn&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function Gr(s){if(Rd[s])return Rd[s];if(!Wa[s])return s;var r=Wa[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in jy)return Rd[s]=r[l];return s}var Hy=Gr("animationend"),Fy=Gr("animationiteration"),qy=Gr("animationstart"),rw=Gr("transitionrun"),aw=Gr("transitionstart"),ow=Gr("transitioncancel"),Gy=Gr("transitionend"),Yy=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function Jn(s,r){Yy.set(s,r),$n(r,[s])}var Ky=new WeakMap;function Vn(s,r){if(typeof s=="object"&&s!==null){var l=Ky.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Ua(r)},Ky.set(s,r),r)}return{value:s,source:r,stack:Ua(r)}}var Ln=[],$a=0,Id=0;function Pu(){for(var s=$a,r=Id=$a=0;r<s;){var l=Ln[r];Ln[r++]=null;var u=Ln[r];Ln[r++]=null;var g=Ln[r];Ln[r++]=null;var m=Ln[r];if(Ln[r++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}m!==0&&Qy(l,g,m)}}function Vu(s,r,l,u){Ln[$a++]=s,Ln[$a++]=r,Ln[$a++]=l,Ln[$a++]=u,Id|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Dd(s,r,l,u){return Vu(s,r,l,u),Lu(s)}function Za(s,r){return Vu(s,null,null,r),Lu(s)}function Qy(s,r,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,m=s.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(s=m.stateNode,s===null||s._visibility&1||(g=!0)),s=m,m=m.return;return s.tag===3?(m=s.stateNode,g&&r!==null&&(g=31-Je(l),s=m.hiddenUpdates,u=s[g],u===null?s[g]=[r]:u.push(r),r.lane=l|536870912),m):null}function Lu(s){if(50<Wl)throw Wl=0,Vg=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Ja={};function lw(s,r,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(s,r,l,u){return new lw(s,r,l,u)}function Md(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $i(s,r){var l=s.alternate;return l===null?(l=Sn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Xy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Uu(s,r,l,u,g,m){var E=0;if(u=s,typeof s=="function")Md(s)&&(E=1);else if(typeof s=="string")E=ux(s,l,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case C:return s=Sn(31,l,r,g),s.elementType=C,s.lanes=m,s;case R:return Yr(l.children,g,m,r);case M:E=8,g|=24;break;case I:return s=Sn(12,l,r,g|2),s.elementType=I,s.lanes=m,s;case X:return s=Sn(13,l,r,g),s.elementType=X,s.lanes=m,s;case ot:return s=Sn(19,l,r,g),s.elementType=ot,s.lanes=m,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case q:case et:E=10;break t;case Z:E=9;break t;case at:E=11;break t;case D:E=14;break t;case x:E=16,u=null;break t}E=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return r=Sn(E,l,r,g),r.elementType=s,r.type=u,r.lanes=m,r}function Yr(s,r,l,u){return s=Sn(7,s,u,r),s.lanes=l,s}function Od(s,r,l){return s=Sn(6,s,null,r),s.lanes=l,s}function kd(s,r,l){return r=Sn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var to=[],eo=0,zu=null,Bu=0,Un=[],zn=0,Kr=null,Zi=1,Ji="";function Qr(s,r){to[eo++]=Bu,to[eo++]=zu,zu=s,Bu=r}function Wy(s,r,l){Un[zn++]=Zi,Un[zn++]=Ji,Un[zn++]=Kr,Kr=s;var u=Zi;s=Ji;var g=32-Je(u)-1;u&=~(1<<g),l+=1;var m=32-Je(r)+g;if(30<m){var E=g-g%5;m=(u&(1<<E)-1).toString(32),u>>=E,g-=E,Zi=1<<32-Je(r)+g|l<<g|u,Ji=m+s}else Zi=1<<m|l<<g|u,Ji=s}function Nd(s){s.return!==null&&(Qr(s,1),Wy(s,1,0))}function Pd(s){for(;s===zu;)zu=to[--eo],to[eo]=null,Bu=to[--eo],to[eo]=null;for(;s===Kr;)Kr=Un[--zn],Un[zn]=null,Ji=Un[--zn],Un[zn]=null,Zi=Un[--zn],Un[zn]=null}var fn=null,ge=null,Ft=!1,Xr=null,vi=!1,Vd=Error(i(519));function Wr(s){var r=Error(i(418,""));throw Cl(Vn(r,s)),Vd}function $y(s){var r=s.stateNode,l=s.type,u=s.memoizedProps;switch(r[Ie]=s,r[Te]=u,l){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(l=0;l<Zl.length;l++)Ot(Zl[l],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":Ot("invalid",r),Nr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),za(r);break;case"select":Ot("invalid",r);break;case"textarea":Ot("invalid",r),Pr(r,u.value,u.defaultValue,u.children),za(r)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||g0(r.textContent,l)?(u.popover!=null&&(Ot("beforetoggle",r),Ot("toggle",r)),u.onScroll!=null&&Ot("scroll",r),u.onScrollEnd!=null&&Ot("scrollend",r),u.onClick!=null&&(r.onclick=bh),r=!0):r=!1,r||Wr(s)}function Zy(s){for(fn=s.return;fn;)switch(fn.tag){case 5:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:fn=fn.return}}function xl(s){if(s!==fn)return!1;if(!Ft)return Zy(s),Ft=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Zg(s.type,s.memoizedProps)),l=!l),l&&ge&&Wr(s),Zy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){ge=ei(s.nextSibling);break t}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}ge=null}}else r===27?(r=ge,Ys(s.type)?(s=np,np=null,ge=s):ge=r):ge=fn?ei(s.stateNode.nextSibling):null;return!0}function Rl(){ge=fn=null,Ft=!1}function Jy(){var s=Xr;return s!==null&&(pn===null?pn=s:pn.push.apply(pn,s),Xr=null),s}function Cl(s){Xr===null?Xr=[s]:Xr.push(s)}var Ld=it(null),$r=null,ts=null;function Ms(s,r,l){st(Ld,r._currentValue),r._currentValue=l}function es(s){s._currentValue=Ld.current,ct(Ld)}function Ud(s,r,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===l)break;s=s.return}}function zd(s,r,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var m=g.dependencies;if(m!==null){var E=g.child;m=m.firstContext;t:for(;m!==null;){var S=m;m=g;for(var k=0;k<r.length;k++)if(S.context===r[k]){m.lanes|=l,S=m.alternate,S!==null&&(S.lanes|=l),Ud(m.return,l,s),u||(E=null);break t}m=S.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=l,m=E.alternate,m!==null&&(m.lanes|=l),Ud(E,l,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Il(s,r,l,u){s=null;for(var g=r,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=g.type;En(g.pendingProps.value,E.value)||(s!==null?s.push(S):s=[S])}}else if(g===Pe.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(sc):s=[sc])}g=g.return}s!==null&&zd(r,s,l,u),r.flags|=262144}function ju(s){for(s=s.firstContext;s!==null;){if(!En(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zr(s){$r=s,ts=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return t_($r,s)}function Hu(s,r){return $r===null&&Zr(s),t_(s,r)}function t_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ts===null){if(s===null)throw Error(i(308));ts=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ts=ts.next=r;return l}var cw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},uw=n.unstable_scheduleCallback,hw=n.unstable_NormalPriority,Oe={$$typeof:et,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new cw,data:new Map,refCount:0}}function Dl(s){s.refCount--,s.refCount===0&&uw(hw,function(){s.controller.abort()})}var Ml=null,jd=0,no=0,io=null;function fw(s,r){if(Ml===null){var l=Ml=[];jd=0,no=Fg(),io={status:"pending",value:void 0,then:function(u){l.push(u)}}}return jd++,r.then(e_,e_),r}function e_(){if(--jd===0&&Ml!==null){io!==null&&(io.status="fulfilled");var s=Ml;Ml=null,no=0,io=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function dw(s,r){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var n_=K.S;K.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&fw(s,r),n_!==null&&n_(s,r)};var Jr=it(null);function Hd(){var s=Jr.current;return s!==null?s:se.pooledCache}function Fu(s,r){r===null?st(Jr,Jr.current):st(Jr,r.pool)}function i_(){var s=Hd();return s===null?null:{parent:Oe._currentValue,pool:s}}var Ol=Error(i(460)),s_=Error(i(474)),qu=Error(i(542)),Fd={then:function(){}};function r_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Gu(){}function a_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Gu,Gu),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,l_(s),s;default:if(typeof r.status=="string")r.then(Gu,Gu);else{if(s=se,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,l_(s),s}throw kl=r,Ol}}var kl=null;function o_(){if(kl===null)throw Error(i(459));var s=kl;return kl=null,s}function l_(s){if(s===Ol||s===qu)throw Error(i(483))}var Os=!1;function qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ks(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ns(s,r,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Qt&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=Lu(s),Qy(s,null,l),r}return Vu(s,u,r,l),Lu(s)}function Nl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,ll(s,l)}}function Yd(s,r){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?g=m=E:m=m.next=E,l=l.next}while(l!==null);m===null?g=m=r:m=m.next=r}else g=m=r;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Kd=!1;function Pl(){if(Kd){var s=io;if(s!==null)throw s}}function Vl(s,r,l,u){Kd=!1;var g=s.updateQueue;Os=!1;var m=g.firstBaseUpdate,E=g.lastBaseUpdate,S=g.shared.pending;if(S!==null){g.shared.pending=null;var k=S,F=k.next;k.next=null,E===null?m=F:E.next=F,E=k;var W=s.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==E&&(S===null?W.firstBaseUpdate=F:S.next=F,W.lastBaseUpdate=k))}if(m!==null){var tt=g.baseState;E=0,W=F=k=null,S=m;do{var G=S.lane&-536870913,Y=G!==S.lane;if(Y?(zt&G)===G:(u&G)===G){G!==0&&G===no&&(Kd=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Tt=s,_t=S;G=r;var ee=l;switch(_t.tag){case 1:if(Tt=_t.payload,typeof Tt=="function"){tt=Tt.call(ee,tt,G);break t}tt=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=_t.payload,G=typeof Tt=="function"?Tt.call(ee,tt,G):Tt,G==null)break t;tt=y({},tt,G);break t;case 2:Os=!0}}G=S.callback,G!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=g.callbacks,Y===null?g.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(F=W=Y,k=tt):W=W.next=Y,E|=G;if(S=S.next,S===null){if(S=g.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,g.lastBaseUpdate=Y,g.shared.pending=null}}while(!0);W===null&&(k=tt),g.baseState=k,g.firstBaseUpdate=F,g.lastBaseUpdate=W,m===null&&(g.shared.lanes=0),Hs|=E,s.lanes=E,s.memoizedState=tt}}function c_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function u_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)c_(l[s],r)}var so=it(null),Yu=it(0);function h_(s,r){s=ls,st(Yu,s),st(so,r),ls=s|r.baseLanes}function Qd(){st(Yu,ls),st(so,so.current)}function Xd(){ls=Yu.current,ct(so),ct(Yu)}var Ps=0,It=null,Jt=null,Se=null,Ku=!1,ro=!1,ta=!1,Qu=0,Ll=0,ao=null,gw=0;function ye(){throw Error(i(321))}function Wd(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!En(s[l],r[l]))return!1;return!0}function $d(s,r,l,u,g,m){return Ps=m,It=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=s===null||s.memoizedState===null?Q_:X_,ta=!1,m=l(u,g),ta=!1,ro&&(m=d_(r,l,u,g)),f_(s),m}function f_(s){K.H=th;var r=Jt!==null&&Jt.next!==null;if(Ps=0,Se=Jt=It=null,Ku=!1,Ll=0,ao=null,r)throw Error(i(300));s===null||Ue||(s=s.dependencies,s!==null&&ju(s)&&(Ue=!0))}function d_(s,r,l,u){It=s;var g=0;do{if(ro&&(ao=null),Ll=0,ro=!1,25<=g)throw Error(i(301));if(g+=1,Se=Jt=null,s.updateQueue!=null){var m=s.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=Tw,m=r(l,u)}while(ro);return m}function pw(){var s=K.H,r=s.useState()[0];return r=typeof r.then=="function"?Ul(r):r,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(It.flags|=1024),r}function Zd(){var s=Qu!==0;return Qu=0,s}function Jd(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function tg(s){if(Ku){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ku=!1}Ps=0,Se=Jt=It=null,ro=!1,Ll=Qu=0,ao=null}function dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?It.memoizedState=Se=s:Se=Se.next=s,Se}function Ae(){if(Jt===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var r=Se===null?It.memoizedState:Se.next;if(r!==null)Se=r,Jt=s;else{if(s===null)throw It.alternate===null?Error(i(467)):Error(i(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Se===null?It.memoizedState=Se=s:Se=Se.next=s}return Se}function eg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(s){var r=Ll;return Ll+=1,ao===null&&(ao=[]),s=a_(ao,s,r),r=It,(Se===null?r.memoizedState:Se.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?Q_:X_),s}function Xu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ul(s);if(s.$$typeof===et)return tn(s)}throw Error(i(438,String(s)))}function ng(s){var r=null,l=It.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=It.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=eg(),It.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),u=0;u<s;u++)l[u]=P;return r.index++,l}function ns(s,r){return typeof r=="function"?r(s):r}function Wu(s){var r=Ae();return ig(r,Jt,s)}function ig(s,r,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var g=s.baseQueue,m=u.pending;if(m!==null){if(g!==null){var E=g.next;g.next=m.next,m.next=E}r.baseQueue=g=m,u.pending=null}if(m=s.baseState,g===null)s.memoizedState=m;else{r=g.next;var S=E=null,k=null,F=r,W=!1;do{var tt=F.lane&-536870913;if(tt!==F.lane?(zt&tt)===tt:(Ps&tt)===tt){var G=F.revertLane;if(G===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),tt===no&&(W=!0);else if((Ps&G)===G){F=F.next,G===no&&(W=!0);continue}else tt={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=tt,E=m):k=k.next=tt,It.lanes|=G,Hs|=G;tt=F.action,ta&&l(m,tt),m=F.hasEagerState?F.eagerState:l(m,tt)}else G={lane:tt,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(S=k=G,E=m):k=k.next=G,It.lanes|=tt,Hs|=tt;F=F.next}while(F!==null&&F!==r);if(k===null?E=m:k.next=S,!En(m,s.memoizedState)&&(Ue=!0,W&&(l=io,l!==null)))throw l;s.memoizedState=m,s.baseState=E,s.baseQueue=k,u.lastRenderedState=m}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function sg(s){var r=Ae(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,m=r.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do m=s(m,E.action),E=E.next;while(E!==g);En(m,r.memoizedState)||(Ue=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,u]}function g_(s,r,l){var u=It,g=Ae(),m=Ft;if(m){if(l===void 0)throw Error(i(407));l=l()}else l=r();var E=!En((Jt||g).memoizedState,l);E&&(g.memoizedState=l,Ue=!0),g=g.queue;var S=y_.bind(null,u,g,s);if(zl(2048,8,S,[s]),g.getSnapshot!==r||E||Se!==null&&Se.memoizedState.tag&1){if(u.flags|=2048,oo(9,$u(),m_.bind(null,u,g,l,r),null),se===null)throw Error(i(349));m||(Ps&124)!==0||p_(u,r,l)}return l}function p_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=It.updateQueue,r===null?(r=eg(),It.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function m_(s,r,l,u){r.value=l,r.getSnapshot=u,__(r)&&v_(s)}function y_(s,r,l){return l(function(){__(r)&&v_(s)})}function __(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!En(s,l)}catch{return!0}}function v_(s){var r=Za(s,2);r!==null&&Cn(r,s,2)}function rg(s){var r=dn();if(typeof s=="function"){var l=s;if(s=l(),ta){bn(!0);try{l()}finally{bn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:s},r}function b_(s,r,l,u){return s.baseState=l,ig(s,Jt,typeof u=="function"?u:ns)}function mw(s,r,l,u,g){if(Ju(s))throw Error(i(485));if(s=r.action,s!==null){var m={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};K.T!==null?l(!0):m.isTransition=!1,u(m),l=r.pending,l===null?(m.next=r.pending=m,T_(r,m)):(m.next=l.next,r.pending=l.next=m)}}function T_(s,r){var l=r.action,u=r.payload,g=s.state;if(r.isTransition){var m=K.T,E={};K.T=E;try{var S=l(g,u),k=K.S;k!==null&&k(E,S),E_(s,r,S)}catch(F){ag(s,r,F)}finally{K.T=m}}else try{m=l(g,u),E_(s,r,m)}catch(F){ag(s,r,F)}}function E_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){S_(s,r,u)},function(u){return ag(s,r,u)}):S_(s,r,l)}function S_(s,r,l){r.status="fulfilled",r.value=l,A_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,T_(s,l)))}function ag(s,r,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,A_(r),r=r.next;while(r!==u)}s.action=null}function A_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function w_(s,r){return r}function x_(s,r){if(Ft){var l=se.formState;if(l!==null){t:{var u=It;if(Ft){if(ge){e:{for(var g=ge,m=vi;g.nodeType!==8;){if(!m){g=null;break e}if(g=ei(g.nextSibling),g===null){g=null;break e}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){ge=ei(g.nextSibling),u=g.data==="F!";break t}}Wr(u)}u=!1}u&&(r=l[0])}}return l=dn(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w_,lastRenderedState:r},l.queue=u,l=G_.bind(null,It,u),u.dispatch=l,u=rg(!1),m=hg.bind(null,It,!1,u.queue),u=dn(),g={state:r,dispatch:null,action:s,pending:null},u.queue=g,l=mw.bind(null,It,g,m,l),g.dispatch=l,u.memoizedState=s,[r,l,!1]}function R_(s){var r=Ae();return C_(r,Jt,s)}function C_(s,r,l){if(r=ig(s,r,w_)[0],s=Wu(ns)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Ul(r)}catch(E){throw E===Ol?qu:E}else u=r;r=Ae();var g=r.queue,m=g.dispatch;return l!==r.memoizedState&&(It.flags|=2048,oo(9,$u(),yw.bind(null,g,l),null)),[u,m,s]}function yw(s,r){s.action=r}function I_(s){var r=Ae(),l=Jt;if(l!==null)return C_(r,l,s);Ae(),r=r.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[r,u,!1]}function oo(s,r,l,u){return s={tag:s,create:l,deps:u,inst:r,next:null},r=It.updateQueue,r===null&&(r=eg(),It.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,r.lastEffect=s),s}function $u(){return{destroy:void 0,resource:void 0}}function D_(){return Ae().memoizedState}function Zu(s,r,l,u){var g=dn();u=u===void 0?null:u,It.flags|=s,g.memoizedState=oo(1|r,$u(),l,u)}function zl(s,r,l,u){var g=Ae();u=u===void 0?null:u;var m=g.memoizedState.inst;Jt!==null&&u!==null&&Wd(u,Jt.memoizedState.deps)?g.memoizedState=oo(r,m,l,u):(It.flags|=s,g.memoizedState=oo(1|r,m,l,u))}function M_(s,r){Zu(8390656,8,s,r)}function O_(s,r){zl(2048,8,s,r)}function k_(s,r){return zl(4,2,s,r)}function N_(s,r){return zl(4,4,s,r)}function P_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function V_(s,r,l){l=l!=null?l.concat([s]):null,zl(4,4,P_.bind(null,r,s),l)}function og(){}function L_(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&Wd(r,u[1])?u[0]:(l.memoizedState=[s,r],s)}function U_(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&Wd(r,u[1]))return u[0];if(u=s(),ta){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[u,r],u}function lg(s,r,l){return l===void 0||(Ps&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=jv(),It.lanes|=s,Hs|=s,l)}function z_(s,r,l,u){return En(l,r)?l:so.current!==null?(s=lg(s,l,u),En(s,r)||(Ue=!0),s):(Ps&42)===0?(Ue=!0,s.memoizedState=l):(s=jv(),It.lanes|=s,Hs|=s,r)}function B_(s,r,l,u,g){var m=rt.p;rt.p=m!==0&&8>m?m:8;var E=K.T,S={};K.T=S,hg(s,!1,r,l);try{var k=g(),F=K.S;if(F!==null&&F(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=dw(k,u);Bl(s,r,W,Rn(s))}else Bl(s,r,u,Rn(s))}catch(tt){Bl(s,r,{then:function(){},status:"rejected",reason:tt},Rn())}finally{rt.p=m,K.T=E}}function _w(){}function cg(s,r,l,u){if(s.tag!==5)throw Error(i(476));var g=j_(s).queue;B_(s,g,r,gt,l===null?_w:function(){return H_(s),l(u)})}function j_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:gt},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function H_(s){var r=j_(s).next.queue;Bl(s,r,{},Rn())}function ug(){return tn(sc)}function F_(){return Ae().memoizedState}function q_(){return Ae().memoizedState}function vw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Rn();s=ks(l);var u=Ns(r,s,l);u!==null&&(Cn(u,r,l),Nl(u,r,l)),r={cache:Bd()},s.payload=r;return}r=r.return}}function bw(s,r,l){var u=Rn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ju(s)?Y_(r,l):(l=Dd(s,r,l,u),l!==null&&(Cn(l,s,u),K_(l,r,u)))}function G_(s,r,l){var u=Rn();Bl(s,r,l,u)}function Bl(s,r,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ju(s))Y_(r,g);else{var m=s.alternate;if(s.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var E=r.lastRenderedState,S=m(E,l);if(g.hasEagerState=!0,g.eagerState=S,En(S,E))return Vu(s,r,g,0),se===null&&Pu(),!1}catch{}finally{}if(l=Dd(s,r,g,u),l!==null)return Cn(l,s,u),K_(l,r,u),!0}return!1}function hg(s,r,l,u){if(u={lane:2,revertLane:Fg(),action:u,hasEagerState:!1,eagerState:null,next:null},Ju(s)){if(r)throw Error(i(479))}else r=Dd(s,l,u,2),r!==null&&Cn(r,s,2)}function Ju(s){var r=s.alternate;return s===It||r!==null&&r===It}function Y_(s,r){ro=Ku=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function K_(s,r,l){if((l&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,ll(s,l)}}var th={readContext:tn,use:Xu,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye},Q_={readContext:tn,use:Xu,useCallback:function(s,r){return dn().memoizedState=[s,r===void 0?null:r],s},useContext:tn,useEffect:M_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Zu(4194308,4,P_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Zu(4194308,4,s,r)},useInsertionEffect:function(s,r){Zu(4,2,s,r)},useMemo:function(s,r){var l=dn();r=r===void 0?null:r;var u=s();if(ta){bn(!0);try{s()}finally{bn(!1)}}return l.memoizedState=[u,r],u},useReducer:function(s,r,l){var u=dn();if(l!==void 0){var g=l(r);if(ta){bn(!0);try{l(r)}finally{bn(!1)}}}else g=r;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=bw.bind(null,It,s),[u.memoizedState,s]},useRef:function(s){var r=dn();return s={current:s},r.memoizedState=s},useState:function(s){s=rg(s);var r=s.queue,l=G_.bind(null,It,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:og,useDeferredValue:function(s,r){var l=dn();return lg(l,s,r)},useTransition:function(){var s=rg(!1);return s=B_.bind(null,It,s.queue,!0,!1),dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var u=It,g=dn();if(Ft){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),se===null)throw Error(i(349));(zt&124)!==0||p_(u,r,l)}g.memoizedState=l;var m={value:l,getSnapshot:r};return g.queue=m,M_(y_.bind(null,u,m,s),[s]),u.flags|=2048,oo(9,$u(),m_.bind(null,u,m,l,r),null),l},useId:function(){var s=dn(),r=se.identifierPrefix;if(Ft){var l=Ji,u=Zi;l=(u&~(1<<32-Je(u)-1)).toString(32)+l,r=""+r+"R"+l,l=Qu++,0<l&&(r+="H"+l.toString(32)),r+=""}else l=gw++,r=""+r+"r"+l.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:ug,useFormState:x_,useActionState:x_,useOptimistic:function(s){var r=dn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=hg.bind(null,It,!0,l),l.dispatch=r,[s,r]},useMemoCache:ng,useCacheRefresh:function(){return dn().memoizedState=vw.bind(null,It)}},X_={readContext:tn,use:Xu,useCallback:L_,useContext:tn,useEffect:O_,useImperativeHandle:V_,useInsertionEffect:k_,useLayoutEffect:N_,useMemo:U_,useReducer:Wu,useRef:D_,useState:function(){return Wu(ns)},useDebugValue:og,useDeferredValue:function(s,r){var l=Ae();return z_(l,Jt.memoizedState,s,r)},useTransition:function(){var s=Wu(ns)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:Ul(s),r]},useSyncExternalStore:g_,useId:F_,useHostTransitionStatus:ug,useFormState:R_,useActionState:R_,useOptimistic:function(s,r){var l=Ae();return b_(l,Jt,s,r)},useMemoCache:ng,useCacheRefresh:q_},Tw={readContext:tn,use:Xu,useCallback:L_,useContext:tn,useEffect:O_,useImperativeHandle:V_,useInsertionEffect:k_,useLayoutEffect:N_,useMemo:U_,useReducer:sg,useRef:D_,useState:function(){return sg(ns)},useDebugValue:og,useDeferredValue:function(s,r){var l=Ae();return Jt===null?lg(l,s,r):z_(l,Jt.memoizedState,s,r)},useTransition:function(){var s=sg(ns)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:Ul(s),r]},useSyncExternalStore:g_,useId:F_,useHostTransitionStatus:ug,useFormState:I_,useActionState:I_,useOptimistic:function(s,r){var l=Ae();return Jt!==null?b_(l,Jt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ng,useCacheRefresh:q_},lo=null,jl=0;function eh(s){var r=jl;return jl+=1,lo===null&&(lo=[]),a_(lo,s,r)}function Hl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function nh(s,r){throw r.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function W_(s){var r=s._init;return r(s._payload)}function $_(s){function r(B,U){if(s){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function l(B,U){if(!s)return null;for(;U!==null;)r(B,U),U=U.sibling;return null}function u(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function g(B,U){return B=$i(B,U),B.index=0,B.sibling=null,B}function m(B,U,H){return B.index=H,s?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function E(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function S(B,U,H,$){return U===null||U.tag!==6?(U=Od(H,B.mode,$),U.return=B,U):(U=g(U,H),U.return=B,U)}function k(B,U,H,$){var ft=H.type;return ft===R?W(B,U,H.props.children,$,H.key):U!==null&&(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&W_(ft)===U.type)?(U=g(U,H.props),Hl(U,H),U.return=B,U):(U=Uu(H.type,H.key,H.props,null,B.mode,$),Hl(U,H),U.return=B,U)}function F(B,U,H,$){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=kd(H,B.mode,$),U.return=B,U):(U=g(U,H.children||[]),U.return=B,U)}function W(B,U,H,$,ft){return U===null||U.tag!==7?(U=Yr(H,B.mode,$,ft),U.return=B,U):(U=g(U,H),U.return=B,U)}function tt(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Od(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return H=Uu(U.type,U.key,U.props,null,B.mode,H),Hl(H,U),H.return=B,H;case A:return U=kd(U,B.mode,H),U.return=B,U;case x:var $=U._init;return U=$(U._payload),tt(B,U,H)}if(At(U)||L(U))return U=Yr(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return tt(B,eh(U),H);if(U.$$typeof===et)return tt(B,Hu(B,U),H);nh(B,U)}return null}function G(B,U,H,$){var ft=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ft!==null?null:S(B,U,""+H,$);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===ft?k(B,U,H,$):null;case A:return H.key===ft?F(B,U,H,$):null;case x:return ft=H._init,H=ft(H._payload),G(B,U,H,$)}if(At(H)||L(H))return ft!==null?null:W(B,U,H,$,null);if(typeof H.then=="function")return G(B,U,eh(H),$);if(H.$$typeof===et)return G(B,U,Hu(B,H),$);nh(B,H)}return null}function Y(B,U,H,$,ft){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return B=B.get(H)||null,S(U,B,""+$,ft);if(typeof $=="object"&&$!==null){switch($.$$typeof){case b:return B=B.get($.key===null?H:$.key)||null,k(U,B,$,ft);case A:return B=B.get($.key===null?H:$.key)||null,F(U,B,$,ft);case x:var Dt=$._init;return $=Dt($._payload),Y(B,U,H,$,ft)}if(At($)||L($))return B=B.get(H)||null,W(U,B,$,ft,null);if(typeof $.then=="function")return Y(B,U,H,eh($),ft);if($.$$typeof===et)return Y(B,U,H,Hu(U,$),ft);nh(U,$)}return null}function Tt(B,U,H,$){for(var ft=null,Dt=null,pt=U,vt=U=0,Be=null;pt!==null&&vt<H.length;vt++){pt.index>vt?(Be=pt,pt=null):Be=pt.sibling;var Ht=G(B,pt,H[vt],$);if(Ht===null){pt===null&&(pt=Be);break}s&&pt&&Ht.alternate===null&&r(B,pt),U=m(Ht,U,vt),Dt===null?ft=Ht:Dt.sibling=Ht,Dt=Ht,pt=Be}if(vt===H.length)return l(B,pt),Ft&&Qr(B,vt),ft;if(pt===null){for(;vt<H.length;vt++)pt=tt(B,H[vt],$),pt!==null&&(U=m(pt,U,vt),Dt===null?ft=pt:Dt.sibling=pt,Dt=pt);return Ft&&Qr(B,vt),ft}for(pt=u(pt);vt<H.length;vt++)Be=Y(pt,B,vt,H[vt],$),Be!==null&&(s&&Be.alternate!==null&&pt.delete(Be.key===null?vt:Be.key),U=m(Be,U,vt),Dt===null?ft=Be:Dt.sibling=Be,Dt=Be);return s&&pt.forEach(function($s){return r(B,$s)}),Ft&&Qr(B,vt),ft}function _t(B,U,H,$){if(H==null)throw Error(i(151));for(var ft=null,Dt=null,pt=U,vt=U=0,Be=null,Ht=H.next();pt!==null&&!Ht.done;vt++,Ht=H.next()){pt.index>vt?(Be=pt,pt=null):Be=pt.sibling;var $s=G(B,pt,Ht.value,$);if($s===null){pt===null&&(pt=Be);break}s&&pt&&$s.alternate===null&&r(B,pt),U=m($s,U,vt),Dt===null?ft=$s:Dt.sibling=$s,Dt=$s,pt=Be}if(Ht.done)return l(B,pt),Ft&&Qr(B,vt),ft;if(pt===null){for(;!Ht.done;vt++,Ht=H.next())Ht=tt(B,Ht.value,$),Ht!==null&&(U=m(Ht,U,vt),Dt===null?ft=Ht:Dt.sibling=Ht,Dt=Ht);return Ft&&Qr(B,vt),ft}for(pt=u(pt);!Ht.done;vt++,Ht=H.next())Ht=Y(pt,B,vt,Ht.value,$),Ht!==null&&(s&&Ht.alternate!==null&&pt.delete(Ht.key===null?vt:Ht.key),U=m(Ht,U,vt),Dt===null?ft=Ht:Dt.sibling=Ht,Dt=Ht);return s&&pt.forEach(function(Ex){return r(B,Ex)}),Ft&&Qr(B,vt),ft}function ee(B,U,H,$){if(typeof H=="object"&&H!==null&&H.type===R&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:t:{for(var ft=H.key;U!==null;){if(U.key===ft){if(ft=H.type,ft===R){if(U.tag===7){l(B,U.sibling),$=g(U,H.props.children),$.return=B,B=$;break t}}else if(U.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&W_(ft)===U.type){l(B,U.sibling),$=g(U,H.props),Hl($,H),$.return=B,B=$;break t}l(B,U);break}else r(B,U);U=U.sibling}H.type===R?($=Yr(H.props.children,B.mode,$,H.key),$.return=B,B=$):($=Uu(H.type,H.key,H.props,null,B.mode,$),Hl($,H),$.return=B,B=$)}return E(B);case A:t:{for(ft=H.key;U!==null;){if(U.key===ft)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){l(B,U.sibling),$=g(U,H.children||[]),$.return=B,B=$;break t}else{l(B,U);break}else r(B,U);U=U.sibling}$=kd(H,B.mode,$),$.return=B,B=$}return E(B);case x:return ft=H._init,H=ft(H._payload),ee(B,U,H,$)}if(At(H))return Tt(B,U,H,$);if(L(H)){if(ft=L(H),typeof ft!="function")throw Error(i(150));return H=ft.call(H),_t(B,U,H,$)}if(typeof H.then=="function")return ee(B,U,eh(H),$);if(H.$$typeof===et)return ee(B,U,Hu(B,H),$);nh(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(l(B,U.sibling),$=g(U,H),$.return=B,B=$):(l(B,U),$=Od(H,B.mode,$),$.return=B,B=$),E(B)):l(B,U)}return function(B,U,H,$){try{jl=0;var ft=ee(B,U,H,$);return lo=null,ft}catch(pt){if(pt===Ol||pt===qu)throw pt;var Dt=Sn(29,pt,null,B.mode);return Dt.lanes=$,Dt.return=B,Dt}finally{}}}var co=$_(!0),Z_=$_(!1),Bn=it(null),bi=null;function Vs(s){var r=s.alternate;st(ke,ke.current&1),st(Bn,s),bi===null&&(r===null||so.current!==null||r.memoizedState!==null)&&(bi=s)}function J_(s){if(s.tag===22){if(st(ke,ke.current),st(Bn,s),bi===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(bi=s)}}else Ls()}function Ls(){st(ke,ke.current),st(Bn,Bn.current)}function is(s){ct(Bn),bi===s&&(bi=null),ct(ke)}var ke=it(0);function ih(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||ep(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function fg(s,r,l,u){r=s.memoizedState,l=l(u,r),l=l==null?r:y({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var dg={enqueueSetState:function(s,r,l){s=s._reactInternals;var u=Rn(),g=ks(u);g.payload=r,l!=null&&(g.callback=l),r=Ns(s,g,u),r!==null&&(Cn(r,s,u),Nl(r,s,u))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var u=Rn(),g=ks(u);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Ns(s,g,u),r!==null&&(Cn(r,s,u),Nl(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Rn(),u=ks(l);u.tag=2,r!=null&&(u.callback=r),r=Ns(s,u,l),r!==null&&(Cn(r,s,l),Nl(r,s,l))}};function tv(s,r,l,u,g,m,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,m,E):r.prototype&&r.prototype.isPureReactComponent?!Al(l,u)||!Al(g,m):!0}function ev(s,r,l,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==s&&dg.enqueueReplaceState(r,r.state,null)}function ea(s,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(s=s.defaultProps){l===r&&(l=y({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var sh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function nv(s){sh(s)}function iv(s){console.error(s)}function sv(s){sh(s)}function rh(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function rv(s,r,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function gg(s,r,l){return l=ks(l),l.tag=3,l.payload={element:null},l.callback=function(){rh(s,r)},l}function av(s){return s=ks(s),s.tag=3,s}function ov(s,r,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;s.payload=function(){return g(m)},s.callback=function(){rv(r,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){rv(r,l,u),typeof g!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function Ew(s,r,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&Il(r,l,g,!0),l=Bn.current,l!==null){switch(l.tag){case 13:return bi===null?Ug():l.alternate===null&&pe===0&&(pe=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Fd?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),Bg(s,u,g)),!1;case 22:return l.flags|=65536,u===Fd?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),Bg(s,u,g)),!1}throw Error(i(435,l.tag))}return Bg(s,u,g),Ug(),!1}if(Ft)return r=Bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Vd&&(s=Error(i(422),{cause:u}),Cl(Vn(s,l)))):(u!==Vd&&(r=Error(i(423),{cause:u}),Cl(Vn(r,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Vn(u,l),g=gg(s.stateNode,u,g),Yd(s,g),pe!==4&&(pe=2)),!1;var m=Error(i(520),{cause:u});if(m=Vn(m,l),Xl===null?Xl=[m]:Xl.push(m),pe!==4&&(pe=2),r===null)return!0;u=Vn(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=gg(l.stateNode,u,s),Yd(l,s),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Fs===null||!Fs.has(m))))return l.flags|=65536,g&=-g,l.lanes|=g,g=av(g),ov(g,s,l,u),Yd(l,g),!1}l=l.return}while(l!==null);return!1}var lv=Error(i(461)),Ue=!1;function Ke(s,r,l,u){r.child=s===null?Z_(r,null,l,u):co(r,s.child,l,u)}function cv(s,r,l,u,g){l=l.render;var m=r.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return Zr(r),u=$d(s,r,l,E,m,g),S=Zd(),s!==null&&!Ue?(Jd(s,r,g),ss(s,r,g)):(Ft&&S&&Nd(r),r.flags|=1,Ke(s,r,u,g),r.child)}function uv(s,r,l,u,g){if(s===null){var m=l.type;return typeof m=="function"&&!Md(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,hv(s,r,m,u,g)):(s=Uu(l.type,null,u,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(m=s.child,!Eg(s,g)){var E=m.memoizedProps;if(l=l.compare,l=l!==null?l:Al,l(E,u)&&s.ref===r.ref)return ss(s,r,g)}return r.flags|=1,s=$i(m,u),s.ref=r.ref,s.return=r,r.child=s}function hv(s,r,l,u,g){if(s!==null){var m=s.memoizedProps;if(Al(m,u)&&s.ref===r.ref)if(Ue=!1,r.pendingProps=u=m,Eg(s,g))(s.flags&131072)!==0&&(Ue=!0);else return r.lanes=s.lanes,ss(s,r,g)}return pg(s,r,l,u,g)}function fv(s,r,l){var u=r.pendingProps,g=u.children,m=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=m!==null?m.baseLanes|l:l,s!==null){for(g=r.child=s.child,m=0;g!==null;)m=m|g.lanes|g.childLanes,g=g.sibling;r.childLanes=m&~u}else r.childLanes=0,r.child=null;return dv(s,r,u,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Fu(r,m!==null?m.cachePool:null),m!==null?h_(r,m):Qd(),J_(r);else return r.lanes=r.childLanes=536870912,dv(s,r,m!==null?m.baseLanes|l:l,l)}else m!==null?(Fu(r,m.cachePool),h_(r,m),Ls(),r.memoizedState=null):(s!==null&&Fu(r,null),Qd(),Ls());return Ke(s,r,g,l),r.child}function dv(s,r,l,u){var g=Hd();return g=g===null?null:{parent:Oe._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},s!==null&&Fu(r,null),Qd(),J_(r),s!==null&&Il(s,r,u,!0),null}function ah(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function pg(s,r,l,u,g){return Zr(r),l=$d(s,r,l,u,void 0,g),u=Zd(),s!==null&&!Ue?(Jd(s,r,g),ss(s,r,g)):(Ft&&u&&Nd(r),r.flags|=1,Ke(s,r,l,g),r.child)}function gv(s,r,l,u,g,m){return Zr(r),r.updateQueue=null,l=d_(r,u,l,g),f_(s),u=Zd(),s!==null&&!Ue?(Jd(s,r,m),ss(s,r,m)):(Ft&&u&&Nd(r),r.flags|=1,Ke(s,r,l,m),r.child)}function pv(s,r,l,u,g){if(Zr(r),r.stateNode===null){var m=Ja,E=l.contextType;typeof E=="object"&&E!==null&&(m=tn(E)),m=new l(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=dg,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},qd(r),E=l.contextType,m.context=typeof E=="object"&&E!==null?tn(E):Ja,m.state=r.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(fg(r,l,E,u),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&dg.enqueueReplaceState(m,m.state,null),Vl(r,u,m,g),Pl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){m=r.stateNode;var S=r.memoizedProps,k=ea(l,S);m.props=k;var F=m.context,W=l.contextType;E=Ja,typeof W=="object"&&W!==null&&(E=tn(W));var tt=l.getDerivedStateFromProps;W=typeof tt=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||F!==E)&&ev(r,m,u,E),Os=!1;var G=r.memoizedState;m.state=G,Vl(r,u,m,g),Pl(),F=r.memoizedState,S||G!==F||Os?(typeof tt=="function"&&(fg(r,l,tt,u),F=r.memoizedState),(k=Os||tv(r,l,k,u,G,F,E))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=F),m.props=u,m.state=F,m.context=E,u=k):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,Gd(s,r),E=r.memoizedProps,W=ea(l,E),m.props=W,tt=r.pendingProps,G=m.context,F=l.contextType,k=Ja,typeof F=="object"&&F!==null&&(k=tn(F)),S=l.getDerivedStateFromProps,(F=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==tt||G!==k)&&ev(r,m,u,k),Os=!1,G=r.memoizedState,m.state=G,Vl(r,u,m,g),Pl();var Y=r.memoizedState;E!==tt||G!==Y||Os||s!==null&&s.dependencies!==null&&ju(s.dependencies)?(typeof S=="function"&&(fg(r,l,S,u),Y=r.memoizedState),(W=Os||tv(r,l,W,u,G,Y,k)||s!==null&&s.dependencies!==null&&ju(s.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Y,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Y,k)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Y),m.props=u,m.state=Y,m.context=k,u=W):(typeof m.componentDidUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&G===s.memoizedState||(r.flags|=1024),u=!1)}return m=u,ah(s,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,s!==null&&u?(r.child=co(r,s.child,null,g),r.child=co(r,null,l,g)):Ke(s,r,l,g),r.memoizedState=m.state,s=r.child):s=ss(s,r,g),s}function mv(s,r,l,u){return Rl(),r.flags|=256,Ke(s,r,l,u),r.child}var mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yg(s){return{baseLanes:s,cachePool:i_()}}function _g(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=jn),s}function yv(s,r,l){var u=r.pendingProps,g=!1,m=(r.flags&128)!==0,E;if((E=m)||(E=s!==null&&s.memoizedState===null?!1:(ke.current&2)!==0),E&&(g=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ft){if(g?Vs(r):Ls(),Ft){var S=ge,k;if(k=S){t:{for(k=S,S=vi;k.nodeType!==8;){if(!S){S=null;break t}if(k=ei(k.nextSibling),k===null){S=null;break t}}S=k}S!==null?(r.memoizedState={dehydrated:S,treeContext:Kr!==null?{id:Zi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},k=Sn(18,null,null,0),k.stateNode=S,k.return=r,r.child=k,fn=r,ge=null,k=!0):k=!1}k||Wr(r)}if(S=r.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return ep(S)?r.lanes=32:r.lanes=536870912,null;is(r)}return S=u.children,u=u.fallback,g?(Ls(),g=r.mode,S=oh({mode:"hidden",children:S},g),u=Yr(u,g,l,null),S.return=r,u.return=r,S.sibling=u,r.child=S,g=r.child,g.memoizedState=yg(l),g.childLanes=_g(s,E,l),r.memoizedState=mg,u):(Vs(r),vg(r,S))}if(k=s.memoizedState,k!==null&&(S=k.dehydrated,S!==null)){if(m)r.flags&256?(Vs(r),r.flags&=-257,r=bg(s,r,l)):r.memoizedState!==null?(Ls(),r.child=s.child,r.flags|=128,r=null):(Ls(),g=u.fallback,S=r.mode,u=oh({mode:"visible",children:u.children},S),g=Yr(g,S,l,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,co(r,s.child,null,l),u=r.child,u.memoizedState=yg(l),u.childLanes=_g(s,E,l),r.memoizedState=mg,r=g);else if(Vs(r),ep(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(i(419)),u.stack="",u.digest=E,Cl({value:u,source:null,stack:null}),r=bg(s,r,l)}else if(Ue||Il(s,r,l,!1),E=(l&s.childLanes)!==0,Ue||E){if(E=se,E!==null&&(u=l&-l,u=(u&42)!==0?1:As(u),u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==k.retryLane))throw k.retryLane=u,Za(s,u),Cn(E,s,u),lv;S.data==="$?"||Ug(),r=bg(s,r,l)}else S.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,ge=ei(S.nextSibling),fn=r,Ft=!0,Xr=null,vi=!1,s!==null&&(Un[zn++]=Zi,Un[zn++]=Ji,Un[zn++]=Kr,Zi=s.id,Ji=s.overflow,Kr=r),r=vg(r,u.children),r.flags|=4096);return r}return g?(Ls(),g=u.fallback,S=r.mode,k=s.child,F=k.sibling,u=$i(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,F!==null?g=$i(F,g):(g=Yr(g,S,l,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=s.child.memoizedState,S===null?S=yg(l):(k=S.cachePool,k!==null?(F=Oe._currentValue,k=k.parent!==F?{parent:F,pool:F}:k):k=i_(),S={baseLanes:S.baseLanes|l,cachePool:k}),g.memoizedState=S,g.childLanes=_g(s,E,l),r.memoizedState=mg,u):(Vs(r),l=s.child,s=l.sibling,l=$i(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=l,r.memoizedState=null,l)}function vg(s,r){return r=oh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function oh(s,r){return s=Sn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function bg(s,r,l){return co(r,s.child,null,l),s=vg(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function _v(s,r,l){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),Ud(s.return,r,l)}function Tg(s,r,l,u,g){var m=s.memoizedState;m===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=l,m.tailMode=g)}function vv(s,r,l){var u=r.pendingProps,g=u.revealOrder,m=u.tail;if(Ke(s,r,u.children,l),u=ke.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&_v(s,l,r);else if(s.tag===19)_v(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(st(ke,u),g){case"forwards":for(l=r.child,g=null;l!==null;)s=l.alternate,s!==null&&ih(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Tg(r,!1,g,l,m);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&ih(s)===null){r.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}Tg(r,!0,l,null,m);break;case"together":Tg(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ss(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Hs|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Il(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=$i(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=$i(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Eg(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&ju(s)))}function Sw(s,r,l){switch(r.tag){case 3:ie(r,r.stateNode.containerInfo),Ms(r,Oe,s.memoizedState.cache),Rl();break;case 27:case 5:Ss(r);break;case 4:ie(r,r.stateNode.containerInfo);break;case 10:Ms(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Vs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?yv(s,r,l):(Vs(r),s=ss(s,r,l),s!==null?s.sibling:null);Vs(r);break;case 19:var g=(s.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(Il(s,r,l,!1),u=(l&r.childLanes)!==0),g){if(u)return vv(s,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),st(ke,ke.current),u)break;return null;case 22:case 23:return r.lanes=0,fv(s,r,l);case 24:Ms(r,Oe,s.memoizedState.cache)}return ss(s,r,l)}function bv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ue=!0;else{if(!Eg(s,l)&&(r.flags&128)===0)return Ue=!1,Sw(s,r,l);Ue=(s.flags&131072)!==0}else Ue=!1,Ft&&(r.flags&1048576)!==0&&Wy(r,Bu,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var u=r.elementType,g=u._init;if(u=g(u._payload),r.type=u,typeof u=="function")Md(u)?(s=ea(u,s),r.tag=1,r=pv(null,r,u,s,l)):(r.tag=0,r=pg(null,r,u,s,l));else{if(u!=null){if(g=u.$$typeof,g===at){r.tag=11,r=cv(null,r,u,s,l);break t}else if(g===D){r.tag=14,r=uv(null,r,u,s,l);break t}}throw r=$t(u)||u,Error(i(306,r,""))}}return r;case 0:return pg(s,r,r.type,r.pendingProps,l);case 1:return u=r.type,g=ea(u,r.pendingProps),pv(s,r,u,g,l);case 3:t:{if(ie(r,r.stateNode.containerInfo),s===null)throw Error(i(387));u=r.pendingProps;var m=r.memoizedState;g=m.element,Gd(s,r),Vl(r,u,null,l);var E=r.memoizedState;if(u=E.cache,Ms(r,Oe,u),u!==m.cache&&zd(r,[Oe],l,!0),Pl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=mv(s,r,u,l);break t}else if(u!==g){g=Vn(Error(i(424)),r),Cl(g),r=mv(s,r,u,l);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ge=ei(s.firstChild),fn=r,Ft=!0,Xr=null,vi=!0,l=Z_(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Rl(),u===g){r=ss(s,r,l);break t}Ke(s,r,u,l)}r=r.child}return r;case 26:return ah(s,r),s===null?(l=A0(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ft||(l=r.type,s=r.pendingProps,u=Th(yt.current).createElement(l),u[Ie]=r,u[Te]=s,Xe(u,l,s),me(u),r.stateNode=u):r.memoizedState=A0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ss(r),s===null&&Ft&&(u=r.stateNode=T0(r.type,r.pendingProps,yt.current),fn=r,vi=!0,g=ge,Ys(r.type)?(np=g,ge=ei(u.firstChild)):ge=g),Ke(s,r,r.pendingProps.children,l),ah(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ft&&((g=u=ge)&&(u=$w(u,r.type,r.pendingProps,vi),u!==null?(r.stateNode=u,fn=r,ge=ei(u.firstChild),vi=!1,g=!0):g=!1),g||Wr(r)),Ss(r),g=r.type,m=r.pendingProps,E=s!==null?s.memoizedProps:null,u=m.children,Zg(g,m)?u=null:E!==null&&Zg(g,E)&&(r.flags|=32),r.memoizedState!==null&&(g=$d(s,r,pw,null,null,l),sc._currentValue=g),ah(s,r),Ke(s,r,u,l),r.child;case 6:return s===null&&Ft&&((s=l=ge)&&(l=Zw(l,r.pendingProps,vi),l!==null?(r.stateNode=l,fn=r,ge=null,s=!0):s=!1),s||Wr(r)),null;case 13:return yv(s,r,l);case 4:return ie(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=co(r,null,u,l):Ke(s,r,u,l),r.child;case 11:return cv(s,r,r.type,r.pendingProps,l);case 7:return Ke(s,r,r.pendingProps,l),r.child;case 8:return Ke(s,r,r.pendingProps.children,l),r.child;case 12:return Ke(s,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,Ms(r,r.type,u.value),Ke(s,r,u.children,l),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,Zr(r),g=tn(g),u=u(g),r.flags|=1,Ke(s,r,u,l),r.child;case 14:return uv(s,r,r.type,r.pendingProps,l);case 15:return hv(s,r,r.type,r.pendingProps,l);case 19:return vv(s,r,l);case 31:return u=r.pendingProps,l=r.mode,u={mode:u.mode,children:u.children},s===null?(l=oh(u,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=$i(s.child,u),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return fv(s,r,l);case 24:return Zr(r),u=tn(Oe),s===null?(g=Hd(),g===null&&(g=se,m=Bd(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=l),g=m),r.memoizedState={parent:u,cache:g},qd(r),Ms(r,Oe,g)):((s.lanes&l)!==0&&(Gd(s,r),Vl(r,null,null,l),Pl()),g=s.memoizedState,m=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Ms(r,Oe,u)):(u=m.cache,Ms(r,Oe,u),u!==g.cache&&zd(r,[Oe],l,!0))),Ke(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function rs(s){s.flags|=4}function Tv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!I0(r)){if(r=Bn.current,r!==null&&((zt&4194048)===zt?bi!==null:(zt&62914560)!==zt&&(zt&536870912)===0||r!==bi))throw kl=Fd,s_;s.flags|=8192}}function lh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?al():536870912,s.lanes|=r,go|=r)}function Fl(s,r){if(!Ft)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function he(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(r)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,r}function Aw(s,r,l){var u=r.pendingProps;switch(Pd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(r),null;case 1:return he(r),null;case 3:return l=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),es(Oe),oi(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(xl(r)?rs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jy())),he(r),null;case 26:return l=r.memoizedState,s===null?(rs(r),l!==null?(he(r),Tv(r,l)):(he(r),r.flags&=-16777217)):l?l!==s.memoizedState?(rs(r),he(r),Tv(r,l)):(he(r),r.flags&=-16777217):(s.memoizedProps!==u&&rs(r),he(r),r.flags&=-16777217),null;case 27:Ui(r),l=yt.current;var g=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==u&&rs(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return he(r),null}s=dt.current,xl(r)?$y(r):(s=T0(g,u,l),r.stateNode=s,rs(r))}return he(r),null;case 5:if(Ui(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&rs(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return he(r),null}if(s=dt.current,xl(r))$y(r);else{switch(g=Th(yt.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}s[Ie]=r,s[Te]=u;t:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break t;for(;g.sibling===null;){if(g.return===null||g.return===r)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=s;t:switch(Xe(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&rs(r)}}return he(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&rs(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(s=yt.current,xl(r)){if(s=r.stateNode,l=r.memoizedProps,u=null,g=fn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ie]=r,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||g0(s.nodeValue,l)),s||Wr(r)}else s=Th(s).createTextNode(u),s[Ie]=r,r.stateNode=s}return he(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=xl(r),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ie]=r}else Rl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;he(r),g=!1}else g=Jy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(is(r),r):(is(r),null)}if(is(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),lh(r,r.updateQueue),he(r),null;case 4:return oi(),s===null&&Kg(r.stateNode.containerInfo),he(r),null;case 10:return es(r.type),he(r),null;case 19:if(ct(ke),g=r.memoizedState,g===null)return he(r),null;if(u=(r.flags&128)!==0,m=g.rendering,m===null)if(u)Fl(g,!1);else{if(pe!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(m=ih(s),m!==null){for(r.flags|=128,Fl(g,!1),s=m.updateQueue,r.updateQueue=s,lh(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Xy(l,s),l=l.sibling;return st(ke,ke.current&1|2),r.child}s=s.sibling}g.tail!==null&&Dn()>hh&&(r.flags|=128,u=!0,Fl(g,!1),r.lanes=4194304)}else{if(!u)if(s=ih(m),s!==null){if(r.flags|=128,u=!0,s=s.updateQueue,r.updateQueue=s,lh(r,s),Fl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!m.alternate&&!Ft)return he(r),null}else 2*Dn()-g.renderingStartTime>hh&&l!==536870912&&(r.flags|=128,u=!0,Fl(g,!1),r.lanes=4194304);g.isBackwards?(m.sibling=r.child,r.child=m):(s=g.last,s!==null?s.sibling=m:r.child=m,g.last=m)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Dn(),r.sibling=null,s=ke.current,st(ke,u?s&1|2:s&1),r):(he(r),null);case 22:case 23:return is(r),Xd(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(he(r),r.subtreeFlags&6&&(r.flags|=8192)):he(r),l=r.updateQueue,l!==null&&lh(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),s!==null&&ct(Jr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),es(Oe),he(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function ww(s,r){switch(Pd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return es(Oe),oi(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ui(r),null;case 13:if(is(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Rl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ct(ke),null;case 4:return oi(),null;case 10:return es(r.type),null;case 22:case 23:return is(r),Xd(),s!==null&&ct(Jr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return es(Oe),null;case 25:return null;default:return null}}function Ev(s,r){switch(Pd(r),r.tag){case 3:es(Oe),oi();break;case 26:case 27:case 5:Ui(r);break;case 4:oi();break;case 13:is(r);break;case 19:ct(ke);break;case 10:es(r.type);break;case 22:case 23:is(r),Xd(),s!==null&&ct(Jr);break;case 24:es(Oe)}}function ql(s,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var m=l.create,E=l.inst;u=m(),E.destroy=u}l=l.next}while(l!==g)}}catch(S){ne(r,r.return,S)}}function Us(s,r,l){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&s)===s){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,g=r;var k=l,F=S;try{F()}catch(W){ne(g,k,W)}}}u=u.next}while(u!==m)}}catch(W){ne(r,r.return,W)}}function Sv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{u_(r,l)}catch(u){ne(s,s.return,u)}}}function Av(s,r,l){l.props=ea(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ne(s,r,u)}}function Gl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){ne(s,r,g)}}function Ti(s,r){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){ne(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ne(s,r,g)}else l.current=null}function wv(s){var r=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){ne(s,s.return,g)}}function Sg(s,r,l){try{var u=s.stateNode;Yw(u,s.type,l,r),u[Te]=r}catch(g){ne(s,s.return,g)}}function xv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ys(s.type)||s.tag===4}function Ag(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||xv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ys(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wg(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=bh));else if(u!==4&&(u===27&&Ys(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(wg(s,r,l),s=s.sibling;s!==null;)wg(s,r,l),s=s.sibling}function ch(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(u!==4&&(u===27&&Ys(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(ch(s,r,l),s=s.sibling;s!==null;)ch(s,r,l),s=s.sibling}function Rv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Xe(r,u,l),r[Ie]=s,r[Te]=l}catch(m){ne(s,s.return,m)}}var as=!1,_e=!1,xg=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,ze=null;function xw(s,r){if(s=s.containerInfo,Wg=Rh,s=zy(s),Ad(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break t}var E=0,S=-1,k=-1,F=0,W=0,tt=s,G=null;e:for(;;){for(var Y;tt!==l||g!==0&&tt.nodeType!==3||(S=E+g),tt!==m||u!==0&&tt.nodeType!==3||(k=E+u),tt.nodeType===3&&(E+=tt.nodeValue.length),(Y=tt.firstChild)!==null;)G=tt,tt=Y;for(;;){if(tt===s)break e;if(G===l&&++F===g&&(S=E),G===m&&++W===u&&(k=E),(Y=tt.nextSibling)!==null)break;tt=G,G=tt.parentNode}tt=Y}l=S===-1||k===-1?null:{start:S,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for($g={focusedElem:s,selectionRange:l},Rh=!1,ze=r;ze!==null;)if(r=ze,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,ze=s;else for(;ze!==null;){switch(r=ze,m=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&m!==null){s=void 0,l=r,g=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var Tt=ea(l.type,g,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Tt,m),u.__reactInternalSnapshotBeforeUpdate=s}catch(_t){ne(l,l.return,_t)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)tp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":tp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,ze=s;break}ze=r.return}}function Iv(s,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:zs(s,l),u&4&&ql(5,l);break;case 1:if(zs(s,l),u&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(E){ne(l,l.return,E)}else{var g=ea(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){ne(l,l.return,E)}}u&64&&Sv(l),u&512&&Gl(l,l.return);break;case 3:if(zs(s,l),u&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{u_(s,r)}catch(E){ne(l,l.return,E)}}break;case 27:r===null&&u&4&&Rv(l);case 26:case 5:zs(s,l),r===null&&u&4&&wv(l),u&512&&Gl(l,l.return);break;case 12:zs(s,l);break;case 13:zs(s,l),u&4&&Ov(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Pw.bind(null,l),Jw(s,l))));break;case 22:if(u=l.memoizedState!==null||as,!u){r=r!==null&&r.memoizedState!==null||_e,g=as;var m=_e;as=u,(_e=r)&&!m?Bs(s,l,(l.subtreeFlags&8772)!==0):zs(s,l),as=g,_e=m}break;case 30:break;default:zs(s,l)}}function Dv(s){var r=s.alternate;r!==null&&(s.alternate=null,Dv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Rs(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,gn=!1;function os(s,r,l){for(l=l.child;l!==null;)Mv(s,r,l),l=l.sibling}function Mv(s,r,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:_e||Ti(l,r),os(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:_e||Ti(l,r);var u=ue,g=gn;Ys(l.type)&&(ue=l.stateNode,gn=!1),os(s,r,l),tc(l.stateNode),ue=u,gn=g;break;case 5:_e||Ti(l,r);case 6:if(u=ue,g=gn,ue=null,os(s,r,l),ue=u,gn=g,ue!==null)if(gn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(l.stateNode)}catch(m){ne(l,r,m)}else try{ue.removeChild(l.stateNode)}catch(m){ne(l,r,m)}break;case 18:ue!==null&&(gn?(s=ue,v0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),lc(s)):v0(ue,l.stateNode));break;case 4:u=ue,g=gn,ue=l.stateNode.containerInfo,gn=!0,os(s,r,l),ue=u,gn=g;break;case 0:case 11:case 14:case 15:_e||Us(2,l,r),_e||Us(4,l,r),os(s,r,l);break;case 1:_e||(Ti(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Av(l,r,u)),os(s,r,l);break;case 21:os(s,r,l);break;case 22:_e=(u=_e)||l.memoizedState!==null,os(s,r,l),_e=u;break;default:os(s,r,l)}}function Ov(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{lc(s)}catch(l){ne(r,r.return,l)}}function Rw(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Cv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Cv),r;default:throw Error(i(435,s.tag))}}function Rg(s,r){var l=Rw(s);r.forEach(function(u){var g=Vw.bind(null,s,u);l.has(u)||(l.add(u),u.then(g,g))})}function An(s,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],m=s,E=r,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(Ys(S.type)){ue=S.stateNode,gn=!1;break t}break;case 5:ue=S.stateNode,gn=!1;break t;case 3:case 4:ue=S.stateNode.containerInfo,gn=!0;break t}S=S.return}if(ue===null)throw Error(i(160));Mv(m,E,g),ue=null,gn=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)kv(r,s),r=r.sibling}var ti=null;function kv(s,r){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:An(r,s),wn(s),u&4&&(Us(3,s,s.return),ql(3,s),Us(5,s,s.return));break;case 1:An(r,s),wn(s),u&512&&(_e||l===null||Ti(l,l.return)),u&64&&as&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=ti;if(An(r,s),wn(s),u&512&&(_e||l===null||Ti(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Dr]||m[Ie]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),Xe(m,u,l),m[Ie]=s,me(m),u=m;break t;case"link":var E=R0("link","href",g).get(u+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(m=E[S],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break e}}m=g.createElement(u),Xe(m,u,l),g.head.appendChild(m);break;case"meta":if(E=R0("meta","content",g).get(u+(l.content||""))){for(S=0;S<E.length;S++)if(m=E[S],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break e}}m=g.createElement(u),Xe(m,u,l),g.head.appendChild(m);break;default:throw Error(i(468,u))}m[Ie]=s,me(m),u=m}s.stateNode=u}else C0(g,s.type,s.stateNode);else s.stateNode=x0(g,u,s.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?C0(g,s.type,s.stateNode):x0(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Sg(s,s.memoizedProps,l.memoizedProps)}break;case 27:An(r,s),wn(s),u&512&&(_e||l===null||Ti(l,l.return)),l!==null&&u&4&&Sg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(An(r,s),wn(s),u&512&&(_e||l===null||Ti(l,l.return)),s.flags&32){g=s.stateNode;try{On(g,"")}catch(Y){ne(s,s.return,Y)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Sg(s,g,l!==null?l.memoizedProps:g)),u&1024&&(xg=!0);break;case 6:if(An(r,s),wn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Y){ne(s,s.return,Y)}}break;case 3:if(Ah=null,g=ti,ti=Eh(r.containerInfo),An(r,s),ti=g,wn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{lc(r.containerInfo)}catch(Y){ne(s,s.return,Y)}xg&&(xg=!1,Nv(s));break;case 4:u=ti,ti=Eh(s.stateNode.containerInfo),An(r,s),wn(s),ti=u;break;case 12:An(r,s),wn(s);break;case 13:An(r,s),wn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(kg=Dn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rg(s,u)));break;case 22:g=s.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,F=as,W=_e;if(as=F||g,_e=W||k,An(r,s),_e=W,as=F,wn(s),u&8192)t:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||k||as||_e||na(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){k=l=r;try{if(m=k.stateNode,g)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=k.stateNode;var tt=k.memoizedProps.style,G=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){ne(k,k.return,Y)}}}else if(r.tag===6){if(l===null){k=r;try{k.stateNode.nodeValue=g?"":k.memoizedProps}catch(Y){ne(k,k.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Rg(s,l))));break;case 19:An(r,s),wn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rg(s,u)));break;case 30:break;case 21:break;default:An(r,s),wn(s)}}function wn(s){var r=s.flags;if(r&2){try{for(var l,u=s.return;u!==null;){if(xv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,m=Ag(s);ch(s,m,g);break;case 5:var E=l.stateNode;l.flags&32&&(On(E,""),l.flags&=-33);var S=Ag(s);ch(s,S,E);break;case 3:case 4:var k=l.stateNode.containerInfo,F=Ag(s);wg(s,F,k);break;default:throw Error(i(161))}}catch(W){ne(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Nv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Nv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function zs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Iv(s,r.alternate,r),r=r.sibling}function na(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Us(4,r,r.return),na(r);break;case 1:Ti(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Av(r,r.return,l),na(r);break;case 27:tc(r.stateNode);case 26:case 5:Ti(r,r.return),na(r);break;case 22:r.memoizedState===null&&na(r);break;case 30:na(r);break;default:na(r)}s=s.sibling}}function Bs(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=s,m=r,E=m.flags;switch(m.tag){case 0:case 11:case 15:Bs(g,m,l),ql(4,m);break;case 1:if(Bs(g,m,l),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){ne(u,u.return,F)}if(u=m,g=u.updateQueue,g!==null){var S=u.stateNode;try{var k=g.shared.hiddenCallbacks;if(k!==null)for(g.shared.hiddenCallbacks=null,g=0;g<k.length;g++)c_(k[g],S)}catch(F){ne(u,u.return,F)}}l&&E&64&&Sv(m),Gl(m,m.return);break;case 27:Rv(m);case 26:case 5:Bs(g,m,l),l&&u===null&&E&4&&wv(m),Gl(m,m.return);break;case 12:Bs(g,m,l);break;case 13:Bs(g,m,l),l&&E&4&&Ov(g,m);break;case 22:m.memoizedState===null&&Bs(g,m,l),Gl(m,m.return);break;case 30:break;default:Bs(g,m,l)}r=r.sibling}}function Cg(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Dl(l))}function Ig(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Dl(s))}function Ei(s,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Pv(s,r,l,u),r=r.sibling}function Pv(s,r,l,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:Ei(s,r,l,u),g&2048&&ql(9,r);break;case 1:Ei(s,r,l,u);break;case 3:Ei(s,r,l,u),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Dl(s)));break;case 12:if(g&2048){Ei(s,r,l,u),s=r.stateNode;try{var m=r.memoizedProps,E=m.id,S=m.onPostCommit;typeof S=="function"&&S(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){ne(r,r.return,k)}}else Ei(s,r,l,u);break;case 13:Ei(s,r,l,u);break;case 23:break;case 22:m=r.stateNode,E=r.alternate,r.memoizedState!==null?m._visibility&2?Ei(s,r,l,u):Yl(s,r):m._visibility&2?Ei(s,r,l,u):(m._visibility|=2,uo(s,r,l,u,(r.subtreeFlags&10256)!==0)),g&2048&&Cg(E,r);break;case 24:Ei(s,r,l,u),g&2048&&Ig(r.alternate,r);break;default:Ei(s,r,l,u)}}function uo(s,r,l,u,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=s,E=r,S=l,k=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:uo(m,E,S,k,g),ql(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?uo(m,E,S,k,g):Yl(m,E):(W._visibility|=2,uo(m,E,S,k,g)),g&&F&2048&&Cg(E.alternate,E);break;case 24:uo(m,E,S,k,g),g&&F&2048&&Ig(E.alternate,E);break;default:uo(m,E,S,k,g)}r=r.sibling}}function Yl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,u=r,g=u.flags;switch(u.tag){case 22:Yl(l,u),g&2048&&Cg(u.alternate,u);break;case 24:Yl(l,u),g&2048&&Ig(u.alternate,u);break;default:Yl(l,u)}r=r.sibling}}var Kl=8192;function ho(s){if(s.subtreeFlags&Kl)for(s=s.child;s!==null;)Vv(s),s=s.sibling}function Vv(s){switch(s.tag){case 26:ho(s),s.flags&Kl&&s.memoizedState!==null&&fx(ti,s.memoizedState,s.memoizedProps);break;case 5:ho(s);break;case 3:case 4:var r=ti;ti=Eh(s.stateNode.containerInfo),ho(s),ti=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Kl,Kl=16777216,ho(s),Kl=r):ho(s));break;default:ho(s)}}function Lv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ql(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];ze=u,zv(u,s)}Lv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Uv(s),s=s.sibling}function Uv(s){switch(s.tag){case 0:case 11:case 15:Ql(s),s.flags&2048&&Us(9,s,s.return);break;case 3:Ql(s);break;case 12:Ql(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,uh(s)):Ql(s);break;default:Ql(s)}}function uh(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];ze=u,zv(u,s)}Lv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Us(8,r,r.return),uh(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,uh(r));break;default:uh(r)}s=s.sibling}}function zv(s,r){for(;ze!==null;){var l=ze;switch(l.tag){case 0:case 11:case 15:Us(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Dl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ze=u;else t:for(l=s;ze!==null;){u=ze;var g=u.sibling,m=u.return;if(Dv(u),u===l){ze=null;break t}if(g!==null){g.return=m,ze=g;break t}ze=m}}}var Cw={getCacheForType:function(s){var r=tn(Oe),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},Iw=typeof WeakMap=="function"?WeakMap:Map,Qt=0,se=null,Mt=null,zt=0,Xt=0,xn=null,js=!1,fo=!1,Dg=!1,ls=0,pe=0,Hs=0,ia=0,Mg=0,jn=0,go=0,Xl=null,pn=null,Og=!1,kg=0,hh=1/0,fh=null,Fs=null,Qe=0,qs=null,po=null,mo=0,Ng=0,Pg=null,Bv=null,Wl=0,Vg=null;function Rn(){if((Qt&2)!==0&&zt!==0)return zt&-zt;if(K.T!==null){var s=no;return s!==0?s:Fg()}return ws()}function jv(){jn===0&&(jn=(zt&536870912)===0||Ft?rl():536870912);var s=Bn.current;return s!==null&&(s.flags|=32),jn}function Cn(s,r,l){(s===se&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)&&(yo(s,0),Gs(s,zt,jn,!1)),Bi(s,l),((Qt&2)===0||s!==se)&&(s===se&&((Qt&2)===0&&(ia|=l),pe===4&&Gs(s,zt,jn,!1)),Si(s))}function Hv(s,r,l){if((Qt&6)!==0)throw Error(i(327));var u=!l&&(r&124)===0&&(r&s.expiredLanes)===0||Ir(s,r),g=u?Ow(s,r):zg(s,r,!0),m=u;do{if(g===0){fo&&!u&&Gs(s,r,0,!1);break}else{if(l=s.current.alternate,m&&!Dw(l)){g=zg(s,r,!1),m=!1;continue}if(g===2){if(m=r,s.errorRecoveryDisabledLanes&m)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var S=s;g=Xl;var k=S.current.memoizedState.isDehydrated;if(k&&(yo(S,E).flags|=256),E=zg(S,E,!1),E!==2){if(Dg&&!k){S.errorRecoveryDisabledLanes|=m,ia|=m,g=4;break t}m=pn,pn=g,m!==null&&(pn===null?pn=m:pn.push.apply(pn,m))}g=E}if(m=!1,g!==2)continue}}if(g===1){yo(s,0),Gs(s,r,0,!0);break}t:{switch(u=s,m=g,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Gs(u,r,jn,!js);break t;case 2:pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=kg+300-Dn(),10<g)){if(Gs(u,r,jn,!js),ka(u,0,!0)!==0)break t;u.timeoutHandle=y0(Fv.bind(null,u,l,pn,fh,Og,r,jn,ia,go,js,m,2,-0,0),g);break t}Fv(u,l,pn,fh,Og,r,jn,ia,go,js,m,0,-0,0)}}break}while(!0);Si(s)}function Fv(s,r,l,u,g,m,E,S,k,F,W,tt,G,Y){if(s.timeoutHandle=-1,tt=r.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(ic={stylesheets:null,count:0,unsuspend:hx},Vv(r),tt=dx(),tt!==null)){s.cancelPendingCommit=tt(Wv.bind(null,s,r,m,l,u,g,E,S,k,W,1,G,Y)),Gs(s,m,E,!F);return}Wv(s,r,m,l,u,g,E,S,k)}function Dw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],m=g.getSnapshot;g=g.value;try{if(!En(m(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gs(s,r,l,u){r&=~Mg,r&=~ia,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var g=r;0<g;){var m=31-Je(g),E=1<<m;u[m]=-1,g&=~E}l!==0&&li(s,l,r)}function dh(){return(Qt&6)===0?($l(0),!1):!0}function Lg(){if(Mt!==null){if(Xt===0)var s=Mt.return;else s=Mt,ts=$r=null,tg(s),lo=null,jl=0,s=Mt;for(;s!==null;)Ev(s.alternate,s),s=s.return;Mt=null}}function yo(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Qw(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Lg(),se=s,Mt=l=$i(s.current,null),zt=r,Xt=0,xn=null,js=!1,fo=Ir(s,r),Dg=!1,go=jn=Mg=ia=Hs=pe=0,pn=Xl=null,Og=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var g=31-Je(u),m=1<<g;r|=s[g],u&=~m}return ls=r,Pu(),l}function qv(s,r){It=null,K.H=th,r===Ol||r===qu?(r=o_(),Xt=3):r===s_?(r=o_(),Xt=4):Xt=r===lv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xn=r,Mt===null&&(pe=1,rh(s,Vn(r,s.current)))}function Gv(){var s=K.H;return K.H=th,s===null?th:s}function Yv(){var s=K.A;return K.A=Cw,s}function Ug(){pe=4,js||(zt&4194048)!==zt&&Bn.current!==null||(fo=!0),(Hs&134217727)===0&&(ia&134217727)===0||se===null||Gs(se,zt,jn,!1)}function zg(s,r,l){var u=Qt;Qt|=2;var g=Gv(),m=Yv();(se!==s||zt!==r)&&(fh=null,yo(s,r)),r=!1;var E=pe;t:do try{if(Xt!==0&&Mt!==null){var S=Mt,k=xn;switch(Xt){case 8:Lg(),E=6;break t;case 3:case 2:case 9:case 6:Bn.current===null&&(r=!0);var F=Xt;if(Xt=0,xn=null,_o(s,S,k,F),l&&fo){E=0;break t}break;default:F=Xt,Xt=0,xn=null,_o(s,S,k,F)}}Mw(),E=pe;break}catch(W){qv(s,W)}while(!0);return r&&s.shellSuspendCounter++,ts=$r=null,Qt=u,K.H=g,K.A=m,Mt===null&&(se=null,zt=0,Pu()),E}function Mw(){for(;Mt!==null;)Kv(Mt)}function Ow(s,r){var l=Qt;Qt|=2;var u=Gv(),g=Yv();se!==s||zt!==r?(fh=null,hh=Dn()+500,yo(s,r)):fo=Ir(s,r);t:do try{if(Xt!==0&&Mt!==null){r=Mt;var m=xn;e:switch(Xt){case 1:Xt=0,xn=null,_o(s,r,m,1);break;case 2:case 9:if(r_(m)){Xt=0,xn=null,Qv(r);break}r=function(){Xt!==2&&Xt!==9||se!==s||(Xt=7),Si(s)},m.then(r,r);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:r_(m)?(Xt=0,xn=null,Qv(r)):(Xt=0,xn=null,_o(s,r,m,7));break;case 5:var E=null;switch(Mt.tag){case 26:E=Mt.memoizedState;case 5:case 27:var S=Mt;if(!E||I0(E)){Xt=0,xn=null;var k=S.sibling;if(k!==null)Mt=k;else{var F=S.return;F!==null?(Mt=F,gh(F)):Mt=null}break e}}Xt=0,xn=null,_o(s,r,m,5);break;case 6:Xt=0,xn=null,_o(s,r,m,6);break;case 8:Lg(),pe=6;break t;default:throw Error(i(462))}}kw();break}catch(W){qv(s,W)}while(!0);return ts=$r=null,K.H=u,K.A=g,Qt=l,Mt!==null?0:(se=null,zt=0,Pu(),pe)}function kw(){for(;Mt!==null&&!el();)Kv(Mt)}function Kv(s){var r=bv(s.alternate,s,ls);s.memoizedProps=s.pendingProps,r===null?gh(s):Mt=r}function Qv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=gv(l,r,r.pendingProps,r.type,void 0,zt);break;case 11:r=gv(l,r,r.pendingProps,r.type.render,r.ref,zt);break;case 5:tg(r);default:Ev(l,r),r=Mt=Xy(r,ls),r=bv(l,r,ls)}s.memoizedProps=s.pendingProps,r===null?gh(s):Mt=r}function _o(s,r,l,u){ts=$r=null,tg(r),lo=null,jl=0;var g=r.return;try{if(Ew(s,g,r,l,zt)){pe=1,rh(s,Vn(l,s.current)),Mt=null;return}}catch(m){if(g!==null)throw Mt=g,m;pe=1,rh(s,Vn(l,s.current)),Mt=null;return}r.flags&32768?(Ft||u===1?s=!0:fo||(zt&536870912)!==0?s=!1:(js=s=!0,(u===2||u===9||u===3||u===6)&&(u=Bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xv(r,s)):gh(r)}function gh(s){var r=s;do{if((r.flags&32768)!==0){Xv(r,js);return}s=r.return;var l=Aw(r.alternate,r,ls);if(l!==null){Mt=l;return}if(r=r.sibling,r!==null){Mt=r;return}Mt=r=s}while(r!==null);pe===0&&(pe=5)}function Xv(s,r){do{var l=ww(s.alternate,s);if(l!==null){l.flags&=32767,Mt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Mt=s;return}Mt=s=l}while(s!==null);pe=6,Mt=null}function Wv(s,r,l,u,g,m,E,S,k){s.cancelPendingCommit=null;do ph();while(Qe!==0);if((Qt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Id,ol(s,l,m,E,S,k),s===se&&(Mt=se=null,zt=0),po=r,qs=s,mo=l,Ng=m,Pg=g,Bv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Lw(wr,function(){return e0(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,g=rt.p,rt.p=2,E=Qt,Qt|=4;try{xw(s,r,l)}finally{Qt=E,rt.p=g,K.T=u}}Qe=1,$v(),Zv(),Jv()}}function $v(){if(Qe===1){Qe=0;var s=qs,r=po,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=K.T,K.T=null;var u=rt.p;rt.p=2;var g=Qt;Qt|=4;try{kv(r,s);var m=$g,E=zy(s.containerInfo),S=m.focusedElem,k=m.selectionRange;if(E!==S&&S&&S.ownerDocument&&Uy(S.ownerDocument.documentElement,S)){if(k!==null&&Ad(S)){var F=k.start,W=k.end;if(W===void 0&&(W=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(W,S.value.length);else{var tt=S.ownerDocument||document,G=tt&&tt.defaultView||window;if(G.getSelection){var Y=G.getSelection(),Tt=S.textContent.length,_t=Math.min(k.start,Tt),ee=k.end===void 0?_t:Math.min(k.end,Tt);!Y.extend&&_t>ee&&(E=ee,ee=_t,_t=E);var B=Ly(S,_t),U=Ly(S,ee);if(B&&U&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==U.node||Y.focusOffset!==U.offset)){var H=tt.createRange();H.setStart(B.node,B.offset),Y.removeAllRanges(),_t>ee?(Y.addRange(H),Y.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),Y.addRange(H))}}}}for(tt=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&tt.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<tt.length;S++){var $=tt[S];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Rh=!!Wg,$g=Wg=null}finally{Qt=g,rt.p=u,K.T=l}}s.current=r,Qe=2}}function Zv(){if(Qe===2){Qe=0;var s=qs,r=po,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=K.T,K.T=null;var u=rt.p;rt.p=2;var g=Qt;Qt|=4;try{Iv(s,r.alternate,r)}finally{Qt=g,rt.p=u,K.T=l}}Qe=3}}function Jv(){if(Qe===4||Qe===3){Qe=0,uu();var s=qs,r=po,l=mo,u=Bv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Qe=5:(Qe=0,po=qs=null,t0(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Fs=null),Na(l),r=r.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(de,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=K.T,g=rt.p,rt.p=2,K.T=null;try{for(var m=s.onRecoverableError,E=0;E<u.length;E++){var S=u[E];m(S.value,{componentStack:S.stack})}}finally{K.T=r,rt.p=g}}(mo&3)!==0&&ph(),Si(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===Vg?Wl++:(Wl=0,Vg=s):Wl=0,$l(0)}}function t0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Dl(r)))}function ph(s){return $v(),Zv(),Jv(),e0()}function e0(){if(Qe!==5)return!1;var s=qs,r=Ng;Ng=0;var l=Na(mo),u=K.T,g=rt.p;try{rt.p=32>l?32:l,K.T=null,l=Pg,Pg=null;var m=qs,E=mo;if(Qe=0,po=qs=null,mo=0,(Qt&6)!==0)throw Error(i(331));var S=Qt;if(Qt|=4,Uv(m.current),Pv(m,m.current,E,l),Qt=S,$l(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(de,m)}catch{}return!0}finally{rt.p=g,K.T=u,t0(s,r)}}function n0(s,r,l){r=Vn(l,r),r=gg(s.stateNode,r,2),s=Ns(s,r,2),s!==null&&(Bi(s,2),Si(s))}function ne(s,r,l){if(s.tag===3)n0(s,s,l);else for(;r!==null;){if(r.tag===3){n0(r,s,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Fs===null||!Fs.has(u))){s=Vn(l,s),l=av(2),u=Ns(r,l,2),u!==null&&(ov(l,u,r,s),Bi(u,2),Si(u));break}}r=r.return}}function Bg(s,r,l){var u=s.pingCache;if(u===null){u=s.pingCache=new Iw;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(l)||(Dg=!0,g.add(l),s=Nw.bind(null,s,r,l),r.then(s,s))}function Nw(s,r,l){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,se===s&&(zt&l)===l&&(pe===4||pe===3&&(zt&62914560)===zt&&300>Dn()-kg?(Qt&2)===0&&yo(s,0):Mg|=l,go===zt&&(go=0)),Si(s)}function i0(s,r){r===0&&(r=al()),s=Za(s,r),s!==null&&(Bi(s,r),Si(s))}function Pw(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),i0(s,l)}function Vw(s,r){var l=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),i0(s,l)}function Lw(s,r){return Sr(s,r)}var mh=null,vo=null,jg=!1,yh=!1,Hg=!1,sa=0;function Si(s){s!==vo&&s.next===null&&(vo===null?mh=vo=s:vo=vo.next=s),yh=!0,jg||(jg=!0,zw())}function $l(s,r){if(!Hg&&yh){Hg=!0;do for(var l=!1,u=mh;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var E=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-Je(42|s)+1)-1,m&=g&~(E&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,o0(u,m))}else m=zt,m=ka(u,u===se?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ir(u,m)||(l=!0,o0(u,m));u=u.next}while(l);Hg=!1}}function Uw(){s0()}function s0(){yh=jg=!1;var s=0;sa!==0&&(Kw()&&(s=sa),sa=0);for(var r=Dn(),l=null,u=mh;u!==null;){var g=u.next,m=r0(u,r);m===0?(u.next=null,l===null?mh=g:l.next=g,g===null&&(vo=l)):(l=u,(s!==0||(m&3)!==0)&&(yh=!0)),u=g}$l(s)}function r0(s,r){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,m=s.pendingLanes&-62914561;0<m;){var E=31-Je(m),S=1<<E,k=g[E];k===-1?((S&l)===0||(S&u)!==0)&&(g[E]=sl(S,r)):k<=r&&(s.expiredLanes|=S),m&=~S}if(r=se,l=zt,l=ka(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===r&&(Xt===2||Xt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Ar(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Ir(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(u!==null&&Ar(u),Na(l)){case 2:case 8:l=Ma;break;case 32:l=wr;break;case 268435456:l=Oa;break;default:l=wr}return u=a0.bind(null,s),l=Sr(l,u),s.callbackPriority=r,s.callbackNode=l,r}return u!==null&&u!==null&&Ar(u),s.callbackPriority=2,s.callbackNode=null,2}function a0(s,r){if(Qe!==0&&Qe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(ph()&&s.callbackNode!==l)return null;var u=zt;return u=ka(s,s===se?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Hv(s,u,r),r0(s,Dn()),s.callbackNode!=null&&s.callbackNode===l?a0.bind(null,s):null)}function o0(s,r){if(ph())return null;Hv(s,r,!0)}function zw(){Xw(function(){(Qt&6)!==0?Sr(nl,Uw):s0()})}function Fg(){return sa===0&&(sa=rl()),sa}function l0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ba(""+s)}function c0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Bw(s,r,l,u,g){if(r==="submit"&&l&&l.stateNode===g){var m=l0((g[Te]||null).action),E=u.submitter;E&&(r=(r=E[Te]||null)?l0(r.formAction):E.getAttribute("formAction"),r!==null&&(m=r,E=null));var S=new ja("action","action",null,u,g);s.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(sa!==0){var k=E?c0(g,E):new FormData(g);cg(l,{pending:!0,data:k,method:g.method,action:m},null,k)}}else typeof m=="function"&&(S.preventDefault(),k=E?c0(g,E):new FormData(g),cg(l,{pending:!0,data:k,method:g.method,action:m},m,k))},currentTarget:g}]})}}for(var qg=0;qg<Cd.length;qg++){var Gg=Cd[qg],jw=Gg.toLowerCase(),Hw=Gg[0].toUpperCase()+Gg.slice(1);Jn(jw,"on"+Hw)}Jn(Hy,"onAnimationEnd"),Jn(Fy,"onAnimationIteration"),Jn(qy,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(rw,"onTransitionRun"),Jn(aw,"onTransitionStart"),Jn(ow,"onTransitionCancel"),Jn(Gy,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),$n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$n("onBeforeInput",["compositionend","keypress","textInput","paste"]),$n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function u0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;t:{var m=void 0;if(r)for(var E=u.length-1;0<=E;E--){var S=u[E],k=S.instance,F=S.currentTarget;if(S=S.listener,k!==m&&g.isPropagationStopped())break t;m=S,g.currentTarget=F;try{m(g)}catch(W){sh(W)}g.currentTarget=null,m=k}else for(E=0;E<u.length;E++){if(S=u[E],k=S.instance,F=S.currentTarget,S=S.listener,k!==m&&g.isPropagationStopped())break t;m=S,g.currentTarget=F;try{m(g)}catch(W){sh(W)}g.currentTarget=null,m=k}}}}function Ot(s,r){var l=r[cl];l===void 0&&(l=r[cl]=new Set);var u=s+"__bubble";l.has(u)||(h0(r,s,2,!1),l.add(u))}function Yg(s,r,l){var u=0;r&&(u|=4),h0(l,s,u,r)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Kg(s){if(!s[_h]){s[_h]=!0,ul.forEach(function(l){l!=="selectionchange"&&(Fw.has(l)||Yg(l,!1,s),Yg(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[_h]||(r[_h]=!0,Yg("selectionchange",!1,r))}}function h0(s,r,l,u){switch(P0(r)){case 2:var g=mx;break;case 8:g=yx;break;default:g=op}l=g.bind(null,r,l,s),g=void 0,!Nn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(r,l,{capture:!0,passive:g}):s.addEventListener(r,l,!0):g!==void 0?s.addEventListener(r,l,{passive:g}):s.addEventListener(r,l,!1)}function Qg(s,r,l,u,g){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===g)break;if(E===4)for(E=u.return;E!==null;){var k=E.tag;if((k===3||k===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;S!==null;){if(E=ji(S),E===null)return;if(k=E.tag,k===5||k===6||k===26||k===27){u=m=E;continue t}S=S.parentNode}}u=u.return}bu(function(){var F=m,W=kn(l),tt=[];t:{var G=Yy.get(s);if(G!==void 0){var Y=ja,Tt=s;switch(s){case"keypress":if(gi(l)===0)break t;case"keydown":case"keyup":Y=Ka;break;case"focusin":Tt="focus",Y=qa;break;case"focusout":Tt="blur",Y=qa;break;case"beforeblur":case"afterblur":Y=qa;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Cu;break;case Hy:case Fy:case qy:Y=Ga;break;case Gy:Y=Du;break;case"scroll":case"scrollend":Y=Tu;break;case"wheel":Y=Qa;break;case"copy":case"cut":case"paste":Y=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=El;break;case"toggle":case"beforetoggle":Y=Ou}var _t=(r&4)!==0,ee=!_t&&(s==="scroll"||s==="scrollend"),B=_t?G!==null?G+"Capture":null:G;_t=[];for(var U=F,H;U!==null;){var $=U;if(H=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||H===null||B===null||($=Lr(U,B),$!=null&&_t.push(Jl(U,$,H))),ee)break;U=U.return}0<_t.length&&(G=new Y(G,Tt,null,l,W),tt.push({event:G,listeners:_t}))}}if((r&7)===0){t:{if(G=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",G&&l!==Gi&&(Tt=l.relatedTarget||l.fromElement)&&(ji(Tt)||Tt[Mn]))break t;if((Y||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(Tt=l.relatedTarget||l.toElement,Y=F,Tt=Tt?ji(Tt):null,Tt!==null&&(ee=o(Tt),_t=Tt.tag,Tt!==ee||_t!==5&&_t!==27&&_t!==6)&&(Tt=null)):(Y=null,Tt=F),Y!==Tt)){if(_t=Pn,$="onMouseLeave",B="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(_t=El,$="onPointerLeave",B="onPointerEnter",U="pointer"),ee=Y==null?G:ui(Y),H=Tt==null?G:ui(Tt),G=new _t($,U+"leave",Y,l,W),G.target=ee,G.relatedTarget=H,$=null,ji(W)===F&&(_t=new _t(B,U+"enter",Tt,l,W),_t.target=H,_t.relatedTarget=ee,$=_t),ee=$,Y&&Tt)e:{for(_t=Y,B=Tt,U=0,H=_t;H;H=bo(H))U++;for(H=0,$=B;$;$=bo($))H++;for(;0<U-H;)_t=bo(_t),U--;for(;0<H-U;)B=bo(B),H--;for(;U--;){if(_t===B||B!==null&&_t===B.alternate)break e;_t=bo(_t),B=bo(B)}_t=null}else _t=null;Y!==null&&f0(tt,G,Y,_t,!1),Tt!==null&&ee!==null&&f0(tt,ee,Tt,_t,!0)}}t:{if(G=F?ui(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var ft=My;else if(Me(G))if(Oy)ft=nw;else{ft=tw;var Dt=JA}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&pl(F.elementType)&&(ft=My):ft=ew;if(ft&&(ft=ft(s,F))){Wi(tt,ft,l,W);break t}Dt&&Dt(s,G,F),s==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Is(G,"number",G.value)}switch(Dt=F?ui(F):window,s){case"focusin":(Me(Dt)||Dt.contentEditable==="true")&&(Xa=Dt,wd=F,wl=null);break;case"focusout":wl=wd=Xa=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,By(tt,l,W);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":By(tt,l,W)}var pt;if(yi)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Lt?Q(s,l)&&(vt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(T&&l.locale!=="ko"&&(Lt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Lt&&(pt=yl()):(di=W,Ds="value"in di?di.value:di.textContent,Lt=!0)),Dt=vh(F,vt),0<Dt.length&&(vt=new bl(vt,s,null,l,W),tt.push({event:vt,listeners:Dt}),pt?vt.data=pt:(pt=lt(l),pt!==null&&(vt.data=pt)))),(pt=_?De(s,l):Ut(s,l))&&(vt=vh(F,"onBeforeInput"),0<vt.length&&(Dt=new bl("onBeforeInput","beforeinput",null,l,W),tt.push({event:Dt,listeners:vt}),Dt.data=pt)),Bw(tt,s,F,l,W)}u0(tt,r)})}function Jl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function vh(s,r){for(var l=r+"Capture",u=[];s!==null;){var g=s,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=Lr(s,l),g!=null&&u.unshift(Jl(s,g,m)),g=Lr(s,r),g!=null&&u.push(Jl(s,g,m))),s.tag===3)return u;s=s.return}return[]}function bo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function f0(s,r,l,u,g){for(var m=r._reactName,E=[];l!==null&&l!==u;){var S=l,k=S.alternate,F=S.stateNode;if(S=S.tag,k!==null&&k===u)break;S!==5&&S!==26&&S!==27||F===null||(k=F,g?(F=Lr(l,m),F!=null&&E.unshift(Jl(l,F,k))):g||(F=Lr(l,m),F!=null&&E.push(Jl(l,F,k)))),l=l.return}E.length!==0&&s.push({event:r,listeners:E})}var qw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function d0(s){return(typeof s=="string"?s:""+s).replace(qw,`
`).replace(Gw,"")}function g0(s,r){return r=d0(r),d0(s)===r}function bh(){}function te(s,r,l,u,g,m){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||On(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&On(s,""+u);break;case"className":hi(s,"class",u);break;case"tabIndex":hi(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(s,l,u);break;case"style":gl(s,u,m);break;case"data":if(r!=="object"){hi(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Ba(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&te(s,r,"name",g.name,g,null),te(s,r,"formEncType",g.formEncType,g,null),te(s,r,"formMethod",g.formMethod,g,null),te(s,r,"formTarget",g.formTarget,g,null)):(te(s,r,"encType",g.encType,g,null),te(s,r,"method",g.method,g,null),te(s,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Ba(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=bh);break;case"onScroll":u!=null&&Ot("scroll",s);break;case"onScrollEnd":u!=null&&Ot("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Ba(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Ot("beforetoggle",s),Ot("toggle",s),Cs(s,"popover",u);break;case"xlinkActuate":Ge(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ge(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ge(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ge(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ge(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ge(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ge(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ge(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ge(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Cs(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=_d.get(l)||l,Cs(s,l,u))}}function Xg(s,r,l,u,g,m){switch(l){case"style":gl(s,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?On(s,u):(typeof u=="number"||typeof u=="bigint")&&On(s,""+u);break;case"onScroll":u!=null&&Ot("scroll",s);break;case"onScrollEnd":u!=null&&Ot("scrollend",s);break;case"onClick":u!=null&&(s.onclick=bh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pa.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),m=s[Te]||null,m=m!=null?m[l]:null,typeof m=="function"&&s.removeEventListener(r,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,u,g);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Cs(s,l,u)}}}function Xe(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",s),Ot("load",s);var u=!1,g=!1,m;for(m in l)if(l.hasOwnProperty(m)){var E=l[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,m,E,l,null)}}g&&te(s,r,"srcSet",l.srcSet,l,null),u&&te(s,r,"src",l.src,l,null);return;case"input":Ot("invalid",s);var S=m=E=g=null,k=null,F=null;for(u in l)if(l.hasOwnProperty(u)){var W=l[u];if(W!=null)switch(u){case"name":g=W;break;case"type":E=W;break;case"checked":k=W;break;case"defaultChecked":F=W;break;case"value":m=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:te(s,r,u,W,l,null)}}Nr(s,m,S,k,F,E,g,!1),za(s);return;case"select":Ot("invalid",s),u=E=m=null;for(g in l)if(l.hasOwnProperty(g)&&(S=l[g],S!=null))switch(g){case"value":m=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:te(s,r,g,S,l,null)}r=m,l=E,s.multiple=!!u,r!=null?qi(s,!!u,r,!1):l!=null&&qi(s,!!u,l,!0);return;case"textarea":Ot("invalid",s),m=g=u=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":g=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:te(s,r,E,S,l,null)}Pr(s,u,g,m),za(s);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(u=l[k],u!=null))switch(k){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(s,r,k,u,l,null)}return;case"dialog":Ot("beforetoggle",s),Ot("toggle",s),Ot("cancel",s),Ot("close",s);break;case"iframe":case"object":Ot("load",s);break;case"video":case"audio":for(u=0;u<Zl.length;u++)Ot(Zl[u],s);break;case"image":Ot("error",s),Ot("load",s);break;case"details":Ot("toggle",s);break;case"embed":case"source":case"link":Ot("error",s),Ot("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,F,u,l,null)}return;default:if(pl(r)){for(W in l)l.hasOwnProperty(W)&&(u=l[W],u!==void 0&&Xg(s,r,W,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&te(s,r,S,u,l,null))}function Yw(s,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,E=null,S=null,k=null,F=null,W=null;for(Y in l){var tt=l[Y];if(l.hasOwnProperty(Y)&&tt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":k=tt;default:u.hasOwnProperty(Y)||te(s,r,Y,null,u,tt)}}for(var G in u){var Y=u[G];if(tt=l[G],u.hasOwnProperty(G)&&(Y!=null||tt!=null))switch(G){case"type":m=Y;break;case"name":g=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":E=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==tt&&te(s,r,G,Y,u,tt)}}Tn(s,E,S,k,F,W,m,g);return;case"select":Y=E=S=G=null;for(m in l)if(k=l[m],l.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":Y=k;default:u.hasOwnProperty(m)||te(s,r,m,null,u,k)}for(g in u)if(m=u[g],k=l[g],u.hasOwnProperty(g)&&(m!=null||k!=null))switch(g){case"value":G=m;break;case"defaultValue":S=m;break;case"multiple":E=m;default:m!==k&&te(s,r,g,m,u,k)}r=S,l=E,u=Y,G!=null?qi(s,!!l,G,!1):!!u!=!!l&&(r!=null?qi(s,!!l,r,!0):qi(s,!!l,l?[]:"",!1));return;case"textarea":Y=G=null;for(S in l)if(g=l[S],l.hasOwnProperty(S)&&g!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:te(s,r,S,null,u,g)}for(E in u)if(g=u[E],m=l[E],u.hasOwnProperty(E)&&(g!=null||m!=null))switch(E){case"value":G=g;break;case"defaultValue":Y=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==m&&te(s,r,E,g,u,m)}Zt(s,G,Y);return;case"option":for(var Tt in l)if(G=l[Tt],l.hasOwnProperty(Tt)&&G!=null&&!u.hasOwnProperty(Tt))switch(Tt){case"selected":s.selected=!1;break;default:te(s,r,Tt,null,u,G)}for(k in u)if(G=u[k],Y=l[k],u.hasOwnProperty(k)&&G!==Y&&(G!=null||Y!=null))switch(k){case"selected":s.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:te(s,r,k,G,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in l)G=l[_t],l.hasOwnProperty(_t)&&G!=null&&!u.hasOwnProperty(_t)&&te(s,r,_t,null,u,G);for(F in u)if(G=u[F],Y=l[F],u.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,r));break;default:te(s,r,F,G,u,Y)}return;default:if(pl(r)){for(var ee in l)G=l[ee],l.hasOwnProperty(ee)&&G!==void 0&&!u.hasOwnProperty(ee)&&Xg(s,r,ee,void 0,u,G);for(W in u)G=u[W],Y=l[W],!u.hasOwnProperty(W)||G===Y||G===void 0&&Y===void 0||Xg(s,r,W,G,u,Y);return}}for(var B in l)G=l[B],l.hasOwnProperty(B)&&G!=null&&!u.hasOwnProperty(B)&&te(s,r,B,null,u,G);for(tt in u)G=u[tt],Y=l[tt],!u.hasOwnProperty(tt)||G===Y||G==null&&Y==null||te(s,r,tt,G,u,Y)}var Wg=null,$g=null;function Th(s){return s.nodeType===9?s:s.ownerDocument}function p0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Zg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jg=null;function Kw(){var s=window.event;return s&&s.type==="popstate"?s===Jg?!1:(Jg=s,!0):(Jg=null,!1)}var y0=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,Xw=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(s){return _0.resolve(null).then(s).catch(Ww)}:y0;function Ww(s){setTimeout(function(){throw s})}function Ys(s){return s==="head"}function v0(s,r){var l=r,u=0,g=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(0<u&&8>u){l=u;var E=s.ownerDocument;if(l&1&&tc(E.documentElement),l&2&&tc(E.body),l&4)for(l=E.head,tc(l),E=l.firstChild;E;){var S=E.nextSibling,k=E.nodeName;E[Dr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=S}}if(g===0){s.removeChild(m),lc(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=m}while(l);lc(r)}function tp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":tp(l),Rs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function $w(s,r,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Dr])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(m=s.getAttribute("rel"),m==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(m!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(m=s.getAttribute("src"),(m!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===m)return s}else return s;if(s=ei(s.nextSibling),s===null)break}return null}function Zw(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ei(s.nextSibling),s===null))return null;return s}function ep(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function Jw(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ei(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var np=null;function b0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function T0(s,r,l){switch(r=Th(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function tc(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Rs(s)}var Hn=new Map,E0=new Set;function Eh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var cs=rt.d;rt.d={f:tx,r:ex,D:nx,C:ix,L:sx,m:rx,X:ox,S:ax,M:lx};function tx(){var s=cs.f(),r=dh();return s||r}function ex(s){var r=ci(s);r!==null&&r.tag===5&&r.type==="form"?H_(r):cs.r(s)}var To=typeof document>"u"?null:document;function S0(s,r,l){var u=To;if(u&&typeof r=="string"&&r){var g=Ee(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),E0.has(g)||(E0.add(g),s={rel:s,crossOrigin:l,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Xe(r,"link",s),me(r),u.head.appendChild(r)))}}function nx(s){cs.D(s),S0("dns-prefetch",s,null)}function ix(s,r){cs.C(s,r),S0("preconnect",s,r)}function sx(s,r,l){cs.L(s,r,l);var u=To;if(u&&s&&r){var g='link[rel="preload"][as="'+Ee(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Ee(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Ee(l.imageSizes)+'"]')):g+='[href="'+Ee(s)+'"]';var m=g;switch(r){case"style":m=Eo(s);break;case"script":m=So(s)}Hn.has(m)||(s=y({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Hn.set(m,s),u.querySelector(g)!==null||r==="style"&&u.querySelector(ec(m))||r==="script"&&u.querySelector(nc(m))||(r=u.createElement("link"),Xe(r,"link",s),me(r),u.head.appendChild(r)))}}function rx(s,r){cs.m(s,r);var l=To;if(l&&s){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Ee(u)+'"][href="'+Ee(s)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=So(s)}if(!Hn.has(m)&&(s=y({rel:"modulepreload",href:s},r),Hn.set(m,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(nc(m)))return}u=l.createElement("link"),Xe(u,"link",s),me(u),l.head.appendChild(u)}}}function ax(s,r,l){cs.S(s,r,l);var u=To;if(u&&s){var g=cn(u).hoistableStyles,m=Eo(s);r=r||"default";var E=g.get(m);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(ec(m)))S.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Hn.get(m))&&ip(s,l);var k=E=u.createElement("link");me(k),Xe(k,"link",s),k._p=new Promise(function(F,W){k.onload=F,k.onerror=W}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Sh(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:S},g.set(m,E)}}}function ox(s,r){cs.X(s,r);var l=To;if(l&&s){var u=cn(l).hoistableScripts,g=So(s),m=u.get(g);m||(m=l.querySelector(nc(g)),m||(s=y({src:s,async:!0},r),(r=Hn.get(g))&&sp(s,r),m=l.createElement("script"),me(m),Xe(m,"link",s),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function lx(s,r){cs.M(s,r);var l=To;if(l&&s){var u=cn(l).hoistableScripts,g=So(s),m=u.get(g);m||(m=l.querySelector(nc(g)),m||(s=y({src:s,async:!0,type:"module"},r),(r=Hn.get(g))&&sp(s,r),m=l.createElement("script"),me(m),Xe(m,"link",s),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function A0(s,r,l,u){var g=(g=yt.current)?Eh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Eo(l.href),l=cn(g).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Eo(l.href);var m=cn(g).hoistableStyles,E=m.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(s,E),(m=g.querySelector(ec(s)))&&!m._p&&(E.instance=m,E.state.loading=5),Hn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Hn.set(s,l),m||cx(g,s,l,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=So(l),l=cn(g).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Eo(s){return'href="'+Ee(s)+'"'}function ec(s){return'link[rel="stylesheet"]['+s+"]"}function w0(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function cx(s,r,l,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Xe(r,"link",l),me(r),s.head.appendChild(r))}function So(s){return'[src="'+Ee(s)+'"]'}function nc(s){return"script[async]"+s}function x0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+Ee(l.href)+'"]');if(u)return r.instance=u,me(u),u;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),me(u),Xe(u,"style",g),Sh(u,l.precedence,s),r.instance=u;case"stylesheet":g=Eo(l.href);var m=s.querySelector(ec(g));if(m)return r.state.loading|=4,r.instance=m,me(m),m;u=w0(l),(g=Hn.get(g))&&ip(u,g),m=(s.ownerDocument||s).createElement("link"),me(m);var E=m;return E._p=new Promise(function(S,k){E.onload=S,E.onerror=k}),Xe(m,"link",u),r.state.loading|=4,Sh(m,l.precedence,s),r.instance=m;case"script":return m=So(l.src),(g=s.querySelector(nc(m)))?(r.instance=g,me(g),g):(u=l,(g=Hn.get(m))&&(u=y({},l),sp(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),me(g),Xe(g,"link",u),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Sh(u,l.precedence,s));return r.instance}function Sh(s,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===r)m=S;else if(m!==g)break}m?m.parentNode.insertBefore(s,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function ip(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function sp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Ah=null;function R0(s,r,l){if(Ah===null){var u=new Map,g=Ah=new Map;g.set(l,u)}else g=Ah,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var m=l[g];if(!(m[Dr]||m[Ie]||s==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(r)||"";E=s+E;var S=u.get(E);S?S.push(m):u.set(E,[m])}}return u}function C0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function ux(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function I0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ic=null;function hx(){}function fx(s,r,l){if(ic===null)throw Error(i(475));var u=ic;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Eo(l.href),m=s.querySelector(ec(g));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=wh.bind(u),s.then(u,u)),r.state.loading|=4,r.instance=m,me(m);return}m=s.ownerDocument||s,l=w0(l),(g=Hn.get(g))&&ip(l,g),m=m.createElement("link"),me(m);var E=m;E._p=new Promise(function(S,k){E.onload=S,E.onerror=k}),Xe(m,"link",l),r.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=wh.bind(u),s.addEventListener("load",r),s.addEventListener("error",r))}}function dx(){if(ic===null)throw Error(i(475));var s=ic;return s.stylesheets&&s.count===0&&rp(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&rp(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function wh(){if(this.count--,this.count===0){if(this.stylesheets)rp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var xh=null;function rp(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,xh=new Map,r.forEach(gx,s),xh=null,wh.call(s))}function gx(s,r){if(!(r.state.loading&4)){var l=xh.get(s);if(l)var u=l.get(null);else{l=new Map,xh.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var E=g[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}g=r.instance,E=g.getAttribute("data-precedence"),m=l.get(E)||u,m===u&&l.set(null,g),l.set(E,g),this.count++,u=wh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var sc={$$typeof:et,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function px(s,r,l,u,g,m,E,S){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function D0(s,r,l,u,g,m,E,S,k,F,W,tt){return s=new px(s,r,l,E,S,k,F,tt),r=1,m===!0&&(r|=24),m=Sn(3,null,null,r),s.current=m,m.stateNode=s,r=Bd(),r.refCount++,s.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:r},qd(m),s}function M0(s){return s?(s=Ja,s):Ja}function O0(s,r,l,u,g,m){g=M0(g),u.context===null?u.context=g:u.pendingContext=g,u=ks(r),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=Ns(s,u,r),l!==null&&(Cn(l,s,r),Nl(l,s,r))}function k0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function ap(s,r){k0(s,r),(s=s.alternate)&&k0(s,r)}function N0(s){if(s.tag===13){var r=Za(s,67108864);r!==null&&Cn(r,s,67108864),ap(s,67108864)}}var Rh=!0;function mx(s,r,l,u){var g=K.T;K.T=null;var m=rt.p;try{rt.p=2,op(s,r,l,u)}finally{rt.p=m,K.T=g}}function yx(s,r,l,u){var g=K.T;K.T=null;var m=rt.p;try{rt.p=8,op(s,r,l,u)}finally{rt.p=m,K.T=g}}function op(s,r,l,u){if(Rh){var g=lp(u);if(g===null)Qg(s,r,u,Ch,l),V0(s,u);else if(vx(g,s,r,l,u))u.stopPropagation();else if(V0(s,u),r&4&&-1<_x.indexOf(s)){for(;g!==null;){var m=ci(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=Wn(m.pendingLanes);if(E!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var k=1<<31-Je(E);S.entanglements[1]|=k,E&=~k}Si(m),(Qt&6)===0&&(hh=Dn()+500,$l(0))}}break;case 13:S=Za(m,2),S!==null&&Cn(S,m,2),dh(),ap(m,2)}if(m=lp(u),m===null&&Qg(s,r,u,Ch,l),m===g)break;g=m}g!==null&&u.stopPropagation()}else Qg(s,r,u,null,l)}}function lp(s){return s=kn(s),cp(s)}var Ch=null;function cp(s){if(Ch=null,s=ji(s),s!==null){var r=o(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=c(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Ch=s,null}function P0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fd()){case nl:return 2;case Ma:return 8;case wr:case dd:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var up=!1,Ks=null,Qs=null,Xs=null,rc=new Map,ac=new Map,Ws=[],_x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V0(s,r){switch(s){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":rc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(r.pointerId)}}function oc(s,r,l,u,g,m){return s===null||s.nativeEvent!==m?(s={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},r!==null&&(r=ci(r),r!==null&&N0(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function vx(s,r,l,u,g){switch(r){case"focusin":return Ks=oc(Ks,s,r,l,u,g),!0;case"dragenter":return Qs=oc(Qs,s,r,l,u,g),!0;case"mouseover":return Xs=oc(Xs,s,r,l,u,g),!0;case"pointerover":var m=g.pointerId;return rc.set(m,oc(rc.get(m)||null,s,r,l,u,g)),!0;case"gotpointercapture":return m=g.pointerId,ac.set(m,oc(ac.get(m)||null,s,r,l,u,g)),!0}return!1}function L0(s){var r=ji(s.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){s.blockedOn=r,du(s.priority,function(){if(l.tag===13){var u=Rn();u=As(u);var g=Za(l,u);g!==null&&Cn(g,l,u),ap(l,u)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ih(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=lp(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Gi=u,l.target.dispatchEvent(u),Gi=null}else return r=ci(l),r!==null&&N0(r),s.blockedOn=l,!1;r.shift()}return!0}function U0(s,r,l){Ih(s)&&l.delete(r)}function bx(){up=!1,Ks!==null&&Ih(Ks)&&(Ks=null),Qs!==null&&Ih(Qs)&&(Qs=null),Xs!==null&&Ih(Xs)&&(Xs=null),rc.forEach(U0),ac.forEach(U0)}function Dh(s,r){s.blockedOn===r&&(s.blockedOn=null,up||(up=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bx)))}var Mh=null;function z0(s){Mh!==s&&(Mh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mh===s&&(Mh=null);for(var r=0;r<s.length;r+=3){var l=s[r],u=s[r+1],g=s[r+2];if(typeof u!="function"){if(cp(u||l)===null)continue;break}var m=ci(l);m!==null&&(s.splice(r,3),r-=3,cg(m,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function lc(s){function r(k){return Dh(k,s)}Ks!==null&&Dh(Ks,s),Qs!==null&&Dh(Qs,s),Xs!==null&&Dh(Xs,s),rc.forEach(r),ac.forEach(r);for(var l=0;l<Ws.length;l++){var u=Ws[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Ws.length&&(l=Ws[0],l.blockedOn===null);)L0(l),l.blockedOn===null&&Ws.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],m=l[u+1],E=g[Te]||null;if(typeof m=="function")E||z0(l);else if(E){var S=null;if(m&&m.hasAttribute("formAction")){if(g=m,E=m[Te]||null)S=E.formAction;else if(cp(g)!==null)continue}else S=E.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),z0(l)}}}function hp(s){this._internalRoot=s}Oh.prototype.render=hp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,u=Rn();O0(l,u,s,r,null,null)},Oh.prototype.unmount=hp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;O0(s.current,2,null,s,null,null),dh(),r[Mn]=null}};function Oh(s){this._internalRoot=s}Oh.prototype.unstable_scheduleHydration=function(s){if(s){var r=ws();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Ws.length&&r!==0&&r<Ws[l].priority;l++);Ws.splice(l,0,s),l===0&&L0(s)}};var B0=t.version;if(B0!=="19.1.1")throw Error(i(527,B0,"19.1.1"));rt.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var Tx={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{de=kh.inject(Tx),Kt=kh}catch{}}return uc.createRoot=function(s,r){if(!a(s))throw Error(i(299));var l=!1,u="",g=nv,m=iv,E=sv,S=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(S=r.unstable_transitionCallbacks)),r=D0(s,1,!1,null,null,l,u,g,m,E,S,null),s[Mn]=r.current,Kg(s),new hp(r)},uc.hydrateRoot=function(s,r,l){if(!a(s))throw Error(i(299));var u=!1,g="",m=nv,E=iv,S=sv,k=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(k=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),r=D0(s,1,!0,r,l??null,u,g,m,E,S,k,F),r.context=M0(null),l=r.current,u=Rn(),u=As(u),g=ks(u),g.callback=null,Ns(l,g,u),l=u,r.current.lanes=l,Bi(r,l),Si(r),s[Mn]=r.current,Kg(s),new Oh(r)},uc.version="19.1.1",uc}var W0;function Ox(){if(W0)return gp.exports;W0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),gp.exports=Mx(),gp.exports}var kx=Ox();const Nx=()=>{};var $0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},Px=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const a=n[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[e++];t[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[e++],c=n[e++],h=n[e++],d=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return t.join("")},zE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,h=c?n[a+1]:0,d=a+2<n.length,p=d?n[a+2]:0,y=o>>2,v=(o&3)<<4|h>>4;let b=(h&15)<<2|p>>6,A=p&63;d||(A=64,c||(b=64)),i.push(e[y],e[v],e[b],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(UE(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Px(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=e[n.charAt(a++)],h=a<n.length?e[n.charAt(a)]:0;++a;const p=a<n.length?e[n.charAt(a)]:64;++a;const v=a<n.length?e[n.charAt(a)]:64;if(++a,o==null||h==null||p==null||v==null)throw new Vx;const b=o<<2|h>>4;if(i.push(b),p!==64){const A=h<<4&240|p>>2;if(i.push(A),v!==64){const R=p<<6&192|v;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lx=function(n){const t=UE(n);return zE.encodeByteArray(t,!0)},df=function(n){return Lx(n).replace(/\./g,"")},BE=function(n){try{return zE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=()=>Ux().__FIREBASE_DEFAULTS__,Bx=()=>{if(typeof process>"u"||typeof $0>"u")return;const n=$0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&BE(n[1]);return t&&JSON.parse(t)},Bf=()=>{try{return Nx()||zx()||Bx()||jx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jE=n=>Bf()?.emulatorHosts?.[n],Hx=n=>{const t=jE(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},HE=()=>Bf()?.config,FE=n=>Bf()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[df(JSON.stringify(e)),df(JSON.stringify(c)),""].join(".")}const wc={};function Gx(){const n={prod:[],emulator:[]};for(const t of Object.keys(wc))wc[t]?n.emulator.push(t):n.prod.push(t);return n}function Yx(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Z0=!1;function GE(n,t){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||wc[n]===t||wc[n]||Z0)return;wc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=Gx().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Z0=!0,c()},b}function y(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=Yx(i),A=e("text"),R=document.getElementById(A)||document.createElement("span"),M=e("learnmore"),I=document.getElementById(M)||document.createElement("a"),q=e("preprendIcon"),Z=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const et=b.element;h(et),y(I,M);const at=p();d(Z,q),et.append(Z,R,I,at),document.body.appendChild(et)}o?(R.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function Qx(){const n=Bf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $x(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zx(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Jx(){return!Qx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tR(){try{return typeof indexedDB=="object"}catch{return!1}}function eR(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="FirebaseError";class Es extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=nR,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,o=this.errors[t],c=o?iR(o,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Es(a,h,i)}}function iR(n,t){return n.replace(sR,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const sR=/\{\$([^}]+)}/g;function rR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function va(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const o=n[a],c=t[a];if(J0(o)&&J0(c)){if(!va(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function J0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function aR(n,t){const e=new oR(n,t);return e.subscribe.bind(e)}class oR{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");lR(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=_p),a.error===void 0&&(a.error=_p),a.complete===void 0&&(a.complete=_p);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lR(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n){return n&&n._delegate?n._delegate:n}class ba{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Fx;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hR(t))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(t=la){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=la){return this.instances.has(t)}getOptions(t=la){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&t(o,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=la){return this.component?this.component.multipleInstances?t:la:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uR(n){return n===la?void 0:n}function hR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new cR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nt||(Nt={}));const dR={debug:Nt.DEBUG,verbose:Nt.VERBOSE,info:Nt.INFO,warn:Nt.WARN,error:Nt.ERROR,silent:Nt.SILENT},gR=Nt.INFO,pR={[Nt.DEBUG]:"log",[Nt.VERBOSE]:"log",[Nt.INFO]:"info",[Nt.WARN]:"warn",[Nt.ERROR]:"error"},mR=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),a=pR[t];if(a)console[a](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tm{constructor(t){this.name=t,this._logLevel=gR,this._logHandler=mR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?dR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nt.DEBUG,...t),this._logHandler(this,Nt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nt.VERBOSE,...t),this._logHandler(this,Nt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nt.INFO,...t),this._logHandler(this,Nt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nt.WARN,...t),this._logHandler(this,Nt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nt.ERROR,...t),this._logHandler(this,Nt.ERROR,...t)}}const yR=(n,t)=>t.some(e=>n instanceof e);let tb,eb;function _R(){return tb||(tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vR(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YE=new WeakMap,zp=new WeakMap,KE=new WeakMap,vp=new WeakMap,Em=new WeakMap;function bR(n){const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(rr(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&YE.set(e,n)}).catch(()=>{}),Em.set(t,n),t}function TR(n){if(zp.has(n))return;const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});zp.set(n,t)}let Bp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return zp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||KE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return rr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function ER(n){Bp=n(Bp)}function SR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(bp(this),t,...e);return KE.set(i,t.sort?t.sort():[t]),rr(i)}:vR().includes(n)?function(...t){return n.apply(bp(this),t),rr(YE.get(this))}:function(...t){return rr(n.apply(bp(this),t))}}function AR(n){return typeof n=="function"?SR(n):(n instanceof IDBTransaction&&TR(n),yR(n,_R())?new Proxy(n,Bp):n)}function rr(n){if(n instanceof IDBRequest)return bR(n);if(vp.has(n))return vp.get(n);const t=AR(n);return t!==n&&(vp.set(n,t),Em.set(t,n)),t}const bp=n=>Em.get(n);function wR(n,t,{blocked:e,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(n,t),h=rr(c);return i&&c.addEventListener("upgradeneeded",d=>{i(rr(c.result),d.oldVersion,d.newVersion,rr(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const xR=["get","getKey","getAll","getAllKeys","count"],RR=["put","add","delete","clear"],Tp=new Map;function nb(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Tp.get(t))return Tp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=RR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||xR.includes(e)))return;const o=async function(c,...h){const d=this.transaction(c,a?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[e](...h),a&&d.done]))[0]};return Tp.set(t,o),o}ER(n=>({...n,get:(t,e,i)=>nb(t,e)||n.get(t,e,i),has:(t,e)=>!!nb(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(IR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function IR(n){return n.getComponent()?.type==="VERSION"}const jp="@firebase/app",ib="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Tm("@firebase/app"),DR="@firebase/app-compat",MR="@firebase/analytics-compat",OR="@firebase/analytics",kR="@firebase/app-check-compat",NR="@firebase/app-check",PR="@firebase/auth",VR="@firebase/auth-compat",LR="@firebase/database",UR="@firebase/data-connect",zR="@firebase/database-compat",BR="@firebase/functions",jR="@firebase/functions-compat",HR="@firebase/installations",FR="@firebase/installations-compat",qR="@firebase/messaging",GR="@firebase/messaging-compat",YR="@firebase/performance",KR="@firebase/performance-compat",QR="@firebase/remote-config",XR="@firebase/remote-config-compat",WR="@firebase/storage",$R="@firebase/storage-compat",ZR="@firebase/firestore",JR="@firebase/ai",tC="@firebase/firestore-compat",eC="firebase",nC="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="[DEFAULT]",iC={[jp]:"fire-core",[DR]:"fire-core-compat",[OR]:"fire-analytics",[MR]:"fire-analytics-compat",[NR]:"fire-app-check",[kR]:"fire-app-check-compat",[PR]:"fire-auth",[VR]:"fire-auth-compat",[LR]:"fire-rtdb",[UR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[BR]:"fire-fn",[jR]:"fire-fn-compat",[HR]:"fire-iid",[FR]:"fire-iid-compat",[qR]:"fire-fcm",[GR]:"fire-fcm-compat",[YR]:"fire-perf",[KR]:"fire-perf-compat",[QR]:"fire-rc",[XR]:"fire-rc-compat",[WR]:"fire-gcs",[$R]:"fire-gcs-compat",[ZR]:"fire-fst",[tC]:"fire-fst-compat",[JR]:"fire-vertex","fire-js":"fire-js",[eC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=new Map,sC=new Map,Fp=new Map;function sb(n,t){try{n.container.addComponent(t)}catch(e){_s.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function No(n){const t=n.name;if(Fp.has(t))return _s.debug(`There were multiple attempts to register component ${t}.`),!1;Fp.set(t,n);for(const e of gf.values())sb(e,n);for(const e of sC.values())sb(e,n);return!0}function Sm(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function ni(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Zc("app","Firebase",rC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=nC;function QE(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Hp,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw ar.create("bad-app-name",{appName:String(a)});if(e||(e=HE()),!e)throw ar.create("no-options");const o=gf.get(a);if(o){if(va(e,o.options)&&va(i,o.config))return o;throw ar.create("duplicate-app",{appName:a})}const c=new fR(a);for(const d of Fp.values())c.addComponent(d);const h=new aC(e,i,c);return gf.set(a,h),h}function XE(n=Hp){const t=gf.get(n);if(!t&&n===Hp&&HE())return QE();if(!t)throw ar.create("no-app",{appName:n});return t}function or(n,t,e){let i=iC[n]??n;e&&(i+=`-${e}`);const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}No(new ba(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="firebase-heartbeat-database",lC=1,Vc="firebase-heartbeat-store";let Ep=null;function WE(){return Ep||(Ep=wR(oC,lC,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Vc)}catch(e){console.warn(e)}}}}).catch(n=>{throw ar.create("idb-open",{originalErrorMessage:n.message})})),Ep}async function cC(n){try{const e=(await WE()).transaction(Vc),i=await e.objectStore(Vc).get($E(n));return await e.done,i}catch(t){if(t instanceof Es)_s.warn(t.message);else{const e=ar.create("idb-get",{originalErrorMessage:t?.message});_s.warn(e.message)}}}async function rb(n,t){try{const i=(await WE()).transaction(Vc,"readwrite");await i.objectStore(Vc).put(t,$E(n)),await i.done}catch(e){if(e instanceof Es)_s.warn(e.message);else{const i=ar.create("idb-set",{originalErrorMessage:e?.message});_s.warn(i.message)}}}function $E(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1024,hC=30;class fC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new gC(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ab();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>hC){const a=pC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){_s.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ab(),{heartbeatsToSend:e,unsentEntries:i}=dC(this._heartbeatsCache.heartbeats),a=df(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _s.warn(t),""}}}function ab(){return new Date().toISOString().substring(0,10)}function dC(n,t=uC){const e=[];let i=n.slice();for(const a of n){const o=e.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),ob(e)>t){o.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),ob(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class gC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tR()?eR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await cC(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return rb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return rb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ob(n){return df(JSON.stringify({version:2,heartbeats:n})).length}function pC(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){No(new ba("platform-logger",t=>new CR(t),"PRIVATE")),No(new ba("heartbeat",t=>new fC(t),"PRIVATE")),or(jp,ib,n),or(jp,ib,"esm2020"),or("fire-js","")}mC("");var yC="firebase",_C="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(yC,_C,"app");function ZE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vC=ZE,JE=new Zc("auth","Firebase",ZE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new Tm("@firebase/auth");function bC(n,...t){pf.logLevel<=Nt.WARN&&pf.warn(`Auth (${Ko}): ${n}`,...t)}function tf(n,...t){pf.logLevel<=Nt.ERROR&&pf.error(`Auth (${Ko}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(n,...t){throw wm(n,...t)}function ri(n,...t){return wm(n,...t)}function Am(n,t,e){const i={...vC(),[t]:e};return new Zc("auth","Firebase",i).create(t,{appName:n.name})}function pa(n){return Am(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TC(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&Pi(n,"argument-error"),Am(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wm(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return JE.create(n,...t)}function Et(n,t,...e){if(!n)throw wm(t,...e)}function ps(n){const t="INTERNAL ASSERTION FAILED: "+n;throw tf(t),new Error(t)}function vs(n,t){n||ps(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){return typeof self<"u"&&self.location?.href||""}function EC(){return lb()==="http:"||lb()==="https:"}function lb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EC()||Wx()||"connection"in navigator)?navigator.onLine:!0}function AC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(t,e){this.shortDelay=t,this.longDelay=e,vs(e>t,"Short delay should be less than long delay!"),this.isMobile=Kx()||$x()}get(){return SC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(n,t){vs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RC=new tu(3e4,6e4);function Rm(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Qo(n,t,e,i,a={}){return eS(n,a,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=Jc({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:t,headers:d,...o};return Xx()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Yo(n.emulatorConfig.host)&&(p.credentials="include"),tS.fetch()(await nS(n,n.config.apiHost,e,h),p)})}async function eS(n,t,e){n._canInitEmulator=!1;const i={...wC,...t};try{const a=new IC(n),o=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Nh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Nh(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Nh(n,"user-disabled",c);const y=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Am(n,y,p);Pi(n,y)}}catch(a){if(a instanceof Es)throw a;Pi(n,"network-request-failed",{message:String(a)})}}async function CC(n,t,e,i,a={}){const o=await Qo(n,t,e,i,a);return"mfaPendingCredential"in o&&Pi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function nS(n,t,e,i){const a=`${t}${e}?${i}`,o=n,c=o.config.emulator?xm(n.config,a):`${n.config.apiScheme}://${a}`;return xC.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class IC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(ri(this.auth,"network-request-failed")),RC.get())})}}function Nh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=ri(n,t,i);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(n,t){return Qo(n,"POST","/v1/accounts:delete",t)}async function mf(n,t){return Qo(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function MC(n,t=!1){const e=qe(n),i=await e.getIdToken(t),a=Cm(i);Et(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:xc(Sp(a.auth_time)),issuedAtTime:xc(Sp(a.iat)),expirationTime:xc(Sp(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Sp(n){return Number(n)*1e3}function Cm(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const a=BE(e);return a?JSON.parse(a):(tf("Failed to decode base64 JWT payload"),null)}catch(a){return tf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function cb(n){const t=Cm(n);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Es&&OC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function OC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(n){const t=n.auth,e=await n.getIdToken(),i=await Lc(n,mf(t,{idToken:e}));Et(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=a.providerUserInfo?.length?iS(a.providerUserInfo):[],c=PC(n.providerData,o),h=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!c?.length,p=h?d:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function NC(n){const t=qe(n);await yf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function PC(n,t){return[...n.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function iS(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(n,t){const e=await eS(n,{},async()=>{const i=Jc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await nS(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Yo(n.emulatorConfig.host)&&(d.credentials="include"),tS.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function LC(n,t){return Qo(n,"POST","/v2/accounts:revokeToken",Rm(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):cb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const e=cb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:o}=await VC(t,e);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:o}=e,c=new Io;return i&&(Et(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(Et(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),o&&(Et(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(n,t){Et(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ii{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new kC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await Lc(this,this.stsTokenManager.getToken(this.auth,t));return Et(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return MC(this,t)}reload(){return NC(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ii({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await yf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(pa(this.auth));const t=await this.getIdToken();return await Lc(this,DC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,d=e._redirectEventId??void 0,p=e.createdAt??void 0,y=e.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:A,providerData:R,stsTokenManager:M}=e;Et(v&&M,t,"internal-error");const I=Io.fromJSON(this.name,M);Et(typeof v=="string",t,"internal-error"),Zs(i,t.name),Zs(a,t.name),Et(typeof b=="boolean",t,"internal-error"),Et(typeof A=="boolean",t,"internal-error"),Zs(o,t.name),Zs(c,t.name),Zs(h,t.name),Zs(d,t.name),Zs(p,t.name),Zs(y,t.name);const q=new ii({uid:v,auth:t,email:a,emailVerified:b,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:I,createdAt:p,lastLoginAt:y});return R&&Array.isArray(R)&&(q.providerData=R.map(Z=>({...Z}))),d&&(q._redirectEventId=d),q}static async _fromIdTokenResponse(t,e,i=!1){const a=new Io;a.updateFromServerResponse(e);const o=new ii({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await yf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];Et(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?iS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,h=new Io;h.updateFromIdToken(i);const d=new ii({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Gp(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;function ms(n){vs(n instanceof Function,"Expected a class definition");let t=ub.get(n);return t?(vs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,ub.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}sS.type="NONE";const hb=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n,t,e){return`firebase:${n}:${t}:${e}`}class Do{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=ef(this.userKey,a.apiKey,o),this.fullPersistenceKey=ef("persistence",a.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await mf(this.auth,{idToken:t}).catch(()=>{});return e?ii._fromGetAccountInfoResponse(this.auth,e,t):null}return ii._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Do(ms(hb),t,i);const a=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||ms(hb);const c=ef(i,t.config.apiKey,t.name);let h=null;for(const p of e)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const b=await mf(t,{idToken:y}).catch(()=>{});if(!b)break;v=await ii._fromGetAccountInfoResponse(t,b,y)}else v=ii._fromJSON(t,y);p!==o&&(h=v),o=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Do(o,t,i):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new Do(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uS(t))return"Blackberry";if(hS(t))return"Webos";if(aS(t))return"Safari";if((t.includes("chrome/")||oS(t))&&!t.includes("edge/"))return"Chrome";if(cS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function rS(n=ln()){return/firefox\//i.test(n)}function aS(n=ln()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function oS(n=ln()){return/crios\//i.test(n)}function lS(n=ln()){return/iemobile/i.test(n)}function cS(n=ln()){return/android/i.test(n)}function uS(n=ln()){return/blackberry/i.test(n)}function hS(n=ln()){return/webos/i.test(n)}function Im(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UC(n=ln()){return Im(n)&&!!window.navigator?.standalone}function zC(){return Zx()&&document.documentMode===10}function fS(n=ln()){return Im(n)||cS(n)||hS(n)||uS(n)||/windows phone/i.test(n)||lS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(n,t=[]){let e;switch(n){case"Browser":e=fb(ln());break;case"Worker":e=`${fb(ln())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Ko}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const d=t(o);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(n,t={}){return Qo(n,"GET","/v2/passwordPolicy",Rm(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=6;class FC{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??HC,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new db(this),this.idTokenSubscription=new db(this),this.beforeStateQueue=new BC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ms(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Do.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await mf(this,{idToken:t}),i=await ii._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ni(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!o||o===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await yf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=AC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ni(this.app))return Promise.reject(pa(this));const e=t?qe(t):null;return e&&Et(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ni(this.app)?Promise.reject(pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await jC(this),e=new FC(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zc("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await LC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ms(t)||this._popupRedirectResolver;Et(e,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[ms(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=dS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&bC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function jf(n){return qe(n)}class db{constructor(t){this.auth=t,this.observer=null,this.addObserver=aR(e=>this.observer=e)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GC(n){Dm=n}function YC(n){return Dm.loadJS(n)}function KC(){return Dm.gapiScript}function QC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n,t){const e=Sm(n,"auth");if(e.isInitialized()){const a=e.getImmediate(),o=e.getOptions();if(va(o,t??{}))return a;Pi(a,"already-initialized")}return e.initialize({options:t})}function WC(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ms);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function $C(n,t,e){const i=jf(n);Et(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,o=gS(t),{host:c,port:h}=ZC(t),d=h===null?"":`:${h}`,p={url:`${o}//${c}${d}/`},y=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Et(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Et(va(p,i.config.emulator)&&va(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Yo(c)?(qE(`${o}//${c}${d}`),GE("Auth",!0)):JC()}function gS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function ZC(n){const t=gS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:gb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:gb(c)}}}function gb(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function JC(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ps("not implemented")}_getIdTokenResponse(t){return ps("not implemented")}_linkToIdToken(t,e){return ps("not implemented")}_getReauthenticationResolver(t){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(n,t){return CC(n,"POST","/v1/accounts:signInWithIdp",Rm(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="http://localhost";class Ta extends pS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ta(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Pi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...o}=e;if(!i||!a)return null;const c=new Ta(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Mo(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Mo(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Mo(t,e)}buildRequest(){const t={requestUri:tI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Jc(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Mm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends eu{constructor(){super("facebook.com")}static credential(t){return Ta._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tr.credentialFromTaggedObject(t)}static credentialFromError(t){return tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return tr.credential(t.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ta._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return gs.credentialFromTaggedObject(t)}static credentialFromError(t){return gs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return gs.credential(e,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends eu{constructor(){super("github.com")}static credential(t){return Ta._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return er.credentialFromTaggedObject(t)}static credentialFromError(t){return er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return er.credential(t.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends eu{constructor(){super("twitter.com")}static credential(t,e){return Ta._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return nr.credentialFromTaggedObject(t)}static credentialFromError(t){return nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return nr.credential(e,i)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const o=await ii._fromIdTokenResponse(t,i,a),c=pb(i);return new Po({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=pb(i);return new Po({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function pb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends Es{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new _f(t,e,i,a)}}function mS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_f._fromErrorAndOperation(n,o,t,i):o})}async function eI(n,t,e=!1){const i=await Lc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Po._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(n,t,e=!1){const{auth:i}=n;if(ni(i.app))return Promise.reject(pa(i));const a="reauthenticate";try{const o=await Lc(n,mS(i,a,t,n),e);Et(o.idToken,i,"internal-error");const c=Cm(o.idToken);Et(c,i,"internal-error");const{sub:h}=c;return Et(n.uid===h,i,"user-mismatch"),Po._forOperation(n,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&Pi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(n,t,e=!1){if(ni(n.app))return Promise.reject(pa(n));const i="signIn",a=await mS(n,i,t),o=await Po._fromIdTokenResponse(n,i,a);return e||await n._updateCurrentUser(o.user),o}function sI(n,t,e,i){return qe(n).onIdTokenChanged(t,e,i)}function rI(n,t,e){return qe(n).beforeAuthStateChanged(t,e)}function aI(n,t,e,i){return qe(n).onAuthStateChanged(t,e,i)}function yS(n){return qe(n).signOut()}const vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1e3,lI=10;class vS extends _S{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);zC()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,lI):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},oI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}vS.type="LOCAL";const cI=vS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends _S{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}bS.type="SESSION";const TS=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new Hf(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:o}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async p=>p(e.origin,o)),d=await uI(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const p=Om("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(b.data.response);break;default:clearTimeout(y),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function fI(n){Ci().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function dI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gI(){return navigator?.serviceWorker?.controller||null}function pI(){return ES()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebaseLocalStorageDb",mI=1,bf="firebaseLocalStorage",AS="fbase_key";class nu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Ff(n,t){return n.transaction([bf],t?"readwrite":"readonly").objectStore(bf)}function yI(){const n=indexedDB.deleteDatabase(SS);return new nu(n).toPromise()}function Yp(){const n=indexedDB.open(SS,mI);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(bf,{keyPath:AS})}catch(a){e(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(bf)?t(i):(i.close(),await yI(),t(await Yp()))})})}async function mb(n,t,e){const i=Ff(n,!0).put({[AS]:t,value:e});return new nu(i).toPromise()}async function _I(n,t){const e=Ff(n,!1).get(t),i=await new nu(e).toPromise();return i===void 0?null:i.value}function yb(n,t){const e=Ff(n,!0).delete(t);return new nu(e).toPromise()}const vI=800,bI=3;class wS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>bI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ES()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(pI()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dI(),!this.activeServiceWorker)return;this.sender=new hI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Yp();return await mb(t,vf,"1"),await yb(t,vf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>mb(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>_I(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>yb(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const o=Ff(a,!1).getAll();return new nu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:o}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wS.type="LOCAL";const TI=wS;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n,t){return t?ms(t):(Et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends pS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Mo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Mo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Mo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function EI(n){return iI(n.auth,new km(n),n.bypassAuthState)}function SI(n){const{auth:t,user:e}=n;return Et(e,t,"internal-error"),nI(e,new km(n),n.bypassAuthState)}async function AI(n){const{auth:t,user:e}=n;return Et(e,t,"internal-error"),eI(e,new km(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,e,i,a,o=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return EI;case"linkViaPopup":case"linkViaRedirect":return AI;case"reauthViaPopup":case"reauthViaRedirect":return SI;default:Pi(this.auth,"internal-error")}}resolve(t){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new tu(2e3,1e4);async function xI(n,t,e){if(ni(n.app))return Promise.reject(ri(n,"operation-not-supported-in-this-environment"));const i=jf(n);TC(n,t,Mm);const a=xS(i,e);return new ha(i,"signInViaPopup",t,a).executeNotNull()}class ha extends RS{constructor(t,e,i,a,o){super(t,e,a,o),this.provider=i,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const t=Om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,wI.get())};t()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="pendingRedirect",nf=new Map;class CI extends RS{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=nf.get(this.auth._key());if(!t){try{const i=await II(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}nf.set(this.auth._key(),t)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function II(n,t){const e=OI(t),i=MI(n);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function DI(n,t){nf.set(n._key(),t)}function MI(n){return ms(n._redirectPersistence)}function OI(n){return ef(RI,n.config.apiKey,n.name)}async function kI(n,t,e=!1){if(ni(n.app))return Promise.reject(pa(n));const i=jf(n),a=xS(i,t),c=await new CI(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=600*1e3;class PI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!VI(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!CS(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(ri(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=NI&&this.cachedEventUids.clear(),this.cachedEventUids.has(_b(t))}saveEventToCache(t){this.cachedEventUids.add(_b(t)),this.lastProcessedEventTime=Date.now()}}function _b(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function CS({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function VI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(n,t={}){return Qo(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zI=/^https?/;async function BI(n){if(n.config.emulator)return;const{authorizedDomains:t}=await LI(n);for(const e of t)try{if(jI(e))return}catch{}Pi(n,"unauthorized-domain")}function jI(n){const t=qp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!zI.test(e))return!1;if(UI.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new tu(3e4,6e4);function vb(){const n=Ci().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function FI(n){return new Promise((t,e)=>{function i(){vb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vb(),e(ri(n,"network-request-failed"))},timeout:HI.get()})}if(Ci().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Ci().gapi?.load)i();else{const a=QC("iframefcb");return Ci()[a]=()=>{gapi.load?i():e(ri(n,"network-request-failed"))},YC(`${KC()}?onload=${a}`).catch(o=>e(o))}}).catch(t=>{throw sf=null,t})}let sf=null;function qI(n){return sf=sf||FI(n),sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new tu(5e3,15e3),YI="__/auth/iframe",KI="emulator/auth/iframe",QI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WI(n){const t=n.config;Et(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?xm(t,KI):`https://${n.config.authDomain}/${YI}`,i={apiKey:t.apiKey,appName:n.name,v:Ko},a=XI.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Jc(i).slice(1)}`}async function $I(n){const t=await qI(n),e=Ci().gapi;return Et(e,n,"internal-error"),t.open({where:document.body,url:WI(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QI,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=ri(n,"network-request-failed"),h=Ci().setTimeout(()=>{o(c)},GI.get());function d(){Ci().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JI=500,t2=600,e2="_blank",n2="http://localhost";class bb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i2(n,t,e,i=JI,a=t2){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...ZI,width:i.toString(),height:a.toString(),top:o,left:c},p=ln().toLowerCase();e&&(h=oS(p)?e2:e),rS(p)&&(t=t||n2,d.scrollbars="yes");const y=Object.entries(d).reduce((b,[A,R])=>`${b}${A}=${R},`,"");if(UC(p)&&h!=="_self")return s2(t||"",h),new bb(null);const v=window.open(t||"",h,y);Et(v,n,"popup-blocked");try{v.focus()}catch{}return new bb(v)}function s2(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="__/auth/handler",a2="emulator/auth/handler",o2=encodeURIComponent("fac");async function Tb(n,t,e,i,a,o){Et(n.config.authDomain,n,"auth-domain-config-required"),Et(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Ko,eventId:a};if(t instanceof Mm){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",rR(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof eu){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),p=d?`#${o2}=${encodeURIComponent(d)}`:"";return`${l2(n)}?${Jc(h).slice(1)}${p}`}function l2({config:n}){return n.emulator?xm(n,a2):`https://${n.authDomain}/${r2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="webStorageSupport";class c2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TS,this._completeRedirectFn=kI,this._overrideRedirectResult=DI}async _openPopup(t,e,i,a){vs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Tb(t,e,i,qp(),a);return i2(t,o,Om())}async _openRedirect(t,e,i,a){await this._originValidation(t);const o=await Tb(t,e,i,qp(),a);return fI(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:o}=this.eventManagers[e];return a?Promise.resolve(a):(vs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await $I(t),i=new PI(t);return e.register("authEvent",a=>(Et(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ap,{type:Ap},a=>{const o=a?.[0]?.[Ap];o!==void 0&&e(!!o),Pi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=BI(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return fS()||aS()||Im()}}const u2=c2;var Eb="@firebase/auth",Sb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d2(n){No(new ba("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Et(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dS(n)},p=new qC(i,a,o,d);return WC(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),No(new ba("auth-internal",t=>{const e=jf(t.getProvider("auth").getImmediate());return(i=>new h2(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(Eb,Sb,f2(n)),or(Eb,Sb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=300,p2=FE("authIdTokenMaxAge")||g2;let Ab=null;const m2=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>p2)return;const a=e?.token;Ab!==a&&(Ab=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function y2(n=XE()){const t=Sm(n,"auth");if(t.isInitialized())return t.getImmediate();const e=XC(n,{popupRedirectResolver:u2,persistence:[TI,cI,TS]}),i=FE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=m2(o.toString());rI(e,c,()=>c(e.currentUser)),sI(e,h=>c(h))}}const a=jE("auth");return a&&$C(e,`http://${a}`),e}function _2(){return document.getElementsByTagName("head")?.[0]??document}GC({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=a=>{const o=ri("internal-error");o.customData=a,e(o)},i.type="text/javascript",i.charset="UTF-8",_2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d2("Browser");var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lr,IS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,x){function C(){}C.prototype=x.prototype,D.D=x.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(P,N,L){for(var O=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)O[$t-2]=arguments[$t];return x.prototype[N].apply(P,O)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,x,C){C||(C=0);var P=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)P[N]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(N=0;16>N;++N)P[N]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=D.g[0],C=D.g[1],N=D.g[2];var L=D.g[3],O=x+(L^C&(N^L))+P[0]+3614090360&4294967295;x=C+(O<<7&4294967295|O>>>25),O=L+(N^x&(C^N))+P[1]+3905402710&4294967295,L=x+(O<<12&4294967295|O>>>20),O=N+(C^L&(x^C))+P[2]+606105819&4294967295,N=L+(O<<17&4294967295|O>>>15),O=C+(x^N&(L^x))+P[3]+3250441966&4294967295,C=N+(O<<22&4294967295|O>>>10),O=x+(L^C&(N^L))+P[4]+4118548399&4294967295,x=C+(O<<7&4294967295|O>>>25),O=L+(N^x&(C^N))+P[5]+1200080426&4294967295,L=x+(O<<12&4294967295|O>>>20),O=N+(C^L&(x^C))+P[6]+2821735955&4294967295,N=L+(O<<17&4294967295|O>>>15),O=C+(x^N&(L^x))+P[7]+4249261313&4294967295,C=N+(O<<22&4294967295|O>>>10),O=x+(L^C&(N^L))+P[8]+1770035416&4294967295,x=C+(O<<7&4294967295|O>>>25),O=L+(N^x&(C^N))+P[9]+2336552879&4294967295,L=x+(O<<12&4294967295|O>>>20),O=N+(C^L&(x^C))+P[10]+4294925233&4294967295,N=L+(O<<17&4294967295|O>>>15),O=C+(x^N&(L^x))+P[11]+2304563134&4294967295,C=N+(O<<22&4294967295|O>>>10),O=x+(L^C&(N^L))+P[12]+1804603682&4294967295,x=C+(O<<7&4294967295|O>>>25),O=L+(N^x&(C^N))+P[13]+4254626195&4294967295,L=x+(O<<12&4294967295|O>>>20),O=N+(C^L&(x^C))+P[14]+2792965006&4294967295,N=L+(O<<17&4294967295|O>>>15),O=C+(x^N&(L^x))+P[15]+1236535329&4294967295,C=N+(O<<22&4294967295|O>>>10),O=x+(N^L&(C^N))+P[1]+4129170786&4294967295,x=C+(O<<5&4294967295|O>>>27),O=L+(C^N&(x^C))+P[6]+3225465664&4294967295,L=x+(O<<9&4294967295|O>>>23),O=N+(x^C&(L^x))+P[11]+643717713&4294967295,N=L+(O<<14&4294967295|O>>>18),O=C+(L^x&(N^L))+P[0]+3921069994&4294967295,C=N+(O<<20&4294967295|O>>>12),O=x+(N^L&(C^N))+P[5]+3593408605&4294967295,x=C+(O<<5&4294967295|O>>>27),O=L+(C^N&(x^C))+P[10]+38016083&4294967295,L=x+(O<<9&4294967295|O>>>23),O=N+(x^C&(L^x))+P[15]+3634488961&4294967295,N=L+(O<<14&4294967295|O>>>18),O=C+(L^x&(N^L))+P[4]+3889429448&4294967295,C=N+(O<<20&4294967295|O>>>12),O=x+(N^L&(C^N))+P[9]+568446438&4294967295,x=C+(O<<5&4294967295|O>>>27),O=L+(C^N&(x^C))+P[14]+3275163606&4294967295,L=x+(O<<9&4294967295|O>>>23),O=N+(x^C&(L^x))+P[3]+4107603335&4294967295,N=L+(O<<14&4294967295|O>>>18),O=C+(L^x&(N^L))+P[8]+1163531501&4294967295,C=N+(O<<20&4294967295|O>>>12),O=x+(N^L&(C^N))+P[13]+2850285829&4294967295,x=C+(O<<5&4294967295|O>>>27),O=L+(C^N&(x^C))+P[2]+4243563512&4294967295,L=x+(O<<9&4294967295|O>>>23),O=N+(x^C&(L^x))+P[7]+1735328473&4294967295,N=L+(O<<14&4294967295|O>>>18),O=C+(L^x&(N^L))+P[12]+2368359562&4294967295,C=N+(O<<20&4294967295|O>>>12),O=x+(C^N^L)+P[5]+4294588738&4294967295,x=C+(O<<4&4294967295|O>>>28),O=L+(x^C^N)+P[8]+2272392833&4294967295,L=x+(O<<11&4294967295|O>>>21),O=N+(L^x^C)+P[11]+1839030562&4294967295,N=L+(O<<16&4294967295|O>>>16),O=C+(N^L^x)+P[14]+4259657740&4294967295,C=N+(O<<23&4294967295|O>>>9),O=x+(C^N^L)+P[1]+2763975236&4294967295,x=C+(O<<4&4294967295|O>>>28),O=L+(x^C^N)+P[4]+1272893353&4294967295,L=x+(O<<11&4294967295|O>>>21),O=N+(L^x^C)+P[7]+4139469664&4294967295,N=L+(O<<16&4294967295|O>>>16),O=C+(N^L^x)+P[10]+3200236656&4294967295,C=N+(O<<23&4294967295|O>>>9),O=x+(C^N^L)+P[13]+681279174&4294967295,x=C+(O<<4&4294967295|O>>>28),O=L+(x^C^N)+P[0]+3936430074&4294967295,L=x+(O<<11&4294967295|O>>>21),O=N+(L^x^C)+P[3]+3572445317&4294967295,N=L+(O<<16&4294967295|O>>>16),O=C+(N^L^x)+P[6]+76029189&4294967295,C=N+(O<<23&4294967295|O>>>9),O=x+(C^N^L)+P[9]+3654602809&4294967295,x=C+(O<<4&4294967295|O>>>28),O=L+(x^C^N)+P[12]+3873151461&4294967295,L=x+(O<<11&4294967295|O>>>21),O=N+(L^x^C)+P[15]+530742520&4294967295,N=L+(O<<16&4294967295|O>>>16),O=C+(N^L^x)+P[2]+3299628645&4294967295,C=N+(O<<23&4294967295|O>>>9),O=x+(N^(C|~L))+P[0]+4096336452&4294967295,x=C+(O<<6&4294967295|O>>>26),O=L+(C^(x|~N))+P[7]+1126891415&4294967295,L=x+(O<<10&4294967295|O>>>22),O=N+(x^(L|~C))+P[14]+2878612391&4294967295,N=L+(O<<15&4294967295|O>>>17),O=C+(L^(N|~x))+P[5]+4237533241&4294967295,C=N+(O<<21&4294967295|O>>>11),O=x+(N^(C|~L))+P[12]+1700485571&4294967295,x=C+(O<<6&4294967295|O>>>26),O=L+(C^(x|~N))+P[3]+2399980690&4294967295,L=x+(O<<10&4294967295|O>>>22),O=N+(x^(L|~C))+P[10]+4293915773&4294967295,N=L+(O<<15&4294967295|O>>>17),O=C+(L^(N|~x))+P[1]+2240044497&4294967295,C=N+(O<<21&4294967295|O>>>11),O=x+(N^(C|~L))+P[8]+1873313359&4294967295,x=C+(O<<6&4294967295|O>>>26),O=L+(C^(x|~N))+P[15]+4264355552&4294967295,L=x+(O<<10&4294967295|O>>>22),O=N+(x^(L|~C))+P[6]+2734768916&4294967295,N=L+(O<<15&4294967295|O>>>17),O=C+(L^(N|~x))+P[13]+1309151649&4294967295,C=N+(O<<21&4294967295|O>>>11),O=x+(N^(C|~L))+P[4]+4149444226&4294967295,x=C+(O<<6&4294967295|O>>>26),O=L+(C^(x|~N))+P[11]+3174756917&4294967295,L=x+(O<<10&4294967295|O>>>22),O=N+(x^(L|~C))+P[2]+718787259&4294967295,N=L+(O<<15&4294967295|O>>>17),O=C+(L^(N|~x))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+x&4294967295,D.g[1]=D.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+L&4294967295}i.prototype.u=function(D,x){x===void 0&&(x=D.length);for(var C=x-this.blockSize,P=this.B,N=this.h,L=0;L<x;){if(N==0)for(;L<=C;)a(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<x;)if(P[N++]=D.charCodeAt(L++),N==this.blockSize){a(this,P),N=0;break}}else for(;L<x;)if(P[N++]=D[L++],N==this.blockSize){a(this,P),N=0;break}}this.h=N,this.o+=x},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var x=1;x<D.length-8;++x)D[x]=0;var C=8*this.o;for(x=D.length-8;x<D.length;++x)D[x]=C&255,C/=256;for(this.u(D),D=Array(16),x=C=0;4>x;++x)for(var P=0;32>P;P+=8)D[C++]=this.g[x]>>>P&255;return D};function o(D,x){var C=h;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=x(D)}function c(D,x){this.h=x;for(var C=[],P=!0,N=D.length-1;0<=N;N--){var L=D[N]|0;P&&L==x||(C[N]=L,P=!1)}this.g=C}var h={};function d(D){return-128<=D&&128>D?o(D,function(x){return new c([x|0],0>x?-1:0)}):new c([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return I(p(-D));for(var x=[],C=1,P=0;D>=C;P++)x[P]=D/C|0,C*=4294967296;return new c(x,0)}function y(D,x){if(D.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(D.charAt(0)=="-")return I(y(D.substring(1),x));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=p(Math.pow(x,8)),P=v,N=0;N<D.length;N+=8){var L=Math.min(8,D.length-N),O=parseInt(D.substring(N,N+L),x);8>L?(L=p(Math.pow(x,L)),P=P.j(L).add(p(O))):(P=P.j(C),P=P.add(p(O)))}return P}var v=d(0),b=d(1),A=d(16777216);n=c.prototype,n.m=function(){if(M(this))return-I(this).m();for(var D=0,x=1,C=0;C<this.g.length;C++){var P=this.i(C);D+=(0<=P?P:4294967296+P)*x,x*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(R(this))return"0";if(M(this))return"-"+I(this).toString(D);for(var x=p(Math.pow(D,6)),C=this,P="";;){var N=at(C,x).g;C=q(C,N.j(x));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=N,R(C))return L+P;for(;6>L.length;)L="0"+L;P=L+P}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function R(D){if(D.h!=0)return!1;for(var x=0;x<D.g.length;x++)if(D.g[x]!=0)return!1;return!0}function M(D){return D.h==-1}n.l=function(D){return D=q(this,D),M(D)?-1:R(D)?0:1};function I(D){for(var x=D.g.length,C=[],P=0;P<x;P++)C[P]=~D.g[P];return new c(C,~D.h).add(b)}n.abs=function(){return M(this)?I(this):this},n.add=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0,N=0;N<=x;N++){var L=P+(this.i(N)&65535)+(D.i(N)&65535),O=(L>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);P=O>>>16,L&=65535,O&=65535,C[N]=O<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function q(D,x){return D.add(I(x))}n.j=function(D){if(R(this)||R(D))return v;if(M(this))return M(D)?I(this).j(I(D)):I(I(this).j(D));if(M(D))return I(this.j(I(D)));if(0>this.l(A)&&0>D.l(A))return p(this.m()*D.m());for(var x=this.g.length+D.g.length,C=[],P=0;P<2*x;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<D.g.length;N++){var L=this.i(P)>>>16,O=this.i(P)&65535,$t=D.i(N)>>>16,At=D.i(N)&65535;C[2*P+2*N]+=O*At,Z(C,2*P+2*N),C[2*P+2*N+1]+=L*At,Z(C,2*P+2*N+1),C[2*P+2*N+1]+=O*$t,Z(C,2*P+2*N+1),C[2*P+2*N+2]+=L*$t,Z(C,2*P+2*N+2)}for(P=0;P<x;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=x;P<2*x;P++)C[P]=0;return new c(C,0)};function Z(D,x){for(;(D[x]&65535)!=D[x];)D[x+1]+=D[x]>>>16,D[x]&=65535,x++}function et(D,x){this.g=D,this.h=x}function at(D,x){if(R(x))throw Error("division by zero");if(R(D))return new et(v,v);if(M(D))return x=at(I(D),x),new et(I(x.g),I(x.h));if(M(x))return x=at(D,I(x)),new et(I(x.g),x.h);if(30<D.g.length){if(M(D)||M(x))throw Error("slowDivide_ only works with positive integers.");for(var C=b,P=x;0>=P.l(D);)C=X(C),P=X(P);var N=ot(C,1),L=ot(P,1);for(P=ot(P,2),C=ot(C,2);!R(P);){var O=L.add(P);0>=O.l(D)&&(N=N.add(C),L=O),P=ot(P,1),C=ot(C,1)}return x=q(D,N.j(x)),new et(N,x)}for(N=v;0<=D.l(x);){for(C=Math.max(1,Math.floor(D.m()/x.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),L=p(C),O=L.j(x);M(O)||0<O.l(D);)C-=P,L=p(C),O=L.j(x);R(L)&&(L=b),N=N.add(L),D=q(D,O)}return new et(N,D)}n.A=function(D){return at(this,D).h},n.and=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0;P<x;P++)C[P]=this.i(P)&D.i(P);return new c(C,this.h&D.h)},n.or=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0;P<x;P++)C[P]=this.i(P)|D.i(P);return new c(C,this.h|D.h)},n.xor=function(D){for(var x=Math.max(this.g.length,D.g.length),C=[],P=0;P<x;P++)C[P]=this.i(P)^D.i(P);return new c(C,this.h^D.h)};function X(D){for(var x=D.g.length+1,C=[],P=0;P<x;P++)C[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(C,D.h)}function ot(D,x){var C=x>>5;x%=32;for(var P=D.g.length-C,N=[],L=0;L<P;L++)N[L]=0<x?D.i(L+C)>>>x|D.i(L+C+1)<<32-x:D.i(L+C);return new c(N,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,IS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,lr=c}).apply(typeof wb<"u"?wb:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DS,yc,MS,rf,Kp,OS,kS,NS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,T){return f==Array.prototype||f==Object.prototype||(f[_]=T.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=e(this);function a(f,_){if(_)t:{var T=i;f=f.split(".");for(var w=0;w<f.length-1;w++){var j=f[w];if(!(j in T))break t;T=T[j]}f=f[f.length-1],w=T[f],_=_(w),_!=w&&_!=null&&t(T,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var T=0,w=!1,j={next:function(){if(!w&&T<f.length){var Q=T++;return{value:_(Q,f[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}a("Array.prototype.values",function(f){return f||function(){return o(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function d(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,T){return f.call.apply(f.bind,arguments)}function v(f,_,T){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),f.apply(_,j)}}return function(){return f.apply(_,arguments)}}function b(f,_,T){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function A(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var w=T.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function R(f,_){function T(){}T.prototype=_.prototype,f.aa=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(w,j,Q){for(var lt=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)lt[Lt-2]=arguments[Lt];return _.prototype[j].apply(w,lt)}}function M(f){const _=f.length;if(0<_){const T=Array(_);for(let w=0;w<_;w++)T[w]=f[w];return T}return[]}function I(f,_){for(let T=1;T<arguments.length;T++){const w=arguments[T];if(d(w)){const j=f.length||0,Q=w.length||0;f.length=j+Q;for(let lt=0;lt<Q;lt++)f[j+lt]=w[lt]}else f.push(w)}}class q{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function Z(f){return/^[\s\xa0]*$/.test(f)}function et(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function at(f){return at[" "](f),f}at[" "]=function(){};var X=et().indexOf("Gecko")!=-1&&!(et().toLowerCase().indexOf("webkit")!=-1&&et().indexOf("Edge")==-1)&&!(et().indexOf("Trident")!=-1||et().indexOf("MSIE")!=-1)&&et().indexOf("Edge")==-1;function ot(f,_,T){for(const w in f)_.call(T,f[w],w,f)}function D(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function x(f){const _={};for(const T in f)_[T]=f[T];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(f,_){let T,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(T in w)f[T]=w[T];for(let Q=0;Q<C.length;Q++)T=C[Q],Object.prototype.hasOwnProperty.call(w,T)&&(f[T]=w[T])}}function N(f){var _=1;f=f.split(":");const T=[];for(;0<_&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function L(f){h.setTimeout(()=>{throw f},0)}function O(){var f=kt;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class $t{constructor(){this.h=this.g=null}add(_,T){const w=At.get();w.set(_,T),this.h?this.h.next=w:this.g=w,this.h=w}}var At=new q(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,gt=!1,kt=new $t,V=()=>{const f=h.Promise.resolve(void 0);rt=()=>{f.then(it)}};var it=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(T){L(T)}var _=At;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}gt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};h.addEventListener("test",T,_),h.removeEventListener("test",T,_)}catch{}return f}();function wt(f,_){if(st.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(X){t:{try{at(_.nodeName);var j=!0;break t}catch{}j=!1}j||(_=null)}}else T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement);this.relatedTarget=_,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:yt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&wt.aa.h.call(this)}}R(wt,st);var yt={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oi(f,_,T,w,j){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!w,this.ha=j,this.key=++ie,this.da=this.fa=!1}function Ss(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ui(f){this.src=f,this.g={},this.h=0}Ui.prototype.add=function(f,_,T,w,j){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var lt=Sr(f,_,w,j);return-1<lt?(_=f[lt],T||(_.fa=!1)):(_=new oi(_,this.src,Q,!!w,j),_.fa=T,f.push(_)),_};function Er(f,_){var T=_.type;if(T in f.g){var w=f.g[T],j=Array.prototype.indexOf.call(w,_,void 0),Q;(Q=0<=j)&&Array.prototype.splice.call(w,j,1),Q&&(Ss(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Sr(f,_,T,w){for(var j=0;j<f.length;++j){var Q=f[j];if(!Q.da&&Q.listener==_&&Q.capture==!!T&&Q.ha==w)return j}return-1}var Ar="closure_lm_"+(1e6*Math.random()|0),el={};function uu(f,_,T,w,j){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)uu(f,_[Q],T,w,j);return null}return T=hu(T),f&&f[Pe]?f.K(_,T,p(w)?!!w.capture:!1,j):Dn(f,_,T,!1,w,j)}function Dn(f,_,T,w,j,Q){if(!_)throw Error("Invalid event type");var lt=p(j)?!!j.capture:!!j,Lt=Oa(f);if(Lt||(f[Ar]=Lt=new Ui(f)),T=Lt.add(_,T,w,lt,Q),T.proxy)return T;if(w=fd(),T.proxy=w,w.src=f,w.listener=T,f.addEventListener)dt||(j=lt),j===void 0&&(j=!1),f.addEventListener(_.toString(),w,j);else if(f.attachEvent)f.attachEvent(wr(_.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return T}function fd(){function f(T){return _.call(f.src,f.listener,T)}const _=dd;return f}function nl(f,_,T,w,j){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)nl(f,_[Q],T,w,j);else w=p(w)?!!w.capture:!!w,T=hu(T),f&&f[Pe]?(f=f.i,_=String(_).toString(),_ in f.g&&(Q=f.g[_],T=Sr(Q,T,w,j),-1<T&&(Ss(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete f.g[_],f.h--)))):f&&(f=Oa(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Sr(_,T,w,j)),(T=-1<f?_[f]:null)&&Ma(T))}function Ma(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Pe])Er(_.i,f);else{var T=f.type,w=f.proxy;_.removeEventListener?_.removeEventListener(T,w,f.capture):_.detachEvent?_.detachEvent(wr(T),w):_.addListener&&_.removeListener&&_.removeListener(w),(T=Oa(_))?(Er(T,f),T.h==0&&(T.src=null,_[Ar]=null)):Ss(f)}}}function wr(f){return f in el?el[f]:el[f]="on"+f}function dd(f,_){if(f.da)f=!0;else{_=new wt(_,this);var T=f.listener,w=f.ha||f.src;f.fa&&Ma(f),f=T.call(w,_)}return f}function Oa(f){return f=f[Ar],f instanceof Ui?f:null}var il="__closure_events_fn_"+(1e9*Math.random()>>>0);function hu(f){return typeof f=="function"?f:(f[il]||(f[il]=function(_){return f.handleEvent(_)}),f[il])}function de(){ct.call(this),this.i=new Ui(this),this.M=this,this.F=null}R(de,ct),de.prototype[Pe]=!0,de.prototype.removeEventListener=function(f,_,T,w){nl(this,f,_,T,w)};function Kt(f,_){var T,w=f.F;if(w)for(T=[];w;w=w.F)T.push(w);if(f=f.M,w=_.type||_,typeof _=="string")_=new st(_,f);else if(_ instanceof st)_.target=_.target||f;else{var j=_;_=new st(w,f),P(_,j)}if(j=!0,T)for(var Q=T.length-1;0<=Q;Q--){var lt=_.g=T[Q];j=bn(lt,w,!0,_)&&j}if(lt=_.g=f,j=bn(lt,w,!0,_)&&j,j=bn(lt,w,!1,_)&&j,T)for(Q=0;Q<T.length;Q++)lt=_.g=T[Q],j=bn(lt,w,!1,_)&&j}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var T=f.g[_],w=0;w<T.length;w++)Ss(T[w]);delete f.g[_],f.h--}}this.F=null},de.prototype.K=function(f,_,T,w){return this.i.add(String(f),_,!1,T,w)},de.prototype.L=function(f,_,T,w){return this.i.add(String(f),_,!0,T,w)};function bn(f,_,T,w){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var j=!0,Q=0;Q<_.length;++Q){var lt=_[Q];if(lt&&!lt.da&&lt.capture==T){var Lt=lt.listener,De=lt.ha||lt.src;lt.fa&&Er(f.i,lt),j=Lt.call(De,w)!==!1&&j}}return j&&!w.defaultPrevented}function Je(f,_,T){if(typeof f=="function")T&&(f=b(f,T));else if(f&&typeof f.handleEvent=="function")f=b(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function fu(f){f.g=Je(()=>{f.g=null,f.i&&(f.i=!1,fu(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class gd extends ct{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:fu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(f){ct.call(this),this.h=f,this.g={}}R(xr,ct);var Rr=[];function Cr(f){ot(f.g,function(_,T){this.g.hasOwnProperty(T)&&Ma(_)},f),f.g={}}xr.prototype.N=function(){xr.aa.N.call(this),Cr(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=h.JSON.stringify,ka=h.JSON.parse,Ir=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function sl(){}sl.prototype.h=null;function rl(f){return f.h||(f.h=f.i())}function al(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){st.call(this,"d")}R(Bi,st);function ol(){st.call(this,"c")}R(ol,st);var li={},ll=null;function As(){return ll=ll||new de}li.La="serverreachability";function Na(f){st.call(this,li.La,f)}R(Na,st);function ws(f){const _=As();Kt(_,new Na(_))}li.STAT_EVENT="statevent";function du(f,_){st.call(this,li.STAT_EVENT,f),this.stat=_}R(du,st);function ce(f){const _=As();Kt(_,new du(_,f))}li.Ma="timingevent";function Ie(f,_){st.call(this,li.Ma,f),this.size=_}R(Ie,st);function Te(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function cl(f,_,T,w,j,Q){f.info(function(){if(f.g)if(Q)for(var lt="",Lt=Q.split("&"),De=0;De<Lt.length;De++){var Ut=Lt[De].split("=");if(1<Ut.length){var Le=Ut[0];Ut=Ut[1];var Me=Le.split("_");lt=2<=Me.length&&Me[1]=="type"?lt+(Le+"="+Ut+"&"):lt+(Le+"=redacted&")}}else lt=null;else lt=Q;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+_+`
`+T+`
`+lt})}function pd(f,_,T,w,j,Q,lt){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+_+`
`+T+`
`+Q+" "+lt})}function xs(f,_,T,w){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Dr(f,T)+(w?" "+w:"")})}function gu(f,_){f.info(function(){return"TIMEOUT: "+_})}Mn.prototype.info=function(){};function Dr(f,_){if(!f.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var w=T[f];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var Q=j[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var lt=1;lt<j.length;lt++)j[lt]=""}}}}return Wn(T)}catch{return _}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function ui(){}R(ui,sl),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},ci=new ui;function cn(f,_,T,w){this.j=f,this.i=_,this.l=T,this.R=w||1,this.U=new xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new me}function me(){this.i=null,this.g="",this.h=!1}var ul={},Pa={};function $n(f,_,T){f.L=1,f.v=Pr(Tn(_)),f.m=T,f.P=!0,Hi(f,null)}function Hi(f,_){f.F=Date.now(),Mr(f),f.A=Tn(f.v);var T=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),ml(T.i,"t",w),f.C=0,T=f.j.J,f.h=new me,f.g=Du(f.j,T?_:null,!f.m),0<f.O&&(f.M=new gd(b(f.Y,f,f.g),f.O)),_=f.U,T=f.g,w=f.ca;var j="readystatechange";Array.isArray(j)||(j&&(Rr[0]=j.toString()),j=Rr);for(var Q=0;Q<j.length;Q++){var lt=uu(T,j[Q],w||_.handleEvent,!1,_.h||_);if(!lt)break;_.g[lt.key]=lt}_=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),ws(),cl(f.i,f.u,f.A,f.l,f.R,f.m)}cn.prototype.ca=function(f){f=f.target;const _=this.M;_&&Pn(f)==3?_.j():this.Y(f)},cn.prototype.Y=function(f){try{if(f==this.g)t:{const Me=Pn(this.g);var _=this.g.Ba();const Wi=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||Me!=4||_==7||(_==8||0>=Wi?ws(3):ws(2)),Cs(this);var T=this.g.Z();this.X=T;e:if(pu(this)){var w=Eu(this.g);f="";var j=w.length,Q=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ge(this),hi(this);var lt="";break e}this.h.i=new h.TextDecoder}for(_=0;_<j;_++)this.h.h=!0,f+=this.h.i.decode(w[_],{stream:!(Q&&_==j-1)});w.length=0,this.h.g+=f,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=T==200,pd(this.i,this.u,this.A,this.l,this.R,Me,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,De=this.g;if((Lt=De.g?De.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Lt)){var Ut=Lt;break e}}Ut=null}if(T=Ut)xs(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,T);else{this.o=!1,this.s=3,ce(12),Ge(this),hi(this);break t}}if(this.P){T=!0;let Ye;for(;!this.J&&this.C<lt.length;)if(Ye=mu(this,lt),Ye==Pa){Me==4&&(this.s=4,ce(14),T=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==ul){this.s=4,ce(15),xs(this.i,this.l,lt,"[Invalid Chunk]"),T=!1;break}else xs(this.i,this.l,Ye,null),Or(this,Ye);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||lt.length!=0||this.h.h||(this.s=1,ce(16),T=!1),this.o=this.o&&T,!T)xs(this.i,this.l,lt,"[Invalid Chunked Response]"),Ge(this),hi(this);else if(0<lt.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),Fr(Le),Le.M=!0,ce(11))}}else xs(this.i,this.l,lt,null),Or(this,lt);Me==4&&Ge(this),this.o&&!this.J&&(Me==4?Ru(this.j,this):(this.o=!1,Mr(this)))}else bd(this.g),T==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Ge(this),hi(this)}}}catch{}finally{}};function pu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function mu(f,_){var T=f.C,w=_.indexOf(`
`,T);return w==-1?Pa:(T=Number(_.substring(T,w)),isNaN(T)?ul:(w+=1,w+T>_.length?Pa:(_=_.slice(w,w+T),f.C=w+T,_)))}cn.prototype.cancel=function(){this.J=!0,Ge(this)};function Mr(f){f.S=Date.now()+f.I,yu(f,f.I)}function yu(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Te(b(f.ba,f),_)}function Cs(f){f.B&&(h.clearTimeout(f.B),f.B=null)}cn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(gu(this.i,this.A),this.L!=2&&(ws(),ce(17)),Ge(this),this.s=2,hi(this)):yu(this,this.S-f)};function hi(f){f.j.G==0||f.J||Ru(f.j,f)}function Ge(f){Cs(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,Cr(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Or(f,_){try{var T=f.j;if(T.G!=0&&(T.g==f||hl(T.h,f))){if(!f.K&&hl(T.h,f)&&T.G==3){try{var w=T.Da.g.parse(_)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)Ka(T),Ga(T);else break t;Tl(T),ce(18)}}else T.za=j[1],0<T.za-T.T&&37500>j[2]&&T.F&&T.v==0&&!T.C&&(T.C=Te(b(T.Za,T),6e3));if(1>=La(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Xi(T,11)}else if((f.K||T.g==f)&&Ka(T),!Z(_))for(j=T.Da.g.parse(_),_=0;_<j.length;_++){let Ut=j[_];if(T.T=Ut[0],Ut=Ut[1],T.G==2)if(Ut[0]=="c"){T.K=Ut[1],T.ia=Ut[2];const Le=Ut[3];Le!=null&&(T.la=Le,T.j.info("VER="+T.la));const Me=Ut[4];Me!=null&&(T.Aa=Me,T.j.info("SVER="+T.Aa));const Wi=Ut[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(w=1.5*Wi,T.L=w,T.j.info("backChannelRequestTimeoutMs_="+w)),w=T;const Ye=f.g;if(Ye){const _i=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var Q=w.h;Q.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ua(Q,Q.h),Q.h=null))}if(w.D){const Sl=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(w.ya=Sl,Zt(w.I,w.D,Sl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),w=T;var lt=f;if(w.qa=Iu(w,w.J?w.ia:null,w.W),lt.K){un(w.h,lt);var Lt=lt,De=w.L;De&&(Lt.I=De),Lt.B&&(Cs(Lt),Mr(Lt)),w.g=lt}else wu(w);0<T.i.length&&Ya(T)}else Ut[0]!="stop"&&Ut[0]!="close"||Xi(T,7);else T.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Xi(T,7):vl(T):Ut[0]!="noop"&&T.l&&T.l.ta(Ut),T.v=0)}}ws(4)}catch{}}var _u=class{constructor(f,_){this.g=f,this.map=_}};function Fi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Va(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function La(f){return f.h?1:f.g?f.g.size:0}function hl(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ua(f,_){f.g?f.g.add(_):f.h=_}function un(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Fi.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function fl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.D);return _}return M(f.i)}function md(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var _=[],T=f.length,w=0;w<T;w++)_.push(f[w]);return _}_=[],T=0;for(w in f)_[T++]=f[w];return _}function za(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var _=[];f=f.length;for(var T=0;T<f;T++)_.push(T);return _}_=[],T=0;for(const w in f)_[T++]=w;return _}}}function dl(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var T=za(f),w=md(f),j=w.length,Q=0;Q<j;Q++)_.call(void 0,w[Q],T&&T[Q],f)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yd(f,_){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var w=f[T].indexOf("="),j=null;if(0<=w){var Q=f[T].substring(0,w);j=f[T].substring(w+1)}else Q=f[T];_(Q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ee(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ee){this.h=f.h,Nr(this,f.j),this.o=f.o,this.g=f.g,Is(this,f.s),this.l=f.l;var _=f.i,T=new Gi;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),qi(this,T),this.m=f.m}else f&&(_=String(f).match(kr))?(this.h=!1,Nr(this,_[1]||"",!0),this.o=On(_[2]||""),this.g=On(_[3]||"",!0),Is(this,_[4]),this.l=On(_[5]||"",!0),qi(this,_[6]||"",!0),this.m=On(_[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}Ee.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Vr(_,gl,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Vr(_,gl,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Vr(T,T.charAt(0)=="/"?_d:pl,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Vr(T,Ba)),f.join("")};function Tn(f){return new Ee(f)}function Nr(f,_,T){f.j=T?On(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Is(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function qi(f,_,T){_ instanceof Gi?(f.i=_,bu(f.i,f.h)):(T||(_=Vr(_,vd)),f.i=new Gi(_,f.h))}function Zt(f,_,T){f.i.set(_,T)}function Pr(f){return Zt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function On(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Vr(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,vu),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function vu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var gl=/[#\/\?@]/g,pl=/[#\?:]/g,_d=/[#\?]/g,vd=/[#\?@]/g,Ba=/#/g;function Gi(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function kn(f){f.g||(f.g=new Map,f.h=0,f.i&&yd(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Gi.prototype,n.add=function(f,_){kn(this),this.i=null,f=fi(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function Yi(f,_){kn(f),_=fi(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Ki(f,_){return kn(f),_=fi(f,_),f.g.has(_)}n.forEach=function(f,_){kn(this),this.g.forEach(function(T,w){T.forEach(function(j){f.call(_,j,w,this)},this)},this)},n.na=function(){kn(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let w=0;w<_.length;w++){const j=f[w];for(let Q=0;Q<j.length;Q++)T.push(_[w])}return T},n.V=function(f){kn(this);let _=[];if(typeof f=="string")Ki(this,f)&&(_=_.concat(this.g.get(fi(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)_=_.concat(f[T])}return _},n.set=function(f,_){return kn(this),this.i=null,f=fi(this,f),Ki(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function ml(f,_,T){Yi(f,_),0<T.length&&(f.i=null,f.g.set(fi(f,_),M(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var w=_[T];const Q=encodeURIComponent(String(w)),lt=this.V(w);for(w=0;w<lt.length;w++){var j=Q;lt[w]!==""&&(j+="="+encodeURIComponent(String(lt[w]))),f.push(j)}}return this.i=f.join("&")};function fi(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function bu(f,_){_&&!f.j&&(kn(f),f.i=null,f.g.forEach(function(T,w){var j=w.toLowerCase();w!=j&&(Yi(this,w),ml(this,j,T))},f)),f.j=_}function Lr(f,_){const T=new Mn;if(h.Image){const w=new Image;w.onload=A(Nn,T,"TestLoadImage: loaded",!0,_,w),w.onerror=A(Nn,T,"TestLoadImage: error",!1,_,w),w.onabort=A(Nn,T,"TestLoadImage: abort",!1,_,w),w.ontimeout=A(Nn,T,"TestLoadImage: timeout",!1,_,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else _(!1)}function Zn(f,_){const T=new Mn,w=new AbortController,j=setTimeout(()=>{w.abort(),Nn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:w.signal}).then(Q=>{clearTimeout(j),Q.ok?Nn(T,"TestPingServer: ok",!0,_):Nn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(j),Nn(T,"TestPingServer: error",!1,_)})}function Nn(f,_,T,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(T)}catch{}}function Ur(){this.g=new Ir}function di(f,_,T){const w=T||"";try{dl(f,function(j,Q){let lt=j;p(j)&&(lt=Wn(j)),_.push(w+Q+"="+encodeURIComponent(lt))})}catch(j){throw _.push(w+"type="+encodeURIComponent("_badmap")),j}}function Ds(f){this.l=f.Ub||null,this.j=f.eb||!1}R(Ds,sl),Ds.prototype.g=function(){return new Qi(this.l,this.j)},Ds.prototype.i=function(f){return function(){return f}}({});function Qi(f,_){de.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Qi,de),n=Qi.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,pi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gi(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?gi(this):pi(this),this.readyState==3&&yl(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,gi(this))},n.Qa=function(f){this.g&&(this.response=f,gi(this))},n.ga=function(){this.g&&gi(this)};function gi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,pi(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function pi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _l(f){let _="";return ot(f,function(T,w){_+=w,_+=":",_+=T,_+=`\r
`}),_}function Ve(f,_,T){t:{for(w in T){var w=!1;break t}w=!0}w||(T=_l(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):Zt(f,_,T))}function Gt(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Gt,de);var ja=/^https?$/i,zr=["POST","PUT"];n=Gt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,T,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?rl(this.o):rl(ci),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(Q){Tu(this,Q);return}if(f=T||"",T=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)T.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())T.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),j=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(zr,_,void 0))||w||j||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,lt]of T)this.g.setRequestHeader(Q,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Br(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){Tu(this,Q)}};function Tu(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Ha(f),mi(f)}function Ha(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Kt(this,"complete"),Kt(this,"abort"),mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),Gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},n.bb=function(){Fa(this)};function Fa(f){if(f.h&&typeof c<"u"&&(!f.v[1]||Pn(f)!=4||f.Z()!=2)){if(f.u&&Pn(f)==4)Je(f.Ea,0,f);else if(Kt(f,"readystatechange"),Pn(f)==4){f.h=!1;try{const lt=f.Z();t:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var w;if(w=lt===0){var j=String(f.D).match(kr)[1]||null;!j&&h.self&&h.self.location&&(j=h.self.location.protocol.slice(0,-1)),w=!ja.test(j?j.toLowerCase():"")}T=w}if(T)Kt(f,"complete"),Kt(f,"success");else{f.m=6;try{var Q=2<Pn(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",Ha(f)}}finally{mi(f)}}}}function mi(f,_){if(f.g){Br(f);const T=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Kt(f,"ready");try{T.onreadystatechange=w}catch{}}}function Br(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Pn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),ka(_)}};function Eu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function bd(f){const _={};f=(f.g&&2<=Pn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(Z(f[w]))continue;var T=N(f[w]);const j=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=_[j]||[];_[j]=Q,Q.push(T)}D(_,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function qa(f){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jr("baseRetryDelayMs",5e3,f),this.cb=jr("retryDelaySeedMs",1e4,f),this.Wa=jr("forwardChannelMaxRetries",2,f),this.wa=jr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(f&&f.concurrentRequestLimit),this.Da=new Ur,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qa.prototype,n.la=8,n.G=1,n.connect=function(f,_,T,w){ce(0),this.W=f,this.H=_||{},T&&w!==void 0&&(this.H.OSID=T,this.H.OAID=w),this.F=this.X,this.I=Iu(this,null,this.W),Ya(this)};function vl(f){if(Su(f),f.G==3){var _=f.U++,T=Tn(f.I);if(Zt(T,"SID",f.K),Zt(T,"RID",_),Zt(T,"TYPE","terminate"),Hr(f,T),_=new cn(f,f.j,_),_.L=2,_.v=Pr(Tn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=_.v,T=!0),T||(_.g=Du(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Mr(_)}Cu(f)}function Ga(f){f.g&&(Fr(f),f.g.cancel(),f.g=null)}function Su(f){Ga(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ka(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Ya(f){if(!Va(f.h)&&!f.s){f.s=!0;var _=f.Ga;rt||V(),gt||(rt(),gt=!0),kt.add(_,f),f.B=0}}function Td(f,_){return La(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Te(b(f.Ga,f,_),El(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const j=new cn(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=x(Q),P(Q,this.S)):Q=this.S),this.m!==null||this.O||(j.H=Q,Q=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var w=this.i[T];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(_+=w,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=Au(this,j,_),T=Tn(this.I),Zt(T,"RID",f),Zt(T,"CVER",22),this.D&&Zt(T,"X-HTTP-Session-Id",this.D),Hr(this,T),Q&&(this.O?_="headers="+encodeURIComponent(String(_l(Q)))+"&"+_:this.m&&Ve(T,this.m,Q)),Ua(this.h,j),this.Ua&&Zt(T,"TYPE","init"),this.P?(Zt(T,"$req",_),Zt(T,"SID","null"),j.T=!0,$n(j,T,null)):$n(j,T,_),this.G=2}}else this.G==3&&(f?bl(this,f):this.i.length==0||Va(this.h)||bl(this))};function bl(f,_){var T;_?T=_.l:T=f.U++;const w=Tn(f.I);Zt(w,"SID",f.K),Zt(w,"RID",T),Zt(w,"AID",f.T),Hr(f,w),f.m&&f.o&&Ve(w,f.m,f.o),T=new cn(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Au(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ua(f.h,T),$n(T,w,_)}function Hr(f,_){f.H&&ot(f.H,function(T,w){Zt(_,w,T)}),f.l&&dl({},function(T,w){Zt(_,w,T)})}function Au(f,_,T){T=Math.min(f.i.length,T);var w=f.l?b(f.l.Na,f.l,f):null;t:{var j=f.i;let Q=-1;for(;;){const lt=["count="+T];Q==-1?0<T?(Q=j[0].g,lt.push("ofs="+Q)):Q=0:lt.push("ofs="+Q);let Lt=!0;for(let De=0;De<T;De++){let Ut=j[De].g;const Le=j[De].map;if(Ut-=Q,0>Ut)Q=Math.max(0,j[De].g-100),Lt=!1;else try{di(Le,lt,"req"+Ut+"_")}catch{w&&w(Le)}}if(Lt){w=lt.join("&");break t}}}return f=f.i.splice(0,T),_.D=f,w}function wu(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;rt||V(),gt||(rt(),gt=!0),kt.add(_,f),f.v=0}}function Tl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Te(b(f.Fa,f),El(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Te(b(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Ga(this),xu(this))};function Fr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function xu(f){f.g=new cn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Tn(f.qa);Zt(_,"RID","rpc"),Zt(_,"SID",f.K),Zt(_,"AID",f.T),Zt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Zt(_,"TO",f.ja),Zt(_,"TYPE","xmlhttp"),Hr(f,_),f.m&&f.o&&Ve(_,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=Pr(Tn(_)),T.m=null,T.P=!0,Hi(T,f)}n.Za=function(){this.C!=null&&(this.C=null,Ga(this),Tl(this),ce(19))};function Ka(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Ru(f,_){var T=null;if(f.g==_){Ka(f),Fr(f),f.g=null;var w=2}else if(hl(f.h,_))T=_.D,un(f.h,_),w=1;else return;if(f.G!=0){if(_.o)if(w==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var j=f.B;w=As(),Kt(w,new Ie(w,T)),Ya(f)}else wu(f);else if(j=_.s,j==3||j==0&&0<_.X||!(w==1&&Td(f,_)||w==2&&Tl(f)))switch(T&&0<T.length&&(_=f.h,_.i=_.i.concat(T)),j){case 1:Xi(f,5);break;case 4:Xi(f,10);break;case 3:Xi(f,6);break;default:Xi(f,2)}}}function El(f,_){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*_}function Xi(f,_){if(f.j.info("Error code "+_),_==2){var T=b(f.fb,f),w=f.Xa;const j=!w;w=new Ee(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Nr(w,"https"),Pr(w),j?Lr(w.toString(),T):Zn(w.toString(),T)}else ce(2);f.G=0,f.l&&f.l.sa(_),Cu(f),Su(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Cu(f){if(f.G=0,f.ka=[],f.l){const _=fl(f.h);(_.length!=0||f.i.length!=0)&&(I(f.ka,_),I(f.ka,f.i),f.h.i.length=0,M(f.i),f.i.length=0),f.l.ra()}}function Iu(f,_,T){var w=T instanceof Ee?Tn(T):new Ee(T);if(w.g!="")_&&(w.g=_+"."+w.g),Is(w,w.s);else{var j=h.location;w=j.protocol,_=_?_+"."+j.hostname:j.hostname,j=+j.port;var Q=new Ee(null);w&&Nr(Q,w),_&&(Q.g=_),j&&Is(Q,j),T&&(Q.l=T),w=Q}return T=f.D,_=f.ya,T&&_&&Zt(w,T,_),Zt(w,"VER",f.la),Hr(f,w),w}function Du(f,_,T){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new Gt(new Ds({eb:T})):new Gt(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}n=Mu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qa(){}Qa.prototype.g=function(f,_){return new hn(f,_)};function hn(f,_){de.call(this),this.g=new qa(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!Z(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!Z(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new yi(this)}R(hn,de),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){vl(this.g)},hn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Wn(f),f=T);_.i.push(new _u(_.Ya++,f)),_.G==3&&Ya(_)},hn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,hn.aa.N.call(this)};function Ou(f){Bi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){t:{for(const T in _){f=T;break t}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}R(Ou,Bi);function ku(){ol.call(this),this.status=1}R(ku,ol);function yi(f){this.g=f}R(yi,Mu),yi.prototype.ua=function(){Kt(this.g,"a")},yi.prototype.ta=function(f){Kt(this.g,new Ou(f))},yi.prototype.sa=function(f){Kt(this.g,new ku)},yi.prototype.ra=function(){Kt(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,NS=function(){return new Qa},kS=function(){return As()},OS=li,Kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,rf=Rs,ji.COMPLETE="complete",MS=ji,al.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",de.prototype.listen=de.prototype.K,yc=al,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,DS=Gt}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore",Rb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Tm("@firebase/firestore");function wo(){return Ea.logLevel}function ht(n,...t){if(Ea.logLevel<=Nt.DEBUG){const e=t.map(Nm);Ea.debug(`Firestore (${Xo}): ${n}`,...e)}}function bs(n,...t){if(Ea.logLevel<=Nt.ERROR){const e=t.map(Nm);Ea.error(`Firestore (${Xo}): ${n}`,...e)}}function Vo(n,...t){if(Ea.logLevel<=Nt.WARN){const e=t.map(Nm);Ea.warn(`Firestore (${Xo}): ${n}`,...e)}}function Nm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,PS(n,i,e)}function PS(n,t,e){let i=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw bs(i),new Error(i)}function Yt(n,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,n||PS(t,a,i)}function xt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Es{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class v2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(rn.UNAUTHENTICATED))}shutdown(){}}class b2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class T2{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Yt(this.o===void 0,42304);let i=this.i;const a=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await a(this.currentUser)})},h=d=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Yt(typeof i.accessToken=="string",31837,{l:i}),new VS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class E2{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class S2{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new E2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Yt(this.o===void 0,3512);const i=o=>{o.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const a=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Yt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Cb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=w2(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<e&&(i+=t.charAt(a[o]%62))}return i}}function Pt(n,t){return n<t?-1:n>t?1:0}function Qp(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const a=n.charAt(i),o=t.charAt(i);if(a!==o)return wp(a)===wp(o)?Pt(a,o):wp(a)?1:-1}return Pt(n.length,t.length)}const x2=55296,R2=57343;function wp(n){const t=n.charCodeAt(0);return t>=x2&&t<=R2}function Lo(n,t,e){return n.length===t.length&&n.every((i,a)=>e(i,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__name__";class Ri{constructor(t,e,i){e===void 0?e=0:e>t.length&&bt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&bt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Ri.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ri?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const o=Ri.compareSegments(t.get(a),e.get(a));if(o!==0)return o}return Pt(t.length,e.length)}static compareSegments(t,e){const i=Ri.isNumericId(t),a=Ri.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?Ri.extractNumericId(t).compare(Ri.extractNumericId(e)):Qp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return lr.fromString(t.substring(4,t.length-2))}}class re extends Ri{construct(t,e,i){return new re(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ut(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new re(e)}static emptyPath(){return new re([])}}const C2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends Ri{construct(t,e,i){return new $e(t,e,i)}static isValidIdentifier(t){return C2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ib}static keyField(){return new $e([Ib])}static fromServerFormat(t){const e=[];let i="",a=0;const o=()=>{if(i.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const h=t[a];if(h==="\\"){if(a+1===t.length)throw new ut(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ut(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(o(),a++)}if(o(),c)throw new ut(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new $e(e)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(re.fromString(t))}static fromName(t){return new mt(re.fromString(t).popFirst(5))}static empty(){return new mt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return re.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n,t,e){if(!e)throw new ut(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function I2(n,t,e,i){if(t===!0&&i===!0)throw new ut(J.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Db(n){if(!mt.isDocumentKey(n))throw new ut(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mb(n){if(mt.isDocumentKey(n))throw new ut(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function US(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":bt(12329,{type:typeof n})}function ys(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ut(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=qf(n);throw new ut(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,t){const e={typeString:n};return t&&(e.value=t),e}function iu(n,t){if(!US(n))throw new ut(J.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ut(J.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=-62135596800,kb=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*kb);return new le(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Ob)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kb}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(iu(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ob;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Re("string",le._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new le(0,0))}static max(){return new St(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-1;function D2(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=St.fromTimestamp(i===1e9?new le(e+1,0):new le(e,i));return new fr(a,mt.empty(),t)}function M2(n){return new fr(n.readTime,n.key,Uc)}class fr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new fr(St.min(),mt.empty(),Uc)}static max(){return new fr(St.max(),mt.empty(),Uc)}}function O2(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=mt.comparator(n.documentKey,t.documentKey),e!==0?e:Pt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==k2)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nt((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof nt?e:nt.resolve(e)}catch(e){return nt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.reject(e)}static resolve(t){return new nt((e,i)=>{e(t)})}static reject(t){return new nt((e,i)=>{i(t)})}static waitFor(t){return new nt((e,i)=>{let a=0,o=0,c=!1;t.forEach(h=>{++a,h.next(()=>{++o,c&&o===a&&e()},d=>i(d))}),c=!0,o===a&&e()})}static or(t){let e=nt.resolve(!1);for(const i of t)e=e.next(a=>a?nt.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,o)=>{i.push(e.call(this,a,o))}),this.waitFor(i)}static mapArray(t,e){return new nt((i,a)=>{const o=t.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const p=d;e(t[p]).next(y=>{c[p]=y,++h,h===o&&i(c)},y=>a(y))}})}static doWhile(t,e){return new nt((i,a)=>{const o=()=>{t()===!0?e().next(()=>{o()},a):i()};o()})}}function P2(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function $o(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Gf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function Yf(n){return n==null}function Tf(n){return n===0&&1/n==-1/0}function V2(n){return typeof n=="number"&&Number.isInteger(n)&&!Tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="";function L2(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Nb(t)),t=U2(n.get(e),t);return Nb(t)}function U2(n,t){let e=t;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":e+="";break;case zS:e+="";break;default:e+=o}}return e}function Nb(n){return n+zS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function vr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function BS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||We.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,We.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,We.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Vh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Vh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Vh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Vh(this.root,t,this.comparator,!0)}}class Vh{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&a&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class We{constructor(t,e,i,a,o){this.key=t,this.value=e,this.color=i??We.RED,this.left=a??We.EMPTY,this.right=o??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,o){return new We(t??this.key,e??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const o=i(t,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(t,e,i),null):o===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return We.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw bt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw bt(27949);return t+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw bt(57766)}get value(){throw bt(16141)}get color(){throw bt(16727)}get left(){throw bt(29726)}get right(){throw bt(36894)}copy(t,e,i,a,o){return this}insert(t,e,i){return new We(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Vb(this.data.getIterator())}getIteratorFrom(t){return new Vb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ne)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ne(this.comparator);return e.data=t,e}}class Vb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.fields=t,t.sort($e.comparator)}static empty(){return new In([])}unionWith(t){let e=new Ne($e.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new In(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Lo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jS("Invalid base64 string: "+o):o}}(t);return new Ze(e)}static fromUint8Array(t){const e=function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o}(t);return new Ze(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(n){if(Yt(!!n,39018),typeof n=="string"){let t=0;const e=z2.exec(n);if(Yt(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gr(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="server_timestamp",FS="__type__",qS="__previous_value__",GS="__local_write_time__";function Lm(n){return(n?.mapValue?.fields||{})[FS]?.stringValue===HS}function Kf(n){const t=n.mapValue.fields[qS];return Lm(t)?Kf(t):t}function zc(n){const t=dr(n.mapValue.fields[GS].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,e,i,a,o,c,h,d,p,y){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const Ef="(default)";class Bc{constructor(t,e){this.projectId=t,this.database=e||Ef}static empty(){return new Bc("","")}get isDefaultDatabase(){return this.database===Ef}isEqual(t){return t instanceof Bc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="__type__",j2="__max__",Lh={mapValue:{}},KS="__vector__",Sf="value";function pr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lm(n)?4:F2(n)?9007199254740991:H2(n)?10:11:bt(28295,{value:n})}function Vi(n,t){if(n===t)return!0;const e=pr(n);if(e!==pr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return zc(n).isEqual(zc(t));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=dr(a.timestampValue),h=dr(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(a,o){return gr(a.bytesValue).isEqual(gr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(a,o){return ve(a.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(a.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(n,t);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return ve(a.integerValue)===ve(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=ve(a.doubleValue),h=ve(o.doubleValue);return c===h?Tf(c)===Tf(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return Lo(n.arrayValue.values||[],t.arrayValue.values||[],Vi);case 10:case 11:return function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if(Pb(c)!==Pb(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!Vi(c[d],h[d])))return!1;return!0}(n,t);default:return bt(52216,{left:n})}}function jc(n,t){return(n.values||[]).find(e=>Vi(e,t))!==void 0}function Uo(n,t){if(n===t)return 0;const e=pr(n),i=pr(t);if(e!==i)return Pt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,t.booleanValue);case 2:return function(o,c){const h=ve(o.integerValue||o.doubleValue),d=ve(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return Lb(n.timestampValue,t.timestampValue);case 4:return Lb(zc(n),zc(t));case 5:return Qp(n.stringValue,t.stringValue);case 6:return function(o,c){const h=gr(o),d=gr(c);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const h=o.split("/"),d=c.split("/");for(let p=0;p<h.length&&p<d.length;p++){const y=Pt(h[p],d[p]);if(y!==0)return y}return Pt(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const h=Pt(ve(o.latitude),ve(c.latitude));return h!==0?h:Pt(ve(o.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Ub(n.arrayValue,t.arrayValue);case 10:return function(o,c){const h=o.fields||{},d=c.fields||{},p=h[Sf]?.arrayValue,y=d[Sf]?.arrayValue,v=Pt(p?.values?.length||0,y?.values?.length||0);return v!==0?v:Ub(p,y)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===Lh.mapValue&&c===Lh.mapValue)return 0;if(o===Lh.mapValue)return 1;if(c===Lh.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),p=c.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let v=0;v<d.length&&v<y.length;++v){const b=Qp(d[v],y[v]);if(b!==0)return b;const A=Uo(h[d[v]],p[y[v]]);if(A!==0)return A}return Pt(d.length,y.length)}(n.mapValue,t.mapValue);default:throw bt(23264,{he:e})}}function Lb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Pt(n,t);const e=dr(n),i=dr(t),a=Pt(e.seconds,i.seconds);return a!==0?a:Pt(e.nanos,i.nanos)}function Ub(n,t){const e=n.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const o=Uo(e[a],i[a]);if(o)return o}return Pt(e.length,i.length)}function zo(n){return Xp(n)}function Xp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=dr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return gr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return mt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",a=!0;for(const o of e.values||[])a?a=!1:i+=",",i+=Xp(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",o=!0;for(const c of i)o?o=!1:a+=",",a+=`${c}:${Xp(e.fields[c])}`;return a+"}"}(n.mapValue):bt(61005,{value:n})}function af(n){switch(pr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Kf(n);return t?16+af(t):16;case 5:return 2*n.stringValue.length;case 6:return gr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+af(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return vr(i.fields,(o,c)=>{a+=o.length+af(c)}),a}(n.mapValue);default:throw bt(13486,{value:n})}}function zb(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Wp(n){return!!n&&"integerValue"in n}function Um(n){return!!n&&"arrayValue"in n}function Bb(n){return!!n&&"nullValue"in n}function jb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function of(n){return!!n&&"mapValue"in n}function H2(n){return(n?.mapValue?.fields||{})[YS]?.stringValue===KS}function Rc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return vr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Rc(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Rc(n.arrayValue.values[e]);return t}return{...n}}function F2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===j2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t){this.value=t}static empty(){return new _n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!of(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rc(e)}setAll(t){let e=$e.emptyPath(),i={},a=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,a),i={},a=[],e=h.popLast()}c?i[h.lastSegment()]=Rc(c):a.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,a)}delete(t){const e=this.field(t.popLast());of(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];of(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){vr(e,(a,o)=>t[a]=o);for(const a of i)delete t[a]}clone(){return new _n(Rc(this.value))}}function QS(n){const t=[];return vr(n.fields,(e,i)=>{const a=new $e([e]);if(of(i)){const o=QS(i.mapValue).fields;if(o.length===0)t.push(a);else for(const c of o)t.push(a.child(c))}else t.push(a)}),new In(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,e,i,a,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new an(t,0,St.min(),St.min(),St.min(),_n.empty(),0)}static newFoundDocument(t,e,i,a){return new an(t,1,e,St.min(),i,a,0)}static newNoDocument(t,e){return new an(t,2,e,St.min(),St.min(),_n.empty(),0)}static newUnknownDocument(t,e){return new an(t,3,e,St.min(),St.min(),_n.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof an&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(t,e){this.position=t,this.inclusive=e}}function Hb(n,t,e){let i=0;for(let a=0;a<n.position.length;a++){const o=t[a],c=n.position[a];if(o.field.isKeyField()?i=mt.comparator(mt.fromName(c.referenceValue),e.key):i=Uo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Vi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t,e="asc"){this.field=t,this.dir=e}}function q2(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class xe extends XS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Y2(t,e,i):e==="array-contains"?new X2(t,i):e==="in"?new W2(t,i):e==="not-in"?new $2(t,i):e==="array-contains-any"?new Z2(t,i):new xe(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new K2(t,i):new Q2(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Uo(e,this.value)):e!==null&&pr(this.value)===pr(e)&&this.matchesComparison(Uo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends XS{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ai(t,e)}matches(t){return WS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WS(n){return n.op==="and"}function $S(n){return G2(n)&&WS(n)}function G2(n){for(const t of n.filters)if(t instanceof ai)return!1;return!0}function $p(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+zo(n.value);if($S(n))return n.filters.map(t=>$p(t)).join(",");{const t=n.filters.map(e=>$p(e)).join(",");return`${n.op}(${t})`}}function ZS(n,t){return n instanceof xe?function(i,a){return a instanceof xe&&i.op===a.op&&i.field.isEqual(a.field)&&Vi(i.value,a.value)}(n,t):n instanceof ai?function(i,a){return a instanceof ai&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,c,h)=>o&&ZS(c,a.filters[h]),!0):!1}(n,t):void bt(19439)}function JS(n){return n instanceof xe?function(e){return`${e.field.canonicalString()} ${e.op} ${zo(e.value)}`}(n):n instanceof ai?function(e){return e.op.toString()+" {"+e.getFilters().map(JS).join(" ,")+"}"}(n):"Filter"}class Y2 extends xe{constructor(t,e,i){super(t,e,i),this.key=mt.fromName(i.referenceValue)}matches(t){const e=mt.comparator(t.key,this.key);return this.matchesComparison(e)}}class K2 extends xe{constructor(t,e){super(t,"in",e),this.keys=t1("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Q2 extends xe{constructor(t,e){super(t,"not-in",e),this.keys=t1("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function t1(n,t){return(t.arrayValue?.values||[]).map(e=>mt.fromName(e.referenceValue))}class X2 extends xe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Um(e)&&jc(e.arrayValue,this.value)}}class W2 extends xe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&jc(this.value.arrayValue,e)}}class $2 extends xe{constructor(t,e){super(t,"not-in",e)}matches(t){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!jc(this.value.arrayValue,e)}}class Z2 extends xe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Um(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>jc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,e=null,i=[],a=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function qb(n,t=null,e=[],i=[],a=null,o=null,c=null){return new J2(n,t,e,i,a,o,c)}function zm(n){const t=xt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>$p(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Yf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>zo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>zo(i)).join(",")),t.Te=e}return t.Te}function Bm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!q2(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!ZS(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Fb(n.startAt,t.startAt)&&Fb(n.endAt,t.endAt)}function Zp(n){return mt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,e=null,i=[],a=[],o=null,c="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tD(n,t,e,i,a,o,c,h){return new Zo(n,t,e,i,a,o,c,h)}function jm(n){return new Zo(n)}function Gb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function e1(n){return n.collectionGroup!==null}function Cc(n){const t=xt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ne($e.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new Hc(o,i))}),e.has($e.keyField().canonicalString())||t.Ie.push(new Hc($e.keyField(),i))}return t.Ie}function Ii(n){const t=xt(n);return t.Ee||(t.Ee=eD(t,Cc(n))),t.Ee}function eD(n,t){if(n.limitType==="F")return qb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Hc(a.field,o)});const e=n.endAt?new Af(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Af(n.startAt.position,n.startAt.inclusive):null;return qb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Jp(n,t){const e=n.filters.concat([t]);return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function tm(n,t,e){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Qf(n,t){return Bm(Ii(n),Ii(t))&&n.limitType===t.limitType}function n1(n){return`${zm(Ii(n))}|lt:${n.limitType}`}function xo(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>JS(a)).join(", ")}]`),Yf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>zo(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>zo(a)).join(",")),`Target(${i})`}(Ii(n))}; limitType=${n.limitType})`}function Xf(n,t){return t.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):mt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,a){for(const o of Cc(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,t)&&function(i,a){return!(i.startAt&&!function(c,h,d){const p=Hb(c,h,d);return c.inclusive?p<=0:p<0}(i.startAt,Cc(i),a)||i.endAt&&!function(c,h,d){const p=Hb(c,h,d);return c.inclusive?p>=0:p>0}(i.endAt,Cc(i),a))}(n,t)}function nD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function i1(n){return(t,e)=>{let i=!1;for(const a of Cc(n)){const o=iD(a,t,e);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function iD(n,t,e){const i=n.field.isKeyField()?mt.comparator(t.key,e.key):function(o,c,h){const d=c.data.field(o),p=h.data.field(o);return d!==null&&p!==null?Uo(d,p):bt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return bt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],t))return void(a[o]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){vr(this.inner,(e,i)=>{for(const[a,o]of i)t(a,o)})}isEmpty(){return BS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=new fe(mt.comparator);function Ts(){return sD}const s1=new fe(mt.comparator);function _c(...n){let t=s1;for(const e of n)t=t.insert(e.key,e);return t}function r1(n){let t=s1;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function fa(){return Ic()}function a1(){return Ic()}function Ic(){return new Ra(n=>n.toString(),(n,t)=>n.isEqual(t))}const rD=new fe(mt.comparator),aD=new Ne(mt.comparator);function Vt(...n){let t=aD;for(const e of n)t=t.add(e);return t}const oD=new Ne(Pt);function lD(){return oD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tf(t)?"-0":t}}function o1(n){return{integerValue:""+n}}function cD(n,t){return V2(t)?o1(t):Hm(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(){this._=void 0}}function uD(n,t,e){return n instanceof wf?function(a,o){const c={fields:{[FS]:{stringValue:HS},[GS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Lm(o)&&(o=Kf(o)),o&&(c.fields[qS]=o),{mapValue:c}}(e,t):n instanceof Fc?c1(n,t):n instanceof qc?u1(n,t):function(a,o){const c=l1(a,o),h=Yb(c)+Yb(a.Ae);return Wp(c)&&Wp(a.Ae)?o1(h):Hm(a.serializer,h)}(n,t)}function hD(n,t,e){return n instanceof Fc?c1(n,t):n instanceof qc?u1(n,t):e}function l1(n,t){return n instanceof xf?function(i){return Wp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class wf extends Wf{}class Fc extends Wf{constructor(t){super(),this.elements=t}}function c1(n,t){const e=h1(t);for(const i of n.elements)e.some(a=>Vi(a,i))||e.push(i);return{arrayValue:{values:e}}}class qc extends Wf{constructor(t){super(),this.elements=t}}function u1(n,t){let e=h1(t);for(const i of n.elements)e=e.filter(a=>!Vi(a,i));return{arrayValue:{values:e}}}class xf extends Wf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Yb(n){return ve(n.integerValue||n.doubleValue)}function h1(n){return Um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fD(n,t){return n.field.isEqual(t.field)&&function(i,a){return i instanceof Fc&&a instanceof Fc||i instanceof qc&&a instanceof qc?Lo(i.elements,a.elements,Vi):i instanceof xf&&a instanceof xf?Vi(i.Ae,a.Ae):i instanceof wf&&a instanceof wf}(n.transform,t.transform)}class dD{constructor(t,e){this.version=t,this.transformResults=e}}class Di{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Di}static exists(t){return new Di(void 0,t)}static updateTime(t){return new Di(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class $f{}function f1(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new g1(n.key,Di.none()):new su(n.key,n.data,Di.none());{const e=n.data,i=_n.empty();let a=new Ne($e.comparator);for(let o of t.fields)if(!a.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),a=a.add(o)}return new br(n.key,i,new In(a.toArray()),Di.none())}}function gD(n,t,e){n instanceof su?function(a,o,c){const h=a.value.clone(),d=Qb(a.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof br?function(a,o,c){if(!lf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=Qb(a.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(d1(a)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Dc(n,t,e,i){return n instanceof su?function(o,c,h,d){if(!lf(o.precondition,c))return h;const p=o.value.clone(),y=Xb(o.fieldTransforms,d,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof br?function(o,c,h,d){if(!lf(o.precondition,c))return h;const p=Xb(o.fieldTransforms,d,c),y=c.data;return y.setAll(d1(o)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,c,h){return lf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function pD(n,t){let e=null;for(const i of n.fieldTransforms){const a=t.data.field(i.field),o=l1(i.transform,a||null);o!=null&&(e===null&&(e=_n.empty()),e.set(i.field,o))}return e||null}function Kb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Lo(i,a,(o,c)=>fD(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class su extends $f{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class br extends $f{constructor(t,e,i,a,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function d1(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Qb(n,t,e){const i=new Map;Yt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let a=0;a<e.length;a++){const o=n[a],c=o.transform,h=t.data.field(o.field);i.set(o.field,hD(c,h,e[a]))}return i}function Xb(n,t,e){const i=new Map;for(const a of n){const o=a.transform,c=e.data.field(a.field);i.set(a.field,uD(o,c,t))}return i}class g1 extends $f{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mD extends $f{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(t.key)&&gD(o,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Dc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Dc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=a1();return this.mutations.forEach(a=>{const o=t.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(a.key)?null:h;const d=f1(c,h);d!==null&&i.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(St.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&Lo(this.mutations,t.mutations,(e,i)=>Kb(e,i))&&Lo(this.baseMutations,t.baseMutations,(e,i)=>Kb(e,i))}}class Fm{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){Yt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let a=function(){return rD}();const o=t.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,i[c].version);return new Fm(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Bt;function bD(n){switch(n){case J.OK:return bt(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return bt(15467,{code:n})}}function p1(n){if(n===void 0)return bs("GRPC error has no .code"),J.UNKNOWN;switch(n){case we.OK:return J.OK;case we.CANCELLED:return J.CANCELLED;case we.UNKNOWN:return J.UNKNOWN;case we.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case we.INTERNAL:return J.INTERNAL;case we.UNAVAILABLE:return J.UNAVAILABLE;case we.UNAUTHENTICATED:return J.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case we.NOT_FOUND:return J.NOT_FOUND;case we.ALREADY_EXISTS:return J.ALREADY_EXISTS;case we.PERMISSION_DENIED:return J.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case we.ABORTED:return J.ABORTED;case we.OUT_OF_RANGE:return J.OUT_OF_RANGE;case we.UNIMPLEMENTED:return J.UNIMPLEMENTED;case we.DATA_LOSS:return J.DATA_LOSS;default:return bt(39323,{code:n})}}(Bt=we||(we={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new lr([4294967295,4294967295],0);function Wb(n){const t=TD().encode(n),e=new IS;return e.update(t),new Uint8Array(e.digest())}function $b(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new lr([e,i],0),new lr([a,o],0)]}class qm{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new vc(`Invalid padding: ${e}`);if(i<0)throw new vc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new vc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=lr.fromNumber(this.ge)}ye(t,e,i){let a=t.add(e.multiply(lr.fromNumber(i)));return a.compare(ED)===1&&(a=new lr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Wb(t),[i,a]=$b(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new qm(o,a,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.ge===0)return;const e=Wb(t),[i,a]=$b(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,e,i,a,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,ru.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Zf(St.min(),a,new fe(Pt),Ts(),Vt())}}class ru{constructor(t,e,i,a,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new ru(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,e,i,a){this.be=t,this.removedTargetIds=e,this.key=i,this.De=a}}class m1{constructor(t,e){this.targetId=t,this.Ce=e}}class y1{constructor(t,e,i=Ze.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class Zb{constructor(){this.ve=0,this.Fe=Jb(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),e=Vt(),i=Vt();return this.Fe.forEach((a,o)=>{switch(o){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:bt(38017,{changeType:o})}}),new ru(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=Jb()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SD{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ts(),this.Je=Uh(),this.He=Uh(),this.Ye=new fe(Pt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:bt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,a)=>{this.rt(a)&&e(a)})}st(t){const e=t.targetId,i=t.Ce.count,a=this.ot(e);if(a){const o=a.target;if(Zp(o))if(i===0){const c=new mt(o.path);this.et(e,c,an.newNoDocument(c,St.min()))}else Yt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const h=this.ut(t),d=h?this.ct(h,t,c):1;if(d!==0){this.it(e);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=e;let c,h;try{c=gr(i).toUint8Array()}catch(d){if(d instanceof jS)return Vo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new qm(c,a,o)}catch(d){return Vo(d instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let a=0;return i.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.et(e,o,null),a++)}),a}Tt(t){const e=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&Zp(h.target)){const d=new mt(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,an.newNoDocument(d,t))}o.Be&&(e.set(c,o.ke()),o.qe())}});let i=Vt();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,c)=>c.setReadTime(t));const a=new Zf(t,e,this.Ye,this.je,i);return this.je=Ts(),this.Je=Uh(),this.He=Uh(),this.Ye=new fe(Pt),a}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Zb,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ne(Pt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ne(Pt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Zb),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Uh(){return new fe(mt.comparator)}function Jb(){return new fe(mt.comparator)}const AD={asc:"ASCENDING",desc:"DESCENDING"},wD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xD={and:"AND",or:"OR"};class RD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function em(n,t){return n.useProto3Json||Yf(t)?t:{value:t}}function Rf(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _1(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function CD(n,t){return Rf(n,t.toTimestamp())}function Mi(n){return Yt(!!n,49232),St.fromTimestamp(function(e){const i=dr(e);return new le(i.seconds,i.nanos)}(n))}function Gm(n,t){return nm(n,t).canonicalString()}function nm(n,t){const e=function(a){return new re(["projects",a.projectId,"databases",a.database])}(n).child("documents");return t===void 0?e:e.child(t)}function v1(n){const t=re.fromString(n);return Yt(A1(t),10190,{key:t.toString()}),t}function im(n,t){return Gm(n.databaseId,t.path)}function xp(n,t){const e=v1(t);if(e.get(1)!==n.databaseId.projectId)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new mt(T1(e))}function b1(n,t){return Gm(n.databaseId,t)}function ID(n){const t=v1(n);return t.length===4?re.emptyPath():T1(t)}function sm(n){return new re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function T1(n){return Yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tT(n,t,e){return{name:im(n,t),fields:e.value.mapValue.fields}}function DD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:bt(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],o=function(p,y){return p.useProto3Json?(Yt(y===void 0||typeof y=="string",58123),Ze.fromBase64String(y||"")):(Yt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Ze.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(p){const y=p.code===void 0?J.UNKNOWN:p1(p.code);return new ut(y,p.message||"")}(c);e=new y1(i,a,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=xp(n,i.document.name),o=Mi(i.document.updateTime),c=i.document.createTime?Mi(i.document.createTime):St.min(),h=new _n({mapValue:{fields:i.document.fields}}),d=an.newFoundDocument(a,o,c,h),p=i.targetIds||[],y=i.removedTargetIds||[];e=new cf(p,y,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=xp(n,i.document),o=i.readTime?Mi(i.readTime):St.min(),c=an.newNoDocument(a,o),h=i.removedTargetIds||[];e=new cf([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=xp(n,i.document),o=i.removedTargetIds||[];e=new cf([],o,a,null)}else{if(!("filter"in t))return bt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,c=new vD(a,o),h=i.targetId;e=new m1(h,c)}}return e}function MD(n,t){let e;if(t instanceof su)e={update:tT(n,t.key,t.value)};else if(t instanceof g1)e={delete:im(n,t.key)};else if(t instanceof br)e={update:tT(n,t.key,t.data),updateMask:BD(t.fieldMask)};else{if(!(t instanceof mD))return bt(16599,{Vt:t.type});e={verify:im(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof wf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof qc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof xf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw bt(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:CD(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:bt(27497)}(n,t.precondition)),e}function OD(n,t){return n&&n.length>0?(Yt(t!==void 0,14353),n.map(e=>function(a,o){let c=a.updateTime?Mi(a.updateTime):Mi(o);return c.isEqual(St.min())&&(c=Mi(o)),new dD(c,a.transformResults||[])}(e,t))):[]}function kD(n,t){return{documents:[b1(n,t.path)]}}function ND(n,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=b1(n,a);const o=function(p){if(p.length!==0)return S1(ai.create(p,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:Ro(b.field),direction:LD(b.dir)}}(y))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=em(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{ft:e,parent:a}}function PD(n){let t=ID(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){Yt(i===1,65062);const y=e.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let o=[];e.where&&(o=function(v){const b=E1(v);return b instanceof ai&&$S(b)?b.getFilters():[b]}(e.where));let c=[];e.orderBy&&(c=function(v){return v.map(b=>function(R){return new Hc(Co(R.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(b))}(e.orderBy));let h=null;e.limit&&(h=function(v){let b;return b=typeof v=="object"?v.value:v,Yf(b)?null:b}(e.limit));let d=null;e.startAt&&(d=function(v){const b=!!v.before,A=v.values||[];return new Af(A,b)}(e.startAt));let p=null;return e.endAt&&(p=function(v){const b=!v.before,A=v.values||[];return new Af(A,b)}(e.endAt)),tD(t,a,c,o,h,"F",d,p)}function VD(n,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt(28987,{purpose:a})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function E1(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Co(e.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Co(e.unaryFilter.field);return xe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Co(e.unaryFilter.field);return xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Co(e.unaryFilter.field);return xe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return bt(61313);default:return bt(60726)}}(n):n.fieldFilter!==void 0?function(e){return xe.create(Co(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return bt(58110);default:return bt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ai.create(e.compositeFilter.filters.map(i=>E1(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return bt(1026)}}(e.compositeFilter.op))}(n):bt(30097,{filter:n})}function LD(n){return AD[n]}function UD(n){return wD[n]}function zD(n){return xD[n]}function Ro(n){return{fieldPath:n.canonicalString()}}function Co(n){return $e.fromServerFormat(n.fieldPath)}function S1(n){return n instanceof xe?function(e){if(e.op==="=="){if(jb(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NAN"}};if(Bb(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(jb(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NAN"}};if(Bb(e.value))return{unaryFilter:{field:Ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(e.field),op:UD(e.op),value:e.value}}}(n):n instanceof ai?function(e){const i=e.getFilters().map(a=>S1(a));return i.length===1?i[0]:{compositeFilter:{op:zD(e.op),filters:i}}}(n):bt(54877,{filter:n})}function BD(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function A1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t,e,i,a,o=St.min(),c=St.min(),h=Ze.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new ir(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(t){this.yt=t}}function HD(n){const t=PD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.Cn=new qD}addToCollectionParentIndex(t,e){return this.Cn.add(e),nt.resolve()}getCollectionParents(t,e){return nt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return nt.resolve()}deleteFieldIndex(t,e){return nt.resolve()}deleteAllFieldIndexes(t){return nt.resolve()}createTargetIndexes(t,e){return nt.resolve()}getDocumentsMatchingTarget(t,e){return nt.resolve(null)}getIndexType(t,e){return nt.resolve(0)}getFieldIndexes(t,e){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,e){return nt.resolve(fr.min())}getMinOffsetFromCollectionGroup(t,e){return nt.resolve(fr.min())}updateCollectionGroup(t,e,i){return nt.resolve()}updateIndexEntries(t,e){return nt.resolve()}}class qD{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new Ne(re.comparator),o=!a.has(i);return this.index[e]=a.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new Ne(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},w1=41943040;class yn{static withCacheSize(t){return new yn(t,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(w1,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="LruGarbageCollector",GD=1048576;function iT([n,t],[e,i]){const a=Pt(n,e);return a===0?Pt(t,i):a}class YD{constructor(t){this.Ir=t,this.buffer=new Ne(iT),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();iT(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class KD{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ht(nT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){$o(e)?ht(nT,"Ignoring IndexedDB error during garbage collection: ",e):await Wo(e)}await this.Vr(3e5)})}}class QD{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return nt.resolve(Gf.ce);const i=new YD(e);return this.mr.forEachTarget(t,a=>i.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>i.Ar(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(eT)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eT):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,a,o,c,h,d,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(p=Date.now(),wo()<=Nt.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function XD(n,t){return new QD(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.changes=new Ra(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,an.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?nt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&Dc(i.mutation,a,In.empty(),le.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const a=fa();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(o=>{let c=_c();return o.forEach((h,d)=>{c=c.insert(h,d.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=fa();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const a=[];return i.forEach(o=>{e.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(t,a).next(o=>{o.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,a){let o=Ts();const c=Ic(),h=function(){return Ic()}();return e.forEach((d,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof br)?o=o.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Dc(y.mutation,p,y.mutation.getFieldMask(),le.now())):c.set(p.key,In.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((p,y)=>c.set(p,y)),e.forEach((p,y)=>h.set(p,new $D(y,c.get(p)??null))),h))}recalculateAndSaveOverlays(t,e){const i=Ic();let a=new fe((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(d=>{const p=e.get(d);if(p===null)return;let y=i.get(d)||In.empty();y=h.applyToLocalView(p,y),i.set(d,y);const v=(a.get(h.batchId)||Vt()).add(d);a=a.insert(h.batchId,v)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),p=d.key,y=d.value,v=a1();y.forEach(b=>{if(!o.has(b)){const A=f1(e.get(b),i.get(b));A!==null&&v.set(b,A),o=o.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(t,p,v))}return nt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(c){return mt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):e1(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-o.size):nt.resolve(fa());let h=Uc,d=o;return c.next(p=>nt.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(y)?nt.resolve():this.remoteDocumentCache.getEntry(t,y).next(b=>{d=d.insert(y,b)}))).next(()=>this.populateOverlays(t,p,o)).next(()=>this.computeViews(t,d,p,Vt())).next(y=>({batchId:h,changes:r1(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new mt(e)).next(i=>{let a=_c();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const o=e.collectionGroup;let c=_c();return this.indexManager.getCollectionParents(t,o).next(h=>nt.forEach(h,d=>{const p=function(v,b){return new Zo(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,p,i,a).next(y=>{y.forEach((v,b)=>{c=c.insert(v,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,a))).next(c=>{o.forEach((d,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,an.newInvalidDocument(y)))});let h=_c();return c.forEach((d,p)=>{const y=o.get(d);y!==void 0&&Dc(y.mutation,p,In.empty(),le.now()),Xf(e,p)&&(h=h.insert(d,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return nt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:Mi(a.createTime)}}(e)),nt.resolve()}getNamedQuery(t,e){return nt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(a){return{name:a.name,query:HD(a.bundledQuery),readTime:Mi(a.readTime)}}(e)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.overlays=new fe(mt.comparator),this.qr=new Map}getOverlay(t,e){return nt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=fa();return nt.forEach(e,a=>this.getOverlay(t,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,o)=>{this.St(t,e,o)}),nt.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),nt.resolve()}getOverlaysForCollection(t,e,i){const a=fa(),o=e.length+1,c=new mt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,p=d.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===o&&d.largestBatchId>i&&a.set(d.getKey(),d)}return nt.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let o=new fe((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let y=o.get(p.largestBatchId);y===null&&(y=fa(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=fa(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=a)););return nt.resolve(h)}St(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new _D(e,i));let o=this.qr.get(e);o===void 0&&(o=Vt(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(t){return nt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.Qr=new Ne(je.$r),this.Ur=new Ne(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new je(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new je(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new mt(new re([])),i=new je(e,t),a=new je(e,t+1),o=[];return this.Ur.forEachInRange([i,a],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new mt(new re([])),i=new je(e,t),a=new je(e,t+1);let o=Vt();return this.Ur.forEachInRange([i,a],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new je(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class je{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return mt.comparator(t.key,e.key)||Pt(t.Yr,e.Yr)}static Kr(t,e){return Pt(t.Yr,e.Yr)||mt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ne(je.$r)}checkEmpty(t){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new yD(o,e,i,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new je(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return nt.resolve(c)}lookupMutationBatch(t,e){return nt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.ei(i),o=a<0?0:a;return nt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?Vm:this.tr-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new je(e,0),a=new je(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,a],c=>{const h=this.Xr(c.Yr);o.push(h)}),nt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ne(Pt);return e.forEach(a=>{const o=new je(a,0),c=new je(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{i=i.add(h.Yr)})}),nt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let o=i;mt.isDocumentKey(o)||(o=o.child(""));const c=new je(new mt(o),0);let h=new Ne(Pt);return this.Zr.forEachWhile(d=>{const p=d.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(h=h.add(d.Yr)),!0)},c),nt.resolve(this.ti(h))}ti(t){const e=[];return t.forEach(i=>{const a=this.Xr(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){Yt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return nt.forEach(e.mutations,a=>{const o=new je(a.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new je(e,0),a=this.Zr.firstAfterOrEqual(i);return nt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,nt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(t){this.ri=t,this.docs=function(){return new fe(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),o=a?a.size:0,c=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return nt.resolve(i?i.document.mutableCopy():an.newInvalidDocument(e))}getEntries(t,e){let i=Ts();return e.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():an.newInvalidDocument(a))}),nt.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let o=Ts();const c=e.path,h=new mt(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||O2(M2(y),i)<=0||(a.has(y.key)||Xf(e,y))&&(o=o.insert(y.key,y.mutableCopy()))}return nt.resolve(o)}getAllFromCollectionGroup(t,e,i,a){bt(9500)}ii(t,e){return nt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new sM(this)}getSize(t){return nt.resolve(this.size)}}class sM extends WD{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(i)}),nt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(t){this.persistence=t,this.si=new Ra(e=>zm(e),Bm),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.oi=0,this._i=new Ym,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(t,e){return this.si.forEach((i,a)=>e(a)),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),nt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Bo(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,nt.resolve()}updateTargetData(t,e){return this.Pr(e),nt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,e,i){let a=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),a++)}),nt.waitFor(o).next(()=>a)}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return nt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),nt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const a=this.persistence.referenceDelegate,o=[];return a&&e.forEach(c=>{o.push(a.markPotentiallyOrphaned(t,c))}),nt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),nt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return nt.resolve(i)}containsKey(t,e){return nt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t,e){this.ui={},this.overlays={},this.ci=new Gf(0),this.li=!1,this.li=!0,this.hi=new eM,this.referenceDelegate=t(this),this.Pi=new rM(this),this.indexManager=new FD,this.remoteDocumentCache=function(a){return new iM(a)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new jD(e),this.Ii=new JD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new tM,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new nM(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const a=new aM(this.ci.next());return this.referenceDelegate.Ei(),i(a).next(o=>this.referenceDelegate.di(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}Ai(t,e){return nt.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class aM extends N2{constructor(t){super(),this.currentSequenceNumber=t}}class Km{constructor(t){this.persistence=t,this.Ri=new Ym,this.Vi=null}static mi(t){return new Km(t)}get fi(){if(this.Vi)return this.Vi;throw bt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),nt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),nt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),nt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(a=>this.fi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.fi,i=>{const a=mt.fromPath(i);return this.gi(t,a).next(o=>{o||e.removeEntry(a,St.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return nt.or([()=>nt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Cf{constructor(t,e){this.persistence=t,this.pi=new Ra(i=>L2(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=XD(this,e)}static mi(t,e){return new Cf(t,e)}Ei(){}di(t){return nt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return nt.forEach(this.pi,(i,a)=>this.br(t,i,a).next(o=>o?nt.resolve():e(a)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(t,c=>this.br(t,c,e).next(h=>{h||(i++,o.removeEntry(c,St.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),nt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),nt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),nt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),nt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=af(t.data.value)),e}br(t,e,i){return nt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return nt.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=a}static As(t,e){let i=Vt(),a=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Qm(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Jx()?8:P2(ln())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,a){const o={result:null};return this.ys(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(t,e,a,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new oM;return this.Ss(t,e,c).next(h=>{if(o.result=h,this.Vs)return this.bs(t,e,c,h.size)})}).next(()=>o.result)}bs(t,e,i,a){return i.documentReadCount<this.fs?(wo()<=Nt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",xo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),nt.resolve()):(wo()<=Nt.DEBUG&&ht("QueryEngine","Query:",xo(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(wo()<=Nt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",xo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ii(e))):nt.resolve())}ys(t,e){if(Gb(e))return nt.resolve(null);let i=Ii(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=tm(e,null,"F"),i=Ii(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Vt(...o);return this.ps.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const p=this.Ds(e,h);return this.Cs(e,p,c,d.readTime)?this.ys(t,tm(e,null,"F")):this.vs(t,p,e,d)}))})))}ws(t,e,i,a){return Gb(e)||a.isEqual(St.min())?nt.resolve(null):this.ps.getDocuments(t,i).next(o=>{const c=this.Ds(e,o);return this.Cs(e,c,i,a)?nt.resolve(null):(wo()<=Nt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),xo(e)),this.vs(t,c,e,D2(a,Uc)).next(h=>h))})}Ds(t,e){let i=new Ne(i1(t));return e.forEach((a,o)=>{Xf(t,o)&&(i=i.add(o))}),i}Cs(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(t,e,i){return wo()<=Nt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",xo(e)),this.ps.getDocumentsMatchingQuery(t,e,fr.min(),i)}vs(t,e,i,a){return this.ps.getDocumentsMatchingQuery(t,i,a).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="LocalStore",cM=3e8;class uM{constructor(t,e,i,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new fe(Pt),this.xs=new Ra(o=>zm(o),Bm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ZD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function hM(n,t,e,i){return new uM(n,t,e,i)}async function R1(n,t){const e=xt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let d=Vt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of o){h.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return e.localDocuments.getDocuments(i,d).next(p=>({Ls:p,removedBatchIds:c,addedBatchIds:h}))})})}function fM(n,t){const e=xt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,p,y){const v=p.batch,b=v.keys();let A=nt.resolve();return b.forEach(R=>{A=A.next(()=>y.getEntry(d,R)).next(M=>{const I=p.docVersions.get(R);Yt(I!==null,48541),M.version.compareTo(I)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Vt();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(d=d.add(h.batch.mutations[p].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function C1(n){const t=xt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function dM(n,t){const e=xt(n),i=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const h=[];t.targetChanges.forEach((y,v)=>{const b=a.get(v);if(!b)return;h.push(e.Pi.removeMatchingKeys(o,y.removedDocuments,v).next(()=>e.Pi.addMatchingKeys(o,y.addedDocuments,v)));let A=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?A=A.withResumeToken(Ze.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),a=a.insert(v,A),function(M,I,q){return M.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=cM?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(b,A,y)&&h.push(e.Pi.updateTargetData(o,A))});let d=Ts(),p=Vt();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(gM(o,c,t.documentUpdates).next(y=>{d=y.ks,p=y.qs})),!i.isEqual(St.min())){const y=e.Pi.getLastRemoteSnapshotVersion(o).next(v=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(y)}return nt.waitFor(h).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,p)).next(()=>d)}).then(o=>(e.Ms=a,o))}function gM(n,t,e){let i=Vt(),a=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=Ts();return e.forEach((h,d)=>{const p=o.get(h);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(St.min())?(t.removeEntry(h,d.readTime),c=c.insert(h,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(d),c=c.insert(h,d)):ht(Xm,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",d.version)}),{ks:c,qs:a}})}function pM(n,t){const e=xt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Vm),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function mM(n,t){const e=xt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.Pi.getTargetData(i,t).next(o=>o?(a=o,nt.resolve(a)):e.Pi.allocateTargetId(i).next(c=>(a=new ir(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function rm(n,t,e){const i=xt(n),a=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!$o(c))throw c;ht(Xm,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ms=i.Ms.remove(t),i.xs.delete(a.target)}function sT(n,t,e){const i=xt(n);let a=St.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(d,p,y){const v=xt(d),b=v.xs.get(y);return b!==void 0?nt.resolve(v.Ms.get(b)):v.Pi.getTargetData(p,y)}(i,c,Ii(t)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(c,t,e?a:St.min(),e?o:Vt())).next(h=>(yM(i,nD(t),h),{documents:h,Qs:o})))}function yM(n,t,e){let i=n.Os.get(t)||St.min();e.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Os.set(t,i)}class rT{constructor(){this.activeTargetIds=lD()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _M{constructor(){this.Mo=new rT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="ConnectivityMonitor";class oT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ht(aT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ht(aT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zh=null;function am(){return zh===null?zh=function(){return 268435456+Math.round(2147483648*Math.random())}():zh++,"0x"+zh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="RestConnection",bM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TM{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Ef?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(t,e,i,a,o){const c=am(),h=this.zo(t,e.toUriEncodedString());ht(Rp,`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,o);const{host:p}=new URL(h),y=Yo(p);return this.Jo(t,h,d,i,y).then(v=>(ht(Rp,`Received RPC '${t}' ${c}: `,v),v),v=>{throw Vo(Rp,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(t,e,i,a,o,c){return this.Go(t,e,i,a,o)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}zo(t,e){const i=bM[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class SM extends TM{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,a,o){const c=am();return new Promise((h,d)=>{const p=new DS;p.setWithCredentials(!0),p.listenOnce(MS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case rf.NO_ERROR:const v=p.getResponseJson();ht(nn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case rf.TIMEOUT:ht(nn,`RPC '${t}' ${c} timed out`),d(new ut(J.DEADLINE_EXCEEDED,"Request time out"));break;case rf.HTTP_ERROR:const b=p.getStatus();if(ht(nn,`RPC '${t}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const M=function(q){const Z=q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Z)>=0?Z:J.UNKNOWN}(R.status);d(new ut(M,R.message))}else d(new ut(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ut(J.UNAVAILABLE,"Connection failed."));break;default:bt(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ht(nn,`RPC '${t}' ${c} completed.`)}});const y=JSON.stringify(a);ht(nn,`RPC '${t}' ${c} sending request:`,a),p.send(e,"POST",y,i,15)})}T_(t,e,i){const a=am(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=NS(),h=kS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const y=o.join("");ht(nn,`Creating RPC '${t}' stream ${a}: ${y}`,d);const v=c.createWebChannel(y,d);this.I_(v);let b=!1,A=!1;const R=new EM({Yo:I=>{A?ht(nn,`Not sending because RPC '${t}' stream ${a} is closed:`,I):(b||(ht(nn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),b=!0),ht(nn,`RPC '${t}' stream ${a} sending:`,I),v.send(I))},Zo:()=>v.close()}),M=(I,q,Z)=>{I.listen(q,et=>{try{Z(et)}catch(at){setTimeout(()=>{throw at},0)}})};return M(v,yc.EventType.OPEN,()=>{A||(ht(nn,`RPC '${t}' stream ${a} transport opened.`),R.o_())}),M(v,yc.EventType.CLOSE,()=>{A||(A=!0,ht(nn,`RPC '${t}' stream ${a} transport closed`),R.a_(),this.E_(v))}),M(v,yc.EventType.ERROR,I=>{A||(A=!0,Vo(nn,`RPC '${t}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),R.a_(new ut(J.UNAVAILABLE,"The operation could not be completed")))}),M(v,yc.EventType.MESSAGE,I=>{if(!A){const q=I.data[0];Yt(!!q,16349);const Z=q,et=Z?.error||Z[0]?.error;if(et){ht(nn,`RPC '${t}' stream ${a} received error:`,et);const at=et.status;let X=function(x){const C=we[x];if(C!==void 0)return p1(C)}(at),ot=et.message;X===void 0&&(X=J.INTERNAL,ot="Unknown error status: "+at+" with message "+et.message),A=!0,R.a_(new ut(X,ot)),v.close()}else ht(nn,`RPC '${t}' stream ${a} received:`,q),R.u_(q)}}),M(h,OS.STAT_EVENT,I=>{I.stat===Kp.PROXY?ht(nn,`RPC '${t}' stream ${a} detected buffering proxy`):I.stat===Kp.NOPROXY&&ht(nn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function Cp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(n){return new RD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t,e,i=1e3,a=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-i);a>0&&ht("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="PersistentStream";class D1{constructor(t,e,i,a,o,c,h,d){this.Mi=t,this.S_=i,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I1(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===J.RESOURCE_EXHAUSTED?(bs(e.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.D_===e&&this.G_(i,a)},i=>{t(()=>{const a=new ut(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{i(()=>this.z_(a))}),this.stream.onMessage(a=>{i(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ht(lT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(ht(lT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AM extends D1{constructor(t,e,i,a,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=DD(this.serializer,t),i=function(o){if(!("targetChange"in o))return St.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?St.min():c.readTime?Mi(c.readTime):St.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=sm(this.serializer),e.addTarget=function(o,c){let h;const d=c.target;if(h=Zp(d)?{documents:kD(o,d)}:{query:ND(o,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=_1(o,c.resumeToken);const p=em(o,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(St.min())>0){h.readTime=Rf(o,c.snapshotVersion.toTimestamp());const p=em(o,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,t);const i=VD(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=sm(this.serializer),e.removeTarget=t,this.q_(e)}}class wM extends D1{constructor(t,e,i,a,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=OD(t.writeResults,t.commitTime),i=Mi(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=sm(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>MD(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{}class RM extends xM{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(t,nm(e,i),a,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(J.UNKNOWN,o.toString())})}Ho(t,e,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(t,nm(e,i),a,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(J.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class CM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bs(e),this.aa=!1):ht("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class IM{constructor(t,e,i,a,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{i.enqueueAndForget(async()=>{Ca(this)&&(ht(Sa,"Restarting streams for network reachability change."),await async function(d){const p=xt(d);p.Ea.add(4),await au(p),p.Ra.set("Unknown"),p.Ea.delete(4),await td(p)}(this))})}),this.Ra=new CM(i,a)}}async function td(n){if(Ca(n))for(const t of n.da)await t(!0)}async function au(n){for(const t of n.da)await t(!1)}function M1(n,t){const e=xt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Jm(e)?Zm(e):Jo(e).O_()&&$m(e,t))}function Wm(n,t){const e=xt(n),i=Jo(e);e.Ia.delete(t),i.O_()&&O1(e,t),e.Ia.size===0&&(i.O_()?i.L_():Ca(e)&&e.Ra.set("Unknown"))}function $m(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Jo(n).Y_(t)}function O1(n,t){n.Va.Ue(t),Jo(n).Z_(t)}function Zm(n){n.Va=new SD({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.Ra.ua()}function Jm(n){return Ca(n)&&!Jo(n).x_()&&n.Ia.size>0}function Ca(n){return xt(n).Ea.size===0}function k1(n){n.Va=void 0}async function DM(n){n.Ra.set("Online")}async function MM(n){n.Ia.forEach((t,e)=>{$m(n,t)})}async function OM(n,t){k1(n),Jm(n)?(n.Ra.ha(t),Zm(n)):n.Ra.set("Unknown")}async function kM(n,t,e){if(n.Ra.set("Online"),t instanceof y1&&t.state===2&&t.cause)try{await async function(a,o){const c=o.cause;for(const h of o.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))}(n,t)}catch(i){ht(Sa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await If(n,i)}else if(t instanceof cf?n.Va.Ze(t):t instanceof m1?n.Va.st(t):n.Va.tt(t),!e.isEqual(St.min()))try{const i=await C1(n.localStore);e.compareTo(i)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(d.resumeToken,c))}}),h.targetMismatches.forEach((d,p)=>{const y=o.Ia.get(d);if(!y)return;o.Ia.set(d,y.withResumeToken(Ze.EMPTY_BYTE_STRING,y.snapshotVersion)),O1(o,d);const v=new ir(y.target,d,p,y.sequenceNumber);$m(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ht(Sa,"Failed to raise snapshot:",i),await If(n,i)}}async function If(n,t,e){if(!$o(t))throw t;n.Ea.add(1),await au(n),n.Ra.set("Offline"),e||(e=()=>C1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(Sa,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await td(n)})}function N1(n,t){return t().catch(e=>If(n,e,t))}async function ed(n){const t=xt(n),e=mr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vm;for(;NM(t);)try{const a=await pM(t.localStore,i);if(a===null){t.Ta.length===0&&e.L_();break}i=a.batchId,PM(t,a)}catch(a){await If(t,a)}P1(t)&&V1(t)}function NM(n){return Ca(n)&&n.Ta.length<10}function PM(n,t){n.Ta.push(t);const e=mr(n);e.O_()&&e.X_&&e.ea(t.mutations)}function P1(n){return Ca(n)&&!mr(n).x_()&&n.Ta.length>0}function V1(n){mr(n).start()}async function VM(n){mr(n).ra()}async function LM(n){const t=mr(n);for(const e of n.Ta)t.ea(e.mutations)}async function UM(n,t,e){const i=n.Ta.shift(),a=Fm.from(i,t,e);await N1(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await ed(n)}async function zM(n,t){t&&mr(n).X_&&await async function(i,a){if(function(c){return bD(c)&&c!==J.ABORTED}(a.code)){const o=i.Ta.shift();mr(i).B_(),await N1(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await ed(i)}}(n,t),P1(n)&&V1(n)}async function cT(n,t){const e=xt(n);e.asyncQueue.verifyOperationInProgress(),ht(Sa,"RemoteStore received new credentials");const i=Ca(e);e.Ea.add(3),await au(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await td(e)}async function BM(n,t){const e=xt(n);t?(e.Ea.delete(2),await td(e)):t||(e.Ea.add(2),await au(e),e.Ra.set("Unknown"))}function Jo(n){return n.ma||(n.ma=function(e,i,a){const o=xt(e);return o.sa(),new AM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Xo:DM.bind(null,n),t_:MM.bind(null,n),r_:OM.bind(null,n),H_:kM.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),Jm(n)?Zm(n):n.Ra.set("Unknown")):(await n.ma.stop(),k1(n))})),n.ma}function mr(n){return n.fa||(n.fa=function(e,i,a){const o=xt(e);return o.sa(),new wM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:VM.bind(null,n),r_:zM.bind(null,n),ta:LM.bind(null,n),na:UM.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await ed(n)):(await n.fa.stop(),n.Ta.length>0&&(ht(Sa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(t,e,i,a,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,o){const c=Date.now()+i,h=new ty(t,e,c,a,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ey(n,t){if(bs("AsyncQueue",`${t}: ${n}`),$o(n))return new ut(J.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(t){return new Oo(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||mt.comparator(e.key,i.key):(e,i)=>mt.comparator(e.key,i.key),this.keyedMap=_c(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Oo;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.ga=new fe(mt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):bt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class jo{constructor(t,e,i,a,o,c,h,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,a,o){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new jo(t,e,Oo.emptySet(e),c,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class HM{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=xt(e),o=a.queries;a.queries=hT(),o.forEach((c,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new ut(J.ABORTED,"Firestore shutting down"))}}function hT(){return new Ra(n=>n1(n),Qf)}async function L1(n,t){const e=xt(n);let i=3;const a=t.query;let o=e.queries.get(a);o?!o.ba()&&t.Da()&&(i=2):(o=new jM,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(a,!0);break;case 1:o.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const h=ey(c,`Initialization of query '${xo(t.query)}' failed`);return void t.onError(h)}e.queries.set(a,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&ny(e)}async function U1(n,t){const e=xt(n),i=t.query;let a=3;const o=e.queries.get(i);if(o){const c=o.Sa.indexOf(t);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=t.Da()?0:1:!o.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function FM(n,t){const e=xt(n);let i=!1;for(const a of t){const o=a.query,c=e.queries.get(o);if(c){for(const h of c.Sa)h.Fa(a)&&(i=!0);c.wa=a}}i&&ny(e)}function qM(n,t,e){const i=xt(n),a=i.queries.get(t);if(a)for(const o of a.Sa)o.onError(e);i.queries.delete(t)}function ny(n){n.Ca.forEach(t=>{t.next()})}var om,fT;(fT=om||(om={})).Ma="default",fT.Cache="cache";class z1{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new jo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=jo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==om.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(t){this.key=t}}class j1{constructor(t){this.key=t}}class GM{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=i1(t),this.tu=new Oo(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new uT,a=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const b=a.get(y),A=Xf(this.query,v)?v:null,R=!!b&&this.mutatedKeys.has(b.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let I=!1;b&&A?b.data.isEqual(A.data)?R!==M&&(i.track({type:3,doc:A}),I=!0):this.su(b,A)||(i.track({type:2,doc:A}),I=!0,(d&&this.eu(A,d)>0||p&&this.eu(A,p)<0)&&(h=!0)):!b&&A?(i.track({type:0,doc:A}),I=!0):b&&!A&&(i.track({type:1,doc:b}),I=!0,(d||p)&&(h=!0)),I&&(A?(c=c.add(A),o=M?o.add(y):o.delete(y)):(c=c.delete(y),o=o.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),o=o.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Cs:h,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort((y,v)=>function(A,R){const M=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt(20277,{Rt:I})}};return M(A)-M(R)}(y.type,v.type)||this.eu(y.doc,v.doc)),this.ou(i),a=a??!1;const h=e&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,p=d!==this.Za;return this.Za=d,c.length!==0||p?{snapshot:new jo(this.query,t.tu,o,c,t.mutatedKeys,d===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new j1(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new B1(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=Vt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iy="SyncEngine";class YM{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class KM{constructor(t){this.key=t,this.hu=!1}}class QM{constructor(t,e,i,a,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ra(h=>n1(h),Qf),this.Iu=new Map,this.Eu=new Set,this.du=new fe(mt.comparator),this.Au=new Map,this.Ru=new Ym,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XM(n,t,e=!0){const i=K1(n);let a;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await H1(i,t,e,!0),a}async function WM(n,t){const e=K1(n);await H1(e,t,!0,!1)}async function H1(n,t,e,i){const a=await mM(n.localStore,Ii(t)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await $M(n,t,o,c==="current",a.resumeToken)),n.isPrimaryClient&&e&&M1(n.remoteStore,a),h}async function $M(n,t,e,i,a){n.pu=(v,b,A)=>async function(M,I,q,Z){let et=I.view.ru(q);et.Cs&&(et=await sT(M.localStore,I.query,!1).then(({documents:D})=>I.view.ru(D,et)));const at=Z&&Z.targetChanges.get(I.targetId),X=Z&&Z.targetMismatches.get(I.targetId)!=null,ot=I.view.applyChanges(et,M.isPrimaryClient,at,X);return gT(M,I.targetId,ot.au),ot.snapshot}(n,v,b,A);const o=await sT(n.localStore,t,!0),c=new GM(t,o.Qs),h=c.ru(o.documents),d=ru.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,d);gT(n,e,p.au);const y=new YM(t,e,c);return n.Tu.set(t,y),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),p.snapshot}async function ZM(n,t,e){const i=xt(n),a=i.Tu.get(t),o=i.Iu.get(a.targetId);if(o.length>1)return i.Iu.set(a.targetId,o.filter(c=>!Qf(c,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await rm(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&Wm(i.remoteStore,a.targetId),lm(i,a.targetId)}).catch(Wo)):(lm(i,a.targetId),await rm(i.localStore,a.targetId,!0))}async function JM(n,t){const e=xt(n),i=e.Tu.get(t),a=e.Iu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Wm(e.remoteStore,i.targetId))}async function tO(n,t,e){const i=oO(n);try{const a=await function(c,h){const d=xt(c),p=le.now(),y=h.reduce((A,R)=>A.add(R.key),Vt());let v,b;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Ts(),M=Vt();return d.Ns.getEntries(A,y).next(I=>{R=I,R.forEach((q,Z)=>{Z.isValidDocument()||(M=M.add(q))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,R)).next(I=>{v=I;const q=[];for(const Z of h){const et=pD(Z,v.get(Z.key).overlayedDocument);et!=null&&q.push(new br(Z.key,et,QS(et.value.mapValue),Di.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,q,h)}).next(I=>{b=I;const q=I.applyToLocalDocumentSet(v,M);return d.documentOverlayCache.saveOverlays(A,I.batchId,q)})}).then(()=>({batchId:b.batchId,changes:r1(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(c,h,d){let p=c.Vu[c.currentUser.toKey()];p||(p=new fe(Pt)),p=p.insert(h,d),c.Vu[c.currentUser.toKey()]=p}(i,a.batchId,e),await ou(i,a.changes),await ed(i.remoteStore)}catch(a){const o=ey(a,"Failed to persist write");e.reject(o)}}async function F1(n,t){const e=xt(n);try{const i=await dM(e.localStore,t);t.targetChanges.forEach((a,o)=>{const c=e.Au.get(o);c&&(Yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Yt(c.hu,14607):a.removedDocuments.size>0&&(Yt(c.hu,42227),c.hu=!1))}),await ou(e,i,t)}catch(i){await Wo(i)}}function dT(n,t,e){const i=xt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Tu.forEach((o,c)=>{const h=c.view.va(t);h.snapshot&&a.push(h.snapshot)}),function(c,h){const d=xt(c);d.onlineState=h;let p=!1;d.queries.forEach((y,v)=>{for(const b of v.Sa)b.va(h)&&(p=!0)}),p&&ny(d)}(i.eventManager,t),a.length&&i.Pu.H_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function eO(n,t,e){const i=xt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Au.get(t),o=a&&a.key;if(o){let c=new fe(mt.comparator);c=c.insert(o,an.newNoDocument(o,St.min()));const h=Vt().add(o),d=new Zf(St.min(),new Map,new fe(Pt),c,h);await F1(i,d),i.du=i.du.remove(o),i.Au.delete(t),sy(i)}else await rm(i.localStore,t,!1).then(()=>lm(i,t,e)).catch(Wo)}async function nO(n,t){const e=xt(n),i=t.batch.batchId;try{const a=await fM(e.localStore,t);G1(e,i,null),q1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await ou(e,a)}catch(a){await Wo(a)}}async function iO(n,t,e){const i=xt(n);try{const a=await function(c,h){const d=xt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,h).next(v=>(Yt(v!==null,37113),y=v.keys(),d.mutationQueue.removeMutationBatch(p,v))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(i.localStore,t);G1(i,t,e),q1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await ou(i,a)}catch(a){await Wo(a)}}function q1(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function G1(n,t,e){const i=xt(n);let a=i.Vu[i.currentUser.toKey()];if(a){const o=a.get(t);o&&(e?o.reject(e):o.resolve(),a=a.remove(t)),i.Vu[i.currentUser.toKey()]=a}}function lm(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||Y1(n,i)})}function Y1(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Wm(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),sy(n))}function gT(n,t,e){for(const i of e)i instanceof B1?(n.Ru.addReference(i.key,t),sO(n,i)):i instanceof j1?(ht(iy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||Y1(n,i.key)):bt(19791,{wu:i})}function sO(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(ht(iy,"New document in limbo: "+e),n.Eu.add(i),sy(n))}function sy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new mt(re.fromString(t)),i=n.fu.next();n.Au.set(i,new KM(e)),n.du=n.du.insert(e,i),M1(n.remoteStore,new ir(Ii(jm(e.path)),i,"TargetPurposeLimboResolution",Gf.ce))}}async function ou(n,t,e){const i=xt(n),a=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{c.push(i.pu(d,t,e).then(p=>{if((p||e)&&i.isPrimaryClient){const y=p?!p.fromCache:e?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(p){a.push(p);const y=Qm.As(d.targetId,p);o.push(y)}}))}),await Promise.all(c),i.Pu.H_(a),await async function(d,p){const y=xt(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>nt.forEach(p,b=>nt.forEach(b.Es,A=>y.persistence.referenceDelegate.addReference(v,b.targetId,A)).next(()=>nt.forEach(b.ds,A=>y.persistence.referenceDelegate.removeReference(v,b.targetId,A)))))}catch(v){if(!$o(v))throw v;ht(Xm,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const A=y.Ms.get(b),R=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(b,M)}}}(i.localStore,o))}async function rO(n,t){const e=xt(n);if(!e.currentUser.isEqual(t)){ht(iy,"User change. New user:",t.toKey());const i=await R1(e.localStore,t);e.currentUser=t,function(o,c){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ut(J.CANCELLED,c))})}),o.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ou(e,i.Ls)}}function aO(n,t){const e=xt(n),i=e.Au.get(t);if(i&&i.hu)return Vt().add(i.key);{let a=Vt();const o=e.Iu.get(t);if(!o)return a;for(const c of o){const h=e.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function K1(n){const t=xt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=aO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eO.bind(null,t),t.Pu.H_=FM.bind(null,t.eventManager),t.Pu.yu=qM.bind(null,t.eventManager),t}function oO(n){const t=xt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iO.bind(null,t),t}class Df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return hM(this.persistence,new lM,t.initialUser,this.serializer)}Cu(t){return new x1(Km.mi,this.serializer)}Du(t){return new _M}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Df.provider={build:()=>new Df};class lO extends Df{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Yt(this.persistence.referenceDelegate instanceof Cf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KD(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new x1(i=>Cf.mi(i,e),this.serializer)}}class cm{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rO.bind(null,this.syncEngine),await BM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new HM}()}createDatastore(t){const e=Jf(t.databaseInfo.databaseId),i=function(o){return new SM(o)}(t.databaseInfo);return function(o,c,h,d){return new RM(o,c,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,o,c,h){return new IM(i,a,o,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>dT(this.syncEngine,e,0),function(){return oT.v()?new oT:new vM}())}createSyncEngine(t,e){return function(a,o,c,h,d,p,y){const v=new QM(a,o,c,h,d,p);return y&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(e){const i=xt(e);ht(Sa,"RemoteStore shutting down."),i.Ea.add(5),await au(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cm.provider={build:()=>new cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):bs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="FirestoreClient";class cO{constructor(t,e,i,a,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=rn.UNAUTHENTICATED,this.clientId=Pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ht(yr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ht(yr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=ey(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Ip(n,t){n.asyncQueue.verifyOperationInProgress(),ht(yr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await R1(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function pT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await uO(n);ht(yr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>cT(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>cT(t.remoteStore,a)),n._onlineComponents=t}async function uO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(yr,"Using user provided OfflineComponentProvider");try{await Ip(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===J.FAILED_PRECONDITION||a.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Vo("Error using user provided cache. Falling back to memory cache: "+e),await Ip(n,new Df)}}else ht(yr,"Using default OfflineComponentProvider"),await Ip(n,new lO(void 0));return n._offlineComponents}async function X1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(yr,"Using user provided OnlineComponentProvider"),await pT(n,n._uninitializedComponentsProvider._online)):(ht(yr,"Using default OnlineComponentProvider"),await pT(n,new cm))),n._onlineComponents}function hO(n){return X1(n).then(t=>t.syncEngine)}async function um(n){const t=await X1(n),e=t.eventManager;return e.onListen=XM.bind(null,t.syncEngine),e.onUnlisten=ZM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=WM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=JM.bind(null,t.syncEngine),e}function fO(n,t,e={}){const i=new cr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,p){const y=new Q1({next:b=>{y.Nu(),c.enqueueAndForget(()=>U1(o,v)),b.fromCache&&d.source==="server"?p.reject(new ut(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new z1(h,y,{includeMetadataChanges:!0,qa:!0});return L1(o,v)}(await um(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="firestore.googleapis.com",yT=!0;class _T{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ut(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$1,this.ssl=yT}else this.host=t.host,this.ssl=t.ssl??yT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=w1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<GD)throw new ut(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}I2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W1(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nd{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _T(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new v2;switch(i.type){case"firstParty":return new S2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ut(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=mT.get(e);i&&(ht("ComponentProvider","Removing Datastore"),mT.delete(e),i.terminate())}(this),Promise.resolve()}}function dO(n,t,e,i={}){n=ys(n,nd);const a=Yo(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${t}:${e}`;a&&(qE(`https://${h}`),GE("Firestore",!0)),o.host!==$1&&o.host!==h&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:a,emulatorOptions:i};if(!va(d,c)&&(n._setSettings(d),i.mockUserToken)){let p,y;if(typeof i.mockUserToken=="string")p=i.mockUserToken,y=rn.MOCK_USER;else{p=qx(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ut(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new rn(v)}n._authCredentials=new b2(new VS(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Tr(this.firestore,t,this._query)}}class Ce{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(iu(e,Ce._jsonSchema))return new Ce(t,i||null,new mt(re.fromString(e.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Re("string",Ce._jsonSchemaVersion),referencePath:Re("string")};class ur extends Tr{constructor(t,e,i){super(t,e,jm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new mt(t))}withConverter(t){return new ur(this.firestore,t,this._path)}}function Li(n,t,...e){if(n=qe(n),LS("collection","path",t),n instanceof nd){const i=re.fromString(t,...e);return Mb(i),new ur(n,null,i)}{if(!(n instanceof Ce||n instanceof ur))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return Mb(i),new ur(n.firestore,null,i)}}function ry(n,t,...e){if(n=qe(n),arguments.length===1&&(t=Pm.newId()),LS("doc","path",t),n instanceof nd){const i=re.fromString(t,...e);return Db(i),new Ce(n,null,new mt(i))}{if(!(n instanceof Ce||n instanceof ur))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return Db(i),new Ce(n.firestore,n instanceof ur?n.converter:null,new mt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="AsyncQueue";class bT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I1(this,"async_queue_retry"),this._c=()=>{const i=Cp();i&&ht(vT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Cp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Cp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new cr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!$o(t))throw t;ht(vT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,bs("INTERNAL UNHANDLED ERROR: ",TT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=ty.createAndSchedule(this,t,e,i,o=>this.hc(o));return this.tc.push(a),a}uc(){this.nc&&bt(47125,{Pc:TT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function TT(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const a=e;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Ho extends nd{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new bT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bT(t),this._firestoreClient=void 0,await t}}}function gO(n,t){const e=typeof n=="object"?n:XE(),i=typeof n=="string"?n:Ef,a=Sm(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=Hx("firestore");o&&dO(a,...o)}return a}function ay(n){if(n._terminated)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||pO(n),n._firestoreClient}function pO(n){const t=n._freezeSettings(),e=function(a,o,c,h){return new B2(a,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,W1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new cO(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qn(Ze.fromBase64String(t))}catch(e){throw new ut(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new qn(Ze.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(iu(t,qn._jsonSchema))return qn.fromBase64String(t.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Re("string",qn._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(t){if(iu(t,Oi._jsonSchema))return new Oi(t.latitude,t.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Re("string",Oi._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(iu(t,ki._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new ki(t.vectorValues);throw new ut(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:Re("string",ki._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=/^__.*__$/;class yO{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new br(t,this.data,this.fieldMask,e,this.fieldTransforms):new su(t,this.data,e,this.fieldTransforms)}}class Z1{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new br(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function J1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt(40011,{Ac:n})}}class ly{constructor(t,e,i,a,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ly({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Mf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(J1(this.Ac)&&mO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class _O{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Jf(t)}Cc(t,e,i,a=!1){return new ly({Ac:t,methodName:e,Dc:i,path:$e.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cy(n){const t=n._freezeSettings(),e=Jf(n._databaseId);return new _O(n._databaseId,!!t.ignoreUndefinedProperties,e)}function vO(n,t,e,i,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,t,e,a);uy("Data must be an object, but it was:",c,i);const h=tA(i,c);let d,p;if(o.merge)d=new In(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const b=hm(t,v,e);if(!c.contains(b))throw new ut(J.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);nA(y,b)||y.push(b)}d=new In(y),p=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,p=c.fieldTransforms;return new yO(new _n(h),d,p)}class sd extends oy{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sd}}function bO(n,t,e,i){const a=n.Cc(1,t,e);uy("Data must be an object, but it was:",a,i);const o=[],c=_n.empty();vr(i,(d,p)=>{const y=hy(t,d,e);p=qe(p);const v=a.yc(y);if(p instanceof sd)o.push(y);else{const b=lu(p,v);b!=null&&(o.push(y),c.set(y,b))}});const h=new In(o);return new Z1(c,h,a.fieldTransforms)}function TO(n,t,e,i,a,o){const c=n.Cc(1,t,e),h=[hm(t,i,e)],d=[a];if(o.length%2!=0)throw new ut(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)h.push(hm(t,o[b])),d.push(o[b+1]);const p=[],y=_n.empty();for(let b=h.length-1;b>=0;--b)if(!nA(p,h[b])){const A=h[b];let R=d[b];R=qe(R);const M=c.yc(A);if(R instanceof sd)p.push(A);else{const I=lu(R,M);I!=null&&(p.push(A),y.set(A,I))}}const v=new In(p);return new Z1(y,v,c.fieldTransforms)}function EO(n,t,e,i=!1){return lu(e,n.Cc(i?4:3,t))}function lu(n,t){if(eA(n=qe(n)))return uy("Unsupported field value:",t,n),tA(n,t);if(n instanceof oy)return function(i,a){if(!J1(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,a){const o=[];let c=0;for(const h of i){let d=lu(h,a.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,a){if((i=qe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=le.fromDate(i);return{timestampValue:Rf(a.serializer,o)}}if(i instanceof le){const o=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rf(a.serializer,o)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qn)return{bytesValue:_1(a.serializer,i._byteString)};if(i instanceof Ce){const o=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gm(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof ki)return function(c,h){return{mapValue:{fields:{[YS]:{stringValue:KS},[Sf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Hm(h.serializer,p)})}}}}}}(i,a);throw a.Sc(`Unsupported field value: ${qf(i)}`)}(n,t)}function tA(n,t){const e={};return BS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vr(n,(i,a)=>{const o=lu(a,t.mc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function eA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof Oi||n instanceof qn||n instanceof Ce||n instanceof oy||n instanceof ki)}function uy(n,t,e){if(!eA(e)||!US(e)){const i=qf(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function hm(n,t,e){if((t=qe(t))instanceof id)return t._internalPath;if(typeof t=="string")return hy(n,t);throw Mf("Field path arguments must be of type string or ",n,!1,void 0,e)}const SO=new RegExp("[~\\*/\\[\\]]");function hy(n,t,e){if(t.search(SO)>=0)throw Mf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new id(...t.split("."))._internalPath}catch{throw Mf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Mf(n,t,e,i,a){const o=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${a}`),d+=")"),new ut(J.INVALID_ARGUMENT,h+n+d)}function nA(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,e,i,a,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new AO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class AO extends iA{data(){return super.data()}}function rd(n,t){return typeof t=="string"?hy(n,t):t instanceof id?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ut(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fy{}class rA extends fy{}function Aa(n,t,...e){let i=[];t instanceof fy&&i.push(t),i=i.concat(e),function(o){const c=o.filter(d=>d instanceof dy).length,h=o.filter(d=>d instanceof ad).length;if(c>1||c>0&&h>0)throw new ut(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class ad extends rA{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new ad(t,e,i)}_apply(t){const e=this._parse(t);return aA(t._query,e),new Tr(t.firestore,t.converter,Jp(t._query,e))}_parse(t){const e=cy(t.firestore);return function(o,c,h,d,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ut(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){AT(v,y);const R=[];for(const M of v)R.push(ST(d,o,M));b={arrayValue:{values:R}}}else b=ST(d,o,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||AT(v,y),b=EO(h,c,v,y==="in"||y==="not-in");return xe.create(p,y,b)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function od(n,t,e){const i=t,a=rd("where",n);return ad._create(a,i,e)}class dy extends fy{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new dy(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ai.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(a,o){let c=a;const h=o.getFlattenedFilters();for(const d of h)aA(c,d),c=Jp(c,d)}(t._query,e),new Tr(t.firestore,t.converter,Jp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gy extends rA{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new gy(t,e)}_apply(t){const e=function(a,o,c){if(a.startAt!==null)throw new ut(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ut(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hc(o,c)}(t._query,this._field,this._direction);return new Tr(t.firestore,t.converter,function(a,o){const c=a.explicitOrderBy.concat([o]);return new Zo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,e))}}function Gc(n,t="asc"){const e=t,i=rd("orderBy",n);return gy._create(i,e)}function ST(n,t,e){if(typeof(e=qe(e))=="string"){if(e==="")throw new ut(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e1(t)&&e.indexOf("/")!==-1)throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(re.fromString(e));if(!mt.isDocumentKey(i))throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zb(n,new mt(i))}if(e instanceof Ce)return zb(n,e._key);throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qf(e)}.`)}function AT(n,t){if(!Array.isArray(n)||n.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function aA(n,t){const e=function(a,o){for(const c of a)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ut(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class wO{convertValue(t,e="none"){switch(pr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw bt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return vr(t,(a,o)=>{i[a]=this.convertValue(o,e)}),i}convertVectorValue(t){const e=t.fields?.[Sf].arrayValue?.values?.map(i=>ve(i.doubleValue));return new ki(e)}convertGeoPoint(t){return new Oi(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Kf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(zc(t));default:return null}}convertTimestamp(t){const e=dr(t);return new le(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=re.fromString(t);Yt(A1(i),9688,{name:t});const a=new Bc(i.get(1),i.get(3)),o=new mt(i.popFirst(5));return a.isEqual(e)||bs(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class bc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ma extends iA{constructor(t,e,i,a,o,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(rd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ma._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",ma._jsonSchema={type:Re("string",ma._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class uf extends ma{data(t={}){return super.data(t)}}class ya{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new bc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new uf(this._firestore,this._userDataWriter,i.key,i,new bc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const d=new uf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new bc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new uf(a._firestore,a._userDataWriter,h.doc.key,h.doc,new bc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),y=c.indexOf(h.doc.key)),{type:RO(h.type),doc:d,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ya._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Pm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function RO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt(61501,{type:n})}}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Re("string",ya._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class py extends wO{constructor(t){super(),this.firestore=t}convertBytes(t){return new qn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,e)}}function CO(n){n=ys(n,Tr);const t=ys(n.firestore,Ho),e=ay(t),i=new py(t);return sA(n._query),fO(e,n._query).then(a=>new ya(t,i,n,a))}function oA(n,t,e,...i){n=ys(n,Ce);const a=ys(n.firestore,Ho),o=cy(a);let c;return c=typeof(t=qe(t))=="string"||t instanceof id?TO(o,"updateDoc",n._key,t,e,i):bO(o,"updateDoc",n._key,t),cA(a,[c.toMutation(n._key,Di.exists(!0))])}function lA(n,t){const e=ys(n.firestore,Ho),i=ry(n),a=xO(n.converter,t);return cA(e,[vO(cy(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Di.exists(!1))]).then(()=>i)}function wa(n,...t){n=qe(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||ET(t[i])||(e=t[i++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(ET(t[i])){const d=t[i];t[i]=d.next?.bind(d),t[i+1]=d.error?.bind(d),t[i+2]=d.complete?.bind(d)}let o,c,h;if(n instanceof Ce)c=ys(n.firestore,Ho),h=jm(n._key.path),o={next:d=>{t[i]&&t[i](IO(c,n,d))},error:t[i+1],complete:t[i+2]};else{const d=ys(n,Tr);c=ys(d.firestore,Ho),h=d._query;const p=new py(c);o={next:y=>{t[i]&&t[i](new ya(c,p,d,y))},error:t[i+1],complete:t[i+2]},sA(n._query)}return function(p,y,v,b){const A=new Q1(b),R=new z1(y,A,v);return p.asyncQueue.enqueueAndForget(async()=>L1(await um(p),R)),()=>{A.Nu(),p.asyncQueue.enqueueAndForget(async()=>U1(await um(p),R))}}(ay(c),h,a,o)}function cA(n,t){return function(i,a){const o=new cr;return i.asyncQueue.enqueueAndForget(async()=>tO(await hO(i),a,o)),o.promise}(ay(n),t)}function IO(n,t,e){const i=e.docs.get(t._key),a=new py(n);return new ma(n,a,t._key,i,new bc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(a){Xo=a})(Ko),No(new ba("firestore",(i,{instanceIdentifier:a,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new Ho(new T2(i.getProvider("auth-internal")),new A2(c,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ut(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(p.options.projectId,y)}(c,a),c);return o={useFetchStreams:e,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),or(xb,Rb,t),or(xb,Rb,"esm2020")})();const DO={apiKey:"AIzaSyD5qQ2fQN7fZoQ4zvjDfsdzO1wTmI5oNF4",authDomain:"mi-app-medica-ef3fa.firebaseapp.com",projectId:"mi-app-medica-ef3fa",storageBucket:"mi-app-medica-ef3fa.firebasestorage.app",messagingSenderId:"713331216336",appId:"1:713331216336:web:db2026dfc8b98c60c133d5"},uA=QE(DO),Of=y2(uA),Kn=gO(uA),MO=()=>{const n=async()=>{const e=new gs;try{await xI(Of,e)}catch(i){console.error("Error al iniciar sesin con Google:",i)}},t={container:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#f0f2f5"},card:{padding:"40px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"400px"},title:{fontSize:"2rem",fontWeight:"bold",marginBottom:"8px"},subtitle:{color:"#666",marginBottom:"24px"},button:{backgroundColor:"#1877f2",color:"white",fontWeight:"bold",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem"},googleIcon:{width:"24px",height:"24px",marginRight:"12px"}};return z.jsx("div",{style:t.container,children:z.jsxs("div",{style:t.card,children:[z.jsx("h1",{style:t.title,children:"App Mdica"}),z.jsx("p",{style:t.subtitle,children:"Por favor, inicia sesin para continuar"}),z.jsxs("button",{style:t.button,onClick:n,children:[z.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg",alt:"Google icon",style:t.googleIcon}),"Ingresar con Google"]})]})})},OO=()=>{const[n,t]=Ct.useState(""),[e,i]=Ct.useState(""),[a,o]=Ct.useState(""),[c,h]=Ct.useState(""),[d,p]=Ct.useState([]);Ct.useEffect(()=>{const b=Aa(Li(Kn,"personal"),od("rol","==","Auxiliar")),A=wa(b,R=>{const M=R.docs.map(I=>({id:I.id,...I.data()}));p(M)});return()=>A()},[]);const y=async b=>{if(b.preventDefault(),!n||!e||!a||!c){alert("Por favor, llena todos los campos, incluyendo la fecha de finalizacin");return}try{await lA(Li(Kn,"patients"),{name:n,id:e,email_auxiliar_asignado:a,treatmentEndDate:new Date(c),createdAt:new Date,status:"Pendiente"}),alert("Paciente guardado con xito!"),t(""),i(""),o(""),h("")}catch(A){console.error("Error al aadir el documento: ",A),alert("Hubo un error al guardar el paciente.")}},v={form:{padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",marginTop:"30px"},formGroup:{marginBottom:"15px"},label:{display:"block",marginBottom:"5px",fontWeight:"bold"},input:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},button:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}};return z.jsxs("form",{style:v.form,onSubmit:y,children:[z.jsx("h3",{children:"Aadir Nuevo Paciente"}),z.jsxs("div",{style:v.formGroup,children:[z.jsx("label",{htmlFor:"patientName",style:v.label,children:"Nombre Completo"}),z.jsx("input",{type:"text",id:"patientName",style:v.input,value:n,onChange:b=>t(b.target.value)})]}),z.jsxs("div",{style:v.formGroup,children:[z.jsx("label",{htmlFor:"patientId",style:v.label,children:"Cdula"}),z.jsx("input",{type:"text",id:"patientId",style:v.input,value:e,onChange:b=>i(b.target.value)})]}),z.jsxs("div",{style:v.formGroup,children:[z.jsx("label",{htmlFor:"auxiliary",style:v.label,children:"Asignar Auxiliar"}),z.jsxs("select",{id:"auxiliary",style:v.input,value:a,onChange:b=>o(b.target.value),children:[z.jsx("option",{value:"",children:"Selecciona una auxiliar..."}),d.map(b=>z.jsx("option",{value:b.email,children:b.nombre},b.id))]})]}),z.jsxs("div",{style:v.formGroup,children:[z.jsx("label",{htmlFor:"endDate",style:v.label,children:"Fecha de Fin de Tratamiento"}),z.jsx("input",{type:"date",id:"endDate",style:v.input,value:c,onChange:b=>h(b.target.value)})]}),z.jsx("button",{type:"submit",style:v.button,children:"Guardar Paciente"})]})},kO=()=>{const[n,t]=Ct.useState([]);Ct.useEffect(()=>{const i=Aa(Li(Kn,"patients"),Gc("createdAt","desc")),a=wa(i,o=>{const c=o.docs.map(h=>({docId:h.id,...h.data()}));t(c)});return()=>a()},[]);const e=()=>{const[i,a]=Ct.useState([]);Ct.useEffect(()=>{const d=Aa(Li(Kn,"patients"),Gc("createdAt","desc")),p=wa(d,y=>{const v=y.docs.map(b=>({docId:b.id,...b.data()}));a(v)});return()=>p()},[]);const o=async(d,p)=>{if(window.confirm(`Seguro que quieres cambiar el estado a "${p}"?`)){const y=ry(Kn,"patients",d);try{await oA(y,{status:p})}catch(v){console.error("Error al actualizar estado:",v),alert("Error al cambiar el estado.")}}},c={container:{marginTop:"30px"},table:{width:"100%",borderCollapse:"collapse",marginTop:"10px"},th:{border:"1px solid #ddd",padding:"8px",backgroundColor:"#f2f2f2",textAlign:"left"},td:{border:"1px solid #ddd",padding:"8px"},actionsCell:{display:"flex",gap:"5px"},actionButton:{padding:"5px 10px",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}},h=d=>{const p={padding:"5px 8px",borderRadius:"5px",color:"white",fontSize:"0.9em"};switch(d){case"Activo":return{...p,backgroundColor:"#28a745"};case"Pendiente":return{...p,backgroundColor:"#ffc107",color:"black"};case"Finalizado":return{...p,backgroundColor:"#6c757d"};default:return{}}};return z.jsxs("div",{style:c.container,children:[z.jsx("h3",{children:"Pacientes Registrados"}),z.jsxs("table",{style:c.table,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{style:c.th,children:"Nombre"}),z.jsx("th",{style:c.th,children:"Cdula"}),z.jsx("th",{style:c.th,children:"Estado"}),z.jsx("th",{style:c.th,children:"Acciones"})," "]})}),z.jsx("tbody",{children:i.map(d=>z.jsxs("tr",{children:[z.jsx("td",{style:c.td,children:d.name}),z.jsx("td",{style:c.td,children:d.id}),z.jsx("td",{style:c.td,children:z.jsx("span",{style:h(d.status),children:d.status||"N/A"})}),z.jsx("td",{style:c.td,children:z.jsxs("div",{style:c.actionsCell,children:[d.status==="Pendiente"&&z.jsx("button",{style:{...c.actionButton,backgroundColor:"#28a745"},onClick:()=>o(d.docId,"Activo"),children:"Activar"}),d.status==="Activo"&&z.jsx("button",{style:{...c.actionButton,backgroundColor:"#dc3545"},onClick:()=>o(d.docId,"Finalizado"),children:"Finalizar"})]})})]},d.docId))})]})]})};return z.jsx(e,{})},NO=()=>{const[n,t]=Ct.useState(""),[e,i]=Ct.useState(""),[a,o]=Ct.useState("Auxiliar"),c=async d=>{if(d.preventDefault(),!n||!e||!a){alert("Por favor, llena todos los campos.");return}try{await lA(Li(Kn,"personal"),{nombre:n,email:e,rol:a}),alert("Personal guardado con xito!"),t(""),i("")}catch{alert("Hubo un error al guardar.")}},h={form:{padding:"20px",backgroundColor:"#f0f0f0",borderRadius:"8px",marginTop:"20px"},formGroup:{marginBottom:"15px"},label:{display:"block",marginBottom:"5px",fontWeight:"bold"},input:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ccc"},button:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}};return z.jsxs("form",{style:h.form,onSubmit:c,children:[z.jsx("h3",{children:"Aadir Nuevo Personal"}),z.jsxs("div",{style:h.formGroup,children:[z.jsx("label",{style:h.label,children:"Nombre Completo"}),z.jsx("input",{type:"text",style:h.input,value:n,onChange:d=>t(d.target.value)})]}),z.jsxs("div",{style:h.formGroup,children:[z.jsx("label",{style:h.label,children:"Email"}),z.jsx("input",{type:"email",style:h.input,value:e,onChange:d=>i(d.target.value)})]}),z.jsxs("div",{style:h.formGroup,children:[z.jsx("label",{style:h.label,children:"Rol"}),z.jsxs("select",{style:h.input,value:a,onChange:d=>o(d.target.value),children:[z.jsx("option",{value:"Auxiliar",children:"Auxiliar"}),z.jsx("option",{value:"Mdico",children:"Mdico"})]})]}),z.jsx("button",{type:"submit",style:h.button,children:"Guardar Personal"})]})},PO=()=>{const[n,t]=Ct.useState([]);Ct.useEffect(()=>{const i=wa(Li(Kn,"personal"),a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));t(o)});return()=>i()},[]);const e={container:{marginTop:"30px"},table:{width:"100%",borderCollapse:"collapse",marginTop:"10px"},th:{border:"1px solid #ddd",padding:"8px",backgroundColor:"#f2f2f2",textAlign:"left"},td:{border:"1px solid #ddd",padding:"8px"}};return z.jsxs("div",{style:e.container,children:[z.jsx("h3",{children:"Personal Registrado"}),z.jsxs("table",{style:e.table,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{style:e.th,children:"Nombre"}),z.jsx("th",{style:e.th,children:"Email"}),z.jsx("th",{style:e.th,children:"Rol"})]})}),z.jsx("tbody",{children:n.map(i=>z.jsxs("tr",{children:[z.jsx("td",{style:e.td,children:i.nombre}),z.jsx("td",{style:e.td,children:i.email}),z.jsx("td",{style:e.td,children:i.rol})]},i.id))})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function cu(n){return n+.5|0}const sr=(n,t,e)=>Math.max(Math.min(n,e),t);function Tc(n){return sr(cu(n*2.55),0,255)}function hr(n){return sr(cu(n*255),0,255)}function ds(n){return sr(cu(n/2.55)/100,0,1)}function wT(n){return sr(cu(n*100),0,100)}const Fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fm=[..."0123456789ABCDEF"],VO=n=>fm[n&15],LO=n=>fm[(n&240)>>4]+fm[n&15],Bh=n=>(n&240)>>4===(n&15),UO=n=>Bh(n.r)&&Bh(n.g)&&Bh(n.b)&&Bh(n.a);function zO(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Fn[n[1]]*17,g:255&Fn[n[2]]*17,b:255&Fn[n[3]]*17,a:t===5?Fn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Fn[n[1]]<<4|Fn[n[2]],g:Fn[n[3]]<<4|Fn[n[4]],b:Fn[n[5]]<<4|Fn[n[6]],a:t===9?Fn[n[7]]<<4|Fn[n[8]]:255})),e}const BO=(n,t)=>n<255?t(n):"";function jO(n){var t=UO(n)?VO:LO;return n?"#"+t(n.r)+t(n.g)+t(n.b)+BO(n.a,t):void 0}const HO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hA(n,t,e){const i=t*Math.min(e,1-e),a=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[a(0),a(8),a(4)]}function FO(n,t,e){const i=(a,o=(a+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function qO(n,t,e){const i=hA(n,1,.5);let a;for(t+e>1&&(a=1/(t+e),t*=a,e*=a),a=0;a<3;a++)i[a]*=1-t-e,i[a]+=t;return i}function GO(n,t,e,i,a){return n===a?(t-e)/i+(t<e?6:0):t===a?(e-n)/i+2:(n-t)/i+4}function my(n){const e=n.r/255,i=n.g/255,a=n.b/255,o=Math.max(e,i,a),c=Math.min(e,i,a),h=(o+c)/2;let d,p,y;return o!==c&&(y=o-c,p=h>.5?y/(2-o-c):y/(o+c),d=GO(e,i,a,y,o),d=d*60+.5),[d|0,p||0,h]}function yy(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(hr)}function _y(n,t,e){return yy(hA,n,t,e)}function YO(n,t,e){return yy(qO,n,t,e)}function KO(n,t,e){return yy(FO,n,t,e)}function fA(n){return(n%360+360)%360}function QO(n){const t=HO.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Tc(+t[5]):hr(+t[5]));const a=fA(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=YO(a,o,c):t[1]==="hsv"?i=KO(a,o,c):i=_y(a,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function XO(n,t){var e=my(n);e[0]=fA(e[0]+t),e=_y(e),n.r=e[0],n.g=e[1],n.b=e[2]}function WO(n){if(!n)return;const t=my(n),e=t[0],i=wT(t[1]),a=wT(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${a}%, ${ds(n.a)})`:`hsl(${e}, ${i}%, ${a}%)`}const xT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},RT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $O(){const n={},t=Object.keys(RT),e=Object.keys(xT);let i,a,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],a=0;a<e.length;a++)o=e[a],h=h.replace(o,xT[o]);o=parseInt(RT[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let jh;function ZO(n){jh||(jh=$O(),jh.transparent=[0,0,0,0]);const t=jh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const JO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function tk(n){const t=JO.exec(n);let e=255,i,a,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Tc(c):sr(c*255,0,255)}return i=+t[1],a=+t[3],o=+t[5],i=255&(t[2]?Tc(i):sr(i,0,255)),a=255&(t[4]?Tc(a):sr(a,0,255)),o=255&(t[6]?Tc(o):sr(o,0,255)),{r:i,g:a,b:o,a:e}}}function ek(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ds(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Dp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ao=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function nk(n,t,e){const i=Ao(ds(n.r)),a=Ao(ds(n.g)),o=Ao(ds(n.b));return{r:hr(Dp(i+e*(Ao(ds(t.r))-i))),g:hr(Dp(a+e*(Ao(ds(t.g))-a))),b:hr(Dp(o+e*(Ao(ds(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Hh(n,t,e){if(n){let i=my(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=_y(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function dA(n,t){return n&&Object.assign(t||{},n)}function CT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=hr(n[3]))):(t=dA(n,{r:0,g:0,b:0,a:1}),t.a=hr(t.a)),t}function ik(n){return n.charAt(0)==="r"?tk(n):QO(n)}class Yc{constructor(t){if(t instanceof Yc)return t;const e=typeof t;let i;e==="object"?i=CT(t):e==="string"&&(i=zO(t)||ZO(t)||ik(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=dA(this._rgb);return t&&(t.a=ds(t.a)),t}set rgb(t){this._rgb=CT(t)}rgbString(){return this._valid?ek(this._rgb):void 0}hexString(){return this._valid?jO(this._rgb):void 0}hslString(){return this._valid?WO(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,a=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,d=i.a-a.a,p=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-p,i.r=255&p*i.r+o*a.r+.5,i.g=255&p*i.g+o*a.g+.5,i.b=255&p*i.b+o*a.b+.5,i.a=c*i.a+(1-c)*a.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=nk(this._rgb,t._rgb,e)),this}clone(){return new Yc(this.rgb)}alpha(t){return this._rgb.a=hr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=cu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Hh(this._rgb,2,t),this}darken(t){return Hh(this._rgb,2,-t),this}saturate(t){return Hh(this._rgb,1,t),this}desaturate(t){return Hh(this._rgb,1,-t),this}rotate(t){return XO(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function us(){}const sk=(()=>{let n=0;return()=>n++})();function ae(n){return n==null}function He(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function qt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Qn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Ai(n,t){return Qn(n)?n:t}function jt(n,t){return typeof n>"u"?t:n}const rk=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function oe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Wt(n,t,e,i){let a,o,c;if(He(n))for(o=n.length,a=0;a<o;a++)t.call(e,n[a],a);else if(qt(n))for(c=Object.keys(n),o=c.length,a=0;a<o;a++)t.call(e,n[c[a]],c[a])}function kf(n,t){let e,i,a,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(a=n[e],o=t[e],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Nf(n){if(He(n))return n.map(Nf);if(qt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let a=0;for(;a<i;++a)t[e[a]]=Nf(n[e[a]]);return t}return n}function gA(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function ak(n,t,e,i){if(!gA(n))return;const a=t[n],o=e[n];qt(a)&&qt(o)?Kc(a,o,i):t[n]=Nf(o)}function Kc(n,t,e){const i=He(t)?t:[t],a=i.length;if(!qt(n))return n;e=e||{};const o=e.merger||ak;let c;for(let h=0;h<a;++h){if(c=i[h],!qt(c))continue;const d=Object.keys(c);for(let p=0,y=d.length;p<y;++p)o(d[p],n,c,e)}return n}function Mc(n,t){return Kc(n,t,{merger:ok})}function ok(n,t,e){if(!gA(n))return;const i=t[n],a=e[n];qt(i)&&qt(a)?Mc(i,a):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Nf(a))}const IT={"":n=>n,x:n=>n.x,y:n=>n.y};function lk(n){const t=n.split("."),e=[];let i="";for(const a of t)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function ck(n){const t=lk(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Pf(n,t){return(IT[t]||(IT[t]=ck(t)))(n)}function vy(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Vf=n=>typeof n<"u",_r=n=>typeof n=="function",DT=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function uk(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Fe=Math.PI,Ni=2*Fe,hk=Ni+Fe,Lf=Number.POSITIVE_INFINITY,fk=Fe/180,si=Fe/2,ra=Fe/4,MT=Fe*2/3,pA=Math.log10,Fo=Math.sign;function Oc(n,t,e){return Math.abs(n-t)<e}function OT(n){const t=Math.round(n);n=Oc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(pA(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function dk(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((a,o)=>a-o).pop(),t}function gk(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Qc(n){return!gk(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function pk(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function mk(n,t,e){let i,a,o;for(i=0,a=n.length;i<a;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function da(n){return n*(Fe/180)}function yk(n){return n*(180/Fe)}function kT(n){if(!Qn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function _k(n,t){const e=t.x-n.x,i=t.y-n.y,a=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Fe&&(o+=Ni),{angle:o,distance:a}}function dm(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function vk(n,t){return(n-t+hk)%Ni-Fe}function Js(n){return(n%Ni+Ni)%Ni}function mA(n,t,e,i){const a=Js(n),o=Js(t),c=Js(e),h=Js(o-a),d=Js(c-a),p=Js(a-o),y=Js(a-c);return a===o||a===c||i&&o===c||h>d&&p<y}function Gn(n,t,e){return Math.max(t,Math.min(e,n))}function bk(n){return Gn(n,-32768,32767)}function Ec(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function by(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,e(o)?a=o:i=o;return{lo:a,hi:i}}const ga=(n,t,e,i)=>by(n,e,i?a=>{const o=n[a][t];return o<e||o===e&&n[a+1][t]===e}:a=>n[a][t]<e),Tk=(n,t,e)=>by(n,e,i=>n[i][t]>=e);function Ek(n,t,e){let i=0,a=n.length;for(;i<a&&n[i]<t;)i++;for(;a>i&&n[a-1]>e;)a--;return i>0||a<n.length?n.slice(i,a):n}const yA=["push","pop","shift","splice","unshift"];function Sk(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yA.forEach(e=>{const i="_onData"+vy(e),a=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=a.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function NT(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,a=i.indexOf(t);a!==-1&&i.splice(a,1),!(i.length>0)&&(yA.forEach(o=>{delete n[o]}),delete n._chartjs)}function Ak(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const _A=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function vA(n,t){let e=[],i=!1;return function(...a){e=a,i||(i=!0,_A.call(window,()=>{i=!1,n.apply(t,e)}))}}function wk(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Ty=n=>n==="start"?"left":n==="end"?"right":"center",sn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,xk=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Rk(n,t,e){const i=t.length;let a=0,o=i;if(n._sorted){const{iScale:c,vScale:h,_parsed:d}=n,p=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,y=c.axis,{min:v,max:b,minDefined:A,maxDefined:R}=c.getUserBounds();if(A){if(a=Math.min(ga(d,y,v).lo,e?i:ga(t,y,c.getPixelForValue(v)).lo),p){const M=d.slice(0,a+1).reverse().findIndex(I=>!ae(I[h.axis]));a-=Math.max(0,M)}a=Gn(a,0,i-1)}if(R){let M=Math.max(ga(d,c.axis,b,!0).hi+1,e?0:ga(t,y,c.getPixelForValue(b),!0).hi+1);if(p){const I=d.slice(M-1).findIndex(q=>!ae(q[h.axis]));M+=Math.max(0,I)}o=Gn(M,a,i)-a}else o=i-a}return{start:a,count:o}}function Ck(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,a={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=a,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,a),o}const Fh=n=>n===0||n===1,PT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Ni/e)),VT=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Ni/e)+1,kc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*si)+1,easeOutSine:n=>Math.sin(n*si),easeInOutSine:n=>-.5*(Math.cos(Fe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Fh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Fh(n)?n:PT(n,.075,.3),easeOutElastic:n=>Fh(n)?n:VT(n,.075,.3),easeInOutElastic(n){return Fh(n)?n:n<.5?.5*PT(n*2,.1125,.45):.5+.5*VT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-kc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?kc.easeInBounce(n*2)*.5:kc.easeOutBounce(n*2-1)*.5+.5};function Ey(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function LT(n){return Ey(n)?n:new Yc(n)}function Mp(n){return Ey(n)?n:new Yc(n).saturate(.5).darken(.1).hexString()}const Ik=["x","y","borderWidth","radius","tension"],Dk=["color","borderColor","backgroundColor"];function Mk(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Dk},numbers:{type:"number",properties:Ik}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ok(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const UT=new Map;function kk(n,t){t=t||{};const e=n+JSON.stringify(t);let i=UT.get(e);return i||(i=new Intl.NumberFormat(n,t),UT.set(e,i)),i}function bA(n,t,e){return kk(t,e).format(n)}const Nk={values(n){return He(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let a,o=n;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(a="scientific"),o=Pk(n,e)}const c=pA(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:a,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),bA(n,i,d)}};function Pk(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var TA={formatters:Nk};function Vk(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:TA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const xa=Object.create(null),gm=Object.create(null);function Nc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,a=e.length;i<a;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Op(n,t,e){return typeof t=="string"?Kc(Nc(n,t),e):Kc(Nc(n,""),t)}class Lk{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Mp(a.backgroundColor),this.hoverBorderColor=(i,a)=>Mp(a.borderColor),this.hoverColor=(i,a)=>Mp(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Op(this,t,e)}get(t){return Nc(this,t)}describe(t,e){return Op(gm,t,e)}override(t,e){return Op(xa,t,e)}route(t,e,i,a){const o=Nc(this,t),c=Nc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],p=c[a];return qt(d)?Object.assign({},p,d):jt(d,p)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var be=new Lk({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Mk,Ok,Vk]);function Uk(n){return!n||ae(n.size)||ae(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function zT(n,t,e,i,a){let o=t[a];return o||(o=t[a]=n.measureText(a).width,e.push(a)),o>i&&(i=o),i}function aa(n,t,e){const i=n.currentDevicePixelRatio,a=e!==0?Math.max(e/2,.5):0;return Math.round((t-a)*i)/i+a}function BT(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function pm(n,t,e,i){EA(n,t,e,i,null)}function EA(n,t,e,i,a){let o,c,h,d,p,y,v,b;const A=t.pointStyle,R=t.rotation,M=t.radius;let I=(R||0)*fk;if(A&&typeof A=="object"&&(o=A.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(I),n.drawImage(A,-A.width/2,-A.height/2,A.width,A.height),n.restore();return}if(!(isNaN(M)||M<=0)){switch(n.beginPath(),A){default:a?n.ellipse(e,i,a/2,M,0,0,Ni):n.arc(e,i,M,0,Ni),n.closePath();break;case"triangle":y=a?a/2:M,n.moveTo(e+Math.sin(I)*y,i-Math.cos(I)*M),I+=MT,n.lineTo(e+Math.sin(I)*y,i-Math.cos(I)*M),I+=MT,n.lineTo(e+Math.sin(I)*y,i-Math.cos(I)*M),n.closePath();break;case"rectRounded":p=M*.516,d=M-p,c=Math.cos(I+ra)*d,v=Math.cos(I+ra)*(a?a/2-p:d),h=Math.sin(I+ra)*d,b=Math.sin(I+ra)*(a?a/2-p:d),n.arc(e-v,i-h,p,I-Fe,I-si),n.arc(e+b,i-c,p,I-si,I),n.arc(e+v,i+h,p,I,I+si),n.arc(e-b,i+c,p,I+si,I+Fe),n.closePath();break;case"rect":if(!R){d=Math.SQRT1_2*M,y=a?a/2:d,n.rect(e-y,i-d,2*y,2*d);break}I+=ra;case"rectRot":v=Math.cos(I)*(a?a/2:M),c=Math.cos(I)*M,h=Math.sin(I)*M,b=Math.sin(I)*(a?a/2:M),n.moveTo(e-v,i-h),n.lineTo(e+b,i-c),n.lineTo(e+v,i+h),n.lineTo(e-b,i+c),n.closePath();break;case"crossRot":I+=ra;case"cross":v=Math.cos(I)*(a?a/2:M),c=Math.cos(I)*M,h=Math.sin(I)*M,b=Math.sin(I)*(a?a/2:M),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"star":v=Math.cos(I)*(a?a/2:M),c=Math.cos(I)*M,h=Math.sin(I)*M,b=Math.sin(I)*(a?a/2:M),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c),I+=ra,v=Math.cos(I)*(a?a/2:M),c=Math.cos(I)*M,h=Math.sin(I)*M,b=Math.sin(I)*(a?a/2:M),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"line":c=a?a/2:Math.cos(I)*M,h=Math.sin(I)*M,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(I)*(a?a/2:M),i+Math.sin(I)*M);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Xc(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Sy(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Ay(n){n.restore()}function zk(n,t,e,i,a){if(!t)return n.lineTo(e.x,e.y);if(a==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else a==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Bk(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function jk(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ae(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Hk(n,t,e,i,a){if(a.strikethrough||a.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,p=e+o.actualBoundingBoxDescent,y=a.strikethrough?(d+p)/2:p;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(c,y),n.lineTo(h,y),n.stroke()}}function Fk(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Wc(n,t,e,i,a,o={}){const c=He(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,p;for(n.save(),n.font=a.string,jk(n,o),d=0;d<c.length;++d)p=c[d],o.backdrop&&Fk(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ae(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(p,e,i,o.maxWidth)),n.fillText(p,e,i,o.maxWidth),Hk(n,e,i,p,o),i+=Number(a.lineHeight);n.restore()}function mm(n,t){const{x:e,y:i,w:a,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*Fe,Fe,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,Fe,si,!0),n.lineTo(e+a-c.bottomRight,i+o),n.arc(e+a-c.bottomRight,i+o-c.bottomRight,c.bottomRight,si,0,!0),n.lineTo(e+a,i+c.topRight),n.arc(e+a-c.topRight,i+c.topRight,c.topRight,0,-si,!0),n.lineTo(e+c.topLeft,i)}const qk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Yk(n,t){const e=(""+n).match(qk);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Kk=n=>+n||0;function SA(n,t){const e={},i=qt(t),a=i?Object.keys(t):t,o=qt(n)?i?c=>jt(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of a)e[c]=Kk(o(c));return e}function Qk(n){return SA(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Pc(n){return SA(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Xn(n){const t=Qk(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function on(n,t){n=n||{},t=t||be.font;let e=jt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=jt(n.style,t.style);i&&!(""+i).match(Gk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:jt(n.family,t.family),lineHeight:Yk(jt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:jt(n.weight,t.weight),string:""};return a.string=Uk(a),a}function qh(n,t,e,i){let a,o,c;for(a=0,o=n.length;a<o;++a)if(c=n[a],c!==void 0&&c!==void 0)return c}function Xk(n,t,e){const{min:i,max:a}=n,o=rk(t,(a-i)/2),c=(h,d)=>e&&h===0?0:h+d;return{min:c(i,-Math.abs(o)),max:c(a,o)}}function Ia(n,t){return Object.assign(Object.create(n),t)}function wy(n,t=[""],e,i,a=()=>n[0]){const o=e||n;typeof i>"u"&&(i=RA("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:a,override:h=>wy([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return wA(h,d,()=>iN(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return HT(h).includes(d)},ownKeys(h){return HT(h)},set(h,d,p){const y=h._storage||(h._storage=a());return h[d]=y[d]=p,delete h._keys,!0}})}function qo(n,t,e,i){const a={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:AA(n,i),setContext:o=>qo(n,o,e,i),override:o=>qo(n.override(o),t,e,i)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return wA(o,c,()=>$k(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function AA(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:a=t.allKeys}=n;return{allKeys:a,scriptable:e,indexable:i,isScriptable:_r(e)?e:()=>e,isIndexable:_r(i)?i:()=>i}}const Wk=(n,t)=>n?n+vy(t):t,xy=(n,t)=>qt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function wA(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function $k(n,t,e){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=n;let h=i[t];return _r(h)&&c.isScriptable(t)&&(h=Zk(t,h,n,e)),He(h)&&h.length&&(h=Jk(t,h,n,c.isIndexable)),xy(t,h)&&(h=qo(h,a,o&&o[t],c)),h}function Zk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,c||i);return h.delete(n),xy(n,d)&&(d=Ry(a._scopes,a,n,d)),d}function Jk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(qt(t[0])){const d=t,p=a._scopes.filter(y=>y!==d);t=[];for(const y of d){const v=Ry(p,a,n,y);t.push(qo(v,o,c&&c[n],h))}}return t}function xA(n,t,e){return _r(n)?n(t,e):n}const tN=(n,t)=>n===!0?t:typeof n=="string"?Pf(t,n):void 0;function eN(n,t,e,i,a){for(const o of t){const c=tN(e,o);if(c){n.add(c);const h=xA(c._fallback,e,a);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function Ry(n,t,e,i){const a=t._rootScopes,o=xA(t._fallback,e,i),c=[...n,...a],h=new Set;h.add(i);let d=jT(h,c,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=jT(h,c,o,d,i),d===null)?!1:wy(Array.from(h),[""],a,o,()=>nN(t,e,i))}function jT(n,t,e,i,a){for(;e;)e=eN(n,t,e,i,a);return e}function nN(n,t,e){const i=n._getTarget();t in i||(i[t]={});const a=i[t];return He(a)&&qt(e)?e:a||{}}function iN(n,t,e,i){let a;for(const o of t)if(a=RA(Wk(o,n),e),typeof a<"u")return xy(n,a)?Ry(e,i,n,a):a}function RA(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function HT(n){let t=n._keys;return t||(t=n._keys=sN(n._scopes)),t}function sN(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(a=>!a.startsWith("_")))t.add(i);return Array.from(t)}const rN=Number.EPSILON||1e-14,Go=(n,t)=>t<n.length&&!n[t].skip&&n[t],CA=n=>n==="x"?"y":"x";function aN(n,t,e,i){const a=n.skip?t:n,o=t,c=e.skip?t:e,h=dm(o,a),d=dm(c,o);let p=h/(h+d),y=d/(h+d);p=isNaN(p)?0:p,y=isNaN(y)?0:y;const v=i*p,b=i*y;return{previous:{x:o.x-v*(c.x-a.x),y:o.y-v*(c.y-a.y)},next:{x:o.x+b*(c.x-a.x),y:o.y+b*(c.y-a.y)}}}function oN(n,t,e){const i=n.length;let a,o,c,h,d,p=Go(n,0);for(let y=0;y<i-1;++y)if(d=p,p=Go(n,y+1),!(!d||!p)){if(Oc(t[y],0,rN)){e[y]=e[y+1]=0;continue}a=e[y]/t[y],o=e[y+1]/t[y],h=Math.pow(a,2)+Math.pow(o,2),!(h<=9)&&(c=3/Math.sqrt(h),e[y]=a*c*t[y],e[y+1]=o*c*t[y])}}function lN(n,t,e="x"){const i=CA(e),a=n.length;let o,c,h,d=Go(n,0);for(let p=0;p<a;++p){if(c=h,h=d,d=Go(n,p+1),!h)continue;const y=h[e],v=h[i];c&&(o=(y-c[e])/3,h[`cp1${e}`]=y-o,h[`cp1${i}`]=v-o*t[p]),d&&(o=(d[e]-y)/3,h[`cp2${e}`]=y+o,h[`cp2${i}`]=v+o*t[p])}}function cN(n,t="x"){const e=CA(t),i=n.length,a=Array(i).fill(0),o=Array(i);let c,h,d,p=Go(n,0);for(c=0;c<i;++c)if(h=d,d=p,p=Go(n,c+1),!!d){if(p){const y=p[t]-d[t];a[c]=y!==0?(p[e]-d[e])/y:0}o[c]=h?p?Fo(a[c-1])!==Fo(a[c])?0:(a[c-1]+a[c])/2:a[c-1]:a[c]}oN(n,a,o),lN(n,o,t)}function Gh(n,t,e){return Math.max(Math.min(n,e),t)}function uN(n,t){let e,i,a,o,c,h=Xc(n[0],t);for(e=0,i=n.length;e<i;++e)c=o,o=h,h=e<i-1&&Xc(n[e+1],t),o&&(a=n[e],c&&(a.cp1x=Gh(a.cp1x,t.left,t.right),a.cp1y=Gh(a.cp1y,t.top,t.bottom)),h&&(a.cp2x=Gh(a.cp2x,t.left,t.right),a.cp2y=Gh(a.cp2y,t.top,t.bottom)))}function hN(n,t,e,i,a){let o,c,h,d;if(t.spanGaps&&(n=n.filter(p=>!p.skip)),t.cubicInterpolationMode==="monotone")cN(n,a);else{let p=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)h=n[o],d=aN(p,h,n[Math.min(o+1,c-(i?0:1))%c],t.tension),h.cp1x=d.previous.x,h.cp1y=d.previous.y,h.cp2x=d.next.x,h.cp2y=d.next.y,p=h}t.capBezierPoints&&uN(n,e)}function Cy(){return typeof window<"u"&&typeof document<"u"}function Iy(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Uf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ld=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function fN(n,t){return ld(n).getPropertyValue(t)}const dN=["top","right","bottom","left"];function _a(n,t,e){const i={};e=e?"-"+e:"";for(let a=0;a<4;a++){const o=dN[a];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const gN=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function pN(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:a,offsetY:o}=i;let c=!1,h,d;if(gN(a,o,n.target))h=a,d=o;else{const p=t.getBoundingClientRect();h=i.clientX-p.left,d=i.clientY-p.top,c=!0}return{x:h,y:d,box:c}}function ca(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,a=ld(e),o=a.boxSizing==="border-box",c=_a(a,"padding"),h=_a(a,"border","width"),{x:d,y:p,box:y}=pN(n,e),v=c.left+(y&&h.left),b=c.top+(y&&h.top);let{width:A,height:R}=t;return o&&(A-=c.width+h.width,R-=c.height+h.height),{x:Math.round((d-v)/A*e.width/i),y:Math.round((p-b)/R*e.height/i)}}function mN(n,t,e){let i,a;if(t===void 0||e===void 0){const o=n&&Iy(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=ld(o),d=_a(h,"border","width"),p=_a(h,"padding");t=c.width-p.width-d.width,e=c.height-p.height-d.height,i=Uf(h.maxWidth,o,"clientWidth"),a=Uf(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Lf,maxHeight:a||Lf}}const Yh=n=>Math.round(n*10)/10;function yN(n,t,e,i){const a=ld(n),o=_a(a,"margin"),c=Uf(a.maxWidth,n,"clientWidth")||Lf,h=Uf(a.maxHeight,n,"clientHeight")||Lf,d=mN(n,t,e);let{width:p,height:y}=d;if(a.boxSizing==="content-box"){const b=_a(a,"border","width"),A=_a(a,"padding");p-=A.width+b.width,y-=A.height+b.height}return p=Math.max(0,p-o.width),y=Math.max(0,i?p/i:y-o.height),p=Yh(Math.min(p,c,d.maxWidth)),y=Yh(Math.min(y,h,d.maxHeight)),p&&!y&&(y=Yh(p/2)),(t!==void 0||e!==void 0)&&i&&d.height&&y>d.height&&(y=d.height,p=Yh(Math.floor(y*i))),{width:p,height:y}}function FT(n,t,e){const i=t||1,a=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==a||c.width!==o?(n.currentDevicePixelRatio=i,c.height=a,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const _N=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Cy()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function qT(n,t){const e=fN(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ua(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function vN(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function bN(n,t,e,i){const a={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},c=ua(n,a,e),h=ua(a,o,e),d=ua(o,t,e),p=ua(c,h,e),y=ua(h,d,e);return ua(p,y,e)}const TN=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},EN=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ko(n,t,e){return n?TN(t,e):EN()}function IA(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function DA(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function MA(n){return n==="angle"?{between:mA,compare:vk,normalize:Js}:{between:Ec,compare:(t,e)=>t-e,normalize:t=>t}}function GT({start:n,end:t,count:e,loop:i,style:a}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:a}}function SN(n,t,e){const{property:i,start:a,end:o}=e,{between:c,normalize:h}=MA(i),d=t.length;let{start:p,end:y,loop:v}=n,b,A;if(v){for(p+=d,y+=d,b=0,A=d;b<A&&c(h(t[p%d][i]),a,o);++b)p--,y--;p%=d,y%=d}return y<p&&(y+=d),{start:p,end:y,loop:v,style:n.style}}function AN(n,t,e){if(!e)return[n];const{property:i,start:a,end:o}=e,c=t.length,{compare:h,between:d,normalize:p}=MA(i),{start:y,end:v,loop:b,style:A}=SN(n,t,e),R=[];let M=!1,I=null,q,Z,et;const at=()=>d(a,et,q)&&h(a,et)!==0,X=()=>h(o,q)===0||d(o,et,q),ot=()=>M||at(),D=()=>!M||X();for(let x=y,C=y;x<=v;++x)Z=t[x%c],!Z.skip&&(q=p(Z[i]),q!==et&&(M=d(q,a,o),I===null&&ot()&&(I=h(q,a)===0?x:C),I!==null&&D()&&(R.push(GT({start:I,end:x,loop:b,count:c,style:A})),I=null),C=x,et=q));return I!==null&&R.push(GT({start:I,end:v,loop:b,count:c,style:A})),R}function wN(n,t){const e=[],i=n.segments;for(let a=0;a<i.length;a++){const o=AN(i[a],n.points,t);o.length&&e.push(...o)}return e}function xN(n,t,e,i){let a=0,o=t-1;if(e&&!i)for(;a<t&&!n[a].skip;)a++;for(;a<t&&n[a].skip;)a++;for(a%=t,e&&(o+=a);o>a&&n[o%t].skip;)o--;return o%=t,{start:a,end:o}}function RN(n,t,e,i){const a=n.length,o=[];let c=t,h=n[t],d;for(d=t+1;d<=e;++d){const p=n[d%a];p.skip||p.stop?h.skip||(i=!1,o.push({start:t%a,end:(d-1)%a,loop:i}),t=c=p.stop?d:null):(c=d,h.skip&&(t=d)),h=p}return c!==null&&o.push({start:t%a,end:c%a,loop:i}),o}function CN(n,t){const e=n.points,i=n.options.spanGaps,a=e.length;if(!a)return[];const o=!!n._loop,{start:c,end:h}=xN(e,a,o,i);if(i===!0)return YT(n,[{start:c,end:h,loop:o}],e,t);const d=h<c?h+a:h,p=!!n._fullLoop&&c===0&&h===a-1;return YT(n,RN(e,c,d,p),e,t)}function YT(n,t,e,i){return!i||!i.setContext||!e?t:IN(n,t,e,i)}function IN(n,t,e,i){const a=n._chart.getContext(),o=KT(n.options),{_datasetIndex:c,options:{spanGaps:h}}=n,d=e.length,p=[];let y=o,v=t[0].start,b=v;function A(R,M,I,q){const Z=h?-1:1;if(R!==M){for(R+=d;e[R%d].skip;)R-=Z;for(;e[M%d].skip;)M+=Z;R%d!==M%d&&(p.push({start:R%d,end:M%d,loop:I,style:q}),y=q,v=M%d)}}for(const R of t){v=h?v:R.start;let M=e[v%d],I;for(b=v+1;b<=R.end;b++){const q=e[b%d];I=KT(i.setContext(Ia(a,{type:"segment",p0:M,p1:q,p0DataIndex:(b-1)%d,p1DataIndex:b%d,datasetIndex:c}))),DN(I,y)&&A(v,b-1,R.loop,y),M=q,y=I}v<b-1&&A(v,b-1,R.loop,y)}return p}function KT(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function DN(n,t){if(!t)return!1;const e=[],i=function(a,o){return Ey(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Kh(n,t,e){return n.options.clip?n[e]:t[e]}function MN(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Kh(e,t,"left"),right:Kh(e,t,"right"),top:Kh(i,t,"top"),bottom:Kh(i,t,"bottom")}:t}function ON(n,t){const e=t._clip;if(e.disabled)return!1;const i=MN(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class kN{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,a){const o=e.listeners[a],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=_A.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(a.draw(),this._notify(a,i,t,"progress")),o.length||(i.running=!1,this._notify(a,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var hs=new kN;const QT="transparent",NN={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=LT(n||QT),a=i.valid&&LT(t||QT);return a&&a.valid?a.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class PN{constructor(t,e,i,a){const o=e[i];a=qh([t.to,a,o,t.from]);const c=qh([t.from,o,a]);this._active=!0,this._fn=t.fn||NN[t.type||typeof c],this._easing=kc[t.easing]||kc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=a,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=qh([t.to,e,a,t.from]),this._from=qh([t.from,a,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,a=this._prop,o=this._from,c=this._loop,h=this._to;let d;if(this._active=o!==h&&(c||e<i),!this._active){this._target[a]=h,this._notify(!0);return}if(e<0){this._target[a]=o;return}d=e/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][e]()}}class OA{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!qt(t))return;const e=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const o=t[a];if(!qt(o))return;const c={};for(const h of e)c[h]=o[h];(He(o.properties)&&o.properties||[a]).forEach(h=>{(h===a||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,a=LN(t,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&VN(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,a=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let d;for(d=c.length-1;d>=0;--d){const p=c[d];if(p.charAt(0)==="$")continue;if(p==="options"){a.push(...this._animateOptions(t,e));continue}const y=e[p];let v=o[p];const b=i.get(p);if(v)if(b&&v.active()){v.update(b,y,h);continue}else v.cancel();if(!b||!b.duration){t[p]=y;continue}o[p]=v=new PN(b,t,p,y),a.push(v)}return a}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return hs.add(this._chart,i),!0}}function VN(n,t){const e=[],i=Object.keys(t);for(let a=0;a<i.length;a++){const o=n[i[a]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function LN(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function XT(n,t){const e=n&&n.options||{},i=e.reverse,a=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:a,end:i?a:o}}function UN(n,t,e){if(e===!1)return!1;const i=XT(n,e),a=XT(t,e);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function zN(n){let t,e,i,a;return qt(n)?(t=n.top,e=n.right,i=n.bottom,a=n.left):t=e=i=a=n,{top:t,right:e,bottom:i,left:a,disabled:n===!1}}function kA(n,t){const e=[],i=n._getSortedDatasetMetas(t);let a,o;for(a=0,o=i.length;a<o;++a)e.push(i[a].index);return e}function WT(n,t,e,i={}){const a=n.keys,o=i.mode==="single";let c,h,d,p;if(t===null)return;let y=!1;for(c=0,h=a.length;c<h;++c){if(d=+a[c],d===e){if(y=!0,i.all)continue;break}p=n.values[d],Qn(p)&&(o||t===0||Fo(t)===Fo(p))&&(t+=p)}return!y&&!i.all?0:t}function BN(n,t){const{iScale:e,vScale:i}=t,a=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let d,p,y;for(d=0,p=c.length;d<p;++d)y=c[d],h[d]={[a]:y,[o]:n[y]};return h}function kp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function jN(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function HN(n){const{min:t,max:e,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:a?e:Number.POSITIVE_INFINITY}}function FN(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function $T(n,t,e,i){for(const a of t.getMatchingVisibleMetas(i).reverse()){const o=n[a.index];if(e&&o>0||!e&&o<0)return a.index}return null}function ZT(n,t){const{chart:e,_cachedMeta:i}=n,a=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,d=o.axis,p=c.axis,y=jN(o,c,i),v=t.length;let b;for(let A=0;A<v;++A){const R=t[A],{[d]:M,[p]:I}=R,q=R._stacks||(R._stacks={});b=q[p]=FN(a,y,M),b[h]=I,b._top=$T(b,c,!0,i.type),b._bottom=$T(b,c,!1,i.type);const Z=b._visualValues||(b._visualValues={});Z[h]=I}}function Np(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function qN(n,t){return Ia(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function GN(n,t,e){return Ia(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function hc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const a of t){const o=a._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Pp=n=>n==="reset"||n==="none",JT=(n,t)=>t?n:Object.assign({},n),YN=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:kA(e,!0),values:null};class NA{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=kp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&hc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),a=(v,b,A,R)=>v==="x"?b:v==="r"?R:A,o=e.xAxisID=jt(i.xAxisID,Np(t,"x")),c=e.yAxisID=jt(i.yAxisID,Np(t,"y")),h=e.rAxisID=jt(i.rAxisID,Np(t,"r")),d=e.indexAxis,p=e.iAxisID=a(d,o,c,h),y=e.vAxisID=a(d,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(p),e.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&NT(this._data,this),t._stacked&&hc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(qt(e)){const a=this._cachedMeta;this._data=BN(e,a)}else if(i!==e){if(i){NT(i,this);const a=this._cachedMeta;hc(a),a._parsed=[]}e&&Object.isExtensible(e)&&Sk(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=e._stacked;e._stacked=kp(e.vScale,e),e.stack!==i.stack&&(a=!0,hc(e),e.stack=i.stack),this._resyncElements(t),(a||o!==e._stacked)&&(ZT(this,e._parsed),e._stacked=kp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:c}=i,h=o.axis;let d=t===0&&e===a.length?!0:i._sorted,p=t>0&&i._parsed[t-1],y,v,b;if(this._parsing===!1)i._parsed=a,i._sorted=!0,b=a;else{He(a[t])?b=this.parseArrayData(i,a,t,e):qt(a[t])?b=this.parseObjectData(i,a,t,e):b=this.parsePrimitiveData(i,a,t,e);const A=()=>v[h]===null||p&&v[h]<p[h];for(y=0;y<e;++y)i._parsed[y+t]=v=b[y],d&&(A()&&(d=!1),p=v);i._sorted=d}c&&ZT(this,b)}parsePrimitiveData(t,e,i,a){const{iScale:o,vScale:c}=t,h=o.axis,d=c.axis,p=o.getLabels(),y=o===c,v=new Array(a);let b,A,R;for(b=0,A=a;b<A;++b)R=b+i,v[b]={[h]:y||o.parse(p[R],R),[d]:c.parse(e[R],R)};return v}parseArrayData(t,e,i,a){const{xScale:o,yScale:c}=t,h=new Array(a);let d,p,y,v;for(d=0,p=a;d<p;++d)y=d+i,v=e[y],h[d]={x:o.parse(v[0],y),y:c.parse(v[1],y)};return h}parseObjectData(t,e,i,a){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,p=new Array(a);let y,v,b,A;for(y=0,v=a;y<v;++y)b=y+i,A=e[b],p[y]={x:o.parse(Pf(A,h),b),y:c.parse(Pf(A,d),b)};return p}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const a=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:kA(a,!0),values:e._stacks[t.axis]._visualValues};return WT(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,a){const o=i[e.axis];let c=o===null?NaN:o;const h=a&&i._stacks[e.axis];a&&h&&(a.values=h,c=WT(a,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&t===i.iScale,c=a.length,h=this._getOtherScale(t),d=YN(e,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:v}=HN(h);let b,A;function R(){A=a[b];const M=A[h.axis];return!Qn(A[t.axis])||y>M||v<M}for(b=0;b<c&&!(!R()&&(this.updateRangeFromParsed(p,t,A,d),o));++b);if(o){for(b=c-1;b>=0;--b)if(!R()){this.updateRangeFromParsed(p,t,A,d);break}}return p}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let a,o,c;for(a=0,o=e.length;a<o;++a)c=e[a][t.axis],Qn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,a=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=zN(jt(this.options.clip,UN(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,a=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,d=this._drawCount||a.length-h,p=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(t,o,h,d),y=h;y<h+d;++y){const v=a[y];v.hidden||(v.active&&p?c.push(v):v.draw(t,o))}for(y=0;y<c.length;++y)c[y].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const a=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=GN(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=a.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=qN(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const a=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],d=this.enableOptionSharing&&Vf(i);if(h)return JT(h,d);const p=this.chart.config,y=p.datasetElementScopeKeys(this._type,t),v=a?[`${t}Hover`,"hover",t,""]:[t,""],b=p.getOptionScopes(this.getDataset(),y),A=Object.keys(be.elements[t]),R=()=>this.getContext(i,a,e),M=p.resolveNamedOptions(b,A,R,v);return M.$shared&&(M.$shared=d,o[c]=Object.freeze(JT(M,d))),M}_resolveAnimations(t,e,i){const a=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let d;if(a.options.animation!==!1){const y=this.chart.config,v=y.datasetAnimationScopeKeys(this._type,e),b=y.getOptionScopes(this.getDataset(),v);d=y.createResolver(b,this.getContext(t,i,e))}const p=new OA(a,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(p)),p}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Pp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),a=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==a;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,a){Pp(a)?Object.assign(t,i):this._resolveAnimations(e,a).update(t,i)}updateSharedOptions(t,e,i){t&&!Pp(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,a){t.active=a;const o=this.getStyle(e,a);this._resolveAnimations(e,i,a).update(t,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,p]of this._syncList)this[h](d,p);this._syncList=[];const a=i.length,o=e.length,c=Math.min(o,a);c&&this.parse(0,c),o>a?this._insertElements(a,o-a,t):o<a&&this._removeElements(o,a-o)}_insertElements(t,e,i=!0){const a=this._cachedMeta,o=a.data,c=t+e;let h;const d=p=>{for(p.length+=e,h=p.length-1;h>=c;h--)p[h]=p[h-e]};for(d(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,a){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(t,e);i._stacked&&hc(i,a)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,a]=t;this[e](i,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class KN extends NA{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:a=[],_dataset:o}=e,c=this.chart._animationsDisabled;let{start:h,count:d}=Rk(e,a,c);this._drawStart=h,this._drawCount=d,Ck(e)&&(h=0,d=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=a;const p=this.resolveDatasetElementOptions(t);this.options.showLine||(p.borderWidth=0),p.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:p},t),this.updateElements(a,h,d,t)}updateElements(t,e,i,a){const o=a==="reset",{iScale:c,vScale:h,_stacked:d,_dataset:p}=this._cachedMeta,{sharedOptions:y,includeOptions:v}=this._getSharedOptions(e,a),b=c.axis,A=h.axis,{spanGaps:R,segment:M}=this.options,I=Qc(R)?R:Number.POSITIVE_INFINITY,q=this.chart._animationsDisabled||o||a==="none",Z=e+i,et=t.length;let at=e>0&&this.getParsed(e-1);for(let X=0;X<et;++X){const ot=t[X],D=q?ot:{};if(X<e||X>=Z){D.skip=!0;continue}const x=this.getParsed(X),C=ae(x[A]),P=D[b]=c.getPixelForValue(x[b],X),N=D[A]=o||C?h.getBasePixel():h.getPixelForValue(d?this.applyStack(h,x,d):x[A],X);D.skip=isNaN(P)||isNaN(N)||C,D.stop=X>0&&Math.abs(x[b]-at[b])>I,M&&(D.parsed=x,D.raw=p.data[X]),v&&(D.options=y||this.resolveDataElementOptions(X,ot.active?"active":a)),q||this.updateElement(ot,X,D,a),at=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,a=t.data||[];if(!a.length)return i;const o=a[0].size(this.resolveDataElementOptions(0)),c=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function oa(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Dy{static override(t){Object.assign(Dy.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return oa()}parse(){return oa()}format(){return oa()}add(){return oa()}diff(){return oa()}startOf(){return oa()}endOf(){return oa()}}var QN={_date:Dy};function XN(n,t,e,i){const{controller:a,data:o,_sorted:c}=n,h=a._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const p=h._reversePixels?Tk:ga;if(i){if(a._sharedOptions){const y=o[0],v=typeof y.getRange=="function"&&y.getRange(t);if(v){const b=p(o,t,e-v),A=p(o,t,e+v);return{lo:b.lo,hi:A.hi}}}}else{const y=p(o,t,e);if(d){const{vScale:v}=a._cachedMeta,{_parsed:b}=n,A=b.slice(0,y.lo+1).reverse().findIndex(M=>!ae(M[v.axis]));y.lo-=Math.max(0,A);const R=b.slice(y.hi).findIndex(M=>!ae(M[v.axis]));y.hi+=Math.max(0,R)}return y}}return{lo:0,hi:o.length-1}}function cd(n,t,e,i,a){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,d=o.length;h<d;++h){const{index:p,data:y}=o[h],{lo:v,hi:b}=XN(o[h],t,c,a);for(let A=v;A<=b;++A){const R=y[A];R.skip||i(R,p,A)}}}function WN(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,a){const o=t?Math.abs(i.x-a.x):0,c=e?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Vp(n,t,e,i,a){const o=[];return!a&&!n.isPointInArea(t)||cd(n,e,t,function(h,d,p){!a&&!Xc(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:p})},!0),o}function $N(n,t,e,i){let a=[];function o(c,h,d){const{startAngle:p,endAngle:y}=c.getProps(["startAngle","endAngle"],i),{angle:v}=_k(c,{x:t.x,y:t.y});mA(v,p,y)&&a.push({element:c,datasetIndex:h,index:d})}return cd(n,e,t,o),a}function ZN(n,t,e,i,a,o){let c=[];const h=WN(e);let d=Number.POSITIVE_INFINITY;function p(y,v,b){const A=y.inRange(t.x,t.y,a);if(i&&!A)return;const R=y.getCenterPoint(a);if(!(!!o||n.isPointInArea(R))&&!A)return;const I=h(t,R);I<d?(c=[{element:y,datasetIndex:v,index:b}],d=I):I===d&&c.push({element:y,datasetIndex:v,index:b})}return cd(n,e,t,p),c}function Lp(n,t,e,i,a,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?$N(n,t,e,a):ZN(n,t,e,i,a,o)}function tE(n,t,e,i,a){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return cd(n,e,t,(d,p,y)=>{d[c]&&d[c](t[e],a)&&(o.push({element:d,datasetIndex:p,index:y}),h=h||d.inRange(t.x,t.y,a))}),i&&!h?[]:o}var JN={modes:{index(n,t,e,i){const a=ca(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?Vp(n,a,o,i,c):Lp(n,a,o,!1,i,c),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(p=>{const y=h[0].index,v=p.data[y];v&&!v.skip&&d.push({element:v,datasetIndex:p.index,index:y})}),d):[]},dataset(n,t,e,i){const a=ca(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?Vp(n,a,o,i,c):Lp(n,a,o,!1,i,c);if(h.length>0){const d=h[0].datasetIndex,p=n.getDatasetMeta(d).data;h=[];for(let y=0;y<p.length;++y)h.push({element:p[y],datasetIndex:d,index:y})}return h},point(n,t,e,i){const a=ca(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Vp(n,a,o,i,c)},nearest(n,t,e,i){const a=ca(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Lp(n,a,o,e.intersect,i,c)},x(n,t,e,i){const a=ca(t,n);return tE(n,a,"x",e.intersect,i)},y(n,t,e,i){const a=ca(t,n);return tE(n,a,"y",e.intersect,i)}}};const PA=["left","top","right","bottom"];function fc(n,t){return n.filter(e=>e.pos===t)}function eE(n,t){return n.filter(e=>PA.indexOf(e.pos)===-1&&e.box.axis===t)}function dc(n,t){return n.sort((e,i)=>{const a=t?i:e,o=t?e:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function tP(n){const t=[];let e,i,a,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)a=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=a,t.push({index:e,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:c&&o+c,stackWeight:h});return t}function eP(n){const t={};for(const e of n){const{stack:i,pos:a,stackWeight:o}=e;if(!i||!PA.includes(a))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function nP(n,t){const e=eP(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:d}=h.box,p=e[h.stack],y=p&&h.stackWeight/p.weight;h.horizontal?(h.width=y?y*i:d&&t.availableWidth,h.height=a):(h.width=i,h.height=y?y*a:d&&t.availableHeight)}return e}function iP(n){const t=tP(n),e=dc(t.filter(p=>p.box.fullSize),!0),i=dc(fc(t,"left"),!0),a=dc(fc(t,"right")),o=dc(fc(t,"top"),!0),c=dc(fc(t,"bottom")),h=eE(t,"x"),d=eE(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(c).concat(h),chartArea:fc(t,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(c).concat(h)}}function nE(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function VA(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function sP(n,t,e,i){const{pos:a,box:o}=e,c=n.maxPadding;if(!qt(a)){e.size&&(n[a]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[a]+=e.size}o.getPadding&&VA(c,o.getPadding());const h=Math.max(0,t.outerWidth-nE(c,n,"left","right")),d=Math.max(0,t.outerHeight-nE(c,n,"top","bottom")),p=h!==n.w,y=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:p,other:y}:{same:y,other:p}}function rP(n){const t=n.maxPadding;function e(i){const a=Math.max(t[i]-n[i],0);return n[i]+=a,a}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function aP(n,t){const e=t.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Sc(n,t,e,i){const a=[];let o,c,h,d,p,y;for(o=0,c=n.length,p=0;o<c;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,aP(h.horizontal,t));const{same:v,other:b}=sP(t,e,h,i);p|=v&&a.length,y=y||b,d.fullSize||a.push(h)}return p&&Sc(a,t,e,i)||y}function Qh(n,t,e,i,a){n.top=e,n.left=t,n.right=t+i,n.bottom=e+a,n.width=i,n.height=a}function iE(n,t,e,i){const a=e.padding;let{x:o,y:c}=t;for(const h of n){const d=h.box,p=i[h.stack]||{placed:0,weight:1},y=h.stackWeight/p.weight||1;if(h.horizontal){const v=t.w*y,b=p.size||d.height;Vf(p.start)&&(c=p.start),d.fullSize?Qh(d,a.left,c,e.outerWidth-a.right-a.left,b):Qh(d,t.left+p.placed,c,v,b),p.start=c,p.placed+=v,c=d.bottom}else{const v=t.h*y,b=p.size||d.width;Vf(p.start)&&(o=p.start),d.fullSize?Qh(d,o,a.top,b,e.outerHeight-a.bottom-a.top):Qh(d,o,t.top+p.placed,b,v),p.start=o,p.placed+=v,o=d.right}}t.x=o,t.y=c}var Yn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const a=Xn(n.options.layout.padding),o=Math.max(t-a.width,0),c=Math.max(e-a.height,0),h=iP(n.boxes),d=h.vertical,p=h.horizontal;Wt(n.boxes,M=>{typeof M.beforeLayout=="function"&&M.beforeLayout()});const y=d.reduce((M,I)=>I.box.options&&I.box.options.display===!1?M:M+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:a,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/y,hBoxMaxHeight:c/2}),b=Object.assign({},a);VA(b,Xn(i));const A=Object.assign({maxPadding:b,w:o,h:c,x:a.left,y:a.top},a),R=nP(d.concat(p),v);Sc(h.fullSize,A,v,R),Sc(d,A,v,R),Sc(p,A,v,R)&&Sc(d,A,v,R),rP(A),iE(h.leftAndTop,A,v,R),A.x+=A.w,A.y+=A.h,iE(h.rightAndBottom,A,v,R),n.chartArea={left:A.left,top:A.top,right:A.left+A.w,bottom:A.top+A.h,height:A.h,width:A.w},Wt(h.chartArea,M=>{const I=M.box;Object.assign(I,n.chartArea),I.update(A.w,A.h,{left:0,top:0,right:0,bottom:0})})}};class LA{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,a){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,a?Math.floor(e/a):i)}}isAttached(t){return!0}updateConfig(t){}}class oP extends LA{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hf="$chartjs",lP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sE=n=>n===null||n==="";function cP(n,t){const e=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[hf]={initial:{height:i,width:a,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",sE(a)){const o=qT(n,"width");o!==void 0&&(n.width=o)}if(sE(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=qT(n,"height");o!==void 0&&(n.height=o)}return n}const UA=_N?{passive:!0}:!1;function uP(n,t,e){n&&n.addEventListener(t,e,UA)}function hP(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,UA)}function fP(n,t){const e=lP[n.type]||n.type,{x:i,y:a}=ca(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function zf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function dP(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||zf(h.addedNodes,i),c=c&&!zf(h.removedNodes,i);c&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}function gP(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||zf(h.removedNodes,i),c=c&&!zf(h.addedNodes,i);c&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}const $c=new Map;let rE=0;function zA(){const n=window.devicePixelRatio;n!==rE&&(rE=n,$c.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function pP(n,t){$c.size||window.addEventListener("resize",zA),$c.set(n,t)}function mP(n){$c.delete(n),$c.size||window.removeEventListener("resize",zA)}function yP(n,t,e){const i=n.canvas,a=i&&Iy(i);if(!a)return;const o=vA((h,d)=>{const p=a.clientWidth;e(h,d),p<a.clientWidth&&e()},window),c=new ResizeObserver(h=>{const d=h[0],p=d.contentRect.width,y=d.contentRect.height;p===0&&y===0||o(p,y)});return c.observe(a),pP(n,o),c}function Up(n,t,e){e&&e.disconnect(),t==="resize"&&mP(n)}function _P(n,t,e){const i=n.canvas,a=vA(o=>{n.ctx!==null&&e(fP(o,n))},n);return uP(i,t,a),a}class vP extends LA{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(cP(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[hf])return!1;const i=e[hf].initial;["height","width"].forEach(o=>{const c=i[o];ae(c)?e.removeAttribute(o):e.setAttribute(o,c)});const a=i.style||{};return Object.keys(a).forEach(o=>{e.style[o]=a[o]}),e.width=e.width,delete e[hf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const a=t.$proxies||(t.$proxies={}),c={attach:dP,detach:gP,resize:yP}[e]||_P;a[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),a=i[e];if(!a)return;({attach:Up,detach:Up,resize:Up}[e]||hP)(t,e,a),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,a){return yN(t,e,i,a)}isAttached(t){const e=t&&Iy(t);return!!(e&&e.isConnected)}}function bP(n){return!Cy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?oP:vP}class Da{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Qc(this.x)&&Qc(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const a={};return t.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}function TP(n,t){const e=n.options.ticks,i=EP(n),a=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?AP(t):[],c=o.length,h=o[0],d=o[c-1],p=[];if(c>a)return wP(t,p,o,c/a),p;const y=SP(o,t,a);if(c>0){let v,b;const A=c>1?Math.round((d-h)/(c-1)):null;for(Xh(t,p,y,ae(A)?0:h-A,h),v=0,b=c-1;v<b;v++)Xh(t,p,y,o[v],o[v+1]);return Xh(t,p,y,d,ae(A)?t.length:d+A),p}return Xh(t,p,y),p}function EP(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),a=n._maxLength/e;return Math.floor(Math.min(i,a))}function SP(n,t,e){const i=xP(n),a=t.length/e;if(!i)return Math.max(a,1);const o=dk(i);for(let c=0,h=o.length-1;c<h;c++){const d=o[c];if(d>a)return d}return Math.max(a,1)}function AP(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function wP(n,t,e,i){let a=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),a++,o=e[a*i])}function Xh(n,t,e,i,a){const o=jt(i,0),c=Math.min(jt(a,n.length),n.length);let h=0,d,p,y;for(e=Math.ceil(e),a&&(d=a-i,e=d/Math.floor(d/e)),y=o;y<0;)h++,y=Math.round(o+h*e);for(p=Math.max(o,0);p<c;p++)p===y&&(t.push(n[p]),h++,y=Math.round(o+h*e))}function xP(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const RP=n=>n==="left"?"right":n==="right"?"left":n,aE=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,oE=(n,t)=>Math.min(t||n,n);function lE(n,t){const e=[],i=n.length/t,a=n.length;let o=0;for(;o<a;o+=i)e.push(n[Math.floor(o)]);return e}function CP(n,t,e){const i=n.ticks.length,a=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let d=n.getPixelForTick(a),p;if(!(e&&(i===1?p=Math.max(d-o,c-d):t===0?p=(n.getPixelForTick(1)-d)/2:p=(d-n.getPixelForTick(a-1))/2,d+=a<t?p:-p,d<o-h||d>c+h)))return d}function IP(n,t){Wt(n,e=>{const i=e.gc,a=i.length/2;let o;if(a>t){for(o=0;o<a;++o)delete e.data[i[o]];i.splice(0,a)}})}function gc(n){return n.drawTicks?n.tickLength:0}function cE(n,t){if(!n.display)return 0;const e=on(n.font,t),i=Xn(n.padding);return(He(n.text)?n.text.length:1)*e.lineHeight+i.height}function DP(n,t){return Ia(n,{scale:t,type:"scale"})}function MP(n,t,e){return Ia(n,{tick:e,index:t,type:"tick"})}function OP(n,t,e){let i=Ty(n);return(e&&t!=="right"||!e&&t==="right")&&(i=RP(i)),i}function kP(n,t,e,i){const{top:a,left:o,bottom:c,right:h,chart:d}=n,{chartArea:p,scales:y}=d;let v=0,b,A,R;const M=c-a,I=h-o;if(n.isHorizontal()){if(A=sn(i,o,h),qt(e)){const q=Object.keys(e)[0],Z=e[q];R=y[q].getPixelForValue(Z)+M-t}else e==="center"?R=(p.bottom+p.top)/2+M-t:R=aE(n,e,t);b=h-o}else{if(qt(e)){const q=Object.keys(e)[0],Z=e[q];A=y[q].getPixelForValue(Z)-I+t}else e==="center"?A=(p.left+p.right)/2-I+t:A=aE(n,e,t);R=sn(i,c,a),v=e==="left"?-si:si}return{titleX:A,titleY:R,maxWidth:b,rotation:v}}class tl extends Da{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:a}=this;return t=Ai(t,Number.POSITIVE_INFINITY),e=Ai(e,Number.NEGATIVE_INFINITY),i=Ai(i,Number.POSITIVE_INFINITY),a=Ai(a,Number.NEGATIVE_INFINITY),{min:Ai(t,i),max:Ai(e,a),minDefined:Qn(t),maxDefined:Qn(e)}}getMinMax(t){let{min:e,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),c;if(a&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,p=h.length;d<p;++d)c=h[d].controller.getMinMax(this,t),a||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=a&&e>i?e:i,{min:Ai(e,Ai(i,e)),max:Ai(i,Ai(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:a,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Xk(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?lE(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=TP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),oe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i],o.label=oe(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=oE(this.ticks.length,t.ticks.maxTicksLimit),a=e.minRotation||0,o=e.maxRotation;let c=a,h,d,p;if(!this._isVisible()||!e.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const y=this._getLabelSizes(),v=y.widest.width,b=y.highest.height,A=Gn(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:A/(i-1),v+6>h&&(h=A/(i-(t.offset?.5:1)),d=this.maxHeight-gc(t.grid)-e.padding-cE(t.title,this.chart.options.font),p=Math.sqrt(v*v+b*b),c=yk(Math.min(Math.asin(Gn((y.highest.height+6)/h,-1,1)),Math.asin(Gn(d/p,-1,1))-Math.asin(Gn(b/p,-1,1)))),c=Math.max(a,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:a,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const d=cE(a,e.options.font);if(h?(t.width=this.maxWidth,t.height=gc(o)+d):(t.height=this.maxHeight,t.width=gc(o)+d),i.display&&this.ticks.length){const{first:p,last:y,widest:v,highest:b}=this._getLabelSizes(),A=i.padding*2,R=da(this.labelRotation),M=Math.cos(R),I=Math.sin(R);if(h){const q=i.mirror?0:I*v.width+M*b.height;t.height=Math.min(this.maxHeight,t.height+q+A)}else{const q=i.mirror?0:M*v.width+I*b.height;t.width=Math.min(this.maxWidth,t.width+q+A)}this._calculatePadding(p,y,I,M)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,a){const{ticks:{align:o,padding:c},position:h}=this.options,d=this.labelRotation!==0,p=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,A=0;d?p?(b=a*t.width,A=i*e.height):(b=i*t.height,A=a*e.width):o==="start"?A=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,A=e.width/2),this.paddingLeft=Math.max((b-y+c)*this.width/(this.width-y),0),this.paddingRight=Math.max((A-v+c)*this.width/(this.width-v),0)}else{let y=e.height/2,v=t.height/2;o==="start"?(y=0,v=t.height):o==="end"&&(y=e.height,v=0),this.paddingTop=y+c,this.paddingBottom=v+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ae(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=lE(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:a,_longestTextCache:o}=this,c=[],h=[],d=Math.floor(e/oE(e,i));let p=0,y=0,v,b,A,R,M,I,q,Z,et,at,X;for(v=0;v<e;v+=d){if(R=t[v].label,M=this._resolveTickFontOptions(v),a.font=I=M.string,q=o[I]=o[I]||{data:{},gc:[]},Z=M.lineHeight,et=at=0,!ae(R)&&!He(R))et=zT(a,q.data,q.gc,et,R),at=Z;else if(He(R))for(b=0,A=R.length;b<A;++b)X=R[b],!ae(X)&&!He(X)&&(et=zT(a,q.data,q.gc,et,X),at+=Z);c.push(et),h.push(at),p=Math.max(et,p),y=Math.max(at,y)}IP(o,e);const ot=c.indexOf(p),D=h.indexOf(y),x=C=>({width:c[C]||0,height:h[C]||0});return{first:x(0),last:x(e-1),widest:x(ot),highest:x(D),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return bk(this._alignToPixels?aa(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=MP(this.getContext(),t,i))}return this.$context||(this.$context=DP(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=da(this.labelRotation),i=Math.abs(Math.cos(e)),a=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*i>h*a?h/i:d/a:d*a<h*i?d/i:h/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,a=this.options,{grid:o,position:c,border:h}=a,d=o.offset,p=this.isHorizontal(),v=this.ticks.length+(d?1:0),b=gc(o),A=[],R=h.setContext(this.getContext()),M=R.display?R.width:0,I=M/2,q=function(K){return aa(i,K,M)};let Z,et,at,X,ot,D,x,C,P,N,L,O;if(c==="top")Z=q(this.bottom),D=this.bottom-b,C=Z-I,N=q(t.top)+I,O=t.bottom;else if(c==="bottom")Z=q(this.top),N=t.top,O=q(t.bottom)-I,D=Z+I,C=this.top+b;else if(c==="left")Z=q(this.right),ot=this.right-b,x=Z-I,P=q(t.left)+I,L=t.right;else if(c==="right")Z=q(this.left),P=t.left,L=q(t.right)-I,ot=Z+I,x=this.left+b;else if(e==="x"){if(c==="center")Z=q((t.top+t.bottom)/2+.5);else if(qt(c)){const K=Object.keys(c)[0],rt=c[K];Z=q(this.chart.scales[K].getPixelForValue(rt))}N=t.top,O=t.bottom,D=Z+I,C=D+b}else if(e==="y"){if(c==="center")Z=q((t.left+t.right)/2);else if(qt(c)){const K=Object.keys(c)[0],rt=c[K];Z=q(this.chart.scales[K].getPixelForValue(rt))}ot=Z-I,x=ot-b,P=t.left,L=t.right}const $t=jt(a.ticks.maxTicksLimit,v),At=Math.max(1,Math.ceil(v/$t));for(et=0;et<v;et+=At){const K=this.getContext(et),rt=o.setContext(K),gt=h.setContext(K),kt=rt.lineWidth,V=rt.color,it=gt.dash||[],ct=gt.dashOffset,st=rt.tickWidth,dt=rt.tickColor,wt=rt.tickBorderDash||[],yt=rt.tickBorderDashOffset;at=CP(this,et,d),at!==void 0&&(X=aa(i,at,kt),p?ot=x=P=L=X:D=C=N=O=X,A.push({tx1:ot,ty1:D,tx2:x,ty2:C,x1:P,y1:N,x2:L,y2:O,width:kt,color:V,borderDash:it,borderDashOffset:ct,tickWidth:st,tickColor:dt,tickBorderDash:wt,tickBorderDashOffset:yt}))}return this._ticksLength=v,this._borderValue=Z,A}_computeLabelItems(t){const e=this.axis,i=this.options,{position:a,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:p,padding:y,mirror:v}=o,b=gc(i.grid),A=b+y,R=v?-y:A,M=-da(this.labelRotation),I=[];let q,Z,et,at,X,ot,D,x,C,P,N,L,O="middle";if(a==="top")ot=this.bottom-R,D=this._getXAxisLabelAlignment();else if(a==="bottom")ot=this.top+R,D=this._getXAxisLabelAlignment();else if(a==="left"){const At=this._getYAxisLabelAlignment(b);D=At.textAlign,X=At.x}else if(a==="right"){const At=this._getYAxisLabelAlignment(b);D=At.textAlign,X=At.x}else if(e==="x"){if(a==="center")ot=(t.top+t.bottom)/2+A;else if(qt(a)){const At=Object.keys(a)[0],K=a[At];ot=this.chart.scales[At].getPixelForValue(K)+A}D=this._getXAxisLabelAlignment()}else if(e==="y"){if(a==="center")X=(t.left+t.right)/2-A;else if(qt(a)){const At=Object.keys(a)[0],K=a[At];X=this.chart.scales[At].getPixelForValue(K)}D=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(d==="start"?O="top":d==="end"&&(O="bottom"));const $t=this._getLabelSizes();for(q=0,Z=h.length;q<Z;++q){et=h[q],at=et.label;const At=o.setContext(this.getContext(q));x=this.getPixelForTick(q)+o.labelOffset,C=this._resolveTickFontOptions(q),P=C.lineHeight,N=He(at)?at.length:1;const K=N/2,rt=At.color,gt=At.textStrokeColor,kt=At.textStrokeWidth;let V=D;c?(X=x,D==="inner"&&(q===Z-1?V=this.options.reverse?"left":"right":q===0?V=this.options.reverse?"right":"left":V="center"),a==="top"?p==="near"||M!==0?L=-N*P+P/2:p==="center"?L=-$t.highest.height/2-K*P+P:L=-$t.highest.height+P/2:p==="near"||M!==0?L=P/2:p==="center"?L=$t.highest.height/2-K*P:L=$t.highest.height-N*P,v&&(L*=-1),M!==0&&!At.showLabelBackdrop&&(X+=P/2*Math.sin(M))):(ot=x,L=(1-N)*P/2);let it;if(At.showLabelBackdrop){const ct=Xn(At.backdropPadding),st=$t.heights[q],dt=$t.widths[q];let wt=L-ct.top,yt=0-ct.left;switch(O){case"middle":wt-=st/2;break;case"bottom":wt-=st;break}switch(D){case"center":yt-=dt/2;break;case"right":yt-=dt;break;case"inner":q===Z-1?yt-=dt:q>0&&(yt-=dt/2);break}it={left:yt,top:wt,width:dt+ct.width,height:st+ct.height,color:At.backdropColor}}I.push({label:at,font:C,textOffset:L,options:{rotation:M,color:rt,strokeColor:gt,strokeWidth:kt,textAlign:V,textBaseline:O,translation:[X,ot],backdrop:it}})}return I}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-da(this.labelRotation))return t==="top"?"left":"right";let a="center";return e.align==="start"?a="left":e.align==="end"?a="right":e.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,d=c.widest.width;let p,y;return e==="left"?a?(y=this.right+o,i==="near"?p="left":i==="center"?(p="center",y+=d/2):(p="right",y+=d)):(y=this.right-h,i==="near"?p="right":i==="center"?(p="center",y-=d/2):(p="left",y=this.left)):e==="right"?a?(y=this.left+o,i==="near"?p="right":i==="center"?(p="center",y-=d/2):(p="left",y-=d)):(y=this.left+h,i==="near"?p="left":i==="center"?(p="center",y+=d/2):(p="right",y=this.right)):p="right",{textAlign:p,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:a,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,a,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const a=this.ticks.findIndex(o=>o.value===t);return a>=0?e.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(d,p,y)=>{!y.width||!y.color||(i.save(),i.lineWidth=y.width,i.strokeStyle=y.color,i.setLineDash(y.borderDash||[]),i.lineDashOffset=y.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=a.length;o<c;++o){const d=a[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let p,y,v,b;this.isHorizontal()?(p=aa(t,this.left,c)-c/2,y=aa(t,this.right,h)+h/2,v=b=d):(v=aa(t,this.top,c)-c/2,b=aa(t,this.bottom,h)+h/2,p=y=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(p,v),e.lineTo(y,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&Sy(i,a);const o=this.getLabelItems(t);for(const c of o){const h=c.options,d=c.font,p=c.label,y=c.textOffset;Wc(i,p,0,y,d,h)}a&&Ay(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:a}}=this;if(!i.display)return;const o=on(i.font),c=Xn(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||qt(e)?(d+=c.bottom,He(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:p,titleY:y,maxWidth:v,rotation:b}=kP(this,d,e,h);Wc(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:b,textAlign:OP(h,e,a),textBaseline:"middle",translation:[p,y]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=jt(t.grid&&t.grid.z,-1),a=jt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==tl.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&a.push(h)}return a}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return on(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Wh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;VP(e)&&(i=this.register(e));const a=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in a||(a[o]=t,NP(t,c,i),this.override&&be.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,a=this.scope;i in e&&delete e[i],a&&i in be[a]&&(delete be[a][i],this.override&&delete xa[i])}}function NP(n,t,e){const i=Kc(Object.create(null),[e?be.get(e):{},be.get(t),n.defaults]);be.set(t,i),n.defaultRoutes&&PP(t,n.defaultRoutes),n.descriptors&&be.describe(t,n.descriptors)}function PP(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),a=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),d=c.join(".");be.route(o,a,d,h)})}function VP(n){return"id"in n&&"defaults"in n}class LP{constructor(){this.controllers=new Wh(NA,"datasets",!0),this.elements=new Wh(Da,"elements"),this.plugins=new Wh(Object,"plugins"),this.scales=new Wh(tl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(t,o,a):Wt(a,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const a=vy(t);oe(i["before"+a],[],i),e[t](i),oe(i["after"+a],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const a=e.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return a}}var xi=new LP;class UP{constructor(){this._init=[]}notify(t,e,i,a){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=a?this._descriptors(t).filter(a):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,a){a=a||{};for(const o of t){const c=o.plugin,h=c[i],d=[e,a,o.options];if(oe(h,d,c)===!1&&a.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,a=jt(i.options&&i.options.plugins,{}),o=zP(i);return a===!1&&!e?[]:jP(t,o,a,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,a=(o,c)=>o.filter(h=>!c.some(d=>h.plugin.id===d.plugin.id));this._notify(a(e,i),t,"stop"),this._notify(a(i,e),t,"start")}}function zP(n){const t={},e=[],i=Object.keys(xi.plugins.items);for(let o=0;o<i.length;o++)e.push(xi.getPlugin(i[o]));const a=n.plugins||[];for(let o=0;o<a.length;o++){const c=a[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function BP(n,t){return!t&&n===!1?null:n===!0?{}:n}function jP(n,{plugins:t,localIds:e},i,a){const o=[],c=n.getContext();for(const h of t){const d=h.id,p=BP(i[d],a);p!==null&&o.push({plugin:h,options:HP(n.config,{plugin:h,local:e[d]},p,c)})}return o}function HP(n,{plugin:t,local:e},i,a){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ym(n,t){const e=be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function FP(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function qP(n,t){return n===t?"_index_":"_value_"}function uE(n){if(n==="x"||n==="y"||n==="r")return n}function GP(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function _m(n,...t){if(uE(n))return n;for(const e of t){const i=e.axis||GP(e.position)||n.length>1&&uE(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function hE(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function YP(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return hE(n,"x",e[0])||hE(n,"y",e[0])}return{}}function KP(n,t){const e=xa[n.type]||{scales:{}},i=t.scales||{},a=ym(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!qt(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=_m(c,h,YP(c,n),be.scales[h.type]),p=qP(d,a),y=e.scales||{};o[c]=Mc(Object.create(null),[{axis:d},h,y[d],y[p]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,d=c.indexAxis||ym(h,t),y=(xa[h]||{}).scales||{};Object.keys(y).forEach(v=>{const b=FP(v,d),A=c[b+"AxisID"]||b;o[A]=o[A]||Object.create(null),Mc(o[A],[{axis:b},i[A],y[v]])})}),Object.keys(o).forEach(c=>{const h=o[c];Mc(h,[be.scales[h.type],be.scale])}),o}function BA(n){const t=n.options||(n.options={});t.plugins=jt(t.plugins,{}),t.scales=KP(n,t)}function jA(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function QP(n){return n=n||{},n.data=jA(n.data),BA(n),n}const fE=new Map,HA=new Set;function $h(n,t){let e=fE.get(n);return e||(e=t(),fE.set(n,e),HA.add(e)),e}const pc=(n,t,e)=>{const i=Pf(t,e);i!==void 0&&n.add(i)};class XP{constructor(t){this._config=QP(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jA(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),BA(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return $h(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return $h(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return $h(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return $h(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let a=i.get(t);return(!a||e)&&(a=new Map,i.set(t,a)),a}getOptionScopes(t,e,i){const{options:a,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const d=new Set;e.forEach(y=>{t&&(d.add(t),y.forEach(v=>pc(d,t,v))),y.forEach(v=>pc(d,a,v)),y.forEach(v=>pc(d,xa[o]||{},v)),y.forEach(v=>pc(d,be,v)),y.forEach(v=>pc(d,gm,v))});const p=Array.from(d);return p.length===0&&p.push(Object.create(null)),HA.has(e)&&c.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,xa[e]||{},be.datasets[e]||{},{type:e},be,gm]}resolveNamedOptions(t,e,i,a=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=dE(this._resolverCache,t,a);let d=c;if($P(c,e)){o.$shared=!1,i=_r(i)?i():i;const p=this.createResolver(t,i,h);d=qo(c,i,p)}for(const p of e)o[p]=d[p];return o}createResolver(t,e,i=[""],a){const{resolver:o}=dE(this._resolverCache,t,i);return qt(e)?qo(o,e,void 0,a):o}}function dE(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const a=e.join();let o=i.get(a);return o||(o={resolver:wy(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(a,o)),o}const WP=n=>qt(n)&&Object.getOwnPropertyNames(n).some(t=>_r(n[t]));function $P(n,t){const{isScriptable:e,isIndexable:i}=AA(n);for(const a of t){const o=e(a),c=i(a),h=(c||o)&&n[a];if(o&&(_r(h)||WP(h))||c&&He(h))return!0}return!1}var ZP="4.5.0";const JP=["top","bottom","left","right","chartArea"];function gE(n,t){return n==="top"||n==="bottom"||JP.indexOf(n)===-1&&t==="x"}function pE(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function mE(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),oe(e&&e.onComplete,[n],t)}function tV(n){const t=n.chart,e=t.options.animation;oe(e&&e.onProgress,[n],t)}function FA(n){return Cy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const ff={},yE=n=>{const t=FA(n);return Object.values(ff).filter(e=>e.canvas===t).pop()};function eV(n,t,e){const i=Object.keys(n);for(const a of i){const o=+a;if(o>=t){const c=n[a];delete n[a],(e>0||o>t)&&(n[o+e]=c)}}}function nV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let ud=class{static defaults=be;static instances=ff;static overrides=xa;static registry=xi;static version=ZP;static getChart=yE;static register(...t){xi.add(...t),_E()}static unregister(...t){xi.remove(...t),_E()}constructor(t,e){const i=this.config=new XP(e),a=FA(t),o=yE(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||bP(a)),this.platform.updateConfig(i);const h=this.platform.acquireContext(a,c.aspectRatio),d=h&&h.canvas,p=d&&d.height,y=d&&d.width;if(this.id=sk(),this.ctx=h,this.canvas=d,this.width=y,this.height=p,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=wk(v=>this.update(v),c.resizeDelay||0),this._dataChanges=[],ff[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}hs.listen(this,"complete",mE),hs.listen(this,"progress",tV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:a,_aspectRatio:o}=this;return ae(t)?e&&o?o:a?i/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():FT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return BT(this.canvas,this.ctx),this}stop(){return hs.stop(this),this}resize(t,e){hs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(a,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,FT(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),oe(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Wt(e,(i,a)=>{i.id=a})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,a=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],d=_m(c,h),p=d==="r",y=d==="x";return{options:h,dposition:p?"chartArea":y?"bottom":"left",dtype:p?"radialLinear":y?"category":"linear"}}))),Wt(o,c=>{const h=c.options,d=h.id,p=_m(d,h),y=jt(h.type,c.dtype);(h.position===void 0||gE(h.position,p)!==gE(c.dposition))&&(h.position=c.dposition),a[d]=!0;let v=null;if(d in i&&i[d].type===y)v=i[d];else{const b=xi.getScale(y);v=new b({id:d,type:y,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),Wt(a,(c,h)=>{c||delete i[h]}),Wt(i,c=>{Yn.configure(this,c,c.options),Yn.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((a,o)=>a.index-o.index),i>e){for(let a=e;a<i;++a)this._destroyDatasetMeta(a);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(pE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,a)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=e.length;i<a;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||ym(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=xi.getController(h),{datasetElementType:p,dataElementType:y}=be.datasets[h];Object.assign(d,{dataElementType:xi.getElement(y),datasetElementType:p&&xi.getElement(p)}),c.controller=new d(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Wt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let p=0,y=this.data.datasets.length;p<y;p++){const{controller:v}=this.getDatasetMeta(p),b=!a&&o.indexOf(v)===-1;v.buildOrUpdateElements(b),c=Math.max(+v.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),a||Wt(o,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(pE("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Wt(this.scales,t=>{Yn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!DT(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of e){const c=i==="_removeElements"?-o:o;eV(t,a,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),a=i(0);for(let o=1;o<e;o++)if(!DT(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Yn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Wt(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,_r(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),a={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(e),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hs.has(this)?this.attached&&!hs.running(this)&&hs.start(this):(this.draw(),mE({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let a,o;for(a=0,o=e.length;a<o;++a){const c=e[a];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},a=ON(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&Sy(e,a),t.controller.draw(),a&&Ay(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Xc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,a){const o=JN.modes[e];return typeof o=="function"?o(this,t,i,a):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let a=i.filter(o=>o&&o._dataset===e).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Ia(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const a=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,a);Vf(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?a:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),hs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),BT(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ff[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},a=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};Wt(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,p)=>{e.addEventListener(this,d,p),t[d]=p},a=(d,p)=>{t[d]&&(e.removeEventListener(this,d,p),delete t[d])},o=(d,p)=>{this.canvas&&this.resize(d,p)};let c;const h=()=>{a("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){Wt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Wt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const a=i?"set":"remove";let o,c,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){c=t[h];const p=c&&this.getDatasetMeta(c.datasetIndex).controller;p&&p[a+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!kf(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const a=this.options.hover,o=(d,p)=>d.filter(y=>!p.some(v=>y.datasetIndex===v.datasetIndex&&y.index===v.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,a.mode,!1),h.length&&a.mode&&this.updateHoverStyle(h,a.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},a=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:a=[],options:o}=this,c=e,h=this._getActiveElements(t,a,i,c),d=uk(t),p=nV(t,this._lastEvent,i,d);i&&(this._lastEvent=null,oe(o.onHover,[t,h,this],this),d&&oe(o.onClick,[t,h,this],this));const y=!kf(h,a);return(y||e)&&(this._active=h,this._updateHoverStyles(h,a,e)),this._lastEvent=p,y}_getActiveElements(t,e,i,a){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,a)}};function _E(){return Wt(ud.instances,n=>n._plugins.invalidate())}function qA(n,t,e=t){n.lineCap=jt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(jt(e.borderDash,t.borderDash)),n.lineDashOffset=jt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=jt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=jt(e.borderWidth,t.borderWidth),n.strokeStyle=jt(e.borderColor,t.borderColor)}function iV(n,t,e){n.lineTo(e.x,e.y)}function sV(n){return n.stepped?zk:n.tension||n.cubicInterpolationMode==="monotone"?Bk:iV}function GA(n,t,e={}){const i=n.length,{start:a=0,end:o=i-1}=e,{start:c,end:h}=t,d=Math.max(a,c),p=Math.min(o,h),y=a<c&&o<c||a>h&&o>h;return{count:i,start:d,loop:t.loop,ilen:p<d&&!y?i+p-d:p-d}}function rV(n,t,e,i){const{points:a,options:o}=t,{count:c,start:h,loop:d,ilen:p}=GA(a,e,i),y=sV(o);let{move:v=!0,reverse:b}=i||{},A,R,M;for(A=0;A<=p;++A)R=a[(h+(b?p-A:A))%c],!R.skip&&(v?(n.moveTo(R.x,R.y),v=!1):y(n,M,R,b,o.stepped),M=R);return d&&(R=a[(h+(b?p:0))%c],y(n,M,R,b,o.stepped)),!!d}function aV(n,t,e,i){const a=t.points,{count:o,start:c,ilen:h}=GA(a,e,i),{move:d=!0,reverse:p}=i||{};let y=0,v=0,b,A,R,M,I,q;const Z=at=>(c+(p?h-at:at))%o,et=()=>{M!==I&&(n.lineTo(y,I),n.lineTo(y,M),n.lineTo(y,q))};for(d&&(A=a[Z(0)],n.moveTo(A.x,A.y)),b=0;b<=h;++b){if(A=a[Z(b)],A.skip)continue;const at=A.x,X=A.y,ot=at|0;ot===R?(X<M?M=X:X>I&&(I=X),y=(v*y+at)/++v):(et(),n.lineTo(at,X),R=ot,v=0,M=I=X),q=X}et()}function vm(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?aV:rV}function oV(n){return n.stepped?vN:n.tension||n.cubicInterpolationMode==="monotone"?bN:ua}function lV(n,t,e,i){let a=t._path;a||(a=t._path=new Path2D,t.path(a,e,i)&&a.closePath()),qA(n,t.options),n.stroke(a)}function cV(n,t,e,i){const{segments:a,options:o}=t,c=vm(t);for(const h of a)qA(n,o,h.style),n.beginPath(),c(n,t,h,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const uV=typeof Path2D=="function";function hV(n,t,e,i){uV&&!t.options.segment?lV(n,t,e,i):cV(n,t,e,i)}class fV extends Da{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;hN(this._points,i,t,a,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=CN(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,a=t[e],o=this.points,c=wN(this,{property:e,start:a,end:a});if(!c.length)return;const h=[],d=oV(i);let p,y;for(p=0,y=c.length;p<y;++p){const{start:v,end:b}=c[p],A=o[v],R=o[b];if(A===R){h.push(A);continue}const M=Math.abs((a-A[e])/(R[e]-A[e])),I=d(A,R,M,i.stepped);I[e]=t[e],h.push(I)}return h.length===1?h[0]:h}pathSegment(t,e,i){return vm(this)(t,this,e,i)}path(t,e,i){const a=this.segments,o=vm(this);let c=this._loop;e=e||0,i=i||this.points.length-e;for(const h of a)c&=o(t,this,h,{start:e,end:e+i-1});return!!c}draw(t,e,i,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),hV(t,this,i,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function vE(n,t,e,i){const a=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<a.radius+a.hitRadius}class dV extends Da{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const a=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-c,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,e){return vE(this,t,"x",e)}inYRange(t,e){return vE(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Xc(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,pm(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const bE=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},gV=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class TE extends Da{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=oe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,a)=>t.sort(i,a,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,a=on(i.font),o=a.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=bE(i,o);let p,y;e.font=a.string,this.isHorizontal()?(p=this.maxWidth,y=this._fitRows(c,o,h,d)+10):(y=this.maxHeight,p=this._fitCols(c,a,h,d)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(y,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,a){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],p=this.lineWidths=[0],y=a+h;let v=t;o.textAlign="left",o.textBaseline="middle";let b=-1,A=-y;return this.legendItems.forEach((R,M)=>{const I=i+e/2+o.measureText(R.text).width;(M===0||p[p.length-1]+I+2*h>c)&&(v+=y,p[p.length-(M>0?0:1)]=0,A+=y,b++),d[M]={left:0,top:A,row:b,width:I,height:a},p[p.length-1]+=I+h}),v}_fitCols(t,e,i,a){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],p=this.columnSizes=[],y=c-t;let v=h,b=0,A=0,R=0,M=0;return this.legendItems.forEach((I,q)=>{const{itemWidth:Z,itemHeight:et}=pV(i,e,o,I,a);q>0&&A+et+2*h>y&&(v+=b+h,p.push({width:b,height:A}),R+=b+h,M++,b=A=0),d[q]={left:R,top:A,col:M,width:Z,height:et},b=Math.max(b,Z),A+=et+h}),v+=b,p.push({width:b,height:A}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:a},rtl:o}}=this,c=ko(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=sn(i,this.left+a,this.right-this.lineWidths[h]);for(const p of e)h!==p.row&&(h=p.row,d=sn(i,this.left+a,this.right-this.lineWidths[h])),p.top+=this.top+t+a,p.left=c.leftForLtr(c.x(d),p.width),d+=p.width+a}else{let h=0,d=sn(i,this.top+t+a,this.bottom-this.columnSizes[h].height);for(const p of e)p.col!==h&&(h=p.col,d=sn(i,this.top+t+a,this.bottom-this.columnSizes[h].height)),p.top=d,p.left+=this.left+a,p.left=c.leftForLtr(c.x(p.left),p.width),d+=p.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Sy(t,this),this._draw(),Ay(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:a}=this,{align:o,labels:c}=t,h=be.color,d=ko(t.rtl,this.left,this.width),p=on(c.font),{padding:y}=c,v=p.size,b=v/2;let A;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=p.string;const{boxWidth:R,boxHeight:M,itemHeight:I}=bE(c,v),q=function(ot,D,x){if(isNaN(R)||R<=0||isNaN(M)||M<0)return;a.save();const C=jt(x.lineWidth,1);if(a.fillStyle=jt(x.fillStyle,h),a.lineCap=jt(x.lineCap,"butt"),a.lineDashOffset=jt(x.lineDashOffset,0),a.lineJoin=jt(x.lineJoin,"miter"),a.lineWidth=C,a.strokeStyle=jt(x.strokeStyle,h),a.setLineDash(jt(x.lineDash,[])),c.usePointStyle){const P={radius:M*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:C},N=d.xPlus(ot,R/2),L=D+b;EA(a,P,N,L,c.pointStyleWidth&&R)}else{const P=D+Math.max((v-M)/2,0),N=d.leftForLtr(ot,R),L=Pc(x.borderRadius);a.beginPath(),Object.values(L).some(O=>O!==0)?mm(a,{x:N,y:P,w:R,h:M,radius:L}):a.rect(N,P,R,M),a.fill(),C!==0&&a.stroke()}a.restore()},Z=function(ot,D,x){Wc(a,x.text,ot,D+I/2,p,{strikethrough:x.hidden,textAlign:d.textAlign(x.textAlign)})},et=this.isHorizontal(),at=this._computeTitleHeight();et?A={x:sn(o,this.left+y,this.right-i[0]),y:this.top+y+at,line:0}:A={x:this.left+y,y:sn(o,this.top+at+y,this.bottom-e[0].height),line:0},IA(this.ctx,t.textDirection);const X=I+y;this.legendItems.forEach((ot,D)=>{a.strokeStyle=ot.fontColor,a.fillStyle=ot.fontColor;const x=a.measureText(ot.text).width,C=d.textAlign(ot.textAlign||(ot.textAlign=c.textAlign)),P=R+b+x;let N=A.x,L=A.y;d.setWidth(this.width),et?D>0&&N+P+y>this.right&&(L=A.y+=X,A.line++,N=A.x=sn(o,this.left+y,this.right-i[A.line])):D>0&&L+X>this.bottom&&(N=A.x=N+e[A.line].width+y,A.line++,L=A.y=sn(o,this.top+at+y,this.bottom-e[A.line].height));const O=d.x(N);if(q(O,L,ot),N=xk(C,N+R+b,et?N+P:this.right,t.rtl),Z(d.x(N),L,ot),et)A.x+=P+y;else if(typeof ot.text!="string"){const $t=p.lineHeight;A.y+=YA(ot,$t)+y}else A.y+=X}),DA(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=on(e.font),a=Xn(e.padding);if(!e.display)return;const o=ko(t.rtl,this.left,this.width),c=this.ctx,h=e.position,d=i.size/2,p=a.top+d;let y,v=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),y=this.top+p,v=sn(t.align,v,this.right-b);else{const R=this.columnSizes.reduce((M,I)=>Math.max(M,I.height),0);y=p+sn(t.align,this.top,this.bottom-R-t.labels.padding-this._computeTitleHeight())}const A=sn(h,v,v+b);c.textAlign=o.textAlign(Ty(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Wc(c,e.text,A,y,i)}_computeTitleHeight(){const t=this.options.title,e=on(t.font),i=Xn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,a,o;if(Ec(t,this.left,this.right)&&Ec(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],Ec(t,a.left,a.left+a.width)&&Ec(e,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!_V(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,o=gV(a,i);a&&!o&&oe(e.onLeave,[t,a,this],this),this._hoveredItem=i,i&&!o&&oe(e.onHover,[t,i,this],this)}else i&&oe(e.onClick,[t,i,this],this)}}function pV(n,t,e,i,a){const o=mV(i,n,t,e),c=yV(a,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function mV(n,t,e,i){let a=n.text;return a&&typeof a!="string"&&(a=a.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(a).width}function yV(n,t,e){let i=n;return typeof t.text!="string"&&(i=YA(t,e)),i}function YA(n,t){const e=n.text?n.text.length:0;return t*e}function _V(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var vV={id:"legend",_element:TE,start(n,t,e){const i=n.legend=new TE({ctx:n.ctx,options:e,chart:n});Yn.configure(n,i,e),Yn.addBox(n,i)},stop(n){Yn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Yn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,a=e.chart;a.isDatasetVisible(i)?(a.hide(i),t.hidden=!0):(a.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:a,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const p=d.controller.getStyle(e?0:void 0),y=Xn(p.borderWidth);return{text:t[d.index].label,fillStyle:p.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:a||p.textAlign,borderRadius:c&&(h||p.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class KA extends Da{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const a=He(i.text)?i.text.length:1;this._padding=Xn(i.padding);const o=a*on(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:a,right:o,options:c}=this,h=c.align;let d=0,p,y,v;return this.isHorizontal()?(y=sn(h,i,o),v=e+t,p=o-i):(c.position==="left"?(y=i+t,v=sn(h,a,e),d=Fe*-.5):(y=o-t,v=sn(h,e,a),d=Fe*.5),p=a-e),{titleX:y,titleY:v,maxWidth:p,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=on(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:d,rotation:p}=this._drawArgs(o);Wc(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:p,textAlign:Ty(e.align),textBaseline:"middle",translation:[c,h]})}}function bV(n,t){const e=new KA({ctx:n.ctx,options:t,chart:n});Yn.configure(n,e,t),Yn.addBox(n,e),n.titleBlock=e}var TV={id:"title",_element:KA,start(n,t,e){bV(n,e)},stop(n){const t=n.titleBlock;Yn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Yn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ac={average(n){if(!n.length)return!1;let t,e,i=new Set,a=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:a/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,a=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const d=n[o].element;if(d&&d.hasValue()){const p=d.getCenterPoint(),y=dm(t,p);y<a&&(a=y,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function wi(n,t){return t&&(He(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function fs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function EV(n,t){const{element:e,datasetIndex:i,index:a}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(a);return{chart:n,label:c,parsed:o.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:h,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:e}}function EE(n,t){const e=n.chart.ctx,{body:i,footer:a,title:o}=n,{boxWidth:c,boxHeight:h}=t,d=on(t.bodyFont),p=on(t.titleFont),y=on(t.footerFont),v=o.length,b=a.length,A=i.length,R=Xn(t.padding);let M=R.height,I=0,q=i.reduce((at,X)=>at+X.before.length+X.lines.length+X.after.length,0);if(q+=n.beforeBody.length+n.afterBody.length,v&&(M+=v*p.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),q){const at=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;M+=A*at+(q-A)*d.lineHeight+(q-1)*t.bodySpacing}b&&(M+=t.footerMarginTop+b*y.lineHeight+(b-1)*t.footerSpacing);let Z=0;const et=function(at){I=Math.max(I,e.measureText(at).width+Z)};return e.save(),e.font=p.string,Wt(n.title,et),e.font=d.string,Wt(n.beforeBody.concat(n.afterBody),et),Z=t.displayColors?c+2+t.boxPadding:0,Wt(i,at=>{Wt(at.before,et),Wt(at.lines,et),Wt(at.after,et)}),Z=0,e.font=y.string,Wt(n.footer,et),e.restore(),I+=R.width,{width:I,height:M}}function SV(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function AV(n,t,e,i){const{x:a,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&a+o+c>t.width||n==="right"&&a-o-c<0)return!0}function wV(n,t,e,i){const{x:a,width:o}=e,{width:c,chartArea:{left:h,right:d}}=n;let p="center";return i==="center"?p=a<=(h+d)/2?"left":"right":a<=o/2?p="left":a>=c-o/2&&(p="right"),AV(p,n,t,e)&&(p="center"),p}function SE(n,t,e){const i=e.yAlign||t.yAlign||SV(n,e);return{xAlign:e.xAlign||t.xAlign||wV(n,t,e,i),yAlign:i}}function xV(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function RV(n,t,e){let{y:i,height:a}=n;return t==="top"?i+=e:t==="bottom"?i-=a+e:i-=a/2,i}function AE(n,t,e,i){const{caretSize:a,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:d}=e,p=a+o,{topLeft:y,topRight:v,bottomLeft:b,bottomRight:A}=Pc(c);let R=xV(t,h);const M=RV(t,d,p);return d==="center"?h==="left"?R+=p:h==="right"&&(R-=p):h==="left"?R-=Math.max(y,b)+a:h==="right"&&(R+=Math.max(v,A)+a),{x:Gn(R,0,i.width-t.width),y:Gn(M,0,i.height-t.height)}}function Zh(n,t,e){const i=Xn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function wE(n){return wi([],fs(n))}function CV(n,t,e){return Ia(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function xE(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const QA={beforeTitle:us,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:us,beforeBody:us,beforeLabel:us,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ae(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:us,afterBody:us,beforeFooter:us,footer:us,afterFooter:us};function mn(n,t,e,i){const a=n[t].call(e,i);return typeof a>"u"?QA[t].call(e,i):a}class RE extends Da{static positioners=Ac;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&e.options.animation&&i.animations,o=new OA(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=CV(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,a=mn(i,"beforeTitle",this,t),o=mn(i,"title",this,t),c=mn(i,"afterTitle",this,t);let h=[];return h=wi(h,fs(a)),h=wi(h,fs(o)),h=wi(h,fs(c)),h}getBeforeBody(t,e){return wE(mn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,a=[];return Wt(t,o=>{const c={before:[],lines:[],after:[]},h=xE(i,o);wi(c.before,fs(mn(h,"beforeLabel",this,o))),wi(c.lines,mn(h,"label",this,o)),wi(c.after,fs(mn(h,"afterLabel",this,o))),a.push(c)}),a}getAfterBody(t,e){return wE(mn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,a=mn(i,"beforeFooter",this,t),o=mn(i,"footer",this,t),c=mn(i,"afterFooter",this,t);let h=[];return h=wi(h,fs(a)),h=wi(h,fs(o)),h=wi(h,fs(c)),h}_createItems(t){const e=this._active,i=this.chart.data,a=[],o=[],c=[];let h=[],d,p;for(d=0,p=e.length;d<p;++d)h.push(EV(this.chart,e[d]));return t.filter&&(h=h.filter((y,v,b)=>t.filter(y,v,b,i))),t.itemSort&&(h=h.sort((y,v)=>t.itemSort(y,v,i))),Wt(h,y=>{const v=xE(t.callbacks,y);a.push(mn(v,"labelColor",this,y)),o.push(mn(v,"labelPointStyle",this,y)),c.push(mn(v,"labelTextColor",this,y))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),a=this._active;let o,c=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const h=Ac[i.position].call(this,a,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=EE(this,i),p=Object.assign({},h,d),y=SE(this.chart,i,p),v=AE(i,p,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,a){const o=this.getCaretPosition(t,i,a);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:a,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:d,topRight:p,bottomLeft:y,bottomRight:v}=Pc(h),{x:b,y:A}=t,{width:R,height:M}=e;let I,q,Z,et,at,X;return o==="center"?(at=A+M/2,a==="left"?(I=b,q=I-c,et=at+c,X=at-c):(I=b+R,q=I+c,et=at-c,X=at+c),Z=I):(a==="left"?q=b+Math.max(d,y)+c:a==="right"?q=b+R-Math.max(p,v)-c:q=this.caretX,o==="top"?(et=A,at=et-c,I=q-c,Z=q+c):(et=A+M,at=et+c,I=q+c,Z=q-c),X=et),{x1:I,x2:q,x3:Z,y1:et,y2:at,y3:X}}drawTitle(t,e,i){const a=this.title,o=a.length;let c,h,d;if(o){const p=ko(i.rtl,this.x,this.width);for(t.x=Zh(this,i.titleAlign,i),e.textAlign=p.textAlign(i.titleAlign),e.textBaseline="middle",c=on(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,d=0;d<o;++d)e.fillText(a[d],p.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,a,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:p}=o,y=on(o.bodyFont),v=Zh(this,"left",o),b=a.x(v),A=d<y.lineHeight?(y.lineHeight-d)/2:0,R=e.y+A;if(o.usePointStyle){const M={radius:Math.min(p,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},I=a.leftForLtr(b,p)+p/2,q=R+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,pm(t,M,I,q),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,pm(t,M,I,q)}else{t.lineWidth=qt(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const M=a.leftForLtr(b,p),I=a.leftForLtr(a.xPlus(b,1),p-2),q=Pc(c.borderRadius);Object.values(q).some(Z=>Z!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,mm(t,{x:M,y:R,w:p,h:d,radius:q}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),mm(t,{x:I,y:R+1,w:p-2,h:d-2,radius:q}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(M,R,p,d),t.strokeRect(M,R,p,d),t.fillStyle=c.backgroundColor,t.fillRect(I,R+1,p-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:a}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:d,boxWidth:p,boxPadding:y}=i,v=on(i.bodyFont);let b=v.lineHeight,A=0;const R=ko(i.rtl,this.x,this.width),M=function(x){e.fillText(x,R.x(t.x+A),t.y+b/2),t.y+=b+o},I=R.textAlign(c);let q,Z,et,at,X,ot,D;for(e.textAlign=c,e.textBaseline="middle",e.font=v.string,t.x=Zh(this,I,i),e.fillStyle=i.bodyColor,Wt(this.beforeBody,M),A=h&&I!=="right"?c==="center"?p/2+y:p+2+y:0,at=0,ot=a.length;at<ot;++at){for(q=a[at],Z=this.labelTextColors[at],e.fillStyle=Z,Wt(q.before,M),et=q.lines,h&&et.length&&(this._drawColorBox(e,t,at,R,i),b=Math.max(v.lineHeight,d)),X=0,D=et.length;X<D;++X)M(et[X]),b=v.lineHeight;Wt(q.after,M)}A=0,b=v.lineHeight,Wt(this.afterBody,M),t.y-=o}drawFooter(t,e,i){const a=this.footer,o=a.length;let c,h;if(o){const d=ko(i.rtl,this.x,this.width);for(t.x=Zh(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",c=on(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(a[h],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,a){const{xAlign:o,yAlign:c}=this,{x:h,y:d}=t,{width:p,height:y}=i,{topLeft:v,topRight:b,bottomLeft:A,bottomRight:R}=Pc(a.cornerRadius);e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.beginPath(),e.moveTo(h+v,d),c==="top"&&this.drawCaret(t,e,i,a),e.lineTo(h+p-b,d),e.quadraticCurveTo(h+p,d,h+p,d+b),c==="center"&&o==="right"&&this.drawCaret(t,e,i,a),e.lineTo(h+p,d+y-R),e.quadraticCurveTo(h+p,d+y,h+p-R,d+y),c==="bottom"&&this.drawCaret(t,e,i,a),e.lineTo(h+A,d+y),e.quadraticCurveTo(h,d+y,h,d+y-A),c==="center"&&o==="left"&&this.drawCaret(t,e,i,a),e.lineTo(h,d+v),e.quadraticCurveTo(h,d,h+v,d),e.closePath(),e.fill(),a.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const c=Ac[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=EE(this,t),d=Object.assign({},c,this._size),p=SE(e,t,d),y=AE(t,d,p,e);(a._to!==y.x||o._to!==y.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Xn(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,a,e),IA(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),DA(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,a=t.map(({datasetIndex:h,index:d})=>{const p=this.chart.getDatasetMeta(h);if(!p)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:p.data[d],index:d}}),o=!kf(i,a),c=this._positionChanged(a,e);(o||c)&&(this._active=a,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),d=e||!kf(c,o)||h;return d&&(this._active=c,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,a){const o=this.options;if(t.type==="mouseout")return[];if(!a)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:a,options:o}=this,c=Ac[o.position].call(this,t,e);return c!==!1&&(i!==c.x||a!==c.y)}}var IV={id:"tooltip",_element:RE,positioners:Ac,afterInit(n,t,e){e&&(n.tooltip=new RE({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const DV=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function MV(n,t,e,i){const a=n.indexOf(t);if(a===-1)return DV(n,t,e,i);const o=n.lastIndexOf(t);return a!==o?e:a}const OV=(n,t)=>n===null?null:Gn(Math.round(n),0,t);function CE(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class kV extends tl{static id="category";static defaults={ticks:{callback:CE}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:a,label:o}of e)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ae(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:MV(i,t,jt(e,t),this._addedLabels),OV(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)a.push({value:c});return a}getLabelForValue(t){return CE.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function NV(n,t){const e=[],{bounds:a,step:o,min:c,max:h,precision:d,count:p,maxTicks:y,maxDigits:v,includeBounds:b}=n,A=o||1,R=y-1,{min:M,max:I}=t,q=!ae(c),Z=!ae(h),et=!ae(p),at=(I-M)/(v+1);let X=OT((I-M)/R/A)*A,ot,D,x,C;if(X<1e-14&&!q&&!Z)return[{value:M},{value:I}];C=Math.ceil(I/X)-Math.floor(M/X),C>R&&(X=OT(C*X/R/A)*A),ae(d)||(ot=Math.pow(10,d),X=Math.ceil(X*ot)/ot),a==="ticks"?(D=Math.floor(M/X)*X,x=Math.ceil(I/X)*X):(D=M,x=I),q&&Z&&o&&pk((h-c)/o,X/1e3)?(C=Math.round(Math.min((h-c)/X,y)),X=(h-c)/C,D=c,x=h):et?(D=q?c:D,x=Z?h:x,C=p-1,X=(x-D)/C):(C=(x-D)/X,Oc(C,Math.round(C),X/1e3)?C=Math.round(C):C=Math.ceil(C));const P=Math.max(kT(X),kT(D));ot=Math.pow(10,ae(d)?P:d),D=Math.round(D*ot)/ot,x=Math.round(x*ot)/ot;let N=0;for(q&&(b&&D!==c?(e.push({value:c}),D<c&&N++,Oc(Math.round((D+N*X)*ot)/ot,c,IE(c,at,n))&&N++):D<c&&N++);N<C;++N){const L=Math.round((D+N*X)*ot)/ot;if(Z&&L>h)break;e.push({value:L})}return Z&&b&&x!==h?e.length&&Oc(e[e.length-1].value,h,IE(h,at,n))?e[e.length-1].value=h:e.push({value:h}):(!Z||x===h)&&e.push({value:x}),e}function IE(n,t,{horizontal:e,minRotation:i}){const a=da(i),o=(e?Math.sin(a):Math.cos(a))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class PV extends tl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const c=d=>a=e?a:d,h=d=>o=i?o:d;if(t){const d=Fo(a),p=Fo(o);d<0&&p<0?h(0):d>0&&p>0&&c(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);h(o+d),t||c(a-d)}this.min=a,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),e=e||11),e&&(a=Math.min(e,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=NV(a,o);return t.bounds==="ticks"&&mk(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const a=(i-e)/Math.max(t.length-1,1)/2;e-=a,i+=a}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return bA(t,this.chart.options.locale,this.options.ticks.format)}}class VV extends PV{static id="linear";static defaults={ticks:{callback:TA.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qn(t)?t:0,this.max=Qn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=da(this.options.ticks.minRotation),a=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const hd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vn=Object.keys(hd);function DE(n,t){return n-t}function ME(n,t){if(ae(t))return null;const e=n._adapter,{parser:i,round:a,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Qn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(a&&(c=a==="week"&&(Qc(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,a)),+c)}function OE(n,t,e,i){const a=vn.length;for(let o=vn.indexOf(n);o<a-1;++o){const c=hd[vn[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return vn[o]}return vn[a-1]}function LV(n,t,e,i,a){for(let o=vn.length-1;o>=vn.indexOf(e);o--){const c=vn[o];if(hd[c].common&&n._adapter.diff(a,i,c)>=t-1)return c}return vn[e?vn.indexOf(e):0]}function UV(n){for(let t=vn.indexOf(n)+1,e=vn.length;t<e;++t)if(hd[vn[t]].common)return vn[t]}function kE(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:a}=by(e,t),o=e[i]>=t?e[i]:e[a];n[o]=!0}}function zV(n,t,e,i){const a=n._adapter,o=+a.startOf(t[0].value,i),c=t[t.length-1].value;let h,d;for(h=o;h<=c;h=+a.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function NE(n,t,e){const i=[],a={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],a[h]=c,i.push({value:h,major:!1});return o===0||!e?i:zV(n,i,a,e)}class PE extends tl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),a=this._adapter=new QN._date(t.adapters.date);a.init(e),Mc(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ME(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:a,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function d(p){!c&&!isNaN(p.min)&&(a=Math.min(a,p.min)),!h&&!isNaN(p.max)&&(o=Math.max(o,p.max))}(!c||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Qn(a)&&!isNaN(a)?a:+e.startOf(Date.now(),i),o=Qn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,c=this.max,h=Ek(a,o,c);return this._unit=e.unit||(i.autoSkip?OE(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):LV(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:UV(this._unit),this.initOffsets(a),t.reverse&&h.reverse(),NE(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,a,o;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?e=1-a:e=(this.getDecimalForValue(t[1])-a)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=Gn(e,0,c),i=Gn(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,a=this.options,o=a.time,c=o.unit||OE(o.minUnit,e,i,this._getLabelCapacity(e)),h=jt(a.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,p=Qc(d)||d===!0,y={};let v=e,b,A;if(p&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,p?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const R=a.ticks.source==="data"&&this.getDataTimestamps();for(b=v,A=0;b<i;b=+t.add(b,h,c),A++)kE(y,b,R);return(b===i||a.bounds==="ticks"||A===1)&&kE(y,b,R),Object.keys(y).sort(DE).map(M=>+M)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const a=this.options.time.displayFormats,o=this._unit,c=e||a[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,a){const o=this.options,c=o.ticks.callback;if(c)return oe(c,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,p=this._majorUnit,y=d&&h[d],v=p&&h[p],b=i[e],A=p&&v&&b&&b.major;return this._adapter.format(t,a||(A?v:y))}generateTickLabels(t){let e,i,a;for(e=0,i=t.length;e<i;++e)a=t[e],a.label=this._tickFormatFunction(a.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,a=da(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(a),c=Math.sin(a),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,a=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,NE(this,[t],this._majorUnit),a),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,i=a.length;e<i;++e)t=t.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const a=this.getLabels();for(e=0,i=a.length;e<i;++e)t.push(ME(this,a[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ak(t.sort(DE))}}function Jh(n,t,e){let i=0,a=n.length-1,o,c,h,d;e?(t>=n[i].pos&&t<=n[a].pos&&({lo:i,hi:a}=ga(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:d}=n[a]):(t>=n[i].time&&t<=n[a].time&&({lo:i,hi:a}=ga(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:d}=n[a]);const p=c-o;return p?h+(d-h)*(t-o)/p:h}class JV extends PE{static id="timeseries";static defaults=PE.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Jh(e,this.min),this._tableRange=Jh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,a=[],o=[];let c,h,d,p,y;for(c=0,h=t.length;c<h;++c)p=t[c],p>=e&&p<=i&&a.push(p);if(a.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=a.length;c<h;++c)y=a[c+1],d=a[c-1],p=a[c],Math.round((y+d)/2)!==p&&o.push({time:p,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Jh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Jh(this._table,i*this._tableRange+this._minPos,!0)}}const XA="label";function VE(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function BV(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function WA(n,t){n.labels=t}function $A(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:XA;const i=[];n.datasets=t.map(a=>{const o=n.datasets.find(c=>c[e]===a[e]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function jV(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XA;const e={labels:[],datasets:[]};return WA(e,n.labels),$A(e,n.datasets,t),e}function HV(n,t){const{height:e=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:c,data:h,options:d,plugins:p=[],fallbackContent:y,updateMode:v,...b}=n,A=Ct.useRef(null),R=Ct.useRef(null),M=()=>{A.current&&(R.current=new ud(A.current,{type:c,data:jV(h,o),options:d&&{...d},plugins:p}),VE(t,R.current))},I=()=>{VE(t,null),R.current&&(R.current.destroy(),R.current=null)};return Ct.useEffect(()=>{!a&&R.current&&d&&BV(R.current,d)},[a,d]),Ct.useEffect(()=>{!a&&R.current&&WA(R.current.config.data,h.labels)},[a,h.labels]),Ct.useEffect(()=>{!a&&R.current&&h.datasets&&$A(R.current.config.data,h.datasets,o)},[a,h.datasets]),Ct.useEffect(()=>{R.current&&(a?(I(),setTimeout(M)):R.current.update(v))},[a,d,h.labels,h.datasets,v]),Ct.useEffect(()=>{R.current&&(I(),setTimeout(M))},[c]),Ct.useEffect(()=>(M(),()=>I()),[]),LE.createElement("canvas",{ref:A,role:"img",height:e,width:i,...b},y)}const FV=Ct.forwardRef(HV);function qV(n,t){return ud.register(t),Ct.forwardRef((e,i)=>LE.createElement(FV,{...e,ref:i,type:n}))}const mc=qV("line",KN);ud.register(kV,VV,dV,fV,TV,IV,vV);const GV=({patient:n,onBack:t})=>{const[e,i]=Ct.useState([]);Ct.useEffect(()=>{const b=Li(Kn,"patients",n.docId,"vitals"),A=Aa(b,Gc("timestamp","asc")),R=wa(A,M=>{const I=M.docs.map(q=>({id:q.id,...q.data()}));i(I)});return()=>R()},[n.docId]);const a=e.map(b=>new Date(b.timestamp.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),o=b=>({responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:b}}}),c={labels:a,datasets:[{label:"Temperatura (C)",data:e.map(b=>b.temperature),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},h={labels:a,datasets:[{label:"Frecuencia Cardaca (lpm)",data:e.map(b=>b.heartRate),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]},d={labels:a,datasets:[{label:"Sistlica",data:e.map(b=>b.bloodPressure.split("/")[0]),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Diastlica",data:e.map(b=>b.bloodPressure.split("/")[1]),borderColor:"rgb(153, 102, 255)",backgroundColor:"rgba(153, 102, 255, 0.5)"}]},p={labels:a,datasets:[{label:"Frecuencia Respiratoria (rpm)",data:e.map(b=>b.respiratoryRate),borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)"}]},y={labels:a,datasets:[{label:"Saturacin (%)",data:e.map(b=>b.saturation),borderColor:"rgb(99, 255, 132)",backgroundColor:"rgba(99, 255, 132, 0.5)"}]},v={container:{padding:"20px",fontFamily:"sans-serif"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},backButton:{padding:"8px 15px",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"},table:{width:"100%",borderCollapse:"collapse",marginTop:"30px"},th:{border:"1px solid #ddd",padding:"8px",backgroundColor:"#f2f2f2",textAlign:"left"},td:{border:"1px solid #ddd",padding:"8px"},chartsContainer:{marginTop:"40px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"20px"}};return z.jsxs("div",{style:v.container,children:[z.jsxs("header",{style:v.header,children:[z.jsx("button",{onClick:t,style:v.backButton,children:" Volver a la lista"}),z.jsxs("h1",{children:["Historial de: ",n.name]})]}),z.jsx("hr",{}),e.length>1&&z.jsxs("div",{style:v.chartsContainer,children:[" ",z.jsxs("div",{children:[z.jsx("h3",{children:"Temperatura"}),z.jsx(mc,{options:o("Evolucin de Temperatura"),data:c})]})," ",z.jsxs("div",{children:[z.jsx("h3",{children:"Frecuencia Cardaca"}),z.jsx(mc,{options:o("Evolucin de Frecuencia Cardaca"),data:h})]})," ",z.jsxs("div",{children:[z.jsx("h3",{children:"Frecuencia Respiratoria"}),z.jsx(mc,{options:o("Evolucin de Frec. Respiratoria"),data:p})]})," ",z.jsxs("div",{children:[z.jsx("h3",{children:"Saturacin"}),z.jsx(mc,{options:o("Evolucin de Saturacin"),data:y})]})," ",z.jsxs("div",{children:[z.jsx("h3",{children:"Presin Arterial"}),z.jsx(mc,{options:o("Evolucin de Presin Arterial"),data:d})]})," "]}),z.jsxs("table",{style:v.table,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{style:v.th,children:"Fecha y Hora"}),z.jsx("th",{style:v.th,children:"Frec. Cardaca"}),z.jsx("th",{style:v.th,children:"Frec. Respiratoria"}),z.jsx("th",{style:v.th,children:"Presin Arterial"}),z.jsx("th",{style:v.th,children:"Saturacin"}),z.jsx("th",{style:v.th,children:"Temperatura"}),z.jsx("th",{style:v.th,children:"Nota"})]})}),z.jsx("tbody",{children:e.map(b=>z.jsxs("tr",{children:[z.jsx("td",{style:v.td,children:new Date(b.timestamp.seconds*1e3).toLocaleString("es-CO")}),z.jsxs("td",{style:v.td,children:[b.heartRate," lpm"]}),z.jsxs("td",{style:v.td,children:[b.respiratoryRate," rpm"]}),z.jsx("td",{style:v.td,children:b.bloodPressure}),z.jsxs("td",{style:v.td,children:[b.saturation," %"]}),z.jsxs("td",{style:v.td,children:[b.temperature," C"]}),z.jsx("td",{style:v.td,children:b.note})]},b.id)).reverse()})]})]})},YV=({usuario:n,handleLogout:t})=>{const[e,i]=Ct.useState([]),[a,o]=Ct.useState(null);Ct.useEffect(()=>{const p=Aa(Li(Kn,"patients"),od("status","!=","Finalizado"),Gc("status"),Gc("createdAt","desc")),y=wa(p,v=>{const b=v.docs.map(A=>({docId:A.id,...A.data()}));i(b)});return()=>y()},[]);const c=async p=>{if(window.confirm("Seguro que quieres finalizar este tratamiento?")){const y=ry(Kn,"patients",p);try{await oA(y,{status:"Finalizado"})}catch(v){console.error("Error al finalizar:",v)}}};if(a)return z.jsx(GV,{patient:a,onBack:()=>o(null)});const h={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px"},logoutButton:{padding:"8px 15px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},th:{border:"1px solid #ddd",padding:"8px",backgroundColor:"#f2f2f2",textAlign:"left"},td:{border:"1px solid #ddd",padding:"8px"},actionsCell:{display:"flex",gap:"5px"},actionButton:{padding:"5px 10px",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}},d=p=>{const y={padding:"5px 8px",borderRadius:"5px",color:"white",fontSize:"0.9em"};switch(p){case"Activo":return{...y,backgroundColor:"#28a745"};case"Pendiente":return{...y,backgroundColor:"#ffc107",color:"black"};case"Finalizado":return{...y,backgroundColor:"#6c757d"};default:return{}}};return z.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[z.jsxs("header",{style:h.header,children:[z.jsx("h2",{children:"Panel de Mdico"}),z.jsxs("div",{children:[z.jsx("span",{children:n.email}),z.jsx("button",{onClick:t,style:h.logoutButton,children:"Cerrar Sesin"})]})]}),z.jsxs("main",{style:{marginTop:"30px"},children:[z.jsx("h3",{children:"Lista de Pacientes Activos y Pendientes"}),z.jsxs("table",{style:h.table,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{style:h.th,children:"Nombre"}),z.jsx("th",{style:h.th,children:"Cdula"}),z.jsx("th",{style:h.th,children:"Estado"}),z.jsx("th",{style:h.th,children:"Acciones"})]})}),z.jsx("tbody",{children:e.map(p=>z.jsxs("tr",{children:[z.jsx("td",{style:h.td,children:p.name}),z.jsx("td",{style:h.td,children:p.id}),z.jsx("td",{style:h.td,children:z.jsx("span",{style:d(p.status),children:p.status})}),z.jsx("td",{style:h.td,children:z.jsxs("div",{style:h.actionsCell,children:[z.jsx("button",{style:{...h.actionButton,backgroundColor:"#17a2b8"},onClick:()=>o(p),children:"Ver Historial"}),p.status==="Activo"&&z.jsx("button",{style:{...h.actionButton,backgroundColor:"#dc3545"},onClick:()=>c(p.docId),children:"Finalizar"})]})})]},p.docId))})]})]})]})},KV=({patient:n,onBack:t})=>{const e={container:{padding:"20px",fontFamily:"sans-serif"},header:{display:"flex",justifyContent:"space-between",alignItems:"center"},backButton:{padding:"8px 15px",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"}};return z.jsxs("div",{style:e.container,children:[z.jsxs("header",{style:e.header,children:[z.jsx("button",{onClick:t,style:e.backButton,children:" Volver a la lista"}),z.jsxs("h1",{children:["Historial de: ",n.name]})]}),z.jsx("hr",{}),z.jsxs("div",{style:{marginTop:"20px"},children:[z.jsxs("p",{children:[z.jsx("strong",{children:"Cdula:"})," ",n.id]}),z.jsx("p",{style:{marginTop:"30px",color:"gray"},children:"(Prximamente: Formulario y lista de signos vitales)"})]})]})},ZA=({usuario:n,handleLogout:t})=>{const[e,i]=Ct.useState([]),[a,o]=Ct.useState(null);if(Ct.useEffect(()=>{if(n){const h=Aa(Li(Kn,"patients"),od("email_auxiliar_asignado","==",n.email)),d=wa(h,p=>{const y=p.docs.map(v=>({id:v.id,...v.data()}));i(y)});return()=>d()}},[n]),a)return z.jsx(KV,{patient:a,onBack:()=>o(null)});const c={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px"},logoutButton:{padding:"8px 15px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},table:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},th:{border:"1px solid #ddd",padding:"8px",backgroundColor:"#f2f2f2",textAlign:"left"},td:{border:"1px solid #ddd",padding:"8px"},actionButton:{padding:"5px 10px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}};return z.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[z.jsxs("header",{style:c.header,children:[z.jsx("h2",{children:"Panel de Auxiliar"}),z.jsxs("div",{children:[z.jsx("span",{children:n.email}),z.jsx("button",{onClick:t,style:c.logoutButton,children:"Cerrar Sesin"})]})]}),z.jsxs("main",{style:{marginTop:"30px"},children:[z.jsx("h3",{children:"Mis Pacientes Asignados"}),z.jsxs("table",{style:c.table,children:[z.jsx("thead",{children:z.jsxs("tr",{children:[z.jsx("th",{style:c.th,children:"Nombre"}),z.jsx("th",{style:c.th,children:"Cdula"}),z.jsx("th",{style:c.th,children:"Acciones"})]})}),z.jsx("tbody",{children:e.map(h=>z.jsxs("tr",{children:[z.jsx("td",{style:c.td,children:h.name}),z.jsx("td",{style:c.td,children:h.id}),z.jsx("td",{style:c.td,children:z.jsx("button",{style:c.actionButton,onClick:()=>o(h),children:"Ver/Aadir Signos"})})]},h.id))})]})]})]})},QV=({usuario:n,handleLogout:t})=>{const[e,i]=Ct.useState("admin"),a={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px"},logoutButton:{padding:"8px 15px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},mainContent:{marginTop:"20px"},simulationBar:{padding:"10px",backgroundColor:"#e9ecef",marginBottom:"20px",borderRadius:"5px",display:"flex",gap:"10px",alignItems:"center"},simButton:{padding:"8px 12px",border:"1px solid #ccc",cursor:"pointer",backgroundColor:"white",borderRadius:"5px"},activeSimButton:{backgroundColor:"#007bff",color:"white",borderColor:"#007bff"}},o=()=>{switch(e){case"medico":return z.jsx(YV,{usuario:n,handleLogout:t});case"auxiliar":return z.jsx(ZA,{usuario:n,handleLogout:t});case"admin":default:return z.jsxs("main",{style:a.mainContent,children:[z.jsxs("div",{style:{marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #ccc"},children:[z.jsx("h2",{children:"Gestin de Pacientes"}),z.jsx(OO,{}),z.jsx(kO,{})]}),z.jsxs("div",{style:{marginTop:"40px",paddingTop:"20px",borderTop:"1px solid #ccc"},children:[z.jsx("h2",{children:"Gestin de Personal"}),z.jsx(NO,{}),z.jsx(PO,{})]})]})}};return z.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[z.jsxs("header",{style:a.header,children:[z.jsx("h2",{children:"Panel de Super-Administrador"}),z.jsxs("div",{children:[z.jsx("span",{children:n.email}),z.jsx("button",{onClick:t,style:a.logoutButton,children:"Cerrar Sesin"})]})]}),z.jsxs("div",{style:a.simulationBar,children:[z.jsx("strong",{children:"Simular Vista Como:"}),z.jsx("button",{style:e==="admin"?{...a.simButton,...a.activeSimButton}:a.simButton,onClick:()=>i("admin"),children:"Administrador"}),z.jsx("button",{style:e==="medico"?{...a.simButton,...a.activeSimButton}:a.simButton,onClick:()=>i("medico"),children:"Mdico"}),z.jsx("button",{style:e==="auxiliar"?{...a.simButton,...a.activeSimButton}:a.simButton,onClick:()=>i("auxiliar"),children:"Auxiliar"})]}),o()]})},XV=({usuario:n})=>{const[t,e]=Ct.useState(null);Ct.useEffect(()=>{(async()=>{if(n){const o=Aa(Li(Kn,"personal"),od("email","==",n.email)),c=await CO(o);c.empty?e({rol:"Desconocido"}):e(c.docs[0].data())}})()},[n]);const i=async()=>{try{await yS(Of)}catch(a){console.error("Error al cerrar sesin",a)}};if(!t)return z.jsx("div",{children:"Cargando perfil..."});switch(t.rol){case"Mdico":return z.jsx(QV,{usuario:n,handleLogout:i});case"Auxiliar":return z.jsx(ZA,{usuario:n,handleLogout:i});default:return z.jsxs("div",{children:[z.jsx("h1",{children:"Rol no reconocido"}),z.jsx("p",{children:"No tienes permisos para ver esta pgina."}),z.jsx("button",{onClick:i,children:"Cerrar Sesin"})]})}};function WV(){const[n,t]=Ct.useState(null);Ct.useEffect(()=>{const i=aI(Of,a=>{t(a||null)});return()=>i()},[]);const e=async()=>{try{await yS(Of)}catch(i){console.error("Error al cerrar sesin",i)}};return n?z.jsx(XV,{usuario:n,handleLogout:e}):z.jsx(MO,{})}kx.createRoot(document.getElementById("root")).render(z.jsx(Ct.StrictMode,{children:z.jsx(WV,{})}));
