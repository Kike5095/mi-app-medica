(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function kx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fm={exports:{}},fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function Px(){if(B0)return fc;B0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:o}}return fc.Fragment=t,fc.jsx=e,fc.jsxs=e,fc}var H0;function Vx(){return H0||(H0=1,fm.exports=Px()),fm.exports}var R=Vx(),dm={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Lx(){if(F0)return Ct;F0=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function M(U,it,ct){this.props=U,this.context=it,this.refs=k,this.updater=ct||A}M.prototype.isReactComponent={},M.prototype.setState=function(U,it){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,it,"setState")},M.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function G(){}G.prototype=M.prototype;function $(U,it,ct){this.props=U,this.context=it,this.refs=k,this.updater=ct||A}var tt=$.prototype=new G;tt.constructor=$,C(tt,M.prototype),tt.isPureReactComponent=!0;var st=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},ot=Object.prototype.hasOwnProperty;function O(U,it,ct,rt,dt,xt){return ct=xt.ref,{$$typeof:n,type:U,key:it,ref:ct!==void 0?ct:null,props:xt}}function x(U,it){return O(U.type,it,void 0,void 0,void 0,U.props)}function I(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function V(U){var it={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ct){return it[ct]})}var D=/\/+/g;function L(U,it){return typeof U=="object"&&U!==null&&U.key!=null?V(""+U.key):it.toString(36)}function N(){}function Lt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(N,N):(U.status="pending",U.then(function(it){U.status==="pending"&&(U.status="fulfilled",U.value=it)},function(it){U.status==="pending"&&(U.status="rejected",U.reason=it)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function bt(U,it,ct,rt,dt){var xt=typeof U;(xt==="undefined"||xt==="boolean")&&(U=null);var _t=!1;if(U===null)_t=!0;else switch(xt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(U.$$typeof){case n:case t:_t=!0;break;case _:return _t=U._init,bt(_t(U._payload),it,ct,rt,dt)}}if(_t)return dt=dt(U),_t=rt===""?"."+L(U,0):rt,st(dt)?(ct="",_t!=null&&(ct=_t.replace(D,"$&/")+"/"),bt(dt,it,ct,"",function(ai){return ai})):dt!=null&&(I(dt)&&(dt=x(dt,ct+(dt.key==null||U&&U.key===dt.key?"":(""+dt.key).replace(D,"$&/")+"/")+_t)),it.push(dt)),1;_t=0;var Pe=rt===""?".":rt+":";if(st(U))for(var ie=0;ie<U.length;ie++)rt=U[ie],xt=Pe+L(rt,ie),_t+=bt(rt,it,ct,xt,dt);else if(ie=T(U),typeof ie=="function")for(U=ie.call(U),ie=0;!(rt=U.next()).done;)rt=rt.value,xt=Pe+L(rt,ie++),_t+=bt(rt,it,ct,xt,dt);else if(xt==="object"){if(typeof U.then=="function")return bt(Lt(U),it,ct,rt,dt);throw it=String(U),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return _t}function K(U,it,ct){if(U==null)return U;var rt=[],dt=0;return bt(U,rt,"","",function(xt){return it.call(ct,xt,dt++)}),rt}function at(U){if(U._status===-1){var it=U._result;it=it(),it.then(function(ct){(U._status===0||U._status===-1)&&(U._status=1,U._result=ct)},function(ct){(U._status===0||U._status===-1)&&(U._status=2,U._result=ct)}),U._status===-1&&(U._status=0,U._result=it)}if(U._status===1)return U._result.default;throw U._result}var gt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Nt(){}return Ct.Children={map:K,forEach:function(U,it,ct){K(U,function(){it.apply(this,arguments)},ct)},count:function(U){var it=0;return K(U,function(){it++}),it},toArray:function(U){return K(U,function(it){return it})||[]},only:function(U){if(!I(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ct.Component=M,Ct.Fragment=e,Ct.Profiler=a,Ct.PureComponent=$,Ct.StrictMode=i,Ct.Suspense=d,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(U){return X.H.useMemoCache(U)}},Ct.cache=function(U){return function(){return U.apply(null,arguments)}},Ct.cloneElement=function(U,it,ct){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var rt=C({},U.props),dt=U.key,xt=void 0;if(it!=null)for(_t in it.ref!==void 0&&(xt=void 0),it.key!==void 0&&(dt=""+it.key),it)!ot.call(it,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&it.ref===void 0||(rt[_t]=it[_t]);var _t=arguments.length-2;if(_t===1)rt.children=ct;else if(1<_t){for(var Pe=Array(_t),ie=0;ie<_t;ie++)Pe[ie]=arguments[ie+2];rt.children=Pe}return O(U.type,dt,void 0,void 0,xt,rt)},Ct.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Ct.createElement=function(U,it,ct){var rt,dt={},xt=null;if(it!=null)for(rt in it.key!==void 0&&(xt=""+it.key),it)ot.call(it,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(dt[rt]=it[rt]);var _t=arguments.length-2;if(_t===1)dt.children=ct;else if(1<_t){for(var Pe=Array(_t),ie=0;ie<_t;ie++)Pe[ie]=arguments[ie+2];dt.children=Pe}if(U&&U.defaultProps)for(rt in _t=U.defaultProps,_t)dt[rt]===void 0&&(dt[rt]=_t[rt]);return O(U,xt,void 0,void 0,null,dt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(U){return{$$typeof:h,render:U}},Ct.isValidElement=I,Ct.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:at}},Ct.memo=function(U,it){return{$$typeof:m,type:U,compare:it===void 0?null:it}},Ct.startTransition=function(U){var it=X.T,ct={};X.T=ct;try{var rt=U(),dt=X.S;dt!==null&&dt(ct,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Nt,gt)}catch(xt){gt(xt)}finally{X.T=it}},Ct.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Ct.use=function(U){return X.H.use(U)},Ct.useActionState=function(U,it,ct){return X.H.useActionState(U,it,ct)},Ct.useCallback=function(U,it){return X.H.useCallback(U,it)},Ct.useContext=function(U){return X.H.useContext(U)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(U,it){return X.H.useDeferredValue(U,it)},Ct.useEffect=function(U,it,ct){var rt=X.H;if(typeof ct=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(U,it)},Ct.useId=function(){return X.H.useId()},Ct.useImperativeHandle=function(U,it,ct){return X.H.useImperativeHandle(U,it,ct)},Ct.useInsertionEffect=function(U,it){return X.H.useInsertionEffect(U,it)},Ct.useLayoutEffect=function(U,it){return X.H.useLayoutEffect(U,it)},Ct.useMemo=function(U,it){return X.H.useMemo(U,it)},Ct.useOptimistic=function(U,it){return X.H.useOptimistic(U,it)},Ct.useReducer=function(U,it,ct){return X.H.useReducer(U,it,ct)},Ct.useRef=function(U){return X.H.useRef(U)},Ct.useState=function(U){return X.H.useState(U)},Ct.useSyncExternalStore=function(U,it,ct){return X.H.useSyncExternalStore(U,it,ct)},Ct.useTransition=function(){return X.H.useTransition()},Ct.version="19.1.1",Ct}var q0;function bp(){return q0||(q0=1,dm.exports=Lx()),dm.exports}var St=bp();const LE=kx(St);var gm={exports:{}},dc={},mm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Ux(){return G0||(G0=1,function(n){function t(K,at){var gt=K.length;K.push(at);t:for(;0<gt;){var Nt=gt-1>>>1,U=K[Nt];if(0<a(U,at))K[Nt]=at,K[gt]=U,gt=Nt;else break t}}function e(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var at=K[0],gt=K.pop();if(gt!==at){K[0]=gt;t:for(var Nt=0,U=K.length,it=U>>>1;Nt<it;){var ct=2*(Nt+1)-1,rt=K[ct],dt=ct+1,xt=K[dt];if(0>a(rt,gt))dt<U&&0>a(xt,rt)?(K[Nt]=xt,K[dt]=gt,Nt=dt):(K[Nt]=rt,K[ct]=gt,Nt=ct);else if(dt<U&&0>a(xt,gt))K[Nt]=xt,K[dt]=gt,Nt=dt;else break t}}return at}function a(K,at){var gt=K.sortIndex-at.sortIndex;return gt!==0?gt:K.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var d=[],m=[],_=1,v=null,T=3,A=!1,C=!1,k=!1,M=!1,G=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,tt=typeof setImmediate<"u"?setImmediate:null;function st(K){for(var at=e(m);at!==null;){if(at.callback===null)i(m);else if(at.startTime<=K)i(m),at.sortIndex=at.expirationTime,t(d,at);else break;at=e(m)}}function X(K){if(k=!1,st(K),!C)if(e(d)!==null)C=!0,ot||(ot=!0,L());else{var at=e(m);at!==null&&bt(X,at.startTime-K)}}var ot=!1,O=-1,x=5,I=-1;function V(){return M?!0:!(n.unstable_now()-I<x)}function D(){if(M=!1,ot){var K=n.unstable_now();I=K;var at=!0;try{t:{C=!1,k&&(k=!1,$(O),O=-1),A=!0;var gt=T;try{e:{for(st(K),v=e(d);v!==null&&!(v.expirationTime>K&&V());){var Nt=v.callback;if(typeof Nt=="function"){v.callback=null,T=v.priorityLevel;var U=Nt(v.expirationTime<=K);if(K=n.unstable_now(),typeof U=="function"){v.callback=U,st(K),at=!0;break e}v===e(d)&&i(d),st(K)}else i(d);v=e(d)}if(v!==null)at=!0;else{var it=e(m);it!==null&&bt(X,it.startTime-K),at=!1}}break t}finally{v=null,T=gt,A=!1}at=void 0}}finally{at?L():ot=!1}}}var L;if(typeof tt=="function")L=function(){tt(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Lt=N.port2;N.port1.onmessage=D,L=function(){Lt.postMessage(null)}}else L=function(){G(D,0)};function bt(K,at){O=G(function(){K(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(K){switch(T){case 1:case 2:case 3:var at=3;break;default:at=T}var gt=T;T=at;try{return K()}finally{T=gt}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(K,at){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var gt=T;T=K;try{return at()}finally{T=gt}},n.unstable_scheduleCallback=function(K,at,gt){var Nt=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?Nt+gt:Nt):gt=Nt,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=gt+U,K={id:_++,callback:at,priorityLevel:K,startTime:gt,expirationTime:U,sortIndex:-1},gt>Nt?(K.sortIndex=gt,t(m,K),e(d)===null&&K===e(m)&&(k?($(O),O=-1):k=!0,bt(X,gt-Nt))):(K.sortIndex=U,t(d,K),C||A||(C=!0,ot||(ot=!0,L()))),K},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(K){var at=T;return function(){var gt=T;T=at;try{return K.apply(this,arguments)}finally{T=gt}}}}(pm)),pm}var Y0;function zx(){return Y0||(Y0=1,mm.exports=Ux()),mm.exports}var _m={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0;function jx(){if(K0)return en;K0=1;var n=bp();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:m,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(d,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,_)},en.flushSync=function(d){var m=c.T,_=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=m,i.p=_,i.d.f()}},en.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(d,m))},en.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},en.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:A}):_==="script"&&i.d.X(d,{crossOrigin:v,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);i.d.M(d,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(d)},en.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);i.d.L(d,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(d,m){if(typeof d=="string")if(m){var _=h(m.as,m.crossOrigin);i.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(d)},en.requestFormReset=function(d){i.d.r(d)},en.unstable_batchedUpdates=function(d,m){return d(m)},en.useFormState=function(d,m,_){return c.H.useFormState(d,m,_)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.1.1",en}var Q0;function Bx(){if(Q0)return _m.exports;Q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),_m.exports=jx(),_m.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function Hx(){if(X0)return dc;X0=1;var n=zx(),t=bp(),e=Bx();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(i(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,u=r;;){var g=l.return;if(g===null)break;var p=g.alternate;if(p===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===p.child){for(p=g.child;p;){if(p===l)return h(g),s;if(p===u)return h(g),r;p=p.sibling}throw Error(i(188))}if(l.return!==u.return)l=g,u=p;else{for(var E=!1,S=g.child;S;){if(S===l){E=!0,l=g,u=p;break}if(S===u){E=!0,u=g,l=p;break}S=S.sibling}if(!E){for(S=p.child;S;){if(S===l){E=!0,l=p,u=g;break}if(S===u){E=!0,u=p,l=g;break}S=S.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),tt=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(s){return s===null||typeof s!="object"?null:(s=D&&s[D]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function Lt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case M:return"Profiler";case k:return"StrictMode";case X:return"Suspense";case ot:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case tt:return(s.displayName||"Context")+".Provider";case $:return(s._context.displayName||"Context")+".Consumer";case st:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return r=s.displayName||null,r!==null?r:Lt(s.type)||"Memo";case x:r=s._payload,s=s._init;try{return Lt(s(r))}catch{}}return null}var bt=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},Nt=[],U=-1;function it(s){return{current:s}}function ct(s){0>U||(s.current=Nt[U],Nt[U]=null,U--)}function rt(s,r){U++,Nt[U]=s.current,s.current=r}var dt=it(null),xt=it(null),_t=it(null),Pe=it(null);function ie(s,r){switch(rt(_t,r),rt(xt,s),rt(dt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?m0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=m0(r),s=p0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ct(dt),rt(dt,s)}function ai(){ct(dt),ct(xt),ct(_t)}function As(s){s.memoizedState!==null&&rt(Pe,s);var r=dt.current,l=p0(r,s.type);r!==l&&(rt(xt,s),rt(dt,l))}function Ui(s){xt.current===s&&(ct(dt),ct(xt)),Pe.current===s&&(ct(Pe),oc._currentValue=gt)}var Ar=Object.prototype.hasOwnProperty,wr=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,sl=n.unstable_shouldYield,du=n.unstable_requestPaint,Mn=n.unstable_now,fd=n.unstable_getCurrentPriorityLevel,rl=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,Rr=n.unstable_NormalPriority,dd=n.unstable_LowPriority,Na=n.unstable_IdlePriority,al=n.log,gu=n.unstable_setDisableYieldValue,de=null,Qt=null;function Tn(s){if(typeof al=="function"&&gu(s),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(de,s)}catch{}}var Je=Math.clz32?Math.clz32:Cr,mu=Math.log,gd=Math.LN2;function Cr(s){return s>>>=0,s===0?32:31-(mu(s)/gd|0)|0}var Ir=256,Dr=4194304;function $n(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ka(s,r,l){var u=s.pendingLanes;if(u===0)return 0;var g=0,p=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?g=$n(u):(E&=S,E!==0?g=$n(E):l||(l=S&~s,l!==0&&(g=$n(l))))):(S=u&~p,S!==0?g=$n(S):E!==0?g=$n(E):l||(l=u&~s,l!==0&&(g=$n(l)))),g===0?0:r!==0&&r!==g&&(r&p)===0&&(p=g&-g,l=r&-r,p>=l||p===32&&(l&4194048)!==0)?r:g}function Mr(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function ol(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ll(){var s=Ir;return Ir<<=1,(Ir&4194048)===0&&(Ir=256),s}function cl(){var s=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),s}function zi(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function ji(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ul(s,r,l,u,g,p){var E=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var S=s.entanglements,P=s.expirationTimes,F=s.hiddenUpdates;for(l=E&~l;0<l;){var W=31-Je(l),et=1<<W;S[W]=0,P[W]=-1;var q=F[W];if(q!==null)for(F[W]=null,W=0;W<q.length;W++){var Y=q[W];Y!==null&&(Y.lane&=-536870913)}l&=~et}u!==0&&oi(s,u,0),p!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=p&~(E&~r))}function oi(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-Je(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|l&4194090}function hl(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var u=31-Je(l),g=1<<u;g&r|s[u]&r&&(s[u]|=r),l&=~g}}function ws(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Pa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function xs(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:P0(s.type))}function pu(s,r){var l=at.p;try{return at.p=s,r()}finally{at.p=l}}var ce=Math.random().toString(36).slice(2),Ie="__reactFiber$"+ce,Te="__reactProps$"+ce,On="__reactContainer$"+ce,fl="__reactEvents$"+ce,md="__reactListeners$"+ce,Rs="__reactHandles$"+ce,_u="__reactResources$"+ce,Or="__reactMarker$"+ce;function Cs(s){delete s[Ie],delete s[Te],delete s[fl],delete s[md],delete s[Rs]}function Bi(s){var r=s[Ie];if(r)return r;for(var l=s.parentNode;l;){if(r=l[On]||l[Ie]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=b0(s);s!==null;){if(l=s[Ie])return l;s=b0(s)}return r}s=l,l=s.parentNode}return null}function li(s){if(s=s[Ie]||s[On]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function ci(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function cn(s){var r=s[_u];return r||(r=s[_u]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pe(s){s[Or]=!0}var dl=new Set,Va={};function Zn(s,r){Hi(s,r),Hi(s+"Capture",r)}function Hi(s,r){for(Va[s]=r,s=0;s<r.length;s++)dl.add(r[s])}var yu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vu={},Nr={};function bu(s){return Ar.call(Nr,s)?!0:Ar.call(vu,s)?!1:yu.test(s)?Nr[s]=!0:(vu[s]=!0,!1)}function Is(s,r,l){if(bu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function ui(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function qe(s,r,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+u)}}var kr,Tu;function Fi(s){if(kr===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);kr=r&&r[1]||"",Tu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kr+s+Tu}var La=!1;function Ua(s,r){if(!s||La)return"";La=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(Y){var q=Y}Reflect.construct(s,[],et)}else{try{et.call()}catch(Y){q=Y}s.call(et.prototype)}}else{try{throw Error()}catch(Y){q=Y}(et=s())&&typeof et.catch=="function"&&et.catch(function(){})}}catch(Y){if(Y&&q&&typeof Y.stack=="string")return[Y.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],S=p[1];if(E&&S){var P=E.split(`
`),F=S.split(`
`);for(g=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;g<F.length&&!F[g].includes("DetermineComponentFrameRoot");)g++;if(u===P.length||g===F.length)for(u=P.length-1,g=F.length-1;1<=u&&0<=g&&P[u]!==F[g];)g--;for(;1<=u&&0<=g;u--,g--)if(P[u]!==F[g]){if(u!==1||g!==1)do if(u--,g--,0>g||P[u]!==F[g]){var W=`
`+P[u].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=u&&0<=g);break}}}finally{La=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Fi(l):""}function gl(s){switch(s.tag){case 26:case 27:case 5:return Fi(s.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return Ua(s.type,!1);case 11:return Ua(s.type.render,!1);case 1:return Ua(s.type,!0);case 31:return Fi("Activity");default:return""}}function za(s){try{var r="";do r+=gl(s),s=s.return;while(s);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ml(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pd(s){var r=ml(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),u=""+s[r];if(!s.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,p=l.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return g.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(s,r,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ja(s){s._valueTracker||(s._valueTracker=pd(s))}function pl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return s&&(u=ml(s)?s.checked?"true":"false":s.value),s=u,s!==l?(r.setValue(s),!0):!1}function Pr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var _d=/[\n"\\]/g;function Ee(s){return s.replace(_d,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function En(s,r,l,u,g,p,E,S){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+un(r)):s.value!==""+un(r)&&(s.value=""+un(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?Ds(s,E,un(r)):l!=null?Ds(s,E,un(l)):u!=null&&s.removeAttribute("value"),g==null&&p!=null&&(s.defaultChecked=!!p),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.name=""+un(S):s.removeAttribute("name")}function Vr(s,r,l,u,g,p,E,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||l!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;l=l!=null?""+un(l):"",r=r!=null?""+un(r):l,S||r===s.value||(s.value=r),s.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=S?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function Ds(s,r,l){r==="number"&&Pr(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function qi(s,r,l,u){if(s=s.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<s.length;l++)g=r.hasOwnProperty("$"+s[l].value),s[l].selected!==g&&(s[l].selected=g),g&&u&&(s[l].defaultSelected=!0)}else{for(l=""+un(l),r=null,g=0;g<s.length;g++){if(s[g].value===l){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}r!==null||s[g].disabled||(r=s[g])}r!==null&&(r.selected=!0)}}function Zt(s,r,l){if(r!=null&&(r=""+un(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+un(l):""}function Lr(s,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(i(92));if(bt(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=un(r),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u)}function Nn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Ur=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eu(s,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,l):typeof l!="number"||l===0||Ur.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function _l(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&l[g]!==u&&Eu(s,g,u)}else for(var p in r)r.hasOwnProperty(p)&&Eu(s,p,r[p])}function yl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(s){return vd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Gi=null;function kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Yi=null,Ki=null;function vl(s){var r=li(s);if(r&&(s=r.stateNode)){var l=s[Te]||null;t:switch(s=r.stateNode,r.type){case"input":if(En(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ee(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==s&&u.form===s.form){var g=u[Te]||null;if(!g)throw Error(i(90));En(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===s.form&&pl(u)}break t;case"textarea":Zt(s,l.value,l.defaultValue);break t;case"select":r=l.value,r!=null&&qi(s,!!l.multiple,r,!1)}}}var hi=!1;function Su(s,r,l){if(hi)return s(r,l);hi=!0;try{var u=s(r);return u}finally{if(hi=!1,(Yi!==null||Ki!==null)&&(ph(),Yi&&(r=Yi,s=Ki,Ki=Yi=null,vl(r),s)))for(r=0;r<s.length;r++)vl(s[r])}}function zr(s,r){var l=s.stateNode;if(l===null)return null;var u=l[Te]||null;if(u===null)return null;l=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pn=!1;if(Jn)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Pn=!1}var fi=null,Ms=null,Qi=null;function bl(){if(Qi)return Qi;var s,r=Ms,l=r.length,u,g="value"in fi?fi.value:fi.textContent,p=g.length;for(s=0;s<l&&r[s]===g[s];s++);var E=l-s;for(u=1;u<=E&&r[l-u]===g[p-u];u++);return Qi=g.slice(s,1<u?1-u:void 0)}function di(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function gi(){return!0}function Tl(){return!1}function Ve(s){function r(l,u,g,p,E){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var S in s)s.hasOwnProperty(S)&&(l=s[S],this[S]=l?l(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?gi:Tl,this.isPropagationStopped=Tl,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),r}var Yt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=Ve(Yt),Br=_({},Yt,{view:0,detail:0}),Au=Ve(Br),Fa,qa,mi,Hr=_({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==mi&&(mi&&s.type==="mousemove"?(Fa=s.screenX-mi.screenX,qa=s.screenY-mi.screenY):qa=Fa=0,mi=s),Fa)},movementY:function(s){return"movementY"in s?s.movementY:qa}}),Vn=Ve(Hr),wu=_({},Hr,{dataTransfer:0}),bd=Ve(wu),Fr=_({},Br,{relatedTarget:0}),Ga=Ve(Fr),El=_({},Yt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ya=Ve(El),xu=_({},Yt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ka=Ve(xu),Td=_({},Yt,{data:0}),Sl=Ve(Td),qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Cu[s])?!!r[s]:!1}function Gr(){return Al}var Iu=_({},Br,{key:function(s){if(s.key){var r=qr[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=di(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ru[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gr,charCode:function(s){return s.type==="keypress"?di(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?di(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qa=Ve(Iu),Du=_({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wl=Ve(Du),Xi=_({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gr}),Mu=Ve(Xi),Ou=_({},Yt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nu=Ve(Ou),ku=_({},Hr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Xa=Ve(ku),hn=_({},Yt,{newState:0,oldState:0}),Pu=Ve(hn),Vu=[9,13,27,32],pi=Jn&&"CompositionEvent"in window,f=null;Jn&&"documentMode"in document&&(f=document.documentMode);var y=Jn&&"TextEvent"in window&&!f,b=Jn&&(!pi||f&&8<f&&11>=f),w=" ",B=!1;function Q(s,r){switch(s){case"keyup":return Vu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lt(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ut=!1;function De(s,r){switch(s){case"compositionend":return lt(r);case"keypress":return r.which!==32?null:(B=!0,w);case"textInput":return s=r.data,s===w&&B?null:s;default:return null}}function zt(s,r){if(Ut)return s==="compositionend"||!pi&&Q(s,r)?(s=bl(),Qi=Ms=fi=null,Ut=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b&&r.locale!=="ko"?null:r.data;default:return null}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Me(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Le[s.type]:r==="textarea"}function Wi(s,r,l,u){Yi?Ki?Ki.push(u):Ki=[u]:Yi=u,r=Eh(r,"onChange"),0<r.length&&(l=new Ha("onChange","change",null,l,u),s.push({event:l,listeners:r}))}var Ge=null,_i=null;function xl(s){u0(s,0)}function Lu(s){var r=ci(s);if(pl(r))return s}function M_(s,r){if(s==="change")return r}var O_=!1;if(Jn){var Ed;if(Jn){var Sd="oninput"in document;if(!Sd){var N_=document.createElement("div");N_.setAttribute("oninput","return;"),Sd=typeof N_.oninput=="function"}Ed=Sd}else Ed=!1;O_=Ed&&(!document.documentMode||9<document.documentMode)}function k_(){Ge&&(Ge.detachEvent("onpropertychange",P_),_i=Ge=null)}function P_(s){if(s.propertyName==="value"&&Lu(_i)){var r=[];Wi(r,_i,s,kn(s)),Su(xl,r)}}function uw(s,r,l){s==="focusin"?(k_(),Ge=r,_i=l,Ge.attachEvent("onpropertychange",P_)):s==="focusout"&&k_()}function hw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Lu(_i)}function fw(s,r){if(s==="click")return Lu(r)}function dw(s,r){if(s==="input"||s==="change")return Lu(r)}function gw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Sn=typeof Object.is=="function"?Object.is:gw;function Rl(s,r){if(Sn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Ar.call(r,g)||!Sn(s[g],r[g]))return!1}return!0}function V_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function L_(s,r){var l=V_(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=r&&u>=r)return{node:l,offset:r-s};s=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=V_(l)}}function U_(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?U_(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function z_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Pr(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Pr(s.document)}return r}function Ad(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var mw=Jn&&"documentMode"in document&&11>=document.documentMode,Wa=null,wd=null,Cl=null,xd=!1;function j_(s,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xd||Wa==null||Wa!==Pr(u)||(u=Wa,"selectionStart"in u&&Ad(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Cl&&Rl(Cl,u)||(Cl=u,u=Eh(wd,"onSelect"),0<u.length&&(r=new Ha("onSelect","select",null,r,l),s.push({event:r,listeners:u}),r.target=Wa)))}function Yr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var $a={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},Rd={},B_={};Jn&&(B_=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Kr(s){if(Rd[s])return Rd[s];if(!$a[s])return s;var r=$a[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in B_)return Rd[s]=r[l];return s}var H_=Kr("animationend"),F_=Kr("animationiteration"),q_=Kr("animationstart"),pw=Kr("transitionrun"),_w=Kr("transitionstart"),yw=Kr("transitioncancel"),G_=Kr("transitionend"),Y_=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function ti(s,r){Y_.set(s,r),Zn(r,[s])}var K_=new WeakMap;function Ln(s,r){if(typeof s=="object"&&s!==null){var l=K_.get(s);return l!==void 0?l:(r={value:s,source:r,stack:za(r)},K_.set(s,r),r)}return{value:s,source:r,stack:za(r)}}var Un=[],Za=0,Id=0;function Uu(){for(var s=Za,r=Id=Za=0;r<s;){var l=Un[r];Un[r++]=null;var u=Un[r];Un[r++]=null;var g=Un[r];Un[r++]=null;var p=Un[r];if(Un[r++]=null,u!==null&&g!==null){var E=u.pending;E===null?g.next=g:(g.next=E.next,E.next=g),u.pending=g}p!==0&&Q_(l,g,p)}}function zu(s,r,l,u){Un[Za++]=s,Un[Za++]=r,Un[Za++]=l,Un[Za++]=u,Id|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Dd(s,r,l,u){return zu(s,r,l,u),ju(s)}function Ja(s,r){return zu(s,null,null,r),ju(s)}function Q_(s,r,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var g=!1,p=s.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(g=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,g&&r!==null&&(g=31-Je(l),s=p.hiddenUpdates,u=s[g],u===null?s[g]=[r]:u.push(r),r.lane=l|536870912),p):null}function ju(s){if(50<Jl)throw Jl=0,Vg=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var to={};function vw(s,r,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(s,r,l,u){return new vw(s,r,l,u)}function Md(s){return s=s.prototype,!(!s||!s.isReactComponent)}function $i(s,r){var l=s.alternate;return l===null?(l=An(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function X_(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Bu(s,r,l,u,g,p){var E=0;if(u=s,typeof s=="function")Md(s)&&(E=1);else if(typeof s=="string")E=Tx(s,l,dt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case I:return s=An(31,l,r,g),s.elementType=I,s.lanes=p,s;case C:return Qr(l.children,g,p,r);case k:E=8,g|=24;break;case M:return s=An(12,l,r,g|2),s.elementType=M,s.lanes=p,s;case X:return s=An(13,l,r,g),s.elementType=X,s.lanes=p,s;case ot:return s=An(19,l,r,g),s.elementType=ot,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case G:case tt:E=10;break t;case $:E=9;break t;case st:E=11;break t;case O:E=14;break t;case x:E=16,u=null;break t}E=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return r=An(E,l,r,g),r.elementType=s,r.type=u,r.lanes=p,r}function Qr(s,r,l,u){return s=An(7,s,u,r),s.lanes=l,s}function Od(s,r,l){return s=An(6,s,null,r),s.lanes=l,s}function Nd(s,r,l){return r=An(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var eo=[],no=0,Hu=null,Fu=0,zn=[],jn=0,Xr=null,Zi=1,Ji="";function Wr(s,r){eo[no++]=Fu,eo[no++]=Hu,Hu=s,Fu=r}function W_(s,r,l){zn[jn++]=Zi,zn[jn++]=Ji,zn[jn++]=Xr,Xr=s;var u=Zi;s=Ji;var g=32-Je(u)-1;u&=~(1<<g),l+=1;var p=32-Je(r)+g;if(30<p){var E=g-g%5;p=(u&(1<<E)-1).toString(32),u>>=E,g-=E,Zi=1<<32-Je(r)+g|l<<g|u,Ji=p+s}else Zi=1<<p|l<<g|u,Ji=s}function kd(s){s.return!==null&&(Wr(s,1),W_(s,1,0))}function Pd(s){for(;s===Hu;)Hu=eo[--no],eo[no]=null,Fu=eo[--no],eo[no]=null;for(;s===Xr;)Xr=zn[--jn],zn[jn]=null,Ji=zn[--jn],zn[jn]=null,Zi=zn[--jn],zn[jn]=null}var fn=null,ge=null,qt=!1,$r=null,yi=!1,Vd=Error(i(519));function Zr(s){var r=Error(i(418,""));throw Ml(Ln(r,s)),Vd}function $_(s){var r=s.stateNode,l=s.type,u=s.memoizedProps;switch(r[Ie]=s,r[Te]=u,l){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(l=0;l<ec.length;l++)Ot(ec[l],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":Ot("invalid",r),Vr(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),ja(r);break;case"select":Ot("invalid",r);break;case"textarea":Ot("invalid",r),Lr(r,u.value,u.defaultValue,u.children),ja(r)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||g0(r.textContent,l)?(u.popover!=null&&(Ot("beforetoggle",r),Ot("toggle",r)),u.onScroll!=null&&Ot("scroll",r),u.onScrollEnd!=null&&Ot("scrollend",r),u.onClick!=null&&(r.onclick=Sh),r=!0):r=!1,r||Zr(s)}function Z_(s){for(fn=s.return;fn;)switch(fn.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:fn=fn.return}}function Il(s){if(s!==fn)return!1;if(!qt)return Z_(s),qt=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Zg(s.type,s.memoizedProps)),l=!l),l&&ge&&Zr(s),Z_(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(r===0){ge=ni(s.nextSibling);break t}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;s=s.nextSibling}ge=null}}else r===27?(r=ge,Ks(s.type)?(s=nm,nm=null,ge=s):ge=r):ge=fn?ni(s.stateNode.nextSibling):null;return!0}function Dl(){ge=fn=null,qt=!1}function J_(){var s=$r;return s!==null&&(pn===null?pn=s:pn.push.apply(pn,s),$r=null),s}function Ml(s){$r===null?$r=[s]:$r.push(s)}var Ld=it(null),Jr=null,ts=null;function Os(s,r,l){rt(Ld,r._currentValue),r._currentValue=l}function es(s){s._currentValue=Ld.current,ct(Ld)}function Ud(s,r,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===l)break;s=s.return}}function zd(s,r,l,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var p=g.dependencies;if(p!==null){var E=g.child;p=p.firstContext;t:for(;p!==null;){var S=p;p=g;for(var P=0;P<r.length;P++)if(S.context===r[P]){p.lanes|=l,S=p.alternate,S!==null&&(S.lanes|=l),Ud(p.return,l,s),u||(E=null);break t}p=S.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=l,p=E.alternate,p!==null&&(p.lanes|=l),Ud(E,l,s),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Ol(s,r,l,u){s=null;for(var g=r,p=!1;g!==null;){if(!p){if((g.flags&524288)!==0)p=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=g.type;Sn(g.pendingProps.value,E.value)||(s!==null?s.push(S):s=[S])}}else if(g===Pe.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(oc):s=[oc])}g=g.return}s!==null&&zd(r,s,l,u),r.flags|=262144}function qu(s){for(s=s.firstContext;s!==null;){if(!Sn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ta(s){Jr=s,ts=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return ty(Jr,s)}function Gu(s,r){return Jr===null&&ta(s),ty(s,r)}function ty(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ts===null){if(s===null)throw Error(i(308));ts=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ts=ts.next=r;return l}var bw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},Tw=n.unstable_scheduleCallback,Ew=n.unstable_NormalPriority,Oe={$$typeof:tt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jd(){return{controller:new bw,data:new Map,refCount:0}}function Nl(s){s.refCount--,s.refCount===0&&Tw(Ew,function(){s.controller.abort()})}var kl=null,Bd=0,io=0,so=null;function Sw(s,r){if(kl===null){var l=kl=[];Bd=0,io=Fg(),so={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Bd++,r.then(ey,ey),r}function ey(){if(--Bd===0&&kl!==null){so!==null&&(so.status="fulfilled");var s=kl;kl=null,io=0,so=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Aw(s,r){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var ny=K.S;K.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Sw(s,r),ny!==null&&ny(s,r)};var ea=it(null);function Hd(){var s=ea.current;return s!==null?s:se.pooledCache}function Yu(s,r){r===null?rt(ea,ea.current):rt(ea,r.pool)}function iy(){var s=Hd();return s===null?null:{parent:Oe._currentValue,pool:s}}var Pl=Error(i(460)),sy=Error(i(474)),Ku=Error(i(542)),Fd={then:function(){}};function ry(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qu(){}function ay(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(Qu,Qu),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ly(s),s;default:if(typeof r.status=="string")r.then(Qu,Qu);else{if(s=se,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,ly(s),s}throw Vl=r,Pl}}var Vl=null;function oy(){if(Vl===null)throw Error(i(459));var s=Vl;return Vl=null,s}function ly(s){if(s===Pl||s===Ku)throw Error(i(483))}var Ns=!1;function qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ks(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ps(s,r,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Xt&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=ju(s),Q_(s,null,l),r}return zu(s,u,r,l),ju(s)}function Ll(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,hl(s,l)}}function Yd(s,r){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?g=p=E:p=p.next=E,l=l.next}while(l!==null);p===null?g=p=r:p=p.next=r}else g=p=r;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Kd=!1;function Ul(){if(Kd){var s=so;if(s!==null)throw s}}function zl(s,r,l,u){Kd=!1;var g=s.updateQueue;Ns=!1;var p=g.firstBaseUpdate,E=g.lastBaseUpdate,S=g.shared.pending;if(S!==null){g.shared.pending=null;var P=S,F=P.next;P.next=null,E===null?p=F:E.next=F,E=P;var W=s.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==E&&(S===null?W.firstBaseUpdate=F:S.next=F,W.lastBaseUpdate=P))}if(p!==null){var et=g.baseState;E=0,W=F=P=null,S=p;do{var q=S.lane&-536870913,Y=q!==S.lane;if(Y?(jt&q)===q:(u&q)===q){q!==0&&q===io&&(Kd=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var Et=s,yt=S;q=r;var ee=l;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){et=Et.call(ee,et,q);break t}et=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,q=typeof Et=="function"?Et.call(ee,et,q):Et,q==null)break t;et=_({},et,q);break t;case 2:Ns=!0}}q=S.callback,q!==null&&(s.flags|=64,Y&&(s.flags|=8192),Y=g.callbacks,Y===null?g.callbacks=[q]:Y.push(q))}else Y={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(F=W=Y,P=et):W=W.next=Y,E|=q;if(S=S.next,S===null){if(S=g.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,g.lastBaseUpdate=Y,g.shared.pending=null}}while(!0);W===null&&(P=et),g.baseState=P,g.firstBaseUpdate=F,g.lastBaseUpdate=W,p===null&&(g.shared.lanes=0),Fs|=E,s.lanes=E,s.memoizedState=et}}function cy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function uy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)cy(l[s],r)}var ro=it(null),Xu=it(0);function hy(s,r){s=ls,rt(Xu,s),rt(ro,r),ls=s|r.baseLanes}function Qd(){rt(Xu,ls),rt(ro,ro.current)}function Xd(){ls=Xu.current,ct(ro),ct(Xu)}var Vs=0,It=null,Jt=null,Se=null,Wu=!1,ao=!1,na=!1,$u=0,jl=0,oo=null,ww=0;function _e(){throw Error(i(321))}function Wd(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Sn(s[l],r[l]))return!1;return!0}function $d(s,r,l,u,g,p){return Vs=p,It=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=s===null||s.memoizedState===null?Qy:Xy,na=!1,p=l(u,g),na=!1,ao&&(p=dy(r,l,u,g)),fy(s),p}function fy(s){K.H=ih;var r=Jt!==null&&Jt.next!==null;if(Vs=0,Se=Jt=It=null,Wu=!1,jl=0,oo=null,r)throw Error(i(300));s===null||Ue||(s=s.dependencies,s!==null&&qu(s)&&(Ue=!0))}function dy(s,r,l,u){It=s;var g=0;do{if(ao&&(oo=null),jl=0,ao=!1,25<=g)throw Error(i(301));if(g+=1,Se=Jt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}K.H=Ow,p=r(l,u)}while(ao);return p}function xw(){var s=K.H,r=s.useState()[0];return r=typeof r.then=="function"?Bl(r):r,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(It.flags|=1024),r}function Zd(){var s=$u!==0;return $u=0,s}function Jd(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function tg(s){if(Wu){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Wu=!1}Vs=0,Se=Jt=It=null,ao=!1,jl=$u=0,oo=null}function gn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?It.memoizedState=Se=s:Se=Se.next=s,Se}function Ae(){if(Jt===null){var s=It.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var r=Se===null?It.memoizedState:Se.next;if(r!==null)Se=r,Jt=s;else{if(s===null)throw It.alternate===null?Error(i(467)):Error(i(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Se===null?It.memoizedState=Se=s:Se=Se.next=s}return Se}function eg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bl(s){var r=jl;return jl+=1,oo===null&&(oo=[]),s=ay(oo,s,r),r=It,(Se===null?r.memoizedState:Se.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?Qy:Xy),s}function Zu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bl(s);if(s.$$typeof===tt)return tn(s)}throw Error(i(438,String(s)))}function ng(s){var r=null,l=It.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=It.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=eg(),It.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),u=0;u<s;u++)l[u]=V;return r.index++,l}function ns(s,r){return typeof r=="function"?r(s):r}function Ju(s){var r=Ae();return ig(r,Jt,s)}function ig(s,r,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var g=s.baseQueue,p=u.pending;if(p!==null){if(g!==null){var E=g.next;g.next=p.next,p.next=E}r.baseQueue=g=p,u.pending=null}if(p=s.baseState,g===null)s.memoizedState=p;else{r=g.next;var S=E=null,P=null,F=r,W=!1;do{var et=F.lane&-536870913;if(et!==F.lane?(jt&et)===et:(Vs&et)===et){var q=F.revertLane;if(q===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),et===io&&(W=!0);else if((Vs&q)===q){F=F.next,q===io&&(W=!0);continue}else et={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},P===null?(S=P=et,E=p):P=P.next=et,It.lanes|=q,Fs|=q;et=F.action,na&&l(p,et),p=F.hasEagerState?F.eagerState:l(p,et)}else q={lane:et,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},P===null?(S=P=q,E=p):P=P.next=q,It.lanes|=et,Fs|=et;F=F.next}while(F!==null&&F!==r);if(P===null?E=p:P.next=S,!Sn(p,s.memoizedState)&&(Ue=!0,W&&(l=so,l!==null)))throw l;s.memoizedState=p,s.baseState=E,s.baseQueue=P,u.lastRenderedState=p}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function sg(s){var r=Ae(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,g=l.pending,p=r.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do p=s(p,E.action),E=E.next;while(E!==g);Sn(p,r.memoizedState)||(Ue=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),l.lastRenderedState=p}return[p,u]}function gy(s,r,l){var u=It,g=Ae(),p=qt;if(p){if(l===void 0)throw Error(i(407));l=l()}else l=r();var E=!Sn((Jt||g).memoizedState,l);E&&(g.memoizedState=l,Ue=!0),g=g.queue;var S=_y.bind(null,u,g,s);if(Hl(2048,8,S,[s]),g.getSnapshot!==r||E||Se!==null&&Se.memoizedState.tag&1){if(u.flags|=2048,lo(9,th(),py.bind(null,u,g,l,r),null),se===null)throw Error(i(349));p||(Vs&124)!==0||my(u,r,l)}return l}function my(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=It.updateQueue,r===null?(r=eg(),It.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function py(s,r,l,u){r.value=l,r.getSnapshot=u,yy(r)&&vy(s)}function _y(s,r,l){return l(function(){yy(r)&&vy(s)})}function yy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Sn(s,l)}catch{return!0}}function vy(s){var r=Ja(s,2);r!==null&&In(r,s,2)}function rg(s){var r=gn();if(typeof s=="function"){var l=s;if(s=l(),na){Tn(!0);try{l()}finally{Tn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:s},r}function by(s,r,l,u){return s.baseState=l,ig(s,Jt,typeof u=="function"?u:ns)}function Rw(s,r,l,u,g){if(nh(s))throw Error(i(485));if(s=r.action,s!==null){var p={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};K.T!==null?l(!0):p.isTransition=!1,u(p),l=r.pending,l===null?(p.next=r.pending=p,Ty(r,p)):(p.next=l.next,r.pending=l.next=p)}}function Ty(s,r){var l=r.action,u=r.payload,g=s.state;if(r.isTransition){var p=K.T,E={};K.T=E;try{var S=l(g,u),P=K.S;P!==null&&P(E,S),Ey(s,r,S)}catch(F){ag(s,r,F)}finally{K.T=p}}else try{p=l(g,u),Ey(s,r,p)}catch(F){ag(s,r,F)}}function Ey(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Sy(s,r,u)},function(u){return ag(s,r,u)}):Sy(s,r,l)}function Sy(s,r,l){r.status="fulfilled",r.value=l,Ay(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,Ty(s,l)))}function ag(s,r,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,Ay(r),r=r.next;while(r!==u)}s.action=null}function Ay(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function wy(s,r){return r}function xy(s,r){if(qt){var l=se.formState;if(l!==null){t:{var u=It;if(qt){if(ge){e:{for(var g=ge,p=yi;g.nodeType!==8;){if(!p){g=null;break e}if(g=ni(g.nextSibling),g===null){g=null;break e}}p=g.data,g=p==="F!"||p==="F"?g:null}if(g){ge=ni(g.nextSibling),u=g.data==="F!";break t}}Zr(u)}u=!1}u&&(r=l[0])}}return l=gn(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:r},l.queue=u,l=Gy.bind(null,It,u),u.dispatch=l,u=rg(!1),p=hg.bind(null,It,!1,u.queue),u=gn(),g={state:r,dispatch:null,action:s,pending:null},u.queue=g,l=Rw.bind(null,It,g,p,l),g.dispatch=l,u.memoizedState=s,[r,l,!1]}function Ry(s){var r=Ae();return Cy(r,Jt,s)}function Cy(s,r,l){if(r=ig(s,r,wy)[0],s=Ju(ns)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Bl(r)}catch(E){throw E===Pl?Ku:E}else u=r;r=Ae();var g=r.queue,p=g.dispatch;return l!==r.memoizedState&&(It.flags|=2048,lo(9,th(),Cw.bind(null,g,l),null)),[u,p,s]}function Cw(s,r){s.action=r}function Iy(s){var r=Ae(),l=Jt;if(l!==null)return Cy(r,l,s);Ae(),r=r.memoizedState,l=Ae();var u=l.queue.dispatch;return l.memoizedState=s,[r,u,!1]}function lo(s,r,l,u){return s={tag:s,create:l,deps:u,inst:r,next:null},r=It.updateQueue,r===null&&(r=eg(),It.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,r.lastEffect=s),s}function th(){return{destroy:void 0,resource:void 0}}function Dy(){return Ae().memoizedState}function eh(s,r,l,u){var g=gn();u=u===void 0?null:u,It.flags|=s,g.memoizedState=lo(1|r,th(),l,u)}function Hl(s,r,l,u){var g=Ae();u=u===void 0?null:u;var p=g.memoizedState.inst;Jt!==null&&u!==null&&Wd(u,Jt.memoizedState.deps)?g.memoizedState=lo(r,p,l,u):(It.flags|=s,g.memoizedState=lo(1|r,p,l,u))}function My(s,r){eh(8390656,8,s,r)}function Oy(s,r){Hl(2048,8,s,r)}function Ny(s,r){return Hl(4,2,s,r)}function ky(s,r){return Hl(4,4,s,r)}function Py(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Vy(s,r,l){l=l!=null?l.concat([s]):null,Hl(4,4,Py.bind(null,r,s),l)}function og(){}function Ly(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&Wd(r,u[1])?u[0]:(l.memoizedState=[s,r],s)}function Uy(s,r){var l=Ae();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&Wd(r,u[1]))return u[0];if(u=s(),na){Tn(!0);try{s()}finally{Tn(!1)}}return l.memoizedState=[u,r],u}function lg(s,r,l){return l===void 0||(Vs&1073741824)!==0?s.memoizedState=r:(s.memoizedState=l,s=Bv(),It.lanes|=s,Fs|=s,l)}function zy(s,r,l,u){return Sn(l,r)?l:ro.current!==null?(s=lg(s,l,u),Sn(s,r)||(Ue=!0),s):(Vs&42)===0?(Ue=!0,s.memoizedState=l):(s=Bv(),It.lanes|=s,Fs|=s,r)}function jy(s,r,l,u,g){var p=at.p;at.p=p!==0&&8>p?p:8;var E=K.T,S={};K.T=S,hg(s,!1,r,l);try{var P=g(),F=K.S;if(F!==null&&F(S,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var W=Aw(P,u);Fl(s,r,W,Cn(s))}else Fl(s,r,u,Cn(s))}catch(et){Fl(s,r,{then:function(){},status:"rejected",reason:et},Cn())}finally{at.p=p,K.T=E}}function Iw(){}function cg(s,r,l,u){if(s.tag!==5)throw Error(i(476));var g=By(s).queue;jy(s,g,r,gt,l===null?Iw:function(){return Hy(s),l(u)})}function By(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:gt},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Hy(s){var r=By(s).next.queue;Fl(s,r,{},Cn())}function ug(){return tn(oc)}function Fy(){return Ae().memoizedState}function qy(){return Ae().memoizedState}function Dw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Cn();s=ks(l);var u=Ps(r,s,l);u!==null&&(In(u,r,l),Ll(u,r,l)),r={cache:jd()},s.payload=r;return}r=r.return}}function Mw(s,r,l){var u=Cn();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},nh(s)?Yy(r,l):(l=Dd(s,r,l,u),l!==null&&(In(l,s,u),Ky(l,r,u)))}function Gy(s,r,l){var u=Cn();Fl(s,r,l,u)}function Fl(s,r,l,u){var g={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(nh(s))Yy(r,g);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,S=p(E,l);if(g.hasEagerState=!0,g.eagerState=S,Sn(S,E))return zu(s,r,g,0),se===null&&Uu(),!1}catch{}finally{}if(l=Dd(s,r,g,u),l!==null)return In(l,s,u),Ky(l,r,u),!0}return!1}function hg(s,r,l,u){if(u={lane:2,revertLane:Fg(),action:u,hasEagerState:!1,eagerState:null,next:null},nh(s)){if(r)throw Error(i(479))}else r=Dd(s,l,u,2),r!==null&&In(r,s,2)}function nh(s){var r=s.alternate;return s===It||r!==null&&r===It}function Yy(s,r){ao=Wu=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function Ky(s,r,l){if((l&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,l|=u,r.lanes=l,hl(s,l)}}var ih={readContext:tn,use:Zu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},Qy={readContext:tn,use:Zu,useCallback:function(s,r){return gn().memoizedState=[s,r===void 0?null:r],s},useContext:tn,useEffect:My,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,eh(4194308,4,Py.bind(null,r,s),l)},useLayoutEffect:function(s,r){return eh(4194308,4,s,r)},useInsertionEffect:function(s,r){eh(4,2,s,r)},useMemo:function(s,r){var l=gn();r=r===void 0?null:r;var u=s();if(na){Tn(!0);try{s()}finally{Tn(!1)}}return l.memoizedState=[u,r],u},useReducer:function(s,r,l){var u=gn();if(l!==void 0){var g=l(r);if(na){Tn(!0);try{l(r)}finally{Tn(!1)}}}else g=r;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=Mw.bind(null,It,s),[u.memoizedState,s]},useRef:function(s){var r=gn();return s={current:s},r.memoizedState=s},useState:function(s){s=rg(s);var r=s.queue,l=Gy.bind(null,It,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:og,useDeferredValue:function(s,r){var l=gn();return lg(l,s,r)},useTransition:function(){var s=rg(!1);return s=jy.bind(null,It,s.queue,!0,!1),gn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var u=It,g=gn();if(qt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),se===null)throw Error(i(349));(jt&124)!==0||my(u,r,l)}g.memoizedState=l;var p={value:l,getSnapshot:r};return g.queue=p,My(_y.bind(null,u,p,s),[s]),u.flags|=2048,lo(9,th(),py.bind(null,u,p,l,r),null),l},useId:function(){var s=gn(),r=se.identifierPrefix;if(qt){var l=Ji,u=Zi;l=(u&~(1<<32-Je(u)-1)).toString(32)+l,r=""+r+"R"+l,l=$u++,0<l&&(r+="H"+l.toString(32)),r+=""}else l=ww++,r=""+r+"r"+l.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:ug,useFormState:xy,useActionState:xy,useOptimistic:function(s){var r=gn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=hg.bind(null,It,!0,l),l.dispatch=r,[s,r]},useMemoCache:ng,useCacheRefresh:function(){return gn().memoizedState=Dw.bind(null,It)}},Xy={readContext:tn,use:Zu,useCallback:Ly,useContext:tn,useEffect:Oy,useImperativeHandle:Vy,useInsertionEffect:Ny,useLayoutEffect:ky,useMemo:Uy,useReducer:Ju,useRef:Dy,useState:function(){return Ju(ns)},useDebugValue:og,useDeferredValue:function(s,r){var l=Ae();return zy(l,Jt.memoizedState,s,r)},useTransition:function(){var s=Ju(ns)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:Bl(s),r]},useSyncExternalStore:gy,useId:Fy,useHostTransitionStatus:ug,useFormState:Ry,useActionState:Ry,useOptimistic:function(s,r){var l=Ae();return by(l,Jt,s,r)},useMemoCache:ng,useCacheRefresh:qy},Ow={readContext:tn,use:Zu,useCallback:Ly,useContext:tn,useEffect:Oy,useImperativeHandle:Vy,useInsertionEffect:Ny,useLayoutEffect:ky,useMemo:Uy,useReducer:sg,useRef:Dy,useState:function(){return sg(ns)},useDebugValue:og,useDeferredValue:function(s,r){var l=Ae();return Jt===null?lg(l,s,r):zy(l,Jt.memoizedState,s,r)},useTransition:function(){var s=sg(ns)[0],r=Ae().memoizedState;return[typeof s=="boolean"?s:Bl(s),r]},useSyncExternalStore:gy,useId:Fy,useHostTransitionStatus:ug,useFormState:Iy,useActionState:Iy,useOptimistic:function(s,r){var l=Ae();return Jt!==null?by(l,Jt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:ng,useCacheRefresh:qy},co=null,ql=0;function sh(s){var r=ql;return ql+=1,co===null&&(co=[]),ay(co,s,r)}function Gl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function rh(s,r){throw r.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Wy(s){var r=s._init;return r(s._payload)}function $y(s){function r(j,z){if(s){var H=j.deletions;H===null?(j.deletions=[z],j.flags|=16):H.push(z)}}function l(j,z){if(!s)return null;for(;z!==null;)r(j,z),z=z.sibling;return null}function u(j){for(var z=new Map;j!==null;)j.key!==null?z.set(j.key,j):z.set(j.index,j),j=j.sibling;return z}function g(j,z){return j=$i(j,z),j.index=0,j.sibling=null,j}function p(j,z,H){return j.index=H,s?(H=j.alternate,H!==null?(H=H.index,H<z?(j.flags|=67108866,z):H):(j.flags|=67108866,z)):(j.flags|=1048576,z)}function E(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function S(j,z,H,Z){return z===null||z.tag!==6?(z=Od(H,j.mode,Z),z.return=j,z):(z=g(z,H),z.return=j,z)}function P(j,z,H,Z){var ft=H.type;return ft===C?W(j,z,H.props.children,Z,H.key):z!==null&&(z.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&Wy(ft)===z.type)?(z=g(z,H.props),Gl(z,H),z.return=j,z):(z=Bu(H.type,H.key,H.props,null,j.mode,Z),Gl(z,H),z.return=j,z)}function F(j,z,H,Z){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Nd(H,j.mode,Z),z.return=j,z):(z=g(z,H.children||[]),z.return=j,z)}function W(j,z,H,Z,ft){return z===null||z.tag!==7?(z=Qr(H,j.mode,Z,ft),z.return=j,z):(z=g(z,H),z.return=j,z)}function et(j,z,H){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Od(""+z,j.mode,H),z.return=j,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return H=Bu(z.type,z.key,z.props,null,j.mode,H),Gl(H,z),H.return=j,H;case A:return z=Nd(z,j.mode,H),z.return=j,z;case x:var Z=z._init;return z=Z(z._payload),et(j,z,H)}if(bt(z)||L(z))return z=Qr(z,j.mode,H,null),z.return=j,z;if(typeof z.then=="function")return et(j,sh(z),H);if(z.$$typeof===tt)return et(j,Gu(j,z),H);rh(j,z)}return null}function q(j,z,H,Z){var ft=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ft!==null?null:S(j,z,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===ft?P(j,z,H,Z):null;case A:return H.key===ft?F(j,z,H,Z):null;case x:return ft=H._init,H=ft(H._payload),q(j,z,H,Z)}if(bt(H)||L(H))return ft!==null?null:W(j,z,H,Z,null);if(typeof H.then=="function")return q(j,z,sh(H),Z);if(H.$$typeof===tt)return q(j,z,Gu(j,H),Z);rh(j,H)}return null}function Y(j,z,H,Z,ft){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(H)||null,S(z,j,""+Z,ft);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return j=j.get(Z.key===null?H:Z.key)||null,P(z,j,Z,ft);case A:return j=j.get(Z.key===null?H:Z.key)||null,F(z,j,Z,ft);case x:var Dt=Z._init;return Z=Dt(Z._payload),Y(j,z,H,Z,ft)}if(bt(Z)||L(Z))return j=j.get(H)||null,W(z,j,Z,ft,null);if(typeof Z.then=="function")return Y(j,z,H,sh(Z),ft);if(Z.$$typeof===tt)return Y(j,z,H,Gu(z,Z),ft);rh(z,Z)}return null}function Et(j,z,H,Z){for(var ft=null,Dt=null,mt=z,vt=z=0,je=null;mt!==null&&vt<H.length;vt++){mt.index>vt?(je=mt,mt=null):je=mt.sibling;var Ft=q(j,mt,H[vt],Z);if(Ft===null){mt===null&&(mt=je);break}s&&mt&&Ft.alternate===null&&r(j,mt),z=p(Ft,z,vt),Dt===null?ft=Ft:Dt.sibling=Ft,Dt=Ft,mt=je}if(vt===H.length)return l(j,mt),qt&&Wr(j,vt),ft;if(mt===null){for(;vt<H.length;vt++)mt=et(j,H[vt],Z),mt!==null&&(z=p(mt,z,vt),Dt===null?ft=mt:Dt.sibling=mt,Dt=mt);return qt&&Wr(j,vt),ft}for(mt=u(mt);vt<H.length;vt++)je=Y(mt,j,vt,H[vt],Z),je!==null&&(s&&je.alternate!==null&&mt.delete(je.key===null?vt:je.key),z=p(je,z,vt),Dt===null?ft=je:Dt.sibling=je,Dt=je);return s&&mt.forEach(function(Zs){return r(j,Zs)}),qt&&Wr(j,vt),ft}function yt(j,z,H,Z){if(H==null)throw Error(i(151));for(var ft=null,Dt=null,mt=z,vt=z=0,je=null,Ft=H.next();mt!==null&&!Ft.done;vt++,Ft=H.next()){mt.index>vt?(je=mt,mt=null):je=mt.sibling;var Zs=q(j,mt,Ft.value,Z);if(Zs===null){mt===null&&(mt=je);break}s&&mt&&Zs.alternate===null&&r(j,mt),z=p(Zs,z,vt),Dt===null?ft=Zs:Dt.sibling=Zs,Dt=Zs,mt=je}if(Ft.done)return l(j,mt),qt&&Wr(j,vt),ft;if(mt===null){for(;!Ft.done;vt++,Ft=H.next())Ft=et(j,Ft.value,Z),Ft!==null&&(z=p(Ft,z,vt),Dt===null?ft=Ft:Dt.sibling=Ft,Dt=Ft);return qt&&Wr(j,vt),ft}for(mt=u(mt);!Ft.done;vt++,Ft=H.next())Ft=Y(mt,j,vt,Ft.value,Z),Ft!==null&&(s&&Ft.alternate!==null&&mt.delete(Ft.key===null?vt:Ft.key),z=p(Ft,z,vt),Dt===null?ft=Ft:Dt.sibling=Ft,Dt=Ft);return s&&mt.forEach(function(Nx){return r(j,Nx)}),qt&&Wr(j,vt),ft}function ee(j,z,H,Z){if(typeof H=="object"&&H!==null&&H.type===C&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:t:{for(var ft=H.key;z!==null;){if(z.key===ft){if(ft=H.type,ft===C){if(z.tag===7){l(j,z.sibling),Z=g(z,H.props.children),Z.return=j,j=Z;break t}}else if(z.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===x&&Wy(ft)===z.type){l(j,z.sibling),Z=g(z,H.props),Gl(Z,H),Z.return=j,j=Z;break t}l(j,z);break}else r(j,z);z=z.sibling}H.type===C?(Z=Qr(H.props.children,j.mode,Z,H.key),Z.return=j,j=Z):(Z=Bu(H.type,H.key,H.props,null,j.mode,Z),Gl(Z,H),Z.return=j,j=Z)}return E(j);case A:t:{for(ft=H.key;z!==null;){if(z.key===ft)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){l(j,z.sibling),Z=g(z,H.children||[]),Z.return=j,j=Z;break t}else{l(j,z);break}else r(j,z);z=z.sibling}Z=Nd(H,j.mode,Z),Z.return=j,j=Z}return E(j);case x:return ft=H._init,H=ft(H._payload),ee(j,z,H,Z)}if(bt(H))return Et(j,z,H,Z);if(L(H)){if(ft=L(H),typeof ft!="function")throw Error(i(150));return H=ft.call(H),yt(j,z,H,Z)}if(typeof H.then=="function")return ee(j,z,sh(H),Z);if(H.$$typeof===tt)return ee(j,z,Gu(j,H),Z);rh(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,z!==null&&z.tag===6?(l(j,z.sibling),Z=g(z,H),Z.return=j,j=Z):(l(j,z),Z=Od(H,j.mode,Z),Z.return=j,j=Z),E(j)):l(j,z)}return function(j,z,H,Z){try{ql=0;var ft=ee(j,z,H,Z);return co=null,ft}catch(mt){if(mt===Pl||mt===Ku)throw mt;var Dt=An(29,mt,null,j.mode);return Dt.lanes=Z,Dt.return=j,Dt}finally{}}}var uo=$y(!0),Zy=$y(!1),Bn=it(null),vi=null;function Ls(s){var r=s.alternate;rt(Ne,Ne.current&1),rt(Bn,s),vi===null&&(r===null||ro.current!==null||r.memoizedState!==null)&&(vi=s)}function Jy(s){if(s.tag===22){if(rt(Ne,Ne.current),rt(Bn,s),vi===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(vi=s)}}else Us()}function Us(){rt(Ne,Ne.current),rt(Bn,Bn.current)}function is(s){ct(Bn),vi===s&&(vi=null),ct(Ne)}var Ne=it(0);function ah(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||em(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function fg(s,r,l,u){r=s.memoizedState,l=l(u,r),l=l==null?r:_({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var dg={enqueueSetState:function(s,r,l){s=s._reactInternals;var u=Cn(),g=ks(u);g.payload=r,l!=null&&(g.callback=l),r=Ps(s,g,u),r!==null&&(In(r,s,u),Ll(r,s,u))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var u=Cn(),g=ks(u);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Ps(s,g,u),r!==null&&(In(r,s,u),Ll(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Cn(),u=ks(l);u.tag=2,r!=null&&(u.callback=r),r=Ps(s,u,l),r!==null&&(In(r,s,l),Ll(r,s,l))}};function tv(s,r,l,u,g,p,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,E):r.prototype&&r.prototype.isPureReactComponent?!Rl(l,u)||!Rl(g,p):!0}function ev(s,r,l,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==s&&dg.enqueueReplaceState(r,r.state,null)}function ia(s,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(s=s.defaultProps){l===r&&(l=_({},l));for(var g in s)l[g]===void 0&&(l[g]=s[g])}return l}var oh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function nv(s){oh(s)}function iv(s){console.error(s)}function sv(s){oh(s)}function lh(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function rv(s,r,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function gg(s,r,l){return l=ks(l),l.tag=3,l.payload={element:null},l.callback=function(){lh(s,r)},l}function av(s){return s=ks(s),s.tag=3,s}function ov(s,r,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var p=u.value;s.payload=function(){return g(p)},s.callback=function(){rv(r,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){rv(r,l,u),typeof g!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function Nw(s,r,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&Ol(r,l,g,!0),l=Bn.current,l!==null){switch(l.tag){case 13:return vi===null?Ug():l.alternate===null&&me===0&&(me=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Fd?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),jg(s,u,g)),!1;case 22:return l.flags|=65536,u===Fd?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),jg(s,u,g)),!1}throw Error(i(435,l.tag))}return jg(s,u,g),Ug(),!1}if(qt)return r=Bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Vd&&(s=Error(i(422),{cause:u}),Ml(Ln(s,l)))):(u!==Vd&&(r=Error(i(423),{cause:u}),Ml(Ln(r,l))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=Ln(u,l),g=gg(s.stateNode,u,g),Yd(s,g),me!==4&&(me=2)),!1;var p=Error(i(520),{cause:u});if(p=Ln(p,l),Zl===null?Zl=[p]:Zl.push(p),me!==4&&(me=2),r===null)return!0;u=Ln(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=g&-g,l.lanes|=s,s=gg(l.stateNode,u,s),Yd(l,s),!1;case 1:if(r=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(qs===null||!qs.has(p))))return l.flags|=65536,g&=-g,l.lanes|=g,g=av(g),ov(g,s,l,u),Yd(l,g),!1}l=l.return}while(l!==null);return!1}var lv=Error(i(461)),Ue=!1;function Ye(s,r,l,u){r.child=s===null?Zy(r,null,l,u):uo(r,s.child,l,u)}function cv(s,r,l,u,g){l=l.render;var p=r.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return ta(r),u=$d(s,r,l,E,p,g),S=Zd(),s!==null&&!Ue?(Jd(s,r,g),ss(s,r,g)):(qt&&S&&kd(r),r.flags|=1,Ye(s,r,u,g),r.child)}function uv(s,r,l,u,g){if(s===null){var p=l.type;return typeof p=="function"&&!Md(p)&&p.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=p,hv(s,r,p,u,g)):(s=Bu(l.type,null,u,r,r.mode,g),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!Eg(s,g)){var E=p.memoizedProps;if(l=l.compare,l=l!==null?l:Rl,l(E,u)&&s.ref===r.ref)return ss(s,r,g)}return r.flags|=1,s=$i(p,u),s.ref=r.ref,s.return=r,r.child=s}function hv(s,r,l,u,g){if(s!==null){var p=s.memoizedProps;if(Rl(p,u)&&s.ref===r.ref)if(Ue=!1,r.pendingProps=u=p,Eg(s,g))(s.flags&131072)!==0&&(Ue=!0);else return r.lanes=s.lanes,ss(s,r,g)}return mg(s,r,l,u,g)}function fv(s,r,l){var u=r.pendingProps,g=u.children,p=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((r.flags&128)!==0){if(u=p!==null?p.baseLanes|l:l,s!==null){for(g=r.child=s.child,p=0;g!==null;)p=p|g.lanes|g.childLanes,g=g.sibling;r.childLanes=p&~u}else r.childLanes=0,r.child=null;return dv(s,r,u,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Yu(r,p!==null?p.cachePool:null),p!==null?hy(r,p):Qd(),Jy(r);else return r.lanes=r.childLanes=536870912,dv(s,r,p!==null?p.baseLanes|l:l,l)}else p!==null?(Yu(r,p.cachePool),hy(r,p),Us(),r.memoizedState=null):(s!==null&&Yu(r,null),Qd(),Us());return Ye(s,r,g,l),r.child}function dv(s,r,l,u){var g=Hd();return g=g===null?null:{parent:Oe._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},s!==null&&Yu(r,null),Qd(),Jy(r),s!==null&&Ol(s,r,u,!0),null}function ch(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function mg(s,r,l,u,g){return ta(r),l=$d(s,r,l,u,void 0,g),u=Zd(),s!==null&&!Ue?(Jd(s,r,g),ss(s,r,g)):(qt&&u&&kd(r),r.flags|=1,Ye(s,r,l,g),r.child)}function gv(s,r,l,u,g,p){return ta(r),r.updateQueue=null,l=dy(r,u,l,g),fy(s),u=Zd(),s!==null&&!Ue?(Jd(s,r,p),ss(s,r,p)):(qt&&u&&kd(r),r.flags|=1,Ye(s,r,l,p),r.child)}function mv(s,r,l,u,g){if(ta(r),r.stateNode===null){var p=to,E=l.contextType;typeof E=="object"&&E!==null&&(p=tn(E)),p=new l(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=dg,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},qd(r),E=l.contextType,p.context=typeof E=="object"&&E!==null?tn(E):to,p.state=r.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(fg(r,l,E,u),p.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&dg.enqueueReplaceState(p,p.state,null),zl(r,u,p,g),Ul(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){p=r.stateNode;var S=r.memoizedProps,P=ia(l,S);p.props=P;var F=p.context,W=l.contextType;E=to,typeof W=="object"&&W!==null&&(E=tn(W));var et=l.getDerivedStateFromProps;W=typeof et=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,W||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||F!==E)&&ev(r,p,u,E),Ns=!1;var q=r.memoizedState;p.state=q,zl(r,u,p,g),Ul(),F=r.memoizedState,S||q!==F||Ns?(typeof et=="function"&&(fg(r,l,et,u),F=r.memoizedState),(P=Ns||tv(r,l,P,u,q,F,E))?(W||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=F),p.props=u,p.state=F,p.context=E,u=P):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,Gd(s,r),E=r.memoizedProps,W=ia(l,E),p.props=W,et=r.pendingProps,q=p.context,F=l.contextType,P=to,typeof F=="object"&&F!==null&&(P=tn(F)),S=l.getDerivedStateFromProps,(F=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==et||q!==P)&&ev(r,p,u,P),Ns=!1,q=r.memoizedState,p.state=q,zl(r,u,p,g),Ul();var Y=r.memoizedState;E!==et||q!==Y||Ns||s!==null&&s.dependencies!==null&&qu(s.dependencies)?(typeof S=="function"&&(fg(r,l,S,u),Y=r.memoizedState),(W=Ns||tv(r,l,W,u,q,Y,P)||s!==null&&s.dependencies!==null&&qu(s.dependencies))?(F||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Y,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Y,P)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Y),p.props=u,p.state=Y,p.context=P,u=W):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&q===s.memoizedState||(r.flags|=1024),u=!1)}return p=u,ch(s,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&u?(r.child=uo(r,s.child,null,g),r.child=uo(r,null,l,g)):Ye(s,r,l,g),r.memoizedState=p.state,s=r.child):s=ss(s,r,g),s}function pv(s,r,l,u){return Dl(),r.flags|=256,Ye(s,r,l,u),r.child}var pg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _g(s){return{baseLanes:s,cachePool:iy()}}function yg(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Hn),s}function _v(s,r,l){var u=r.pendingProps,g=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=s!==null&&s.memoizedState===null?!1:(Ne.current&2)!==0),E&&(g=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(qt){if(g?Ls(r):Us(),qt){var S=ge,P;if(P=S){t:{for(P=S,S=yi;P.nodeType!==8;){if(!S){S=null;break t}if(P=ni(P.nextSibling),P===null){S=null;break t}}S=P}S!==null?(r.memoizedState={dehydrated:S,treeContext:Xr!==null?{id:Zi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},P=An(18,null,null,0),P.stateNode=S,P.return=r,r.child=P,fn=r,ge=null,P=!0):P=!1}P||Zr(r)}if(S=r.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return em(S)?r.lanes=32:r.lanes=536870912,null;is(r)}return S=u.children,u=u.fallback,g?(Us(),g=r.mode,S=uh({mode:"hidden",children:S},g),u=Qr(u,g,l,null),S.return=r,u.return=r,S.sibling=u,r.child=S,g=r.child,g.memoizedState=_g(l),g.childLanes=yg(s,E,l),r.memoizedState=pg,u):(Ls(r),vg(r,S))}if(P=s.memoizedState,P!==null&&(S=P.dehydrated,S!==null)){if(p)r.flags&256?(Ls(r),r.flags&=-257,r=bg(s,r,l)):r.memoizedState!==null?(Us(),r.child=s.child,r.flags|=128,r=null):(Us(),g=u.fallback,S=r.mode,u=uh({mode:"visible",children:u.children},S),g=Qr(g,S,l,null),g.flags|=2,u.return=r,g.return=r,u.sibling=g,r.child=u,uo(r,s.child,null,l),u=r.child,u.memoizedState=_g(l),u.childLanes=yg(s,E,l),r.memoizedState=pg,r=g);else if(Ls(r),em(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(i(419)),u.stack="",u.digest=E,Ml({value:u,source:null,stack:null}),r=bg(s,r,l)}else if(Ue||Ol(s,r,l,!1),E=(l&s.childLanes)!==0,Ue||E){if(E=se,E!==null&&(u=l&-l,u=(u&42)!==0?1:ws(u),u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==P.retryLane))throw P.retryLane=u,Ja(s,u),In(E,s,u),lv;S.data==="$?"||Ug(),r=bg(s,r,l)}else S.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=P.treeContext,ge=ni(S.nextSibling),fn=r,qt=!0,$r=null,yi=!1,s!==null&&(zn[jn++]=Zi,zn[jn++]=Ji,zn[jn++]=Xr,Zi=s.id,Ji=s.overflow,Xr=r),r=vg(r,u.children),r.flags|=4096);return r}return g?(Us(),g=u.fallback,S=r.mode,P=s.child,F=P.sibling,u=$i(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,F!==null?g=$i(F,g):(g=Qr(g,S,l,null),g.flags|=2),g.return=r,u.return=r,u.sibling=g,r.child=u,u=g,g=r.child,S=s.child.memoizedState,S===null?S=_g(l):(P=S.cachePool,P!==null?(F=Oe._currentValue,P=P.parent!==F?{parent:F,pool:F}:P):P=iy(),S={baseLanes:S.baseLanes|l,cachePool:P}),g.memoizedState=S,g.childLanes=yg(s,E,l),r.memoizedState=pg,u):(Ls(r),l=s.child,s=l.sibling,l=$i(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=l,r.memoizedState=null,l)}function vg(s,r){return r=uh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function uh(s,r){return s=An(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function bg(s,r,l){return uo(r,s.child,null,l),s=vg(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function yv(s,r,l){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),Ud(s.return,r,l)}function Tg(s,r,l,u,g){var p=s.memoizedState;p===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=g)}function vv(s,r,l){var u=r.pendingProps,g=u.revealOrder,p=u.tail;if(Ye(s,r,u.children,l),u=Ne.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&yv(s,l,r);else if(s.tag===19)yv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(rt(Ne,u),g){case"forwards":for(l=r.child,g=null;l!==null;)s=l.alternate,s!==null&&ah(s)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Tg(r,!1,g,l,p);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(s=g.alternate,s!==null&&ah(s)===null){r.child=g;break}s=g.sibling,g.sibling=l,l=g,g=s}Tg(r,!0,l,null,p);break;case"together":Tg(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ss(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Fs|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Ol(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=$i(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=$i(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Eg(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&qu(s)))}function kw(s,r,l){switch(r.tag){case 3:ie(r,r.stateNode.containerInfo),Os(r,Oe,s.memoizedState.cache),Dl();break;case 27:case 5:As(r);break;case 4:ie(r,r.stateNode.containerInfo);break;case 10:Os(r,r.type,r.memoizedProps.value);break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ls(r),r.flags|=128,null):(l&r.child.childLanes)!==0?_v(s,r,l):(Ls(r),s=ss(s,r,l),s!==null?s.sibling:null);Ls(r);break;case 19:var g=(s.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(Ol(s,r,l,!1),u=(l&r.childLanes)!==0),g){if(u)return vv(s,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),rt(Ne,Ne.current),u)break;return null;case 22:case 23:return r.lanes=0,fv(s,r,l);case 24:Os(r,Oe,s.memoizedState.cache)}return ss(s,r,l)}function bv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ue=!0;else{if(!Eg(s,l)&&(r.flags&128)===0)return Ue=!1,kw(s,r,l);Ue=(s.flags&131072)!==0}else Ue=!1,qt&&(r.flags&1048576)!==0&&W_(r,Fu,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var u=r.elementType,g=u._init;if(u=g(u._payload),r.type=u,typeof u=="function")Md(u)?(s=ia(u,s),r.tag=1,r=mv(null,r,u,s,l)):(r.tag=0,r=mg(null,r,u,s,l));else{if(u!=null){if(g=u.$$typeof,g===st){r.tag=11,r=cv(null,r,u,s,l);break t}else if(g===O){r.tag=14,r=uv(null,r,u,s,l);break t}}throw r=Lt(u)||u,Error(i(306,r,""))}}return r;case 0:return mg(s,r,r.type,r.pendingProps,l);case 1:return u=r.type,g=ia(u,r.pendingProps),mv(s,r,u,g,l);case 3:t:{if(ie(r,r.stateNode.containerInfo),s===null)throw Error(i(387));u=r.pendingProps;var p=r.memoizedState;g=p.element,Gd(s,r),zl(r,u,null,l);var E=r.memoizedState;if(u=E.cache,Os(r,Oe,u),u!==p.cache&&zd(r,[Oe],l,!0),Ul(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=pv(s,r,u,l);break t}else if(u!==g){g=Ln(Error(i(424)),r),Ml(g),r=pv(s,r,u,l);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ge=ni(s.firstChild),fn=r,qt=!0,$r=null,yi=!0,l=Zy(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Dl(),u===g){r=ss(s,r,l);break t}Ye(s,r,u,l)}r=r.child}return r;case 26:return ch(s,r),s===null?(l=A0(r.type,null,r.pendingProps,null))?r.memoizedState=l:qt||(l=r.type,s=r.pendingProps,u=Ah(_t.current).createElement(l),u[Ie]=r,u[Te]=s,Qe(u,l,s),pe(u),r.stateNode=u):r.memoizedState=A0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return As(r),s===null&&qt&&(u=r.stateNode=T0(r.type,r.pendingProps,_t.current),fn=r,yi=!0,g=ge,Ks(r.type)?(nm=g,ge=ni(u.firstChild)):ge=g),Ye(s,r,r.pendingProps.children,l),ch(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&qt&&((g=u=ge)&&(u=lx(u,r.type,r.pendingProps,yi),u!==null?(r.stateNode=u,fn=r,ge=ni(u.firstChild),yi=!1,g=!0):g=!1),g||Zr(r)),As(r),g=r.type,p=r.pendingProps,E=s!==null?s.memoizedProps:null,u=p.children,Zg(g,p)?u=null:E!==null&&Zg(g,E)&&(r.flags|=32),r.memoizedState!==null&&(g=$d(s,r,xw,null,null,l),oc._currentValue=g),ch(s,r),Ye(s,r,u,l),r.child;case 6:return s===null&&qt&&((s=l=ge)&&(l=cx(l,r.pendingProps,yi),l!==null?(r.stateNode=l,fn=r,ge=null,s=!0):s=!1),s||Zr(r)),null;case 13:return _v(s,r,l);case 4:return ie(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=uo(r,null,u,l):Ye(s,r,u,l),r.child;case 11:return cv(s,r,r.type,r.pendingProps,l);case 7:return Ye(s,r,r.pendingProps,l),r.child;case 8:return Ye(s,r,r.pendingProps.children,l),r.child;case 12:return Ye(s,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,Os(r,r.type,u.value),Ye(s,r,u.children,l),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,ta(r),g=tn(g),u=u(g),r.flags|=1,Ye(s,r,u,l),r.child;case 14:return uv(s,r,r.type,r.pendingProps,l);case 15:return hv(s,r,r.type,r.pendingProps,l);case 19:return vv(s,r,l);case 31:return u=r.pendingProps,l=r.mode,u={mode:u.mode,children:u.children},s===null?(l=uh(u,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=$i(s.child,u),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return fv(s,r,l);case 24:return ta(r),u=tn(Oe),s===null?(g=Hd(),g===null&&(g=se,p=jd(),g.pooledCache=p,p.refCount++,p!==null&&(g.pooledCacheLanes|=l),g=p),r.memoizedState={parent:u,cache:g},qd(r),Os(r,Oe,g)):((s.lanes&l)!==0&&(Gd(s,r),zl(r,null,null,l),Ul()),g=s.memoizedState,p=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Os(r,Oe,u)):(u=p.cache,Os(r,Oe,u),u!==g.cache&&zd(r,[Oe],l,!0))),Ye(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function rs(s){s.flags|=4}function Tv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!I0(r)){if(r=Bn.current,r!==null&&((jt&4194048)===jt?vi!==null:(jt&62914560)!==jt&&(jt&536870912)===0||r!==vi))throw Vl=Fd,sy;s.flags|=8192}}function hh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?cl():536870912,s.lanes|=r,mo|=r)}function Yl(s,r){if(!qt)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function he(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(r)for(var g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=l,r}function Pw(s,r,l){var u=r.pendingProps;switch(Pd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(r),null;case 1:return he(r),null;case 3:return l=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),es(Oe),ai(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Il(r)?rs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,J_())),he(r),null;case 26:return l=r.memoizedState,s===null?(rs(r),l!==null?(he(r),Tv(r,l)):(he(r),r.flags&=-16777217)):l?l!==s.memoizedState?(rs(r),he(r),Tv(r,l)):(he(r),r.flags&=-16777217):(s.memoizedProps!==u&&rs(r),he(r),r.flags&=-16777217),null;case 27:Ui(r),l=_t.current;var g=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==u&&rs(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return he(r),null}s=dt.current,Il(r)?$_(r):(s=T0(g,u,l),r.stateNode=s,rs(r))}return he(r),null;case 5:if(Ui(r),l=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&rs(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return he(r),null}if(s=dt.current,Il(r))$_(r);else{switch(g=Ah(_t.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(l,{is:u.is}):g.createElement(l)}}s[Ie]=r,s[Te]=u;t:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break t;for(;g.sibling===null;){if(g.return===null||g.return===r)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=s;t:switch(Qe(s,l,u),l){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&rs(r)}}return he(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&rs(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(s=_t.current,Il(r)){if(s=r.stateNode,l=r.memoizedProps,u=null,g=fn,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[Ie]=r,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||g0(s.nodeValue,l)),s||Zr(r)}else s=Ah(s).createTextNode(u),s[Ie]=r,r.stateNode=s}return he(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Il(r),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ie]=r}else Dl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;he(r),g=!1}else g=J_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(is(r),r):(is(r),null)}if(is(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=u!==null,s=s!==null&&s.memoizedState!==null,l){u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==g&&(u.flags|=2048)}return l!==s&&l&&(r.child.flags|=8192),hh(r,r.updateQueue),he(r),null;case 4:return ai(),s===null&&Kg(r.stateNode.containerInfo),he(r),null;case 10:return es(r.type),he(r),null;case 19:if(ct(Ne),g=r.memoizedState,g===null)return he(r),null;if(u=(r.flags&128)!==0,p=g.rendering,p===null)if(u)Yl(g,!1);else{if(me!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=ah(s),p!==null){for(r.flags|=128,Yl(g,!1),s=p.updateQueue,r.updateQueue=s,hh(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)X_(l,s),l=l.sibling;return rt(Ne,Ne.current&1|2),r.child}s=s.sibling}g.tail!==null&&Mn()>gh&&(r.flags|=128,u=!0,Yl(g,!1),r.lanes=4194304)}else{if(!u)if(s=ah(p),s!==null){if(r.flags|=128,u=!0,s=s.updateQueue,r.updateQueue=s,hh(r,s),Yl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!p.alternate&&!qt)return he(r),null}else 2*Mn()-g.renderingStartTime>gh&&l!==536870912&&(r.flags|=128,u=!0,Yl(g,!1),r.lanes=4194304);g.isBackwards?(p.sibling=r.child,r.child=p):(s=g.last,s!==null?s.sibling=p:r.child=p,g.last=p)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Mn(),r.sibling=null,s=Ne.current,rt(Ne,u?s&1|2:s&1),r):(he(r),null);case 22:case 23:return is(r),Xd(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(he(r),r.subtreeFlags&6&&(r.flags|=8192)):he(r),l=r.updateQueue,l!==null&&hh(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),s!==null&&ct(ea),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),es(Oe),he(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Vw(s,r){switch(Pd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return es(Oe),ai(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ui(r),null;case 13:if(is(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Dl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ct(Ne),null;case 4:return ai(),null;case 10:return es(r.type),null;case 22:case 23:return is(r),Xd(),s!==null&&ct(ea),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return es(Oe),null;case 25:return null;default:return null}}function Ev(s,r){switch(Pd(r),r.tag){case 3:es(Oe),ai();break;case 26:case 27:case 5:Ui(r);break;case 4:ai();break;case 13:is(r);break;case 19:ct(Ne);break;case 10:es(r.type);break;case 22:case 23:is(r),Xd(),s!==null&&ct(ea);break;case 24:es(Oe)}}function Kl(s,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&s)===s){u=void 0;var p=l.create,E=l.inst;u=p(),E.destroy=u}l=l.next}while(l!==g)}}catch(S){ne(r,r.return,S)}}function zs(s,r,l){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var p=g.next;u=p;do{if((u.tag&s)===s){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,g=r;var P=l,F=S;try{F()}catch(W){ne(g,P,W)}}}u=u.next}while(u!==p)}}catch(W){ne(r,r.return,W)}}function Sv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{uy(r,l)}catch(u){ne(s,s.return,u)}}}function Av(s,r,l){l.props=ia(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){ne(s,r,u)}}function Ql(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(g){ne(s,r,g)}}function bi(s,r){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){ne(s,r,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ne(s,r,g)}else l.current=null}function wv(s){var r=s.type,l=s.memoizedProps,u=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){ne(s,s.return,g)}}function Sg(s,r,l){try{var u=s.stateNode;ix(u,s.type,l,r),u[Te]=r}catch(g){ne(s,s.return,g)}}function xv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ks(s.type)||s.tag===4}function Ag(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||xv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ks(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wg(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Sh));else if(u!==4&&(u===27&&Ks(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(wg(s,r,l),s=s.sibling;s!==null;)wg(s,r,l),s=s.sibling}function fh(s,r,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(u!==4&&(u===27&&Ks(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(fh(s,r,l),s=s.sibling;s!==null;)fh(s,r,l),s=s.sibling}function Rv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Qe(r,u,l),r[Ie]=s,r[Te]=l}catch(p){ne(s,s.return,p)}}var as=!1,ye=!1,xg=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Lw(s,r){if(s=s.containerInfo,Wg=Dh,s=z_(s),Ad(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break t}var E=0,S=-1,P=-1,F=0,W=0,et=s,q=null;e:for(;;){for(var Y;et!==l||g!==0&&et.nodeType!==3||(S=E+g),et!==p||u!==0&&et.nodeType!==3||(P=E+u),et.nodeType===3&&(E+=et.nodeValue.length),(Y=et.firstChild)!==null;)q=et,et=Y;for(;;){if(et===s)break e;if(q===l&&++F===g&&(S=E),q===p&&++W===u&&(P=E),(Y=et.nextSibling)!==null)break;et=q,q=et.parentNode}et=Y}l=S===-1||P===-1?null:{start:S,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for($g={focusedElem:s,selectionRange:l},Dh=!1,ze=r;ze!==null;)if(r=ze,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,ze=s;else for(;ze!==null;){switch(r=ze,p=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,l=r,g=p.memoizedProps,p=p.memoizedState,u=l.stateNode;try{var Et=ia(l.type,g,l.elementType===l.type);s=u.getSnapshotBeforeUpdate(Et,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(yt){ne(l,l.return,yt)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)tm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":tm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,ze=s;break}ze=r.return}}function Iv(s,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:js(s,l),u&4&&Kl(5,l);break;case 1:if(js(s,l),u&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(E){ne(l,l.return,E)}else{var g=ia(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(g,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){ne(l,l.return,E)}}u&64&&Sv(l),u&512&&Ql(l,l.return);break;case 3:if(js(s,l),u&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{uy(s,r)}catch(E){ne(l,l.return,E)}}break;case 27:r===null&&u&4&&Rv(l);case 26:case 5:js(s,l),r===null&&u&4&&wv(l),u&512&&Ql(l,l.return);break;case 12:js(s,l);break;case 13:js(s,l),u&4&&Ov(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Yw.bind(null,l),ux(s,l))));break;case 22:if(u=l.memoizedState!==null||as,!u){r=r!==null&&r.memoizedState!==null||ye,g=as;var p=ye;as=u,(ye=r)&&!p?Bs(s,l,(l.subtreeFlags&8772)!==0):js(s,l),as=g,ye=p}break;case 30:break;default:js(s,l)}}function Dv(s){var r=s.alternate;r!==null&&(s.alternate=null,Dv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Cs(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,mn=!1;function os(s,r,l){for(l=l.child;l!==null;)Mv(s,r,l),l=l.sibling}function Mv(s,r,l){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(de,l)}catch{}switch(l.tag){case 26:ye||bi(l,r),os(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ye||bi(l,r);var u=ue,g=mn;Ks(l.type)&&(ue=l.stateNode,mn=!1),os(s,r,l),ic(l.stateNode),ue=u,mn=g;break;case 5:ye||bi(l,r);case 6:if(u=ue,g=mn,ue=null,os(s,r,l),ue=u,mn=g,ue!==null)if(mn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(l.stateNode)}catch(p){ne(l,r,p)}else try{ue.removeChild(l.stateNode)}catch(p){ne(l,r,p)}break;case 18:ue!==null&&(mn?(s=ue,v0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),hc(s)):v0(ue,l.stateNode));break;case 4:u=ue,g=mn,ue=l.stateNode.containerInfo,mn=!0,os(s,r,l),ue=u,mn=g;break;case 0:case 11:case 14:case 15:ye||zs(2,l,r),ye||zs(4,l,r),os(s,r,l);break;case 1:ye||(bi(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Av(l,r,u)),os(s,r,l);break;case 21:os(s,r,l);break;case 22:ye=(u=ye)||l.memoizedState!==null,os(s,r,l),ye=u;break;default:os(s,r,l)}}function Ov(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{hc(s)}catch(l){ne(r,r.return,l)}}function Uw(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Cv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Cv),r;default:throw Error(i(435,s.tag))}}function Rg(s,r){var l=Uw(s);r.forEach(function(u){var g=Kw.bind(null,s,u);l.has(u)||(l.add(u),u.then(g,g))})}function wn(s,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],p=s,E=r,S=E;t:for(;S!==null;){switch(S.tag){case 27:if(Ks(S.type)){ue=S.stateNode,mn=!1;break t}break;case 5:ue=S.stateNode,mn=!1;break t;case 3:case 4:ue=S.stateNode.containerInfo,mn=!0;break t}S=S.return}if(ue===null)throw Error(i(160));Mv(p,E,g),ue=null,mn=!1,p=g.alternate,p!==null&&(p.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Nv(r,s),r=r.sibling}var ei=null;function Nv(s,r){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:wn(r,s),xn(s),u&4&&(zs(3,s,s.return),Kl(3,s),zs(5,s,s.return));break;case 1:wn(r,s),xn(s),u&512&&(ye||l===null||bi(l,l.return)),u&64&&as&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=ei;if(wn(r,s),xn(s),u&512&&(ye||l===null||bi(l,l.return)),u&4){var p=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){t:{u=s.type,l=s.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":p=g.getElementsByTagName("title")[0],(!p||p[Or]||p[Ie]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=g.createElement(u),g.head.insertBefore(p,g.querySelector("head > title"))),Qe(p,u,l),p[Ie]=s,pe(p),u=p;break t;case"link":var E=R0("link","href",g).get(u+(l.href||""));if(E){for(var S=0;S<E.length;S++)if(p=E[S],p.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&p.getAttribute("rel")===(l.rel==null?null:l.rel)&&p.getAttribute("title")===(l.title==null?null:l.title)&&p.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(S,1);break e}}p=g.createElement(u),Qe(p,u,l),g.head.appendChild(p);break;case"meta":if(E=R0("meta","content",g).get(u+(l.content||""))){for(S=0;S<E.length;S++)if(p=E[S],p.getAttribute("content")===(l.content==null?null:""+l.content)&&p.getAttribute("name")===(l.name==null?null:l.name)&&p.getAttribute("property")===(l.property==null?null:l.property)&&p.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&p.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(S,1);break e}}p=g.createElement(u),Qe(p,u,l),g.head.appendChild(p);break;default:throw Error(i(468,u))}p[Ie]=s,pe(p),u=p}s.stateNode=u}else C0(g,s.type,s.stateNode);else s.stateNode=x0(g,u,s.memoizedProps);else p!==u?(p===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):p.count--,u===null?C0(g,s.type,s.stateNode):x0(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Sg(s,s.memoizedProps,l.memoizedProps)}break;case 27:wn(r,s),xn(s),u&512&&(ye||l===null||bi(l,l.return)),l!==null&&u&4&&Sg(s,s.memoizedProps,l.memoizedProps);break;case 5:if(wn(r,s),xn(s),u&512&&(ye||l===null||bi(l,l.return)),s.flags&32){g=s.stateNode;try{Nn(g,"")}catch(Y){ne(s,s.return,Y)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,Sg(s,g,l!==null?l.memoizedProps:g)),u&1024&&(xg=!0);break;case 6:if(wn(r,s),xn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Y){ne(s,s.return,Y)}}break;case 3:if(Rh=null,g=ei,ei=wh(r.containerInfo),wn(r,s),ei=g,xn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{hc(r.containerInfo)}catch(Y){ne(s,s.return,Y)}xg&&(xg=!1,kv(s));break;case 4:u=ei,ei=wh(s.stateNode.containerInfo),wn(r,s),xn(s),ei=u;break;case 12:wn(r,s),xn(s);break;case 13:wn(r,s),xn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ng=Mn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rg(s,u)));break;case 22:g=s.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,F=as,W=ye;if(as=F||g,ye=W||P,wn(r,s),ye=W,as=F,xn(s),u&8192)t:for(r=s.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||P||as||ye||sa(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){P=l=r;try{if(p=P.stateNode,g)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=P.stateNode;var et=P.memoizedProps.style,q=et!=null&&et.hasOwnProperty("display")?et.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(Y){ne(P,P.return,Y)}}}else if(r.tag===6){if(l===null){P=r;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(Y){ne(P,P.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Rg(s,l))));break;case 19:wn(r,s),xn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rg(s,u)));break;case 30:break;case 21:break;default:wn(r,s),xn(s)}}function xn(s){var r=s.flags;if(r&2){try{for(var l,u=s.return;u!==null;){if(xv(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var g=l.stateNode,p=Ag(s);fh(s,p,g);break;case 5:var E=l.stateNode;l.flags&32&&(Nn(E,""),l.flags&=-33);var S=Ag(s);fh(s,S,E);break;case 3:case 4:var P=l.stateNode.containerInfo,F=Ag(s);wg(s,F,P);break;default:throw Error(i(161))}}catch(W){ne(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function kv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;kv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function js(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Iv(s,r.alternate,r),r=r.sibling}function sa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:zs(4,r,r.return),sa(r);break;case 1:bi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Av(r,r.return,l),sa(r);break;case 27:ic(r.stateNode);case 26:case 5:bi(r,r.return),sa(r);break;case 22:r.memoizedState===null&&sa(r);break;case 30:sa(r);break;default:sa(r)}s=s.sibling}}function Bs(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=s,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:Bs(g,p,l),Kl(4,p);break;case 1:if(Bs(g,p,l),u=p,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(F){ne(u,u.return,F)}if(u=p,g=u.updateQueue,g!==null){var S=u.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)cy(P[g],S)}catch(F){ne(u,u.return,F)}}l&&E&64&&Sv(p),Ql(p,p.return);break;case 27:Rv(p);case 26:case 5:Bs(g,p,l),l&&u===null&&E&4&&wv(p),Ql(p,p.return);break;case 12:Bs(g,p,l);break;case 13:Bs(g,p,l),l&&E&4&&Ov(g,p);break;case 22:p.memoizedState===null&&Bs(g,p,l),Ql(p,p.return);break;case 30:break;default:Bs(g,p,l)}r=r.sibling}}function Cg(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Nl(l))}function Ig(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Nl(s))}function Ti(s,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Pv(s,r,l,u),r=r.sibling}function Pv(s,r,l,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:Ti(s,r,l,u),g&2048&&Kl(9,r);break;case 1:Ti(s,r,l,u);break;case 3:Ti(s,r,l,u),g&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Nl(s)));break;case 12:if(g&2048){Ti(s,r,l,u),s=r.stateNode;try{var p=r.memoizedProps,E=p.id,S=p.onPostCommit;typeof S=="function"&&S(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(P){ne(r,r.return,P)}}else Ti(s,r,l,u);break;case 13:Ti(s,r,l,u);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?Ti(s,r,l,u):Xl(s,r):p._visibility&2?Ti(s,r,l,u):(p._visibility|=2,ho(s,r,l,u,(r.subtreeFlags&10256)!==0)),g&2048&&Cg(E,r);break;case 24:Ti(s,r,l,u),g&2048&&Ig(r.alternate,r);break;default:Ti(s,r,l,u)}}function ho(s,r,l,u,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=s,E=r,S=l,P=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:ho(p,E,S,P,g),Kl(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?ho(p,E,S,P,g):Xl(p,E):(W._visibility|=2,ho(p,E,S,P,g)),g&&F&2048&&Cg(E.alternate,E);break;case 24:ho(p,E,S,P,g),g&&F&2048&&Ig(E.alternate,E);break;default:ho(p,E,S,P,g)}r=r.sibling}}function Xl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,u=r,g=u.flags;switch(u.tag){case 22:Xl(l,u),g&2048&&Cg(u.alternate,u);break;case 24:Xl(l,u),g&2048&&Ig(u.alternate,u);break;default:Xl(l,u)}r=r.sibling}}var Wl=8192;function fo(s){if(s.subtreeFlags&Wl)for(s=s.child;s!==null;)Vv(s),s=s.sibling}function Vv(s){switch(s.tag){case 26:fo(s),s.flags&Wl&&s.memoizedState!==null&&Sx(ei,s.memoizedState,s.memoizedProps);break;case 5:fo(s);break;case 3:case 4:var r=ei;ei=wh(s.stateNode.containerInfo),fo(s),ei=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Wl,Wl=16777216,fo(s),Wl=r):fo(s));break;default:fo(s)}}function Lv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function $l(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];ze=u,zv(u,s)}Lv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Uv(s),s=s.sibling}function Uv(s){switch(s.tag){case 0:case 11:case 15:$l(s),s.flags&2048&&zs(9,s,s.return);break;case 3:$l(s);break;case 12:$l(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,dh(s)):$l(s);break;default:$l(s)}}function dh(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];ze=u,zv(u,s)}Lv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:zs(8,r,r.return),dh(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,dh(r));break;default:dh(r)}s=s.sibling}}function zv(s,r){for(;ze!==null;){var l=ze;switch(l.tag){case 0:case 11:case 15:zs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Nl(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ze=u;else t:for(l=s;ze!==null;){u=ze;var g=u.sibling,p=u.return;if(Dv(u),u===l){ze=null;break t}if(g!==null){g.return=p,ze=g;break t}ze=p}}}var zw={getCacheForType:function(s){var r=tn(Oe),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l}},jw=typeof WeakMap=="function"?WeakMap:Map,Xt=0,se=null,Mt=null,jt=0,Wt=0,Rn=null,Hs=!1,go=!1,Dg=!1,ls=0,me=0,Fs=0,ra=0,Mg=0,Hn=0,mo=0,Zl=null,pn=null,Og=!1,Ng=0,gh=1/0,mh=null,qs=null,Ke=0,Gs=null,po=null,_o=0,kg=0,Pg=null,jv=null,Jl=0,Vg=null;function Cn(){if((Xt&2)!==0&&jt!==0)return jt&-jt;if(K.T!==null){var s=io;return s!==0?s:Fg()}return xs()}function Bv(){Hn===0&&(Hn=(jt&536870912)===0||qt?ll():536870912);var s=Bn.current;return s!==null&&(s.flags|=32),Hn}function In(s,r,l){(s===se&&(Wt===2||Wt===9)||s.cancelPendingCommit!==null)&&(yo(s,0),Ys(s,jt,Hn,!1)),ji(s,l),((Xt&2)===0||s!==se)&&(s===se&&((Xt&2)===0&&(ra|=l),me===4&&Ys(s,jt,Hn,!1)),Ei(s))}function Hv(s,r,l){if((Xt&6)!==0)throw Error(i(327));var u=!l&&(r&124)===0&&(r&s.expiredLanes)===0||Mr(s,r),g=u?Fw(s,r):zg(s,r,!0),p=u;do{if(g===0){go&&!u&&Ys(s,r,0,!1);break}else{if(l=s.current.alternate,p&&!Bw(l)){g=zg(s,r,!1),p=!1;continue}if(g===2){if(p=r,s.errorRecoveryDisabledLanes&p)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;t:{var S=s;g=Zl;var P=S.current.memoizedState.isDehydrated;if(P&&(yo(S,E).flags|=256),E=zg(S,E,!1),E!==2){if(Dg&&!P){S.errorRecoveryDisabledLanes|=p,ra|=p,g=4;break t}p=pn,pn=g,p!==null&&(pn===null?pn=p:pn.push.apply(pn,p))}g=E}if(p=!1,g!==2)continue}}if(g===1){yo(s,0),Ys(s,r,0,!0);break}t:{switch(u=s,p=g,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ys(u,r,Hn,!Hs);break t;case 2:pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=Ng+300-Mn(),10<g)){if(Ys(u,r,Hn,!Hs),ka(u,0,!0)!==0)break t;u.timeoutHandle=_0(Fv.bind(null,u,l,pn,mh,Og,r,Hn,ra,mo,Hs,p,2,-0,0),g);break t}Fv(u,l,pn,mh,Og,r,Hn,ra,mo,Hs,p,0,-0,0)}}break}while(!0);Ei(s)}function Fv(s,r,l,u,g,p,E,S,P,F,W,et,q,Y){if(s.timeoutHandle=-1,et=r.subtreeFlags,(et&8192||(et&16785408)===16785408)&&(ac={stylesheets:null,count:0,unsuspend:Ex},Vv(r),et=Ax(),et!==null)){s.cancelPendingCommit=et(Wv.bind(null,s,r,p,l,u,g,E,S,P,W,1,q,Y)),Ys(s,p,E,!F);return}Wv(s,r,p,l,u,g,E,S,P)}function Bw(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],p=g.getSnapshot;g=g.value;try{if(!Sn(p(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ys(s,r,l,u){r&=~Mg,r&=~ra,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var g=r;0<g;){var p=31-Je(g),E=1<<p;u[p]=-1,g&=~E}l!==0&&oi(s,l,r)}function ph(){return(Xt&6)===0?(tc(0),!1):!0}function Lg(){if(Mt!==null){if(Wt===0)var s=Mt.return;else s=Mt,ts=Jr=null,tg(s),co=null,ql=0,s=Mt;for(;s!==null;)Ev(s.alternate,s),s=s.return;Mt=null}}function yo(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,rx(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Lg(),se=s,Mt=l=$i(s.current,null),jt=r,Wt=0,Rn=null,Hs=!1,go=Mr(s,r),Dg=!1,mo=Hn=Mg=ra=Fs=me=0,pn=Zl=null,Og=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var g=31-Je(u),p=1<<g;r|=s[g],u&=~p}return ls=r,Uu(),l}function qv(s,r){It=null,K.H=ih,r===Pl||r===Ku?(r=oy(),Wt=3):r===sy?(r=oy(),Wt=4):Wt=r===lv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Mt===null&&(me=1,lh(s,Ln(r,s.current)))}function Gv(){var s=K.H;return K.H=ih,s===null?ih:s}function Yv(){var s=K.A;return K.A=zw,s}function Ug(){me=4,Hs||(jt&4194048)!==jt&&Bn.current!==null||(go=!0),(Fs&134217727)===0&&(ra&134217727)===0||se===null||Ys(se,jt,Hn,!1)}function zg(s,r,l){var u=Xt;Xt|=2;var g=Gv(),p=Yv();(se!==s||jt!==r)&&(mh=null,yo(s,r)),r=!1;var E=me;t:do try{if(Wt!==0&&Mt!==null){var S=Mt,P=Rn;switch(Wt){case 8:Lg(),E=6;break t;case 3:case 2:case 9:case 6:Bn.current===null&&(r=!0);var F=Wt;if(Wt=0,Rn=null,vo(s,S,P,F),l&&go){E=0;break t}break;default:F=Wt,Wt=0,Rn=null,vo(s,S,P,F)}}Hw(),E=me;break}catch(W){qv(s,W)}while(!0);return r&&s.shellSuspendCounter++,ts=Jr=null,Xt=u,K.H=g,K.A=p,Mt===null&&(se=null,jt=0,Uu()),E}function Hw(){for(;Mt!==null;)Kv(Mt)}function Fw(s,r){var l=Xt;Xt|=2;var u=Gv(),g=Yv();se!==s||jt!==r?(mh=null,gh=Mn()+500,yo(s,r)):go=Mr(s,r);t:do try{if(Wt!==0&&Mt!==null){r=Mt;var p=Rn;e:switch(Wt){case 1:Wt=0,Rn=null,vo(s,r,p,1);break;case 2:case 9:if(ry(p)){Wt=0,Rn=null,Qv(r);break}r=function(){Wt!==2&&Wt!==9||se!==s||(Wt=7),Ei(s)},p.then(r,r);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:ry(p)?(Wt=0,Rn=null,Qv(r)):(Wt=0,Rn=null,vo(s,r,p,7));break;case 5:var E=null;switch(Mt.tag){case 26:E=Mt.memoizedState;case 5:case 27:var S=Mt;if(!E||I0(E)){Wt=0,Rn=null;var P=S.sibling;if(P!==null)Mt=P;else{var F=S.return;F!==null?(Mt=F,_h(F)):Mt=null}break e}}Wt=0,Rn=null,vo(s,r,p,5);break;case 6:Wt=0,Rn=null,vo(s,r,p,6);break;case 8:Lg(),me=6;break t;default:throw Error(i(462))}}qw();break}catch(W){qv(s,W)}while(!0);return ts=Jr=null,K.H=u,K.A=g,Xt=l,Mt!==null?0:(se=null,jt=0,Uu(),me)}function qw(){for(;Mt!==null&&!sl();)Kv(Mt)}function Kv(s){var r=bv(s.alternate,s,ls);s.memoizedProps=s.pendingProps,r===null?_h(s):Mt=r}function Qv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=gv(l,r,r.pendingProps,r.type,void 0,jt);break;case 11:r=gv(l,r,r.pendingProps,r.type.render,r.ref,jt);break;case 5:tg(r);default:Ev(l,r),r=Mt=X_(r,ls),r=bv(l,r,ls)}s.memoizedProps=s.pendingProps,r===null?_h(s):Mt=r}function vo(s,r,l,u){ts=Jr=null,tg(r),co=null,ql=0;var g=r.return;try{if(Nw(s,g,r,l,jt)){me=1,lh(s,Ln(l,s.current)),Mt=null;return}}catch(p){if(g!==null)throw Mt=g,p;me=1,lh(s,Ln(l,s.current)),Mt=null;return}r.flags&32768?(qt||u===1?s=!0:go||(jt&536870912)!==0?s=!1:(Hs=s=!0,(u===2||u===9||u===3||u===6)&&(u=Bn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xv(r,s)):_h(r)}function _h(s){var r=s;do{if((r.flags&32768)!==0){Xv(r,Hs);return}s=r.return;var l=Pw(r.alternate,r,ls);if(l!==null){Mt=l;return}if(r=r.sibling,r!==null){Mt=r;return}Mt=r=s}while(r!==null);me===0&&(me=5)}function Xv(s,r){do{var l=Vw(s.alternate,s);if(l!==null){l.flags&=32767,Mt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Mt=s;return}Mt=s=l}while(s!==null);me=6,Mt=null}function Wv(s,r,l,u,g,p,E,S,P){s.cancelPendingCommit=null;do yh();while(Ke!==0);if((Xt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Id,ul(s,l,p,E,S,P),s===se&&(Mt=se=null,jt=0),po=r,Gs=s,_o=l,kg=p,Pg=g,jv=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Qw(Rr,function(){return e0(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,g=at.p,at.p=2,E=Xt,Xt|=4;try{Lw(s,r,l)}finally{Xt=E,at.p=g,K.T=u}}Ke=1,$v(),Zv(),Jv()}}function $v(){if(Ke===1){Ke=0;var s=Gs,r=po,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=K.T,K.T=null;var u=at.p;at.p=2;var g=Xt;Xt|=4;try{Nv(r,s);var p=$g,E=z_(s.containerInfo),S=p.focusedElem,P=p.selectionRange;if(E!==S&&S&&S.ownerDocument&&U_(S.ownerDocument.documentElement,S)){if(P!==null&&Ad(S)){var F=P.start,W=P.end;if(W===void 0&&(W=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(W,S.value.length);else{var et=S.ownerDocument||document,q=et&&et.defaultView||window;if(q.getSelection){var Y=q.getSelection(),Et=S.textContent.length,yt=Math.min(P.start,Et),ee=P.end===void 0?yt:Math.min(P.end,Et);!Y.extend&&yt>ee&&(E=ee,ee=yt,yt=E);var j=L_(S,yt),z=L_(S,ee);if(j&&z&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==z.node||Y.focusOffset!==z.offset)){var H=et.createRange();H.setStart(j.node,j.offset),Y.removeAllRanges(),yt>ee?(Y.addRange(H),Y.extend(z.node,z.offset)):(H.setEnd(z.node,z.offset),Y.addRange(H))}}}}for(et=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&et.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<et.length;S++){var Z=et[S];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Dh=!!Wg,$g=Wg=null}finally{Xt=g,at.p=u,K.T=l}}s.current=r,Ke=2}}function Zv(){if(Ke===2){Ke=0;var s=Gs,r=po,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=K.T,K.T=null;var u=at.p;at.p=2;var g=Xt;Xt|=4;try{Iv(s,r.alternate,r)}finally{Xt=g,at.p=u,K.T=l}}Ke=3}}function Jv(){if(Ke===4||Ke===3){Ke=0,du();var s=Gs,r=po,l=_o,u=jv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ke=5:(Ke=0,po=Gs=null,t0(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(qs=null),Pa(l),r=r.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(de,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=K.T,g=at.p,at.p=2,K.T=null;try{for(var p=s.onRecoverableError,E=0;E<u.length;E++){var S=u[E];p(S.value,{componentStack:S.stack})}}finally{K.T=r,at.p=g}}(_o&3)!==0&&yh(),Ei(s),g=s.pendingLanes,(l&4194090)!==0&&(g&42)!==0?s===Vg?Jl++:(Jl=0,Vg=s):Jl=0,tc(0)}}function t0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Nl(r)))}function yh(s){return $v(),Zv(),Jv(),e0()}function e0(){if(Ke!==5)return!1;var s=Gs,r=kg;kg=0;var l=Pa(_o),u=K.T,g=at.p;try{at.p=32>l?32:l,K.T=null,l=Pg,Pg=null;var p=Gs,E=_o;if(Ke=0,po=Gs=null,_o=0,(Xt&6)!==0)throw Error(i(331));var S=Xt;if(Xt|=4,Uv(p.current),Pv(p,p.current,E,l),Xt=S,tc(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(de,p)}catch{}return!0}finally{at.p=g,K.T=u,t0(s,r)}}function n0(s,r,l){r=Ln(l,r),r=gg(s.stateNode,r,2),s=Ps(s,r,2),s!==null&&(ji(s,2),Ei(s))}function ne(s,r,l){if(s.tag===3)n0(s,s,l);else for(;r!==null;){if(r.tag===3){n0(r,s,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qs===null||!qs.has(u))){s=Ln(l,s),l=av(2),u=Ps(r,l,2),u!==null&&(ov(l,u,r,s),ji(u,2),Ei(u));break}}r=r.return}}function jg(s,r,l){var u=s.pingCache;if(u===null){u=s.pingCache=new jw;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(l)||(Dg=!0,g.add(l),s=Gw.bind(null,s,r,l),r.then(s,s))}function Gw(s,r,l){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,se===s&&(jt&l)===l&&(me===4||me===3&&(jt&62914560)===jt&&300>Mn()-Ng?(Xt&2)===0&&yo(s,0):Mg|=l,mo===jt&&(mo=0)),Ei(s)}function i0(s,r){r===0&&(r=cl()),s=Ja(s,r),s!==null&&(ji(s,r),Ei(s))}function Yw(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),i0(s,l)}function Kw(s,r){var l=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),i0(s,l)}function Qw(s,r){return wr(s,r)}var vh=null,bo=null,Bg=!1,bh=!1,Hg=!1,aa=0;function Ei(s){s!==bo&&s.next===null&&(bo===null?vh=bo=s:bo=bo.next=s),bh=!0,Bg||(Bg=!0,Ww())}function tc(s,r){if(!Hg&&bh){Hg=!0;do for(var l=!1,u=vh;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var p=0;else{var E=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-Je(42|s)+1)-1,p&=g&~(E&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(l=!0,o0(u,p))}else p=jt,p=ka(u,u===se?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Mr(u,p)||(l=!0,o0(u,p));u=u.next}while(l);Hg=!1}}function Xw(){s0()}function s0(){bh=Bg=!1;var s=0;aa!==0&&(sx()&&(s=aa),aa=0);for(var r=Mn(),l=null,u=vh;u!==null;){var g=u.next,p=r0(u,r);p===0?(u.next=null,l===null?vh=g:l.next=g,g===null&&(bo=l)):(l=u,(s!==0||(p&3)!==0)&&(bh=!0)),u=g}tc(s)}function r0(s,r){for(var l=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var E=31-Je(p),S=1<<E,P=g[E];P===-1?((S&l)===0||(S&u)!==0)&&(g[E]=ol(S,r)):P<=r&&(s.expiredLanes|=S),p&=~S}if(r=se,l=jt,l=ka(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===r&&(Wt===2||Wt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&xr(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Mr(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(u!==null&&xr(u),Pa(l)){case 2:case 8:l=Oa;break;case 32:l=Rr;break;case 268435456:l=Na;break;default:l=Rr}return u=a0.bind(null,s),l=wr(l,u),s.callbackPriority=r,s.callbackNode=l,r}return u!==null&&u!==null&&xr(u),s.callbackPriority=2,s.callbackNode=null,2}function a0(s,r){if(Ke!==0&&Ke!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(yh()&&s.callbackNode!==l)return null;var u=jt;return u=ka(s,s===se?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Hv(s,u,r),r0(s,Mn()),s.callbackNode!=null&&s.callbackNode===l?a0.bind(null,s):null)}function o0(s,r){if(yh())return null;Hv(s,r,!0)}function Ww(){ax(function(){(Xt&6)!==0?wr(rl,Xw):s0()})}function Fg(){return aa===0&&(aa=ll()),aa}function l0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ba(""+s)}function c0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function $w(s,r,l,u,g){if(r==="submit"&&l&&l.stateNode===g){var p=l0((g[Te]||null).action),E=u.submitter;E&&(r=(r=E[Te]||null)?l0(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var S=new Ha("action","action",null,u,g);s.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(aa!==0){var P=E?c0(g,E):new FormData(g);cg(l,{pending:!0,data:P,method:g.method,action:p},null,P)}}else typeof p=="function"&&(S.preventDefault(),P=E?c0(g,E):new FormData(g),cg(l,{pending:!0,data:P,method:g.method,action:p},p,P))},currentTarget:g}]})}}for(var qg=0;qg<Cd.length;qg++){var Gg=Cd[qg],Zw=Gg.toLowerCase(),Jw=Gg[0].toUpperCase()+Gg.slice(1);ti(Zw,"on"+Jw)}ti(H_,"onAnimationEnd"),ti(F_,"onAnimationIteration"),ti(q_,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(pw,"onTransitionRun"),ti(_w,"onTransitionStart"),ti(yw,"onTransitionCancel"),ti(G_,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function u0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],g=u.event;u=u.listeners;t:{var p=void 0;if(r)for(var E=u.length-1;0<=E;E--){var S=u[E],P=S.instance,F=S.currentTarget;if(S=S.listener,P!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=F;try{p(g)}catch(W){oh(W)}g.currentTarget=null,p=P}else for(E=0;E<u.length;E++){if(S=u[E],P=S.instance,F=S.currentTarget,S=S.listener,P!==p&&g.isPropagationStopped())break t;p=S,g.currentTarget=F;try{p(g)}catch(W){oh(W)}g.currentTarget=null,p=P}}}}function Ot(s,r){var l=r[fl];l===void 0&&(l=r[fl]=new Set);var u=s+"__bubble";l.has(u)||(h0(r,s,2,!1),l.add(u))}function Yg(s,r,l){var u=0;r&&(u|=4),h0(l,s,u,r)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Kg(s){if(!s[Th]){s[Th]=!0,dl.forEach(function(l){l!=="selectionchange"&&(tx.has(l)||Yg(l,!1,s),Yg(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Th]||(r[Th]=!0,Yg("selectionchange",!1,r))}}function h0(s,r,l,u){switch(P0(r)){case 2:var g=Rx;break;case 8:g=Cx;break;default:g=om}l=g.bind(null,r,l,s),g=void 0,!Pn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(r,l,{capture:!0,passive:g}):s.addEventListener(r,l,!0):g!==void 0?s.addEventListener(r,l,{passive:g}):s.addEventListener(r,l,!1)}function Qg(s,r,l,u,g){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===g)break;if(E===4)for(E=u.return;E!==null;){var P=E.tag;if((P===3||P===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;S!==null;){if(E=Bi(S),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){u=p=E;continue t}S=S.parentNode}}u=u.return}Su(function(){var F=p,W=kn(l),et=[];t:{var q=Y_.get(s);if(q!==void 0){var Y=Ha,Et=s;switch(s){case"keypress":if(di(l)===0)break t;case"keydown":case"keyup":Y=Qa;break;case"focusin":Et="focus",Y=Ga;break;case"focusout":Et="blur",Y=Ga;break;case"beforeblur":case"afterblur":Y=Ga;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Mu;break;case H_:case F_:case q_:Y=Ya;break;case G_:Y=Nu;break;case"scroll":case"scrollend":Y=Au;break;case"wheel":Y=Xa;break;case"copy":case"cut":case"paste":Y=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=wl;break;case"toggle":case"beforetoggle":Y=Pu}var yt=(r&4)!==0,ee=!yt&&(s==="scroll"||s==="scrollend"),j=yt?q!==null?q+"Capture":null:q;yt=[];for(var z=F,H;z!==null;){var Z=z;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||j===null||(Z=zr(z,j),Z!=null&&yt.push(nc(z,Z,H))),ee)break;z=z.return}0<yt.length&&(q=new Y(q,Et,null,l,W),et.push({event:q,listeners:yt}))}}if((r&7)===0){t:{if(q=s==="mouseover"||s==="pointerover",Y=s==="mouseout"||s==="pointerout",q&&l!==Gi&&(Et=l.relatedTarget||l.fromElement)&&(Bi(Et)||Et[On]))break t;if((Y||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,Y?(Et=l.relatedTarget||l.toElement,Y=F,Et=Et?Bi(Et):null,Et!==null&&(ee=o(Et),yt=Et.tag,Et!==ee||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(Y=null,Et=F),Y!==Et)){if(yt=Vn,Z="onMouseLeave",j="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(yt=wl,Z="onPointerLeave",j="onPointerEnter",z="pointer"),ee=Y==null?q:ci(Y),H=Et==null?q:ci(Et),q=new yt(Z,z+"leave",Y,l,W),q.target=ee,q.relatedTarget=H,Z=null,Bi(W)===F&&(yt=new yt(j,z+"enter",Et,l,W),yt.target=H,yt.relatedTarget=ee,Z=yt),ee=Z,Y&&Et)e:{for(yt=Y,j=Et,z=0,H=yt;H;H=To(H))z++;for(H=0,Z=j;Z;Z=To(Z))H++;for(;0<z-H;)yt=To(yt),z--;for(;0<H-z;)j=To(j),H--;for(;z--;){if(yt===j||j!==null&&yt===j.alternate)break e;yt=To(yt),j=To(j)}yt=null}else yt=null;Y!==null&&f0(et,q,Y,yt,!1),Et!==null&&ee!==null&&f0(et,ee,Et,yt,!0)}}t:{if(q=F?ci(F):window,Y=q.nodeName&&q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&q.type==="file")var ft=M_;else if(Me(q))if(O_)ft=dw;else{ft=hw;var Dt=uw}else Y=q.nodeName,!Y||Y.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?F&&yl(F.elementType)&&(ft=M_):ft=fw;if(ft&&(ft=ft(s,F))){Wi(et,ft,l,W);break t}Dt&&Dt(s,q,F),s==="focusout"&&F&&q.type==="number"&&F.memoizedProps.value!=null&&Ds(q,"number",q.value)}switch(Dt=F?ci(F):window,s){case"focusin":(Me(Dt)||Dt.contentEditable==="true")&&(Wa=Dt,wd=F,Cl=null);break;case"focusout":Cl=wd=Wa=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,j_(et,l,W);break;case"selectionchange":if(mw)break;case"keydown":case"keyup":j_(et,l,W)}var mt;if(pi)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Ut?Q(s,l)&&(vt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(b&&l.locale!=="ko"&&(Ut||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Ut&&(mt=bl()):(fi=W,Ms="value"in fi?fi.value:fi.textContent,Ut=!0)),Dt=Eh(F,vt),0<Dt.length&&(vt=new Sl(vt,s,null,l,W),et.push({event:vt,listeners:Dt}),mt?vt.data=mt:(mt=lt(l),mt!==null&&(vt.data=mt)))),(mt=y?De(s,l):zt(s,l))&&(vt=Eh(F,"onBeforeInput"),0<vt.length&&(Dt=new Sl("onBeforeInput","beforeinput",null,l,W),et.push({event:Dt,listeners:vt}),Dt.data=mt)),$w(et,s,F,l,W)}u0(et,r)})}function nc(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Eh(s,r){for(var l=r+"Capture",u=[];s!==null;){var g=s,p=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||p===null||(g=zr(s,l),g!=null&&u.unshift(nc(s,g,p)),g=zr(s,r),g!=null&&u.push(nc(s,g,p))),s.tag===3)return u;s=s.return}return[]}function To(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function f0(s,r,l,u,g){for(var p=r._reactName,E=[];l!==null&&l!==u;){var S=l,P=S.alternate,F=S.stateNode;if(S=S.tag,P!==null&&P===u)break;S!==5&&S!==26&&S!==27||F===null||(P=F,g?(F=zr(l,p),F!=null&&E.unshift(nc(l,F,P))):g||(F=zr(l,p),F!=null&&E.push(nc(l,F,P)))),l=l.return}E.length!==0&&s.push({event:r,listeners:E})}var ex=/\r\n?/g,nx=/\u0000|\uFFFD/g;function d0(s){return(typeof s=="string"?s:""+s).replace(ex,`
`).replace(nx,"")}function g0(s,r){return r=d0(r),d0(s)===r}function Sh(){}function te(s,r,l,u,g,p){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Nn(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Nn(s,""+u);break;case"className":ui(s,"class",u);break;case"tabIndex":ui(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ui(s,l,u);break;case"style":_l(s,u,p);break;case"data":if(r!=="object"){ui(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Ba(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(l==="formAction"?(r!=="input"&&te(s,r,"name",g.name,g,null),te(s,r,"formEncType",g.formEncType,g,null),te(s,r,"formMethod",g.formMethod,g,null),te(s,r,"formTarget",g.formTarget,g,null)):(te(s,r,"encType",g.encType,g,null),te(s,r,"method",g.method,g,null),te(s,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Ba(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Sh);break;case"onScroll":u!=null&&Ot("scroll",s);break;case"onScrollEnd":u!=null&&Ot("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Ba(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":Ot("beforetoggle",s),Ot("toggle",s),Is(s,"popover",u);break;case"xlinkActuate":qe(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":qe(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":qe(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":qe(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":qe(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":qe(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":qe(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":qe(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":qe(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Is(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=yd.get(l)||l,Is(s,l,u))}}function Xg(s,r,l,u,g,p){switch(l){case"style":_l(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?Nn(s,u):(typeof u=="number"||typeof u=="bigint")&&Nn(s,""+u);break;case"onScroll":u!=null&&Ot("scroll",s);break;case"onScrollEnd":u!=null&&Ot("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Sh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Va.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),p=s[Te]||null,p=p!=null?p[l]:null,typeof p=="function"&&s.removeEventListener(r,p,g),typeof u=="function")){typeof p!="function"&&p!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,u,g);break t}l in s?s[l]=u:u===!0?s.setAttribute(l,""):Is(s,l,u)}}}function Qe(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",s),Ot("load",s);var u=!1,g=!1,p;for(p in l)if(l.hasOwnProperty(p)){var E=l[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,p,E,l,null)}}g&&te(s,r,"srcSet",l.srcSet,l,null),u&&te(s,r,"src",l.src,l,null);return;case"input":Ot("invalid",s);var S=p=E=g=null,P=null,F=null;for(u in l)if(l.hasOwnProperty(u)){var W=l[u];if(W!=null)switch(u){case"name":g=W;break;case"type":E=W;break;case"checked":P=W;break;case"defaultChecked":F=W;break;case"value":p=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:te(s,r,u,W,l,null)}}Vr(s,p,S,P,F,E,g,!1),ja(s);return;case"select":Ot("invalid",s),u=E=p=null;for(g in l)if(l.hasOwnProperty(g)&&(S=l[g],S!=null))switch(g){case"value":p=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:te(s,r,g,S,l,null)}r=p,l=E,s.multiple=!!u,r!=null?qi(s,!!u,r,!1):l!=null&&qi(s,!!u,l,!0);return;case"textarea":Ot("invalid",s),p=g=u=null;for(E in l)if(l.hasOwnProperty(E)&&(S=l[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":g=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:te(s,r,E,S,l,null)}Lr(s,u,g,p),ja(s);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(u=l[P],u!=null))switch(P){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(s,r,P,u,l,null)}return;case"dialog":Ot("beforetoggle",s),Ot("toggle",s),Ot("cancel",s),Ot("close",s);break;case"iframe":case"object":Ot("load",s);break;case"video":case"audio":for(u=0;u<ec.length;u++)Ot(ec[u],s);break;case"image":Ot("error",s),Ot("load",s);break;case"details":Ot("toggle",s);break;case"embed":case"source":case"link":Ot("error",s),Ot("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(u=l[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,F,u,l,null)}return;default:if(yl(r)){for(W in l)l.hasOwnProperty(W)&&(u=l[W],u!==void 0&&Xg(s,r,W,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&te(s,r,S,u,l,null))}function ix(s,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,p=null,E=null,S=null,P=null,F=null,W=null;for(Y in l){var et=l[Y];if(l.hasOwnProperty(Y)&&et!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":P=et;default:u.hasOwnProperty(Y)||te(s,r,Y,null,u,et)}}for(var q in u){var Y=u[q];if(et=l[q],u.hasOwnProperty(q)&&(Y!=null||et!=null))switch(q){case"type":p=Y;break;case"name":g=Y;break;case"checked":F=Y;break;case"defaultChecked":W=Y;break;case"value":E=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:Y!==et&&te(s,r,q,Y,u,et)}}En(s,E,S,P,F,W,p,g);return;case"select":Y=E=S=q=null;for(p in l)if(P=l[p],l.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":Y=P;default:u.hasOwnProperty(p)||te(s,r,p,null,u,P)}for(g in u)if(p=u[g],P=l[g],u.hasOwnProperty(g)&&(p!=null||P!=null))switch(g){case"value":q=p;break;case"defaultValue":S=p;break;case"multiple":E=p;default:p!==P&&te(s,r,g,p,u,P)}r=S,l=E,u=Y,q!=null?qi(s,!!l,q,!1):!!u!=!!l&&(r!=null?qi(s,!!l,r,!0):qi(s,!!l,l?[]:"",!1));return;case"textarea":Y=q=null;for(S in l)if(g=l[S],l.hasOwnProperty(S)&&g!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:te(s,r,S,null,u,g)}for(E in u)if(g=u[E],p=l[E],u.hasOwnProperty(E)&&(g!=null||p!=null))switch(E){case"value":q=g;break;case"defaultValue":Y=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==p&&te(s,r,E,g,u,p)}Zt(s,q,Y);return;case"option":for(var Et in l)if(q=l[Et],l.hasOwnProperty(Et)&&q!=null&&!u.hasOwnProperty(Et))switch(Et){case"selected":s.selected=!1;break;default:te(s,r,Et,null,u,q)}for(P in u)if(q=u[P],Y=l[P],u.hasOwnProperty(P)&&q!==Y&&(q!=null||Y!=null))switch(P){case"selected":s.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:te(s,r,P,q,u,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in l)q=l[yt],l.hasOwnProperty(yt)&&q!=null&&!u.hasOwnProperty(yt)&&te(s,r,yt,null,u,q);for(F in u)if(q=u[F],Y=l[F],u.hasOwnProperty(F)&&q!==Y&&(q!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,r));break;default:te(s,r,F,q,u,Y)}return;default:if(yl(r)){for(var ee in l)q=l[ee],l.hasOwnProperty(ee)&&q!==void 0&&!u.hasOwnProperty(ee)&&Xg(s,r,ee,void 0,u,q);for(W in u)q=u[W],Y=l[W],!u.hasOwnProperty(W)||q===Y||q===void 0&&Y===void 0||Xg(s,r,W,q,u,Y);return}}for(var j in l)q=l[j],l.hasOwnProperty(j)&&q!=null&&!u.hasOwnProperty(j)&&te(s,r,j,null,u,q);for(et in u)q=u[et],Y=l[et],!u.hasOwnProperty(et)||q===Y||q==null&&Y==null||te(s,r,et,q,u,Y)}var Wg=null,$g=null;function Ah(s){return s.nodeType===9?s:s.ownerDocument}function m0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Zg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jg=null;function sx(){var s=window.event;return s&&s.type==="popstate"?s===Jg?!1:(Jg=s,!0):(Jg=null,!1)}var _0=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(s){return y0.resolve(null).then(s).catch(ox)}:_0;function ox(s){setTimeout(function(){throw s})}function Ks(s){return s==="head"}function v0(s,r){var l=r,u=0,g=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(0<u&&8>u){l=u;var E=s.ownerDocument;if(l&1&&ic(E.documentElement),l&2&&ic(E.body),l&4)for(l=E.head,ic(l),E=l.firstChild;E;){var S=E.nextSibling,P=E.nodeName;E[Or]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=S}}if(g===0){s.removeChild(p),hc(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:u=l.charCodeAt(0)-48;else u=0;l=p}while(l);hc(r)}function tm(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":tm(l),Cs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function lx(s,r,l,u){for(;s.nodeType===1;){var g=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Or])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=ni(s.nextSibling),s===null)break}return null}function cx(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ni(s.nextSibling),s===null))return null;return s}function em(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function ux(s,r){var l=s.ownerDocument;if(s.data!=="$?"||l.readyState==="complete")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ni(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var nm=null;function b0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return s;r--}else l==="/$"&&r++}s=s.previousSibling}return null}function T0(s,r,l){switch(r=Ah(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function ic(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Cs(s)}var Fn=new Map,E0=new Set;function wh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var cs=at.d;at.d={f:hx,r:fx,D:dx,C:gx,L:mx,m:px,X:yx,S:_x,M:vx};function hx(){var s=cs.f(),r=ph();return s||r}function fx(s){var r=li(s);r!==null&&r.tag===5&&r.type==="form"?Hy(r):cs.r(s)}var Eo=typeof document>"u"?null:document;function S0(s,r,l){var u=Eo;if(u&&typeof r=="string"&&r){var g=Ee(r);g='link[rel="'+s+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),E0.has(g)||(E0.add(g),s={rel:s,crossOrigin:l,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Qe(r,"link",s),pe(r),u.head.appendChild(r)))}}function dx(s){cs.D(s),S0("dns-prefetch",s,null)}function gx(s,r){cs.C(s,r),S0("preconnect",s,r)}function mx(s,r,l){cs.L(s,r,l);var u=Eo;if(u&&s&&r){var g='link[rel="preload"][as="'+Ee(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Ee(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Ee(l.imageSizes)+'"]')):g+='[href="'+Ee(s)+'"]';var p=g;switch(r){case"style":p=So(s);break;case"script":p=Ao(s)}Fn.has(p)||(s=_({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Fn.set(p,s),u.querySelector(g)!==null||r==="style"&&u.querySelector(sc(p))||r==="script"&&u.querySelector(rc(p))||(r=u.createElement("link"),Qe(r,"link",s),pe(r),u.head.appendChild(r)))}}function px(s,r){cs.m(s,r);var l=Eo;if(l&&s){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Ee(u)+'"][href="'+Ee(s)+'"]',p=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ao(s)}if(!Fn.has(p)&&(s=_({rel:"modulepreload",href:s},r),Fn.set(p,s),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(rc(p)))return}u=l.createElement("link"),Qe(u,"link",s),pe(u),l.head.appendChild(u)}}}function _x(s,r,l){cs.S(s,r,l);var u=Eo;if(u&&s){var g=cn(u).hoistableStyles,p=So(s);r=r||"default";var E=g.get(p);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(sc(p)))S.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Fn.get(p))&&im(s,l);var P=E=u.createElement("link");pe(P),Qe(P,"link",s),P._p=new Promise(function(F,W){P.onload=F,P.onerror=W}),P.addEventListener("load",function(){S.loading|=1}),P.addEventListener("error",function(){S.loading|=2}),S.loading|=4,xh(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:S},g.set(p,E)}}}function yx(s,r){cs.X(s,r);var l=Eo;if(l&&s){var u=cn(l).hoistableScripts,g=Ao(s),p=u.get(g);p||(p=l.querySelector(rc(g)),p||(s=_({src:s,async:!0},r),(r=Fn.get(g))&&sm(s,r),p=l.createElement("script"),pe(p),Qe(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function vx(s,r){cs.M(s,r);var l=Eo;if(l&&s){var u=cn(l).hoistableScripts,g=Ao(s),p=u.get(g);p||(p=l.querySelector(rc(g)),p||(s=_({src:s,async:!0,type:"module"},r),(r=Fn.get(g))&&sm(s,r),p=l.createElement("script"),pe(p),Qe(p,"link",s),l.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(g,p))}}function A0(s,r,l,u){var g=(g=_t.current)?wh(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=So(l.href),l=cn(g).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=So(l.href);var p=cn(g).hoistableStyles,E=p.get(s);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,E),(p=g.querySelector(sc(s)))&&!p._p&&(E.instance=p,E.state.loading=5),Fn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Fn.set(s,l),p||bx(g,s,l,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ao(l),l=cn(g).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function So(s){return'href="'+Ee(s)+'"'}function sc(s){return'link[rel="stylesheet"]['+s+"]"}function w0(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function bx(s,r,l,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Qe(r,"link",l),pe(r),s.head.appendChild(r))}function Ao(s){return'[src="'+Ee(s)+'"]'}function rc(s){return"script[async]"+s}function x0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+Ee(l.href)+'"]');if(u)return r.instance=u,pe(u),u;var g=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),pe(u),Qe(u,"style",g),xh(u,l.precedence,s),r.instance=u;case"stylesheet":g=So(l.href);var p=s.querySelector(sc(g));if(p)return r.state.loading|=4,r.instance=p,pe(p),p;u=w0(l),(g=Fn.get(g))&&im(u,g),p=(s.ownerDocument||s).createElement("link"),pe(p);var E=p;return E._p=new Promise(function(S,P){E.onload=S,E.onerror=P}),Qe(p,"link",u),r.state.loading|=4,xh(p,l.precedence,s),r.instance=p;case"script":return p=Ao(l.src),(g=s.querySelector(rc(p)))?(r.instance=g,pe(g),g):(u=l,(g=Fn.get(p))&&(u=_({},l),sm(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),pe(g),Qe(g,"link",u),s.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,xh(u,l.precedence,s));return r.instance}function xh(s,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,p=g,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===r)p=S;else if(p!==g)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function im(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function sm(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Rh=null;function R0(s,r,l){if(Rh===null){var u=new Map,g=Rh=new Map;g.set(l,u)}else g=Rh,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),g=0;g<l.length;g++){var p=l[g];if(!(p[Or]||p[Ie]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=s+E;var S=u.get(E);S?S.push(p):u.set(E,[p])}}return u}function C0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function Tx(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function I0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ac=null;function Ex(){}function Sx(s,r,l){if(ac===null)throw Error(i(475));var u=ac;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=So(l.href),p=s.querySelector(sc(g));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=Ch.bind(u),s.then(u,u)),r.state.loading|=4,r.instance=p,pe(p);return}p=s.ownerDocument||s,l=w0(l),(g=Fn.get(g))&&im(l,g),p=p.createElement("link"),pe(p);var E=p;E._p=new Promise(function(S,P){E.onload=S,E.onerror=P}),Qe(p,"link",l),r.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(u.count++,r=Ch.bind(u),s.addEventListener("load",r),s.addEventListener("error",r))}}function Ax(){if(ac===null)throw Error(i(475));var s=ac;return s.stylesheets&&s.count===0&&rm(s,s.stylesheets),0<s.count?function(r){var l=setTimeout(function(){if(s.stylesheets&&rm(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(l)}}:null}function Ch(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ih=null;function rm(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ih=new Map,r.forEach(wx,s),Ih=null,Ch.call(s))}function wx(s,r){if(!(r.state.loading&4)){var l=Ih.get(s);if(l)var u=l.get(null);else{l=new Map,Ih.set(s,l);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<g.length;p++){var E=g[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}g=r.instance,E=g.getAttribute("data-precedence"),p=l.get(E)||u,p===u&&l.set(null,g),l.set(E,g),this.count++,u=Ch.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),p?p.parentNode.insertBefore(g,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),r.state.loading|=4}}var oc={$$typeof:tt,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function xx(s,r,l,u,g,p,E,S){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function D0(s,r,l,u,g,p,E,S,P,F,W,et){return s=new xx(s,r,l,E,S,P,F,et),r=1,p===!0&&(r|=24),p=An(3,null,null,r),s.current=p,p.stateNode=s,r=jd(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:r},qd(p),s}function M0(s){return s?(s=to,s):to}function O0(s,r,l,u,g,p){g=M0(g),u.context===null?u.context=g:u.pendingContext=g,u=ks(r),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Ps(s,u,r),l!==null&&(In(l,s,r),Ll(l,s,r))}function N0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function am(s,r){N0(s,r),(s=s.alternate)&&N0(s,r)}function k0(s){if(s.tag===13){var r=Ja(s,67108864);r!==null&&In(r,s,67108864),am(s,67108864)}}var Dh=!0;function Rx(s,r,l,u){var g=K.T;K.T=null;var p=at.p;try{at.p=2,om(s,r,l,u)}finally{at.p=p,K.T=g}}function Cx(s,r,l,u){var g=K.T;K.T=null;var p=at.p;try{at.p=8,om(s,r,l,u)}finally{at.p=p,K.T=g}}function om(s,r,l,u){if(Dh){var g=lm(u);if(g===null)Qg(s,r,u,Mh,l),V0(s,u);else if(Dx(g,s,r,l,u))u.stopPropagation();else if(V0(s,u),r&4&&-1<Ix.indexOf(s)){for(;g!==null;){var p=li(g);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=$n(p.pendingLanes);if(E!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var P=1<<31-Je(E);S.entanglements[1]|=P,E&=~P}Ei(p),(Xt&6)===0&&(gh=Mn()+500,tc(0))}}break;case 13:S=Ja(p,2),S!==null&&In(S,p,2),ph(),am(p,2)}if(p=lm(u),p===null&&Qg(s,r,u,Mh,l),p===g)break;g=p}g!==null&&u.stopPropagation()}else Qg(s,r,u,null,l)}}function lm(s){return s=kn(s),cm(s)}var Mh=null;function cm(s){if(Mh=null,s=Bi(s),s!==null){var r=o(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=c(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Mh=s,null}function P0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fd()){case rl:return 2;case Oa:return 8;case Rr:case dd:return 32;case Na:return 268435456;default:return 32}default:return 32}}var um=!1,Qs=null,Xs=null,Ws=null,lc=new Map,cc=new Map,$s=[],Ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V0(s,r){switch(s){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":lc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(r.pointerId)}}function uc(s,r,l,u,g,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[g]},r!==null&&(r=li(r),r!==null&&k0(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),s)}function Dx(s,r,l,u,g){switch(r){case"focusin":return Qs=uc(Qs,s,r,l,u,g),!0;case"dragenter":return Xs=uc(Xs,s,r,l,u,g),!0;case"mouseover":return Ws=uc(Ws,s,r,l,u,g),!0;case"pointerover":var p=g.pointerId;return lc.set(p,uc(lc.get(p)||null,s,r,l,u,g)),!0;case"gotpointercapture":return p=g.pointerId,cc.set(p,uc(cc.get(p)||null,s,r,l,u,g)),!0}return!1}function L0(s){var r=Bi(s.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){s.blockedOn=r,pu(s.priority,function(){if(l.tag===13){var u=Cn();u=ws(u);var g=Ja(l,u);g!==null&&In(g,l,u),am(l,u)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Oh(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=lm(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);Gi=u,l.target.dispatchEvent(u),Gi=null}else return r=li(l),r!==null&&k0(r),s.blockedOn=l,!1;r.shift()}return!0}function U0(s,r,l){Oh(s)&&l.delete(r)}function Mx(){um=!1,Qs!==null&&Oh(Qs)&&(Qs=null),Xs!==null&&Oh(Xs)&&(Xs=null),Ws!==null&&Oh(Ws)&&(Ws=null),lc.forEach(U0),cc.forEach(U0)}function Nh(s,r){s.blockedOn===r&&(s.blockedOn=null,um||(um=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mx)))}var kh=null;function z0(s){kh!==s&&(kh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kh===s&&(kh=null);for(var r=0;r<s.length;r+=3){var l=s[r],u=s[r+1],g=s[r+2];if(typeof u!="function"){if(cm(u||l)===null)continue;break}var p=li(l);p!==null&&(s.splice(r,3),r-=3,cg(p,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function hc(s){function r(P){return Nh(P,s)}Qs!==null&&Nh(Qs,s),Xs!==null&&Nh(Xs,s),Ws!==null&&Nh(Ws,s),lc.forEach(r),cc.forEach(r);for(var l=0;l<$s.length;l++){var u=$s[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<$s.length&&(l=$s[0],l.blockedOn===null);)L0(l),l.blockedOn===null&&$s.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],p=l[u+1],E=g[Te]||null;if(typeof p=="function")E||z0(l);else if(E){var S=null;if(p&&p.hasAttribute("formAction")){if(g=p,E=p[Te]||null)S=E.formAction;else if(cm(g)!==null)continue}else S=E.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),z0(l)}}}function hm(s){this._internalRoot=s}Ph.prototype.render=hm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,u=Cn();O0(l,u,s,r,null,null)},Ph.prototype.unmount=hm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;O0(s.current,2,null,s,null,null),ph(),r[On]=null}};function Ph(s){this._internalRoot=s}Ph.prototype.unstable_scheduleHydration=function(s){if(s){var r=xs();s={blockedOn:null,target:s,priority:r};for(var l=0;l<$s.length&&r!==0&&r<$s[l].priority;l++);$s.splice(l,0,s),l===0&&L0(s)}};var j0=t.version;if(j0!=="19.1.1")throw Error(i(527,j0,"19.1.1"));at.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var Ox={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{de=Vh.inject(Ox),Qt=Vh}catch{}}return dc.createRoot=function(s,r){if(!a(s))throw Error(i(299));var l=!1,u="",g=nv,p=iv,E=sv,S=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(S=r.unstable_transitionCallbacks)),r=D0(s,1,!1,null,null,l,u,g,p,E,S,null),s[On]=r.current,Kg(s),new hm(r)},dc.hydrateRoot=function(s,r,l){if(!a(s))throw Error(i(299));var u=!1,g="",p=nv,E=iv,S=sv,P=null,F=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&(F=l.formState)),r=D0(s,1,!0,r,l??null,u,g,p,E,S,P,F),r.context=M0(null),l=r.current,u=Cn(),u=ws(u),g=ks(u),g.callback=null,Ps(l,g,u),l=u,r.current.lanes=l,ji(r,l),Ei(r),s[On]=r.current,Kg(s),new Ph(r)},dc.version="19.1.1",dc}var W0;function Fx(){if(W0)return gm.exports;W0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),gm.exports=Hx(),gm.exports}var qx=Fx();const Gx=()=>{};var $0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},Yx=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const a=n[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[e++];t[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[e++],c=n[e++],h=n[e++],d=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return t.join("")},zE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,h=c?n[a+1]:0,d=a+2<n.length,m=d?n[a+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,A=m&63;d||(A=64,c||(T=64)),i.push(e[_],e[v],e[T],e[A])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(UE(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Yx(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=e[n.charAt(a++)],h=a<n.length?e[n.charAt(a)]:0;++a;const m=a<n.length?e[n.charAt(a)]:64;++a;const v=a<n.length?e[n.charAt(a)]:64;if(++a,o==null||h==null||m==null||v==null)throw new Kx;const T=o<<2|h>>4;if(i.push(T),m!==64){const A=h<<4&240|m>>2;if(i.push(A),v!==64){const C=m<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Kx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qx=function(n){const t=UE(n);return zE.encodeByteArray(t,!0)},pf=function(n){return Qx(n).replace(/\./g,"")},jE=function(n){try{return zE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=()=>Xx().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof $0>"u")return;const n=$0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Zx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&jE(n[1]);return t&&JSON.parse(t)},Hf=()=>{try{return Gx()||Wx()||$x()||Zx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BE=n=>Hf()?.emulatorHosts?.[n],Jx=n=>{const t=BE(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},HE=()=>Hf()?.config,FE=n=>Hf()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[pf(JSON.stringify(e)),pf(JSON.stringify(c)),""].join(".")}const Rc={};function nR(){const n={prod:[],emulator:[]};for(const t of Object.keys(Rc))Rc[t]?n.emulator.push(t):n.prod.push(t);return n}function iR(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let Z0=!1;function GE(n,t){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||Rc[n]===t||Rc[n]||Z0)return;Rc[n]=t;function e(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=nR().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function d(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Z0=!0,c()},T}function _(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=iR(i),A=e("text"),C=document.getElementById(A)||document.createElement("span"),k=e("learnmore"),M=document.getElementById(k)||document.createElement("a"),G=e("preprendIcon"),$=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const tt=T.element;h(tt),_(M,k);const st=m();d($,G),tt.append($,C,M,st),document.body.appendChild(tt)}o?(C.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function rR(){const n=Hf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uR(){return!rR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hR(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="FirebaseError";class Ss extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=dR,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,o=this.errors[t],c=o?gR(o,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Ss(a,h,i)}}function gR(n,t){return n.replace(mR,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const mR=/\{\$([^}]+)}/g;function pR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ta(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const o=n[a],c=t[a];if(J0(o)&&J0(c)){if(!Ta(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function J0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function _R(n,t){const e=new yR(n,t);return e.subscribe.bind(e)}class yR{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");vR(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=ym),a.error===void 0&&(a.error=ym),a.complete===void 0&&(a.complete=ym);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vR(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(n){return n&&n._delegate?n._delegate:n}class Ea{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new tR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ER(t))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(t=ua){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ua){return this.instances.has(t)}getOptions(t=ua){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&t(o,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TR(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ua){return this.component?this.component.multipleInstances?t:ua:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TR(n){return n===ua?void 0:n}function ER(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new bR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(kt||(kt={}));const AR={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},wR=kt.INFO,xR={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},RR=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),a=xR[t];if(a)console[a](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Tp{constructor(t){this.name=t,this._logLevel=wR,this._logHandler=RR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?AR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const CR=(n,t)=>t.some(e=>n instanceof e);let tb,eb;function IR(){return tb||(tb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DR(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YE=new WeakMap,zm=new WeakMap,KE=new WeakMap,vm=new WeakMap,Ep=new WeakMap;function MR(n){const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(or(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&YE.set(e,n)}).catch(()=>{}),Ep.set(t,n),t}function OR(n){if(zm.has(n))return;const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});zm.set(n,t)}let jm={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return zm.get(n);if(t==="objectStoreNames")return n.objectStoreNames||KE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return or(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function NR(n){jm=n(jm)}function kR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(bm(this),t,...e);return KE.set(i,t.sort?t.sort():[t]),or(i)}:DR().includes(n)?function(...t){return n.apply(bm(this),t),or(YE.get(this))}:function(...t){return or(n.apply(bm(this),t))}}function PR(n){return typeof n=="function"?kR(n):(n instanceof IDBTransaction&&OR(n),CR(n,IR())?new Proxy(n,jm):n)}function or(n){if(n instanceof IDBRequest)return MR(n);if(vm.has(n))return vm.get(n);const t=PR(n);return t!==n&&(vm.set(n,t),Ep.set(t,n)),t}const bm=n=>Ep.get(n);function VR(n,t,{blocked:e,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(n,t),h=or(c);return i&&c.addEventListener("upgradeneeded",d=>{i(or(c.result),d.oldVersion,d.newVersion,or(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),a&&d.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const LR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],Tm=new Map;function nb(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Tm.get(t))return Tm.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=UR.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||LR.includes(e)))return;const o=async function(c,...h){const d=this.transaction(c,a?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[e](...h),a&&d.done]))[0]};return Tm.set(t,o),o}NR(n=>({...n,get:(t,e,i)=>nb(t,e)||n.get(t,e,i),has:(t,e)=>!!nb(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(jR(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function jR(n){return n.getComponent()?.type==="VERSION"}const Bm="@firebase/app",ib="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Tp("@firebase/app"),BR="@firebase/app-compat",HR="@firebase/analytics-compat",FR="@firebase/analytics",qR="@firebase/app-check-compat",GR="@firebase/app-check",YR="@firebase/auth",KR="@firebase/auth-compat",QR="@firebase/database",XR="@firebase/data-connect",WR="@firebase/database-compat",$R="@firebase/functions",ZR="@firebase/functions-compat",JR="@firebase/installations",tC="@firebase/installations-compat",eC="@firebase/messaging",nC="@firebase/messaging-compat",iC="@firebase/performance",sC="@firebase/performance-compat",rC="@firebase/remote-config",aC="@firebase/remote-config-compat",oC="@firebase/storage",lC="@firebase/storage-compat",cC="@firebase/firestore",uC="@firebase/ai",hC="@firebase/firestore-compat",fC="firebase",dC="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="[DEFAULT]",gC={[Bm]:"fire-core",[BR]:"fire-core-compat",[FR]:"fire-analytics",[HR]:"fire-analytics-compat",[GR]:"fire-app-check",[qR]:"fire-app-check-compat",[YR]:"fire-auth",[KR]:"fire-auth-compat",[QR]:"fire-rtdb",[XR]:"fire-data-connect",[WR]:"fire-rtdb-compat",[$R]:"fire-fn",[ZR]:"fire-fn-compat",[JR]:"fire-iid",[tC]:"fire-iid-compat",[eC]:"fire-fcm",[nC]:"fire-fcm-compat",[iC]:"fire-perf",[sC]:"fire-perf-compat",[rC]:"fire-rc",[aC]:"fire-rc-compat",[oC]:"fire-gcs",[lC]:"fire-gcs-compat",[cC]:"fire-fst",[hC]:"fire-fst-compat",[uC]:"fire-vertex","fire-js":"fire-js",[fC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new Map,mC=new Map,Fm=new Map;function sb(n,t){try{n.container.addComponent(t)}catch(e){_s.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Vo(n){const t=n.name;if(Fm.has(t))return _s.debug(`There were multiple attempts to register component ${t}.`),!1;Fm.set(t,n);for(const e of _f.values())sb(e,n);for(const e of mC.values())sb(e,n);return!0}function Sp(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new tu("app","Firebase",pC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=dC;function QE(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Hm,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw lr.create("bad-app-name",{appName:String(a)});if(e||(e=HE()),!e)throw lr.create("no-options");const o=_f.get(a);if(o){if(Ta(e,o.options)&&Ta(i,o.config))return o;throw lr.create("duplicate-app",{appName:a})}const c=new SR(a);for(const d of Fm.values())c.addComponent(d);const h=new _C(e,i,c);return _f.set(a,h),h}function XE(n=Hm){const t=_f.get(n);if(!t&&n===Hm&&HE())return QE();if(!t)throw lr.create("no-app",{appName:n});return t}function cr(n,t,e){let i=gC[n]??n;e&&(i+=`-${e}`);const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}Vo(new Ea(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firebase-heartbeat-database",vC=1,Uc="firebase-heartbeat-store";let Em=null;function WE(){return Em||(Em=VR(yC,vC,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Uc)}catch(e){console.warn(e)}}}}).catch(n=>{throw lr.create("idb-open",{originalErrorMessage:n.message})})),Em}async function bC(n){try{const e=(await WE()).transaction(Uc),i=await e.objectStore(Uc).get($E(n));return await e.done,i}catch(t){if(t instanceof Ss)_s.warn(t.message);else{const e=lr.create("idb-get",{originalErrorMessage:t?.message});_s.warn(e.message)}}}async function rb(n,t){try{const i=(await WE()).transaction(Uc,"readwrite");await i.objectStore(Uc).put(t,$E(n)),await i.done}catch(e){if(e instanceof Ss)_s.warn(e.message);else{const i=lr.create("idb-set",{originalErrorMessage:e?.message});_s.warn(i.message)}}}function $E(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=1024,EC=30;class SC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new wC(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ab();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>EC){const a=xC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){_s.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ab(),{heartbeatsToSend:e,unsentEntries:i}=AC(this._heartbeatsCache.heartbeats),a=pf(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return _s.warn(t),""}}}function ab(){return new Date().toISOString().substring(0,10)}function AC(n,t=TC){const e=[];let i=n.slice();for(const a of n){const o=e.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),ob(e)>t){o.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),ob(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class wC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hR()?fR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await bC(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return rb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return rb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ob(n){return pf(JSON.stringify({version:2,heartbeats:n})).length}function xC(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n){Vo(new Ea("platform-logger",t=>new zR(t),"PRIVATE")),Vo(new Ea("heartbeat",t=>new SC(t),"PRIVATE")),cr(Bm,ib,n),cr(Bm,ib,"esm2020"),cr("fire-js","")}RC("");var CC="firebase",IC="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(CC,IC,"app");function ZE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DC=ZE,JE=new tu("auth","Firebase",ZE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Tp("@firebase/auth");function MC(n,...t){yf.logLevel<=kt.WARN&&yf.warn(`Auth (${Wo}): ${n}`,...t)}function sf(n,...t){yf.logLevel<=kt.ERROR&&yf.error(`Auth (${Wo}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n,...t){throw Ap(n,...t)}function Ii(n,...t){return Ap(n,...t)}function tS(n,t,e){const i={...DC(),[t]:e};return new tu("auth","Firebase",i).create(t,{appName:n.name})}function pa(n){return tS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ap(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return JE.create(n,...t)}function At(n,t,...e){if(!n)throw Ap(t,...e)}function gs(n){const t="INTERNAL ASSERTION FAILED: "+n;throw sf(t),new Error(t)}function vs(n,t){n||gs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(){return typeof self<"u"&&self.location?.href||""}function OC(){return lb()==="http:"||lb()==="https:"}function lb(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OC()||oR()||"connection"in navigator)?navigator.onLine:!0}function kC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,e){this.shortDelay=t,this.longDelay=e,vs(e>t,"Short delay should be less than long delay!"),this.isMobile=sR()||lR()}get(){return NC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n,t){vs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LC=new nu(3e4,6e4);function xp(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function $o(n,t,e,i,a={}){return nS(n,a,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const h=eu({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m={method:t,headers:d,...o};return aR()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Xo(n.emulatorConfig.host)&&(m.credentials="include"),eS.fetch()(await iS(n,n.config.apiHost,e,h),m)})}async function nS(n,t,e){n._canInitEmulator=!1;const i={...PC,...t};try{const a=new zC(n),o=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Lh(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lh(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Lh(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw Lh(n,"user-disabled",c);const _=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw tS(n,_,m);ys(n,_)}}catch(a){if(a instanceof Ss)throw a;ys(n,"network-request-failed",{message:String(a)})}}async function UC(n,t,e,i,a={}){const o=await $o(n,t,e,i,a);return"mfaPendingCredential"in o&&ys(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function iS(n,t,e,i){const a=`${t}${e}?${i}`,o=n,c=o.config.emulator?wp(n.config,a):`${n.config.apiScheme}://${a}`;return VC.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class zC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ii(this.auth,"network-request-failed")),LC.get())})}}function Lh(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Ii(n,t,i);return a.customData._tokenResponse=e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(n,t){return $o(n,"POST","/v1/accounts:delete",t)}async function vf(n,t){return $o(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function BC(n,t=!1){const e=$e(n),i=await e.getIdToken(t),a=Rp(i);At(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:Cc(Sm(a.auth_time)),issuedAtTime:Cc(Sm(a.iat)),expirationTime:Cc(Sm(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Sm(n){return Number(n)*1e3}function Rp(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=jE(e);return a?JSON.parse(a):(sf("Failed to decode base64 JWT payload"),null)}catch(a){return sf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function cb(n){const t=Rp(n);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zc(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Ss&&HC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function HC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(n){const t=n.auth,e=await n.getIdToken(),i=await zc(n,vf(t,{idToken:e}));At(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const o=a.providerUserInfo?.length?sS(a.providerUserInfo):[],c=GC(n.providerData,o),h=n.isAnonymous,d=!(n.email&&a.passwordHash)&&!c?.length,m=h?d:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Gm(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(n,_)}async function qC(n){const t=$e(n);await bf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function GC(n,t){return[...n.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function sS(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(n,t){const e=await nS(n,{},async()=>{const i=eu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await iS(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return n.emulatorConfig&&Xo(n.emulatorConfig.host)&&(d.credentials="include"),eS.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function KC(n,t){return $o(n,"POST","/v2/accounts:revokeToken",xp(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):cb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){At(t.length!==0,"internal-error");const e=cb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:o}=await YC(t,e);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:o}=e,c=new Mo;return i&&(At(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(At(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),o&&(At(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(n,t){At(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class ii{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new FC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await zc(this,this.stsTokenManager.getToken(this.auth,t));return At(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return BC(this,t)}reload(){return qC(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ii({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await bf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject(pa(this.auth));const t=await this.getIdToken();return await zc(this,jC(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,d=e._redirectEventId??void 0,m=e.createdAt??void 0,_=e.lastLoginAt??void 0,{uid:v,emailVerified:T,isAnonymous:A,providerData:C,stsTokenManager:k}=e;At(v&&k,t,"internal-error");const M=Mo.fromJSON(this.name,k);At(typeof v=="string",t,"internal-error"),Js(i,t.name),Js(a,t.name),At(typeof T=="boolean",t,"internal-error"),At(typeof A=="boolean",t,"internal-error"),Js(o,t.name),Js(c,t.name),Js(h,t.name),Js(d,t.name),Js(m,t.name),Js(_,t.name);const G=new ii({uid:v,auth:t,email:a,emailVerified:T,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:M,createdAt:m,lastLoginAt:_});return C&&Array.isArray(C)&&(G.providerData=C.map($=>({...$}))),d&&(G._redirectEventId=d),G}static async _fromIdTokenResponse(t,e,i=!1){const a=new Mo;a.updateFromServerResponse(e);const o=new ii({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await bf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];At(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?sS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,h=new Mo;h.updateFromIdToken(i);const d=new ii({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:c}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Gm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;function ms(n){vs(n instanceof Function,"Expected a class definition");let t=ub.get(n);return t?(vs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,ub.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}rS.type="NONE";const hb=rS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,t,e){return`firebase:${n}:${t}:${e}`}class Oo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=rf(this.userKey,a.apiKey,o),this.fullPersistenceKey=rf("persistence",a.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await vf(this.auth,{idToken:t}).catch(()=>{});return e?ii._fromGetAccountInfoResponse(this.auth,e,t):null}return ii._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Oo(ms(hb),t,i);const a=(await Promise.all(e.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||ms(hb);const c=rf(i,t.config.apiKey,t.name);let h=null;for(const m of e)try{const _=await m._get(c);if(_){let v;if(typeof _=="string"){const T=await vf(t,{idToken:_}).catch(()=>{});if(!T)break;v=await ii._fromGetAccountInfoResponse(t,T,_)}else v=ii._fromJSON(t,_);m!==o&&(h=v),o=m;break}}catch{}const d=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Oo(o,t,i):(o=d[0],h&&await o._set(c,h.toJSON()),await Promise.all(e.map(async m=>{if(m!==o)try{await m._remove(c)}catch{}})),new Oo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hS(t))return"Blackberry";if(fS(t))return"Webos";if(oS(t))return"Safari";if((t.includes("chrome/")||lS(t))&&!t.includes("edge/"))return"Chrome";if(uS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function aS(n=ln()){return/firefox\//i.test(n)}function oS(n=ln()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lS(n=ln()){return/crios\//i.test(n)}function cS(n=ln()){return/iemobile/i.test(n)}function uS(n=ln()){return/android/i.test(n)}function hS(n=ln()){return/blackberry/i.test(n)}function fS(n=ln()){return/webos/i.test(n)}function Cp(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function QC(n=ln()){return Cp(n)&&!!window.navigator?.standalone}function XC(){return cR()&&document.documentMode===10}function dS(n=ln()){return Cp(n)||uS(n)||fS(n)||hS(n)||/windows phone/i.test(n)||cS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,t=[]){let e;switch(n){case"Browser":e=fb(ln());break;case"Worker":e=`${fb(ln())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,h)=>{try{const d=t(o);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(n,t={}){return $o(n,"GET","/v2/passwordPolicy",xp(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=6;class JC{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??ZC,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new db(this),this.idTokenSubscription=new db(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ms(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await vf(this,{idToken:t}),i=await ii._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ri(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!o||o===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await bf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=kC()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ri(this.app))return Promise.reject(pa(this));const e=t?$e(t):null;return e&&At(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject(pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ri(this.app)?Promise.reject(pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await $C(this),e=new JC(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new tu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await KC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ms(t)||this._popupRedirectResolver;At(e,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[ms(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=gS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&MC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ip(n){return $e(n)}class db{constructor(t){this.auth=t,this.observer=null,this.addObserver=_R(e=>this.observer=e)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eI(n){Dp=n}function nI(n){return Dp.loadJS(n)}function iI(){return Dp.gapiScript}function sI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n,t){const e=Sp(n,"auth");if(e.isInitialized()){const a=e.getImmediate(),o=e.getOptions();if(Ta(o,t??{}))return a;ys(a,"already-initialized")}return e.initialize({options:t})}function aI(n,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(ms);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function oI(n,t,e){const i=Ip(n);At(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!1,o=mS(t),{host:c,port:h}=lI(t),d=h===null?"":`:${h}`,m={url:`${o}//${c}${d}/`},_=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){At(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),At(Ta(m,i.config.emulator)&&Ta(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Xo(c)?(qE(`${o}//${c}${d}`),GE("Auth",!0)):cI()}function mS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function lI(n){const t=mS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:gb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:gb(c)}}}function gb(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function cI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return gs("not implemented")}_getIdTokenResponse(t){return gs("not implemented")}_linkToIdToken(t,e){return gs("not implemented")}_getReauthenticationResolver(t){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(n,t){return UC(n,"POST","/v1/accounts:signInWithIdp",xp(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="http://localhost";class Sa extends pS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Sa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ys("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...o}=e;if(!i||!a)return null;const c=new Sa(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return No(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,No(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,No(t,e)}buildRequest(){const t={requestUri:uI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=eu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends _S{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends iu{constructor(){super("facebook.com")}static credential(t){return Sa._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return er.credentialFromTaggedObject(t)}static credentialFromError(t){return er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return er.credential(t.oauthAccessToken)}catch{return null}}}er.FACEBOOK_SIGN_IN_METHOD="facebook.com";er.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Sa._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return nr.credentialFromTaggedObject(t)}static credentialFromError(t){return nr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return nr.credential(e,i)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends iu{constructor(){super("github.com")}static credential(t){return Sa._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ir.credentialFromTaggedObject(t)}static credentialFromError(t){return ir.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ir.credential(t.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends iu{constructor(){super("twitter.com")}static credential(t,e){return Sa._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return sr.credentialFromTaggedObject(t)}static credentialFromError(t){return sr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return sr.credential(e,i)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const o=await ii._fromIdTokenResponse(t,i,a),c=mb(i);return new Lo({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=mb(i);return new Lo({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function mb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends Ss{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Tf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Tf(t,e,i,a)}}function yS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Tf._fromErrorAndOperation(n,o,t,i):o})}async function hI(n,t,e=!1){const i=await zc(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Lo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(n,t,e=!1){const{auth:i}=n;if(Ri(i.app))return Promise.reject(pa(i));const a="reauthenticate";try{const o=await zc(n,yS(i,a,t,n),e);At(o.idToken,i,"internal-error");const c=Rp(o.idToken);At(c,i,"internal-error");const{sub:h}=c;return At(n.uid===h,i,"user-mismatch"),Lo._forOperation(n,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&ys(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(n,t,e=!1){if(Ri(n.app))return Promise.reject(pa(n));const i="signIn",a=await yS(n,i,t),o=await Lo._fromIdTokenResponse(n,i,a);return e||await n._updateCurrentUser(o.user),o}function gI(n,t,e,i){return $e(n).onIdTokenChanged(t,e,i)}function mI(n,t,e){return $e(n).beforeAuthStateChanged(t,e)}function pI(n){return $e(n).signOut()}const Ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=1e3,yI=10;class bS extends vS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);XC()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,yI):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},_I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}bS.type="LOCAL";const vI=bS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS extends vS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}TS.type="SESSION";const ES=TS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new Ff(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:o}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async m=>m(e.origin,o)),d=await bI(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,d)=>{const m=Mp("",20);a.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const T=v;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:m,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return window}function EI(n){Di().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return typeof Di().WorkerGlobalScope<"u"&&typeof Di().importScripts=="function"}async function SI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AI(){return navigator?.serviceWorker?.controller||null}function wI(){return SS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firebaseLocalStorageDb",xI=1,Sf="firebaseLocalStorage",wS="fbase_key";class su{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function qf(n,t){return n.transaction([Sf],t?"readwrite":"readonly").objectStore(Sf)}function RI(){const n=indexedDB.deleteDatabase(AS);return new su(n).toPromise()}function Ym(){const n=indexedDB.open(AS,xI);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Sf,{keyPath:wS})}catch(a){e(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Sf)?t(i):(i.close(),await RI(),t(await Ym()))})})}async function pb(n,t,e){const i=qf(n,!0).put({[wS]:t,value:e});return new su(i).toPromise()}async function CI(n,t){const e=qf(n,!1).get(t),i=await new su(e).toPromise();return i===void 0?null:i.value}function _b(n,t){const e=qf(n,!0).delete(t);return new su(e).toPromise()}const II=800,DI=3;class xS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>DI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ff._getInstance(wI()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SI(),!this.activeServiceWorker)return;this.sender=new TI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||AI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ym();return await pb(t,Ef,"1"),await _b(t,Ef),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>pb(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>CI(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>_b(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const o=qf(a,!1).getAll();return new su(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:o}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),II)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xS.type="LOCAL";const MI=xS;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n,t){return t?ms(t):(At(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends pS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return No(t,this._buildIdpRequest())}_linkToIdToken(t,e){return No(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return No(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function NI(n){return dI(n.auth,new Op(n),n.bypassAuthState)}function kI(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),fI(e,new Op(n),n.bypassAuthState)}async function PI(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),hI(e,new Op(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,e,i,a,o=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:o,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return NI;case"linkViaPopup":case"linkViaRedirect":return PI;case"reauthViaPopup":case"reauthViaRedirect":return kI;default:ys(this.auth,"internal-error")}}resolve(t){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new nu(2e3,1e4);class Do extends RS{constructor(t,e,i,a,o){super(t,e,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const t=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,VI.get())};t()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="pendingRedirect",af=new Map;class UI extends RS{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=af.get(this.auth._key());if(!t){try{const i=await zI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}af.set(this.auth._key(),t)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zI(n,t){const e=HI(t),i=BI(n);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function jI(n,t){af.set(n._key(),t)}function BI(n){return ms(n._redirectPersistence)}function HI(n){return rf(LI,n.config.apiKey,n.name)}async function FI(n,t,e=!1){if(Ri(n.app))return Promise.reject(pa(n));const i=Ip(n),a=OI(i,t),c=await new UI(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=600*1e3;class GI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!YI(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!CS(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Ii(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qI&&this.cachedEventUids.clear(),this.cachedEventUids.has(yb(t))}saveEventToCache(t){this.cachedEventUids.add(yb(t)),this.lastProcessedEventTime=Date.now()}}function yb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function CS({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function YI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(n,t={}){return $o(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XI=/^https?/;async function WI(n){if(n.config.emulator)return;const{authorizedDomains:t}=await KI(n);for(const e of t)try{if($I(e))return}catch{}ys(n,"unauthorized-domain")}function $I(n){const t=qm(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!XI.test(e))return!1;if(QI.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new nu(3e4,6e4);function vb(){const n=Di().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function JI(n){return new Promise((t,e)=>{function i(){vb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vb(),e(Ii(n,"network-request-failed"))},timeout:ZI.get()})}if(Di().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Di().gapi?.load)i();else{const a=sI("iframefcb");return Di()[a]=()=>{gapi.load?i():e(Ii(n,"network-request-failed"))},nI(`${iI()}?onload=${a}`).catch(o=>e(o))}}).catch(t=>{throw of=null,t})}let of=null;function t2(n){return of=of||JI(n),of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new nu(5e3,15e3),n2="__/auth/iframe",i2="emulator/auth/iframe",s2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a2(n){const t=n.config;At(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?wp(t,i2):`https://${n.config.authDomain}/${n2}`,i={apiKey:t.apiKey,appName:n.name,v:Wo},a=r2.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${eu(i).slice(1)}`}async function o2(n){const t=await t2(n),e=Di().gapi;return At(e,n,"internal-error"),t.open({where:document.body,url:a2(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s2,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ii(n,"network-request-failed"),h=Di().setTimeout(()=>{o(c)},e2.get());function d(){Di().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c2=500,u2=600,h2="_blank",f2="http://localhost";class bb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d2(n,t,e,i=c2,a=u2){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...l2,width:i.toString(),height:a.toString(),top:o,left:c},m=ln().toLowerCase();e&&(h=lS(m)?h2:e),aS(m)&&(t=t||f2,d.scrollbars="yes");const _=Object.entries(d).reduce((T,[A,C])=>`${T}${A}=${C},`,"");if(QC(m)&&h!=="_self")return g2(t||"",h),new bb(null);const v=window.open(t||"",h,_);At(v,n,"popup-blocked");try{v.focus()}catch{}return new bb(v)}function g2(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="__/auth/handler",p2="emulator/auth/handler",_2=encodeURIComponent("fac");async function Tb(n,t,e,i,a,o){At(n.config.authDomain,n,"auth-domain-config-required"),At(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:Wo,eventId:a};if(t instanceof _S){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",pR(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(t instanceof iu){const _=t.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const d=await n._getAppCheckToken(),m=d?`#${_2}=${encodeURIComponent(d)}`:"";return`${y2(n)}?${eu(h).slice(1)}${m}`}function y2({config:n}){return n.emulator?wp(n,p2):`https://${n.authDomain}/${m2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="webStorageSupport";class v2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ES,this._completeRedirectFn=FI,this._overrideRedirectResult=jI}async _openPopup(t,e,i,a){vs(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Tb(t,e,i,qm(),a);return d2(t,o,Mp())}async _openRedirect(t,e,i,a){await this._originValidation(t);const o=await Tb(t,e,i,qm(),a);return EI(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:o}=this.eventManagers[e];return a?Promise.resolve(a):(vs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await o2(t),i=new GI(t);return e.register("authEvent",a=>(At(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Am,{type:Am},a=>{const o=a?.[0]?.[Am];o!==void 0&&e(!!o),ys(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=WI(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return dS()||oS()||Cp()}}const b2=v2;var Eb="@firebase/auth",Sb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S2(n){Vo(new Ea("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;At(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gS(n)},m=new tI(i,a,o,d);return aI(m,e),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Vo(new Ea("auth-internal",t=>{const e=Ip(t.getProvider("auth").getImmediate());return(i=>new T2(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(Eb,Sb,E2(n)),cr(Eb,Sb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=300,w2=FE("authIdTokenMaxAge")||A2;let Ab=null;const x2=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>w2)return;const a=e?.token;Ab!==a&&(Ab=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function R2(n=XE()){const t=Sp(n,"auth");if(t.isInitialized())return t.getImmediate();const e=rI(n,{popupRedirectResolver:b2,persistence:[MI,vI,ES]}),i=FE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=x2(o.toString());mI(e,c,()=>c(e.currentUser)),gI(e,h=>c(h))}}const a=BE("auth");return a&&oI(e,`http://${a}`),e}function C2(){return document.getElementsByTagName("head")?.[0]??document}eI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=a=>{const o=Ii("internal-error");o.customData=a,e(o)},i.type="text/javascript",i.charset="UTF-8",C2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S2("Browser");var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,IS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(O,x){function I(){}I.prototype=x.prototype,O.D=x.prototype,O.prototype=new I,O.prototype.constructor=O,O.C=function(V,D,L){for(var N=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)N[Lt-2]=arguments[Lt];return x.prototype[D].apply(V,N)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,x,I){I||(I=0);var V=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)V[D]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(D=0;16>D;++D)V[D]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=O.g[0],I=O.g[1],D=O.g[2];var L=O.g[3],N=x+(L^I&(D^L))+V[0]+3614090360&4294967295;x=I+(N<<7&4294967295|N>>>25),N=L+(D^x&(I^D))+V[1]+3905402710&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(I^L&(x^I))+V[2]+606105819&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(x^D&(L^x))+V[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=x+(L^I&(D^L))+V[4]+4118548399&4294967295,x=I+(N<<7&4294967295|N>>>25),N=L+(D^x&(I^D))+V[5]+1200080426&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(I^L&(x^I))+V[6]+2821735955&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(x^D&(L^x))+V[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=x+(L^I&(D^L))+V[8]+1770035416&4294967295,x=I+(N<<7&4294967295|N>>>25),N=L+(D^x&(I^D))+V[9]+2336552879&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(I^L&(x^I))+V[10]+4294925233&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(x^D&(L^x))+V[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=x+(L^I&(D^L))+V[12]+1804603682&4294967295,x=I+(N<<7&4294967295|N>>>25),N=L+(D^x&(I^D))+V[13]+4254626195&4294967295,L=x+(N<<12&4294967295|N>>>20),N=D+(I^L&(x^I))+V[14]+2792965006&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(x^D&(L^x))+V[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=x+(D^L&(I^D))+V[1]+4129170786&4294967295,x=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(x^I))+V[6]+3225465664&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^I&(L^x))+V[11]+643717713&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^x&(D^L))+V[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=x+(D^L&(I^D))+V[5]+3593408605&4294967295,x=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(x^I))+V[10]+38016083&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^I&(L^x))+V[15]+3634488961&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^x&(D^L))+V[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=x+(D^L&(I^D))+V[9]+568446438&4294967295,x=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(x^I))+V[14]+3275163606&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^I&(L^x))+V[3]+4107603335&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^x&(D^L))+V[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=x+(D^L&(I^D))+V[13]+2850285829&4294967295,x=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(x^I))+V[2]+4243563512&4294967295,L=x+(N<<9&4294967295|N>>>23),N=D+(x^I&(L^x))+V[7]+1735328473&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^x&(D^L))+V[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=x+(I^D^L)+V[5]+4294588738&4294967295,x=I+(N<<4&4294967295|N>>>28),N=L+(x^I^D)+V[8]+2272392833&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^I)+V[11]+1839030562&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^x)+V[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=x+(I^D^L)+V[1]+2763975236&4294967295,x=I+(N<<4&4294967295|N>>>28),N=L+(x^I^D)+V[4]+1272893353&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^I)+V[7]+4139469664&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^x)+V[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=x+(I^D^L)+V[13]+681279174&4294967295,x=I+(N<<4&4294967295|N>>>28),N=L+(x^I^D)+V[0]+3936430074&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^I)+V[3]+3572445317&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^x)+V[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=x+(I^D^L)+V[9]+3654602809&4294967295,x=I+(N<<4&4294967295|N>>>28),N=L+(x^I^D)+V[12]+3873151461&4294967295,L=x+(N<<11&4294967295|N>>>21),N=D+(L^x^I)+V[15]+530742520&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^x)+V[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=x+(D^(I|~L))+V[0]+4096336452&4294967295,x=I+(N<<6&4294967295|N>>>26),N=L+(I^(x|~D))+V[7]+1126891415&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~I))+V[14]+2878612391&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~x))+V[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=x+(D^(I|~L))+V[12]+1700485571&4294967295,x=I+(N<<6&4294967295|N>>>26),N=L+(I^(x|~D))+V[3]+2399980690&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~I))+V[10]+4293915773&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~x))+V[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=x+(D^(I|~L))+V[8]+1873313359&4294967295,x=I+(N<<6&4294967295|N>>>26),N=L+(I^(x|~D))+V[15]+4264355552&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~I))+V[6]+2734768916&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~x))+V[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=x+(D^(I|~L))+V[4]+4149444226&4294967295,x=I+(N<<6&4294967295|N>>>26),N=L+(I^(x|~D))+V[11]+3174756917&4294967295,L=x+(N<<10&4294967295|N>>>22),N=D+(x^(L|~I))+V[2]+718787259&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~x))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+x&4294967295,O.g[1]=O.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,O.g[2]=O.g[2]+D&4294967295,O.g[3]=O.g[3]+L&4294967295}i.prototype.u=function(O,x){x===void 0&&(x=O.length);for(var I=x-this.blockSize,V=this.B,D=this.h,L=0;L<x;){if(D==0)for(;L<=I;)a(this,O,L),L+=this.blockSize;if(typeof O=="string"){for(;L<x;)if(V[D++]=O.charCodeAt(L++),D==this.blockSize){a(this,V),D=0;break}}else for(;L<x;)if(V[D++]=O[L++],D==this.blockSize){a(this,V),D=0;break}}this.h=D,this.o+=x},i.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var x=1;x<O.length-8;++x)O[x]=0;var I=8*this.o;for(x=O.length-8;x<O.length;++x)O[x]=I&255,I/=256;for(this.u(O),O=Array(16),x=I=0;4>x;++x)for(var V=0;32>V;V+=8)O[I++]=this.g[x]>>>V&255;return O};function o(O,x){var I=h;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=x(O)}function c(O,x){this.h=x;for(var I=[],V=!0,D=O.length-1;0<=D;D--){var L=O[D]|0;V&&L==x||(I[D]=L,V=!1)}this.g=I}var h={};function d(O){return-128<=O&&128>O?o(O,function(x){return new c([x|0],0>x?-1:0)}):new c([O|0],0>O?-1:0)}function m(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return M(m(-O));for(var x=[],I=1,V=0;O>=I;V++)x[V]=O/I|0,I*=4294967296;return new c(x,0)}function _(O,x){if(O.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(O.charAt(0)=="-")return M(_(O.substring(1),x));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(x,8)),V=v,D=0;D<O.length;D+=8){var L=Math.min(8,O.length-D),N=parseInt(O.substring(D,D+L),x);8>L?(L=m(Math.pow(x,L)),V=V.j(L).add(m(N))):(V=V.j(I),V=V.add(m(N)))}return V}var v=d(0),T=d(1),A=d(16777216);n=c.prototype,n.m=function(){if(k(this))return-M(this).m();for(var O=0,x=1,I=0;I<this.g.length;I++){var V=this.i(I);O+=(0<=V?V:4294967296+V)*x,x*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(k(this))return"-"+M(this).toString(O);for(var x=m(Math.pow(O,6)),I=this,V="";;){var D=st(I,x).g;I=G(I,D.j(x));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(O);if(I=D,C(I))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var x=0;x<O.g.length;x++)if(O.g[x]!=0)return!1;return!0}function k(O){return O.h==-1}n.l=function(O){return O=G(this,O),k(O)?-1:C(O)?0:1};function M(O){for(var x=O.g.length,I=[],V=0;V<x;V++)I[V]=~O.g[V];return new c(I,~O.h).add(T)}n.abs=function(){return k(this)?M(this):this},n.add=function(O){for(var x=Math.max(this.g.length,O.g.length),I=[],V=0,D=0;D<=x;D++){var L=V+(this.i(D)&65535)+(O.i(D)&65535),N=(L>>>16)+(this.i(D)>>>16)+(O.i(D)>>>16);V=N>>>16,L&=65535,N&=65535,I[D]=N<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function G(O,x){return O.add(M(x))}n.j=function(O){if(C(this)||C(O))return v;if(k(this))return k(O)?M(this).j(M(O)):M(M(this).j(O));if(k(O))return M(this.j(M(O)));if(0>this.l(A)&&0>O.l(A))return m(this.m()*O.m());for(var x=this.g.length+O.g.length,I=[],V=0;V<2*x;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(var D=0;D<O.g.length;D++){var L=this.i(V)>>>16,N=this.i(V)&65535,Lt=O.i(D)>>>16,bt=O.i(D)&65535;I[2*V+2*D]+=N*bt,$(I,2*V+2*D),I[2*V+2*D+1]+=L*bt,$(I,2*V+2*D+1),I[2*V+2*D+1]+=N*Lt,$(I,2*V+2*D+1),I[2*V+2*D+2]+=L*Lt,$(I,2*V+2*D+2)}for(V=0;V<x;V++)I[V]=I[2*V+1]<<16|I[2*V];for(V=x;V<2*x;V++)I[V]=0;return new c(I,0)};function $(O,x){for(;(O[x]&65535)!=O[x];)O[x+1]+=O[x]>>>16,O[x]&=65535,x++}function tt(O,x){this.g=O,this.h=x}function st(O,x){if(C(x))throw Error("division by zero");if(C(O))return new tt(v,v);if(k(O))return x=st(M(O),x),new tt(M(x.g),M(x.h));if(k(x))return x=st(O,M(x)),new tt(M(x.g),x.h);if(30<O.g.length){if(k(O)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var I=T,V=x;0>=V.l(O);)I=X(I),V=X(V);var D=ot(I,1),L=ot(V,1);for(V=ot(V,2),I=ot(I,2);!C(V);){var N=L.add(V);0>=N.l(O)&&(D=D.add(I),L=N),V=ot(V,1),I=ot(I,1)}return x=G(O,D.j(x)),new tt(D,x)}for(D=v;0<=O.l(x);){for(I=Math.max(1,Math.floor(O.m()/x.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=m(I),N=L.j(x);k(N)||0<N.l(O);)I-=V,L=m(I),N=L.j(x);C(L)&&(L=T),D=D.add(L),O=G(O,N)}return new tt(D,O)}n.A=function(O){return st(this,O).h},n.and=function(O){for(var x=Math.max(this.g.length,O.g.length),I=[],V=0;V<x;V++)I[V]=this.i(V)&O.i(V);return new c(I,this.h&O.h)},n.or=function(O){for(var x=Math.max(this.g.length,O.g.length),I=[],V=0;V<x;V++)I[V]=this.i(V)|O.i(V);return new c(I,this.h|O.h)},n.xor=function(O){for(var x=Math.max(this.g.length,O.g.length),I=[],V=0;V<x;V++)I[V]=this.i(V)^O.i(V);return new c(I,this.h^O.h)};function X(O){for(var x=O.g.length+1,I=[],V=0;V<x;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new c(I,O.h)}function ot(O,x){var I=x>>5;x%=32;for(var V=O.g.length-I,D=[],L=0;L<V;L++)D[L]=0<x?O.i(L+I)>>>x|O.i(L+I+1)<<32-x:O.i(L+I);return new c(D,O.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,IS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,ur=c}).apply(typeof wb<"u"?wb:typeof self<"u"?self:typeof window<"u"?window:{});var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DS,vc,MS,lf,Km,OS,NS,kS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,b){return f==Array.prototype||f==Object.prototype||(f[y]=b.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uh=="object"&&Uh];for(var y=0;y<f.length;++y){var b=f[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=e(this);function a(f,y){if(y)t:{var b=i;f=f.split(".");for(var w=0;w<f.length-1;w++){var B=f[w];if(!(B in b))break t;b=b[B]}f=f[f.length-1],w=b[f],y=y(w),y!=w&&y!=null&&t(b,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var b=0,w=!1,B={next:function(){if(!w&&b<f.length){var Q=b++;return{value:y(Q,f[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(f){return f||function(){return o(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function d(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function m(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function _(f,y,b){return f.call.apply(f.bind,arguments)}function v(f,y,b){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),f.apply(y,B)}}return function(){return f.apply(y,arguments)}}function T(f,y,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,T.apply(null,arguments)}function A(f,y){var b=Array.prototype.slice.call(arguments,1);return function(){var w=b.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function C(f,y){function b(){}b.prototype=y.prototype,f.aa=y.prototype,f.prototype=new b,f.prototype.constructor=f,f.Qb=function(w,B,Q){for(var lt=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)lt[Ut-2]=arguments[Ut];return y.prototype[B].apply(w,lt)}}function k(f){const y=f.length;if(0<y){const b=Array(y);for(let w=0;w<y;w++)b[w]=f[w];return b}return[]}function M(f,y){for(let b=1;b<arguments.length;b++){const w=arguments[b];if(d(w)){const B=f.length||0,Q=w.length||0;f.length=B+Q;for(let lt=0;lt<Q;lt++)f[B+lt]=w[lt]}else f.push(w)}}class G{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function $(f){return/^[\s\xa0]*$/.test(f)}function tt(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function st(f){return st[" "](f),f}st[" "]=function(){};var X=tt().indexOf("Gecko")!=-1&&!(tt().toLowerCase().indexOf("webkit")!=-1&&tt().indexOf("Edge")==-1)&&!(tt().indexOf("Trident")!=-1||tt().indexOf("MSIE")!=-1)&&tt().indexOf("Edge")==-1;function ot(f,y,b){for(const w in f)y.call(b,f[w],w,f)}function O(f,y){for(const b in f)y.call(void 0,f[b],b,f)}function x(f){const y={};for(const b in f)y[b]=f[b];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,y){let b,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(b in w)f[b]=w[b];for(let Q=0;Q<I.length;Q++)b=I[Q],Object.prototype.hasOwnProperty.call(w,b)&&(f[b]=w[b])}}function D(f){var y=1;f=f.split(":");const b=[];for(;0<y&&f.length;)b.push(f.shift()),y--;return f.length&&b.push(f.join(":")),b}function L(f){h.setTimeout(()=>{throw f},0)}function N(){var f=Nt;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class Lt{constructor(){this.h=this.g=null}add(y,b){const w=bt.get();w.set(y,b),this.h?this.h.next=w:this.g=w,this.h=w}}var bt=new G(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let at,gt=!1,Nt=new Lt,U=()=>{const f=h.Promise.resolve(void 0);at=()=>{f.then(it)}};var it=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(b){L(b)}var y=bt;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}gt=!1};function ct(){this.s=this.s,this.C=this.C}ct.prototype.s=!1,ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return f}();function xt(f,y){if(rt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var b=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(X){t:{try{st(y.nodeName);var B=!0;break t}catch{}B=!1}B||(y=null)}}else b=="mouseover"?y=f.fromElement:b=="mouseout"&&(y=f.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_t[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&xt.aa.h.call(this)}}C(xt,rt);var _t={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ai(f,y,b,w,B){this.listener=f,this.proxy=null,this.src=y,this.type=b,this.capture=!!w,this.ha=B,this.key=++ie,this.da=this.fa=!1}function As(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ui(f){this.src=f,this.g={},this.h=0}Ui.prototype.add=function(f,y,b,w,B){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var lt=wr(f,y,w,B);return-1<lt?(y=f[lt],b||(y.fa=!1)):(y=new ai(y,this.src,Q,!!w,B),y.fa=b,f.push(y)),y};function Ar(f,y){var b=y.type;if(b in f.g){var w=f.g[b],B=Array.prototype.indexOf.call(w,y,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(w,B,1),Q&&(As(y),f.g[b].length==0&&(delete f.g[b],f.h--))}}function wr(f,y,b,w){for(var B=0;B<f.length;++B){var Q=f[B];if(!Q.da&&Q.listener==y&&Q.capture==!!b&&Q.ha==w)return B}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),sl={};function du(f,y,b,w,B){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)du(f,y[Q],b,w,B);return null}return b=gu(b),f&&f[Pe]?f.K(y,b,m(w)?!!w.capture:!1,B):Mn(f,y,b,!1,w,B)}function Mn(f,y,b,w,B,Q){if(!y)throw Error("Invalid event type");var lt=m(B)?!!B.capture:!!B,Ut=Na(f);if(Ut||(f[xr]=Ut=new Ui(f)),b=Ut.add(y,b,w,lt,Q),b.proxy)return b;if(w=fd(),b.proxy=w,w.src=f,w.listener=b,f.addEventListener)dt||(B=lt),B===void 0&&(B=!1),f.addEventListener(y.toString(),w,B);else if(f.attachEvent)f.attachEvent(Rr(y.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return b}function fd(){function f(b){return y.call(f.src,f.listener,b)}const y=dd;return f}function rl(f,y,b,w,B){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)rl(f,y[Q],b,w,B);else w=m(w)?!!w.capture:!!w,b=gu(b),f&&f[Pe]?(f=f.i,y=String(y).toString(),y in f.g&&(Q=f.g[y],b=wr(Q,b,w,B),-1<b&&(As(Q[b]),Array.prototype.splice.call(Q,b,1),Q.length==0&&(delete f.g[y],f.h--)))):f&&(f=Na(f))&&(y=f.g[y.toString()],f=-1,y&&(f=wr(y,b,w,B)),(b=-1<f?y[f]:null)&&Oa(b))}function Oa(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[Pe])Ar(y.i,f);else{var b=f.type,w=f.proxy;y.removeEventListener?y.removeEventListener(b,w,f.capture):y.detachEvent?y.detachEvent(Rr(b),w):y.addListener&&y.removeListener&&y.removeListener(w),(b=Na(y))?(Ar(b,f),b.h==0&&(b.src=null,y[xr]=null)):As(f)}}}function Rr(f){return f in sl?sl[f]:sl[f]="on"+f}function dd(f,y){if(f.da)f=!0;else{y=new xt(y,this);var b=f.listener,w=f.ha||f.src;f.fa&&Oa(f),f=b.call(w,y)}return f}function Na(f){return f=f[xr],f instanceof Ui?f:null}var al="__closure_events_fn_"+(1e9*Math.random()>>>0);function gu(f){return typeof f=="function"?f:(f[al]||(f[al]=function(y){return f.handleEvent(y)}),f[al])}function de(){ct.call(this),this.i=new Ui(this),this.M=this,this.F=null}C(de,ct),de.prototype[Pe]=!0,de.prototype.removeEventListener=function(f,y,b,w){rl(this,f,y,b,w)};function Qt(f,y){var b,w=f.F;if(w)for(b=[];w;w=w.F)b.push(w);if(f=f.M,w=y.type||y,typeof y=="string")y=new rt(y,f);else if(y instanceof rt)y.target=y.target||f;else{var B=y;y=new rt(w,f),V(y,B)}if(B=!0,b)for(var Q=b.length-1;0<=Q;Q--){var lt=y.g=b[Q];B=Tn(lt,w,!0,y)&&B}if(lt=y.g=f,B=Tn(lt,w,!0,y)&&B,B=Tn(lt,w,!1,y)&&B,b)for(Q=0;Q<b.length;Q++)lt=y.g=b[Q],B=Tn(lt,w,!1,y)&&B}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var b=f.g[y],w=0;w<b.length;w++)As(b[w]);delete f.g[y],f.h--}}this.F=null},de.prototype.K=function(f,y,b,w){return this.i.add(String(f),y,!1,b,w)},de.prototype.L=function(f,y,b,w){return this.i.add(String(f),y,!0,b,w)};function Tn(f,y,b,w){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,Q=0;Q<y.length;++Q){var lt=y[Q];if(lt&&!lt.da&&lt.capture==b){var Ut=lt.listener,De=lt.ha||lt.src;lt.fa&&Ar(f.i,lt),B=Ut.call(De,w)!==!1&&B}}return B&&!w.defaultPrevented}function Je(f,y,b){if(typeof f=="function")b&&(f=T(f,b));else if(f&&typeof f.handleEvent=="function")f=T(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(f,y||0)}function mu(f){f.g=Je(()=>{f.g=null,f.i&&(f.i=!1,mu(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class gd extends ct{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:mu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(f){ct.call(this),this.h=f,this.g={}}C(Cr,ct);var Ir=[];function Dr(f){ot(f.g,function(y,b){this.g.hasOwnProperty(b)&&Oa(y)},f),f.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),Dr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $n=h.JSON.stringify,ka=h.JSON.parse,Mr=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function ol(){}ol.prototype.h=null;function ll(f){return f.h||(f.h=f.i())}function cl(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ji(){rt.call(this,"d")}C(ji,rt);function ul(){rt.call(this,"c")}C(ul,rt);var oi={},hl=null;function ws(){return hl=hl||new de}oi.La="serverreachability";function Pa(f){rt.call(this,oi.La,f)}C(Pa,rt);function xs(f){const y=ws();Qt(y,new Pa(y))}oi.STAT_EVENT="statevent";function pu(f,y){rt.call(this,oi.STAT_EVENT,f),this.stat=y}C(pu,rt);function ce(f){const y=ws();Qt(y,new pu(y,f))}oi.Ma="timingevent";function Ie(f,y){rt.call(this,oi.Ma,f),this.size=y}C(Ie,rt);function Te(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},y)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function fl(f,y,b,w,B,Q){f.info(function(){if(f.g)if(Q)for(var lt="",Ut=Q.split("&"),De=0;De<Ut.length;De++){var zt=Ut[De].split("=");if(1<zt.length){var Le=zt[0];zt=zt[1];var Me=Le.split("_");lt=2<=Me.length&&Me[1]=="type"?lt+(Le+"="+zt+"&"):lt+(Le+"=redacted&")}}else lt=null;else lt=Q;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+b+`
`+lt})}function md(f,y,b,w,B,Q,lt){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+b+`
`+Q+" "+lt})}function Rs(f,y,b,w){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Or(f,b)+(w?" "+w:"")})}function _u(f,y){f.info(function(){return"TIMEOUT: "+y})}On.prototype.info=function(){};function Or(f,y){if(!f.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(f=0;f<b.length;f++)if(Array.isArray(b[f])){var w=b[f];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var lt=1;lt<B.length;lt++)B[lt]=""}}}}return $n(b)}catch{return y}}var Cs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function ci(){}C(ci,ol),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},li=new ci;function cn(f,y,b,w){this.j=f,this.i=y,this.l=b,this.R=w||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var dl={},Va={};function Zn(f,y,b){f.L=1,f.v=Lr(En(y)),f.m=b,f.P=!0,Hi(f,null)}function Hi(f,y){f.F=Date.now(),Nr(f),f.A=En(f.v);var b=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),vl(b.i,"t",w),f.C=0,b=f.j.J,f.h=new pe,f.g=Nu(f.j,b?y:null,!f.m),0<f.O&&(f.M=new gd(T(f.Y,f,f.g),f.O)),y=f.U,b=f.g,w=f.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ir[0]=B.toString()),B=Ir);for(var Q=0;Q<B.length;Q++){var lt=du(b,B[Q],w||y.handleEvent,!1,y.h||y);if(!lt)break;y.g[lt.key]=lt}y=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),xs(),fl(f.i,f.u,f.A,f.l,f.R,f.m)}cn.prototype.ca=function(f){f=f.target;const y=this.M;y&&Vn(f)==3?y.j():this.Y(f)},cn.prototype.Y=function(f){try{if(f==this.g)t:{const Me=Vn(this.g);var y=this.g.Ba();const Wi=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||wu(this.g)))){this.J||Me!=4||y==7||(y==8||0>=Wi?xs(3):xs(2)),Is(this);var b=this.g.Z();this.X=b;e:if(yu(this)){var w=wu(this.g);f="";var B=w.length,Q=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qe(this),ui(this);var lt="";break e}this.h.i=new h.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,f+=this.h.i.decode(w[y],{stream:!(Q&&y==B-1)});w.length=0,this.h.g+=f,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=b==200,md(this.i,this.u,this.A,this.l,this.R,Me,b),this.o){if(this.T&&!this.K){e:{if(this.g){var Ut,De=this.g;if((Ut=De.g?De.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ut)){var zt=Ut;break e}}zt=null}if(b=zt)Rs(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kr(this,b);else{this.o=!1,this.s=3,ce(12),qe(this),ui(this);break t}}if(this.P){b=!0;let Ge;for(;!this.J&&this.C<lt.length;)if(Ge=vu(this,lt),Ge==Va){Me==4&&(this.s=4,ce(14),b=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==dl){this.s=4,ce(15),Rs(this.i,this.l,lt,"[Invalid Chunk]"),b=!1;break}else Rs(this.i,this.l,Ge,null),kr(this,Ge);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||lt.length!=0||this.h.h||(this.s=1,ce(16),b=!1),this.o=this.o&&b,!b)Rs(this.i,this.l,lt,"[Invalid Chunked Response]"),qe(this),ui(this);else if(0<lt.length&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.ba&&!Le.M&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),Gr(Le),Le.M=!0,ce(11))}}else Rs(this.i,this.l,lt,null),kr(this,lt);Me==4&&qe(this),this.o&&!this.J&&(Me==4?Du(this.j,this):(this.o=!1,Nr(this)))}else bd(this.g),b==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),qe(this),ui(this)}}}catch{}finally{}};function yu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function vu(f,y){var b=f.C,w=y.indexOf(`
`,b);return w==-1?Va:(b=Number(y.substring(b,w)),isNaN(b)?dl:(w+=1,w+b>y.length?Va:(y=y.slice(w,w+b),f.C=w+b,y)))}cn.prototype.cancel=function(){this.J=!0,qe(this)};function Nr(f){f.S=Date.now()+f.I,bu(f,f.I)}function bu(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Te(T(f.ba,f),y)}function Is(f){f.B&&(h.clearTimeout(f.B),f.B=null)}cn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(_u(this.i,this.A),this.L!=2&&(xs(),ce(17)),qe(this),this.s=2,ui(this)):bu(this,this.S-f)};function ui(f){f.j.G==0||f.J||Du(f.j,f)}function qe(f){Is(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,Dr(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function kr(f,y){try{var b=f.j;if(b.G!=0&&(b.g==f||gl(b.h,f))){if(!f.K&&gl(b.h,f)&&b.G==3){try{var w=b.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){t:if(!b.u){if(b.g)if(b.g.F+3e3<f.F)Qa(b),Ya(b);else break t;Al(b),ce(18)}}else b.za=B[1],0<b.za-b.T&&37500>B[2]&&b.F&&b.v==0&&!b.C&&(b.C=Te(T(b.Za,b),6e3));if(1>=Ua(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Xi(b,11)}else if((f.K||b.g==f)&&Qa(b),!$(y))for(B=b.Da.g.parse(y),y=0;y<B.length;y++){let zt=B[y];if(b.T=zt[0],zt=zt[1],b.G==2)if(zt[0]=="c"){b.K=zt[1],b.ia=zt[2];const Le=zt[3];Le!=null&&(b.la=Le,b.j.info("VER="+b.la));const Me=zt[4];Me!=null&&(b.Aa=Me,b.j.info("SVER="+b.Aa));const Wi=zt[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(w=1.5*Wi,b.L=w,b.j.info("backChannelRequestTimeoutMs_="+w)),w=b;const Ge=f.g;if(Ge){const _i=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_i){var Q=w.h;Q.g||_i.indexOf("spdy")==-1&&_i.indexOf("quic")==-1&&_i.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(za(Q,Q.h),Q.h=null))}if(w.D){const xl=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(w.ya=xl,Zt(w.I,w.D,xl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-f.F,b.j.info("Handshake RTT: "+b.R+"ms")),w=b;var lt=f;if(w.qa=Ou(w,w.J?w.ia:null,w.W),lt.K){un(w.h,lt);var Ut=lt,De=w.L;De&&(Ut.I=De),Ut.B&&(Is(Ut),Nr(Ut)),w.g=lt}else Cu(w);0<b.i.length&&Ka(b)}else zt[0]!="stop"&&zt[0]!="close"||Xi(b,7);else b.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?Xi(b,7):El(b):zt[0]!="noop"&&b.l&&b.l.ta(zt),b.v=0)}}xs(4)}catch{}}var Tu=class{constructor(f,y){this.g=f,this.map=y}};function Fi(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function La(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ua(f){return f.h?1:f.g?f.g.size:0}function gl(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function za(f,y){f.g?f.g.add(y):f.h=y}function un(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Fi.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function ml(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const b of f.g.values())y=y.concat(b.D);return y}return k(f.i)}function pd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var y=[],b=f.length,w=0;w<b;w++)y.push(f[w]);return y}y=[],b=0;for(w in f)y[b++]=f[w];return y}function ja(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var y=[];f=f.length;for(var b=0;b<f;b++)y.push(b);return y}y=[],b=0;for(const w in f)y[b++]=w;return y}}}function pl(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var b=ja(f),w=pd(f),B=w.length,Q=0;Q<B;Q++)y.call(void 0,w[Q],b&&b[Q],f)}var Pr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _d(f,y){if(f){f=f.split("&");for(var b=0;b<f.length;b++){var w=f[b].indexOf("="),B=null;if(0<=w){var Q=f[b].substring(0,w);B=f[b].substring(w+1)}else Q=f[b];y(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ee(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ee){this.h=f.h,Vr(this,f.j),this.o=f.o,this.g=f.g,Ds(this,f.s),this.l=f.l;var y=f.i,b=new Gi;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),qi(this,b),this.m=f.m}else f&&(y=String(f).match(Pr))?(this.h=!1,Vr(this,y[1]||"",!0),this.o=Nn(y[2]||""),this.g=Nn(y[3]||"",!0),Ds(this,y[4]),this.l=Nn(y[5]||"",!0),qi(this,y[6]||"",!0),this.m=Nn(y[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}Ee.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Ur(y,_l,!0),":");var b=this.g;return(b||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Ur(y,_l,!0),"@"),f.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&f.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&f.push("/"),f.push(Ur(b,b.charAt(0)=="/"?yd:yl,!0))),(b=this.i.toString())&&f.push("?",b),(b=this.m)&&f.push("#",Ur(b,Ba)),f.join("")};function En(f){return new Ee(f)}function Vr(f,y,b){f.j=b?Nn(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Ds(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function qi(f,y,b){y instanceof Gi?(f.i=y,Su(f.i,f.h)):(b||(y=Ur(y,vd)),f.i=new Gi(y,f.h))}function Zt(f,y,b){f.i.set(y,b)}function Lr(f){return Zt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Nn(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ur(f,y,b){return typeof f=="string"?(f=encodeURI(f).replace(y,Eu),b&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Eu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var _l=/[#\/\?@]/g,yl=/[#\?:]/g,yd=/[#\?]/g,vd=/[#\?@]/g,Ba=/#/g;function Gi(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function kn(f){f.g||(f.g=new Map,f.h=0,f.i&&_d(f.i,function(y,b){f.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Gi.prototype,n.add=function(f,y){kn(this),this.i=null,f=hi(this,f);var b=this.g.get(f);return b||this.g.set(f,b=[]),b.push(y),this.h+=1,this};function Yi(f,y){kn(f),y=hi(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Ki(f,y){return kn(f),y=hi(f,y),f.g.has(y)}n.forEach=function(f,y){kn(this),this.g.forEach(function(b,w){b.forEach(function(B){f.call(y,B,w,this)},this)},this)},n.na=function(){kn(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let w=0;w<y.length;w++){const B=f[w];for(let Q=0;Q<B.length;Q++)b.push(y[w])}return b},n.V=function(f){kn(this);let y=[];if(typeof f=="string")Ki(this,f)&&(y=y.concat(this.g.get(hi(this,f))));else{f=Array.from(this.g.values());for(let b=0;b<f.length;b++)y=y.concat(f[b])}return y},n.set=function(f,y){return kn(this),this.i=null,f=hi(this,f),Ki(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function vl(f,y,b){Yi(f,y),0<b.length&&(f.i=null,f.g.set(hi(f,y),k(b)),f.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var w=y[b];const Q=encodeURIComponent(String(w)),lt=this.V(w);for(w=0;w<lt.length;w++){var B=Q;lt[w]!==""&&(B+="="+encodeURIComponent(String(lt[w]))),f.push(B)}}return this.i=f.join("&")};function hi(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Su(f,y){y&&!f.j&&(kn(f),f.i=null,f.g.forEach(function(b,w){var B=w.toLowerCase();w!=B&&(Yi(this,w),vl(this,B,b))},f)),f.j=y}function zr(f,y){const b=new On;if(h.Image){const w=new Image;w.onload=A(Pn,b,"TestLoadImage: loaded",!0,y,w),w.onerror=A(Pn,b,"TestLoadImage: error",!1,y,w),w.onabort=A(Pn,b,"TestLoadImage: abort",!1,y,w),w.ontimeout=A(Pn,b,"TestLoadImage: timeout",!1,y,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else y(!1)}function Jn(f,y){const b=new On,w=new AbortController,B=setTimeout(()=>{w.abort(),Pn(b,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:w.signal}).then(Q=>{clearTimeout(B),Q.ok?Pn(b,"TestPingServer: ok",!0,y):Pn(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Pn(b,"TestPingServer: error",!1,y)})}function Pn(f,y,b,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(b)}catch{}}function jr(){this.g=new Mr}function fi(f,y,b){const w=b||"";try{pl(f,function(B,Q){let lt=B;m(B)&&(lt=$n(B)),y.push(w+Q+"="+encodeURIComponent(lt))})}catch(B){throw y.push(w+"type="+encodeURIComponent("_badmap")),B}}function Ms(f){this.l=f.Ub||null,this.j=f.eb||!1}C(Ms,ol),Ms.prototype.g=function(){return new Qi(this.l,this.j)},Ms.prototype.i=function(f){return function(){return f}}({});function Qi(f,y){de.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Qi,de),n=Qi.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,gi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function bl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?di(this):gi(this),this.readyState==3&&bl(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,di(this))},n.Qa=function(f){this.g&&(this.response=f,di(this))},n.ga=function(){this.g&&di(this)};function di(f){f.readyState=4,f.l=null,f.j=null,f.v=null,gi(f)}n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,f.push(b[0]+": "+b[1]),b=y.next();return f.join(`\r
`)};function gi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Tl(f){let y="";return ot(f,function(b,w){y+=w,y+=":",y+=b,y+=`\r
`}),y}function Ve(f,y,b){t:{for(w in b){var w=!1;break t}w=!0}w||(b=Tl(b),typeof f=="string"?b!=null&&encodeURIComponent(String(b)):Zt(f,y,b))}function Yt(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Yt,de);var Ha=/^https?$/i,Br=["POST","PUT"];n=Yt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,y,b,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?ll(this.o):ll(li),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Q){Au(this,Q);return}if(f=b||"",b=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)b.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())b.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Br,y,void 0))||w||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,lt]of b)this.g.setRequestHeader(Q,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hr(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){Au(this,Q)}};function Au(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Fa(f),mi(f)}function Fa(f){f.A||(f.A=!0,Qt(f,"complete"),Qt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Qt(this,"complete"),Qt(this,"abort"),mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),Yt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},n.bb=function(){qa(this)};function qa(f){if(f.h&&typeof c<"u"&&(!f.v[1]||Vn(f)!=4||f.Z()!=2)){if(f.u&&Vn(f)==4)Je(f.Ea,0,f);else if(Qt(f,"readystatechange"),Vn(f)==4){f.h=!1;try{const lt=f.Z();t:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var b;if(!(b=y)){var w;if(w=lt===0){var B=String(f.D).match(Pr)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),w=!Ha.test(B?B.toLowerCase():"")}b=w}if(b)Qt(f,"complete"),Qt(f,"success");else{f.m=6;try{var Q=2<Vn(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",Fa(f)}}finally{mi(f)}}}}function mi(f,y){if(f.g){Hr(f);const b=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Qt(f,"ready");try{b.onreadystatechange=w}catch{}}}function Hr(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Vn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),ka(y)}};function wu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function bd(f){const y={};f=(f.g&&2<=Vn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if($(f[w]))continue;var b=D(f[w]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=y[B]||[];y[B]=Q,Q.push(b)}O(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(f,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[f]||y}function Ga(f){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,f),this.cb=Fr("retryDelaySeedMs",1e4,f),this.Wa=Fr("forwardChannelMaxRetries",2,f),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Fi(f&&f.concurrentRequestLimit),this.Da=new jr,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ga.prototype,n.la=8,n.G=1,n.connect=function(f,y,b,w){ce(0),this.W=f,this.H=y||{},b&&w!==void 0&&(this.H.OSID=b,this.H.OAID=w),this.F=this.X,this.I=Ou(this,null,this.W),Ka(this)};function El(f){if(xu(f),f.G==3){var y=f.U++,b=En(f.I);if(Zt(b,"SID",f.K),Zt(b,"RID",y),Zt(b,"TYPE","terminate"),qr(f,b),y=new cn(f,f.j,y),y.L=2,y.v=Lr(En(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=Nu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Nr(y)}Mu(f)}function Ya(f){f.g&&(Gr(f),f.g.cancel(),f.g=null)}function xu(f){Ya(f),f.u&&(h.clearTimeout(f.u),f.u=null),Qa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Ka(f){if(!La(f.h)&&!f.s){f.s=!0;var y=f.Ga;at||U(),gt||(at(),gt=!0),Nt.add(y,f),f.B=0}}function Td(f,y){return Ua(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Te(T(f.Ga,f,y),wl(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const B=new cn(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=x(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)t:{for(var y=0,b=0;b<this.i.length;b++){e:{var w=this.i[b];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=b;break t}if(y===4096||b===this.i.length-1){y=b+1;break t}}y=1e3}else y=1e3;y=Ru(this,B,y),b=En(this.I),Zt(b,"RID",f),Zt(b,"CVER",22),this.D&&Zt(b,"X-HTTP-Session-Id",this.D),qr(this,b),Q&&(this.O?y="headers="+encodeURIComponent(String(Tl(Q)))+"&"+y:this.m&&Ve(b,this.m,Q)),za(this.h,B),this.Ua&&Zt(b,"TYPE","init"),this.P?(Zt(b,"$req",y),Zt(b,"SID","null"),B.T=!0,Zn(B,b,null)):Zn(B,b,y),this.G=2}}else this.G==3&&(f?Sl(this,f):this.i.length==0||La(this.h)||Sl(this))};function Sl(f,y){var b;y?b=y.l:b=f.U++;const w=En(f.I);Zt(w,"SID",f.K),Zt(w,"RID",b),Zt(w,"AID",f.T),qr(f,w),f.m&&f.o&&Ve(w,f.m,f.o),b=new cn(f,f.j,b,f.B+1),f.m===null&&(b.H=f.o),y&&(f.i=y.D.concat(f.i)),y=Ru(f,b,1e3),b.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),za(f.h,b),Zn(b,w,y)}function qr(f,y){f.H&&ot(f.H,function(b,w){Zt(y,w,b)}),f.l&&pl({},function(b,w){Zt(y,w,b)})}function Ru(f,y,b){b=Math.min(f.i.length,b);var w=f.l?T(f.l.Na,f.l,f):null;t:{var B=f.i;let Q=-1;for(;;){const lt=["count="+b];Q==-1?0<b?(Q=B[0].g,lt.push("ofs="+Q)):Q=0:lt.push("ofs="+Q);let Ut=!0;for(let De=0;De<b;De++){let zt=B[De].g;const Le=B[De].map;if(zt-=Q,0>zt)Q=Math.max(0,B[De].g-100),Ut=!1;else try{fi(Le,lt,"req"+zt+"_")}catch{w&&w(Le)}}if(Ut){w=lt.join("&");break t}}}return f=f.i.splice(0,b),y.D=f,w}function Cu(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;at||U(),gt||(at(),gt=!0),Nt.add(y,f),f.v=0}}function Al(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Te(T(f.Fa,f),wl(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Te(T(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Ya(this),Iu(this))};function Gr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function Iu(f){f.g=new cn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=En(f.qa);Zt(y,"RID","rpc"),Zt(y,"SID",f.K),Zt(y,"AID",f.T),Zt(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Zt(y,"TO",f.ja),Zt(y,"TYPE","xmlhttp"),qr(f,y),f.m&&f.o&&Ve(y,f.m,f.o),f.L&&(f.g.I=f.L);var b=f.g;f=f.ia,b.L=1,b.v=Lr(En(y)),b.m=null,b.P=!0,Hi(b,f)}n.Za=function(){this.C!=null&&(this.C=null,Ya(this),Al(this),ce(19))};function Qa(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function Du(f,y){var b=null;if(f.g==y){Qa(f),Gr(f),f.g=null;var w=2}else if(gl(f.h,y))b=y.D,un(f.h,y),w=1;else return;if(f.G!=0){if(y.o)if(w==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var B=f.B;w=ws(),Qt(w,new Ie(w,b)),Ka(f)}else Cu(f);else if(B=y.s,B==3||B==0&&0<y.X||!(w==1&&Td(f,y)||w==2&&Al(f)))switch(b&&0<b.length&&(y=f.h,y.i=y.i.concat(b)),B){case 1:Xi(f,5);break;case 4:Xi(f,10);break;case 3:Xi(f,6);break;default:Xi(f,2)}}}function wl(f,y){let b=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(b*=2),b*y}function Xi(f,y){if(f.j.info("Error code "+y),y==2){var b=T(f.fb,f),w=f.Xa;const B=!w;w=new Ee(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vr(w,"https"),Lr(w),B?zr(w.toString(),b):Jn(w.toString(),b)}else ce(2);f.G=0,f.l&&f.l.sa(y),Mu(f),xu(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function Mu(f){if(f.G=0,f.ka=[],f.l){const y=ml(f.h);(y.length!=0||f.i.length!=0)&&(M(f.ka,y),M(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function Ou(f,y,b){var w=b instanceof Ee?En(b):new Ee(b);if(w.g!="")y&&(w.g=y+"."+w.g),Ds(w,w.s);else{var B=h.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var Q=new Ee(null);w&&Vr(Q,w),y&&(Q.g=y),B&&Ds(Q,B),b&&(Q.l=b),w=Q}return b=f.D,y=f.ya,b&&y&&Zt(w,b,y),Zt(w,"VER",f.la),qr(f,w),w}function Nu(f,y,b){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Yt(new Ms({eb:b})):new Yt(f.pa),y.Ha(f.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}n=ku.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Xa(){}Xa.prototype.g=function(f,y){return new hn(f,y)};function hn(f,y){de.call(this),this.g=new Ga(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!$(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!$(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new pi(this)}C(hn,de),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){El(this.g)},hn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var b={};b.__data__=f,f=b}else this.u&&(b={},b.__data__=$n(f),f=b);y.i.push(new Tu(y.Ya++,f)),y.G==3&&Ka(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,hn.aa.N.call(this)};function Pu(f){ji.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){t:{for(const b in y){f=b;break t}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}C(Pu,ji);function Vu(){ul.call(this),this.status=1}C(Vu,ul);function pi(f){this.g=f}C(pi,ku),pi.prototype.ua=function(){Qt(this.g,"a")},pi.prototype.ta=function(f){Qt(this.g,new Pu(f))},pi.prototype.sa=function(f){Qt(this.g,new Vu)},pi.prototype.ra=function(){Qt(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,kS=function(){return new Xa},NS=function(){return ws()},OS=oi,Km={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cs.NO_ERROR=0,Cs.TIMEOUT=8,Cs.HTTP_ERROR=6,lf=Cs,Bi.COMPLETE="complete",MS=Bi,cl.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",de.prototype.listen=de.prototype.K,vc=cl,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,DS=Yt}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore",Rb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Tp("@firebase/firestore");function xo(){return Aa.logLevel}function ht(n,...t){if(Aa.logLevel<=kt.DEBUG){const e=t.map(Np);Aa.debug(`Firestore (${Zo}): ${n}`,...e)}}function bs(n,...t){if(Aa.logLevel<=kt.ERROR){const e=t.map(Np);Aa.error(`Firestore (${Zo}): ${n}`,...e)}}function Uo(n,...t){if(Aa.logLevel<=kt.WARN){const e=t.map(Np);Aa.warn(`Firestore (${Zo}): ${n}`,...e)}}function Np(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,PS(n,i,e)}function PS(n,t,e){let i=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw bs(i),new Error(i)}function Kt(n,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,n||PS(t,a,i)}function Rt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Ss{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class I2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(rn.UNAUTHENTICATED))}shutdown(){}}class D2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class M2{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Kt(this.o===void 0,42304);let i=this.i;const a=d=>this.i!==i?(i=this.i,e(d)):Promise.resolve();let o=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new hr,t.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const d=o;t.enqueueRetryable(async()=>{await d.promise,await a(this.currentUser)})},h=d=>{ht("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ht("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new hr)}},0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ht("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Kt(typeof i.accessToken=="string",31837,{l:i}),new VS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kt(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class O2{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N2{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new O2(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k2{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ri(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Kt(this.o===void 0,3512);const i=o=>{o.error!=null&&ht("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ht("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};const a=o=>{ht("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):ht("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Kt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Cb(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=P2(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<e&&(i+=t.charAt(a[o]%62))}return i}}function Pt(n,t){return n<t?-1:n>t?1:0}function Qm(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const a=n.charAt(i),o=t.charAt(i);if(a!==o)return wm(a)===wm(o)?Pt(a,o):wm(a)?1:-1}return Pt(n.length,t.length)}const V2=55296,L2=57343;function wm(n){const t=n.charCodeAt(0);return t>=V2&&t<=L2}function zo(n,t,e){return n.length===t.length&&n.every((i,a)=>e(i,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__name__";class xi{constructor(t,e,i){e===void 0?e=0:e>t.length&&Tt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&Tt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return xi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const o=xi.compareSegments(t.get(a),e.get(a));if(o!==0)return o}return Pt(t.length,e.length)}static compareSegments(t,e){const i=xi.isNumericId(t),a=xi.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?xi.extractNumericId(t).compare(xi.extractNumericId(e)):Qm(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ur.fromString(t.substring(4,t.length-2))}}class re extends xi{construct(t,e,i){return new re(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ut(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new re(e)}static emptyPath(){return new re([])}}const U2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends xi{construct(t,e,i){return new We(t,e,i)}static isValidIdentifier(t){return U2.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ib}static keyField(){return new We([Ib])}static fromServerFormat(t){const e=[];let i="",a=0;const o=()=>{if(i.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;a<t.length;){const h=t[a];if(h==="\\"){if(a+1===t.length)throw new ut(J.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ut(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=d,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(i+=h,a++):(o(),a++)}if(o(),c)throw new ut(J.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new We(e)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t){this.path=t}static fromPath(t){return new pt(re.fromString(t))}static fromName(t){return new pt(re.fromString(t).popFirst(5))}static empty(){return new pt(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&re.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return re.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pt(new re(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n,t,e){if(!e)throw new ut(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function z2(n,t,e,i){if(t===!0&&i===!0)throw new ut(J.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Db(n){if(!pt.isDocumentKey(n))throw new ut(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mb(n){if(pt.isDocumentKey(n))throw new ut(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function US(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Gf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Tt(12329,{type:typeof n})}function ps(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ut(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Gf(n);throw new ut(J.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,t){const e={typeString:n};return t&&(e.value=t),e}function ru(n,t){if(!US(n))throw new ut(J.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const a=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){e=`JSON field '${i}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ut(J.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=-62135596800,Nb=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*Nb);return new le(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ut(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Ob)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nb}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ru(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Ob;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Re("string",le._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new le(0,0))}static max(){return new wt(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;function j2(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=wt.fromTimestamp(i===1e9?new le(e+1,0):new le(e,i));return new gr(a,pt.empty(),t)}function B2(n){return new gr(n.readTime,n.key,jc)}class gr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new gr(wt.min(),pt.empty(),jc)}static max(){return new gr(wt.max(),pt.empty(),jc)}}function H2(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=pt.comparator(n.documentKey,t.documentKey),e!==0?e:Pt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==F2)throw n;ht("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nt((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof nt?e:nt.resolve(e)}catch(e){return nt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.reject(e)}static resolve(t){return new nt((e,i)=>{e(t)})}static reject(t){return new nt((e,i)=>{i(t)})}static waitFor(t){return new nt((e,i)=>{let a=0,o=0,c=!1;t.forEach(h=>{++a,h.next(()=>{++o,c&&o===a&&e()},d=>i(d))}),c=!0,o===a&&e()})}static or(t){let e=nt.resolve(!1);for(const i of t)e=e.next(a=>a?nt.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,o)=>{i.push(e.call(this,a,o))}),this.waitFor(i)}static mapArray(t,e){return new nt((i,a)=>{const o=t.length,c=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;e(t[m]).next(_=>{c[m]=_,++h,h===o&&i(c)},_=>a(_))}})}static doWhile(t,e){return new nt((i,a)=>{const o=()=>{t()===!0?e().next(()=>{o()},a):i()};o()})}}function G2(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function tl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Yf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Kf(n){return n==null}function Af(n){return n===0&&1/n==-1/0}function Y2(n){return typeof n=="number"&&Number.isInteger(n)&&!Af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="";function K2(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=kb(t)),t=Q2(n.get(e),t);return kb(t)}function Q2(n,t){let e=t;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":e+="";break;case zS:e+="";break;default:e+=o}}return e}function kb(n){return n+zS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Tr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function jS(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.comparator=t,this.root=e||Xe.EMPTY}insert(t,e){return new fe(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(t){return new fe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zh(this.root,t,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zh(this.root,t,this.comparator,!0)}}class zh{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&a&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xe{constructor(t,e,i,a,o){this.key=t,this.value=e,this.color=i??Xe.RED,this.left=a??Xe.EMPTY,this.right=o??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,o){return new Xe(t??this.key,e??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const o=i(t,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(t,e,i),null):o===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return Xe.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,e,i,a,o){return this}insert(t,e,i){return new Xe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.comparator=t,this.data=new fe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Vb(this.data.getIterator())}getIteratorFrom(t){return new Vb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof ke)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ke(this.comparator);return e.data=t,e}}class Vb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.fields=t,t.sort(We.comparator)}static empty(){return new Dn([])}unionWith(t){let e=new ke(We.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Dn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return zo(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new BS("Invalid base64 string: "+o):o}}(t);return new Ze(e)}static fromUint8Array(t){const e=function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o}(t);return new Ze(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const X2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(n){if(Kt(!!n,39018),typeof n=="string"){let t=0;const e=X2.exec(n);if(Kt(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ve(n.seconds),nanos:ve(n.nanos)}}function ve(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function pr(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="server_timestamp",FS="__type__",qS="__previous_value__",GS="__local_write_time__";function Vp(n){return(n?.mapValue?.fields||{})[FS]?.stringValue===HS}function Qf(n){const t=n.mapValue.fields[qS];return Vp(t)?Qf(t):t}function Bc(n){const t=mr(n.mapValue.fields[GS].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t,e,i,a,o,c,h,d,m,_){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=_}}const wf="(default)";class Hc{constructor(t,e){this.projectId=t,this.database=e||wf}static empty(){return new Hc("","")}get isDefaultDatabase(){return this.database===wf}isEqual(t){return t instanceof Hc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="__type__",$2="__max__",jh={mapValue:{}},KS="__vector__",xf="value";function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vp(n)?4:J2(n)?9007199254740991:Z2(n)?10:11:Tt(28295,{value:n})}function Li(n,t){if(n===t)return!0;const e=_r(n);if(e!==_r(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Bc(n).isEqual(Bc(t));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=mr(a.timestampValue),h=mr(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(a,o){return pr(a.bytesValue).isEqual(pr(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(a,o){return ve(a.geoPointValue.latitude)===ve(o.geoPointValue.latitude)&&ve(a.geoPointValue.longitude)===ve(o.geoPointValue.longitude)}(n,t);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return ve(a.integerValue)===ve(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=ve(a.doubleValue),h=ve(o.doubleValue);return c===h?Af(c)===Af(h):isNaN(c)&&isNaN(h)}return!1}(n,t);case 9:return zo(n.arrayValue.values||[],t.arrayValue.values||[],Li);case 10:case 11:return function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if(Pb(c)!==Pb(h))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(h[d]===void 0||!Li(c[d],h[d])))return!1;return!0}(n,t);default:return Tt(52216,{left:n})}}function Fc(n,t){return(n.values||[]).find(e=>Li(e,t))!==void 0}function jo(n,t){if(n===t)return 0;const e=_r(n),i=_r(t);if(e!==i)return Pt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,t.booleanValue);case 2:return function(o,c){const h=ve(o.integerValue||o.doubleValue),d=ve(c.integerValue||c.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,t);case 3:return Lb(n.timestampValue,t.timestampValue);case 4:return Lb(Bc(n),Bc(t));case 5:return Qm(n.stringValue,t.stringValue);case 6:return function(o,c){const h=pr(o),d=pr(c);return h.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(o,c){const h=o.split("/"),d=c.split("/");for(let m=0;m<h.length&&m<d.length;m++){const _=Pt(h[m],d[m]);if(_!==0)return _}return Pt(h.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,c){const h=Pt(ve(o.latitude),ve(c.latitude));return h!==0?h:Pt(ve(o.longitude),ve(c.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Ub(n.arrayValue,t.arrayValue);case 10:return function(o,c){const h=o.fields||{},d=c.fields||{},m=h[xf]?.arrayValue,_=d[xf]?.arrayValue,v=Pt(m?.values?.length||0,_?.values?.length||0);return v!==0?v:Ub(m,_)}(n.mapValue,t.mapValue);case 11:return function(o,c){if(o===jh.mapValue&&c===jh.mapValue)return 0;if(o===jh.mapValue)return 1;if(c===jh.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=c.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const T=Qm(d[v],_[v]);if(T!==0)return T;const A=jo(h[d[v]],m[_[v]]);if(A!==0)return A}return Pt(d.length,_.length)}(n.mapValue,t.mapValue);default:throw Tt(23264,{he:e})}}function Lb(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Pt(n,t);const e=mr(n),i=mr(t),a=Pt(e.seconds,i.seconds);return a!==0?a:Pt(e.nanos,i.nanos)}function Ub(n,t){const e=n.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const o=jo(e[a],i[a]);if(o)return o}return Pt(e.length,i.length)}function Bo(n){return Xm(n)}function Xm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=mr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return pr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return pt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",a=!0;for(const o of e.values||[])a?a=!1:i+=",",i+=Xm(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",o=!0;for(const c of i)o?o=!1:a+=",",a+=`${c}:${Xm(e.fields[c])}`;return a+"}"}(n.mapValue):Tt(61005,{value:n})}function cf(n){switch(_r(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Qf(n);return t?16+cf(t):16;case 5:return 2*n.stringValue.length;case 6:return pr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+cf(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Tr(i.fields,(o,c)=>{a+=o.length+cf(c)}),a}(n.mapValue);default:throw Tt(13486,{value:n})}}function zb(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Wm(n){return!!n&&"integerValue"in n}function Lp(n){return!!n&&"arrayValue"in n}function jb(n){return!!n&&"nullValue"in n}function Bb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uf(n){return!!n&&"mapValue"in n}function Z2(n){return(n?.mapValue?.fields||{})[YS]?.stringValue===KS}function Ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Tr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Ic(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ic(n.arrayValue.values[e]);return t}return{...n}}function J2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(t){this.value=t}static empty(){return new vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!uf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ic(e)}setAll(t){let e=We.emptyPath(),i={},a=[];t.forEach((c,h)=>{if(!e.isImmediateParentOf(h)){const d=this.getFieldsMap(e);this.applyChanges(d,i,a),i={},a=[],e=h.popLast()}c?i[h.lastSegment()]=Ic(c):a.push(h.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,i,a)}delete(t){const e=this.field(t.popLast());uf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Li(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];uf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){Tr(e,(a,o)=>t[a]=o);for(const a of i)delete t[a]}clone(){return new vn(Ic(this.value))}}function QS(n){const t=[];return Tr(n.fields,(e,i)=>{const a=new We([e]);if(uf(i)){const o=QS(i.mapValue).fields;if(o.length===0)t.push(a);else for(const c of o)t.push(a.child(c))}else t.push(a)}),new Dn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,e,i,a,o,c,h){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(t){return new an(t,0,wt.min(),wt.min(),wt.min(),vn.empty(),0)}static newFoundDocument(t,e,i,a){return new an(t,1,e,wt.min(),i,a,0)}static newNoDocument(t,e){return new an(t,2,e,wt.min(),wt.min(),vn.empty(),0)}static newUnknownDocument(t,e){return new an(t,3,e,wt.min(),wt.min(),vn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof an&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(t,e){this.position=t,this.inclusive=e}}function Hb(n,t,e){let i=0;for(let a=0;a<n.position.length;a++){const o=t[a],c=n.position[a];if(o.field.isKeyField()?i=pt.comparator(pt.fromName(c.referenceValue),e.key):i=jo(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fb(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Li(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,e="asc"){this.field=t,this.dir=e}}function tD(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{}class xe extends XS{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new nD(t,e,i):e==="array-contains"?new rD(t,i):e==="in"?new aD(t,i):e==="not-in"?new oD(t,i):e==="array-contains-any"?new lD(t,i):new xe(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new iD(t,i):new sD(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(jo(e,this.value)):e!==null&&_r(this.value)===_r(e)&&this.matchesComparison(jo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends XS{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ri(t,e)}matches(t){return WS(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function WS(n){return n.op==="and"}function $S(n){return eD(n)&&WS(n)}function eD(n){for(const t of n.filters)if(t instanceof ri)return!1;return!0}function $m(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+Bo(n.value);if($S(n))return n.filters.map(t=>$m(t)).join(",");{const t=n.filters.map(e=>$m(e)).join(",");return`${n.op}(${t})`}}function ZS(n,t){return n instanceof xe?function(i,a){return a instanceof xe&&i.op===a.op&&i.field.isEqual(a.field)&&Li(i.value,a.value)}(n,t):n instanceof ri?function(i,a){return a instanceof ri&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,c,h)=>o&&ZS(c,a.filters[h]),!0):!1}(n,t):void Tt(19439)}function JS(n){return n instanceof xe?function(e){return`${e.field.canonicalString()} ${e.op} ${Bo(e.value)}`}(n):n instanceof ri?function(e){return e.op.toString()+" {"+e.getFilters().map(JS).join(" ,")+"}"}(n):"Filter"}class nD extends xe{constructor(t,e,i){super(t,e,i),this.key=pt.fromName(i.referenceValue)}matches(t){const e=pt.comparator(t.key,this.key);return this.matchesComparison(e)}}class iD extends xe{constructor(t,e){super(t,"in",e),this.keys=tA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class sD extends xe{constructor(t,e){super(t,"not-in",e),this.keys=tA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function tA(n,t){return(t.arrayValue?.values||[]).map(e=>pt.fromName(e.referenceValue))}class rD extends xe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Lp(e)&&Fc(e.arrayValue,this.value)}}class aD extends xe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Fc(this.value.arrayValue,e)}}class oD extends xe{constructor(t,e){super(t,"not-in",e)}matches(t){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Fc(this.value.arrayValue,e)}}class lD extends xe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Lp(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Fc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(t,e=null,i=[],a=[],o=null,c=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function qb(n,t=null,e=[],i=[],a=null,o=null,c=null){return new cD(n,t,e,i,a,o,c)}function Up(n){const t=Rt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>$m(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Kf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Bo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Bo(i)).join(",")),t.Te=e}return t.Te}function zp(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!tD(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!ZS(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Fb(n.startAt,t.startAt)&&Fb(n.endAt,t.endAt)}function Zm(n){return pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,e=null,i=[],a=[],o=null,c="F",h=null,d=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uD(n,t,e,i,a,o,c,h){return new el(n,t,e,i,a,o,c,h)}function jp(n){return new el(n)}function Gb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eA(n){return n.collectionGroup!==null}function Dc(n){const t=Rt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new ke(We.comparator);return c.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new qc(o,i))}),e.has(We.keyField().canonicalString())||t.Ie.push(new qc(We.keyField(),i))}return t.Ie}function Mi(n){const t=Rt(n);return t.Ee||(t.Ee=hD(t,Dc(n))),t.Ee}function hD(n,t){if(n.limitType==="F")return qb(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new qc(a.field,o)});const e=n.endAt?new Rf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Rf(n.startAt.position,n.startAt.inclusive):null;return qb(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Jm(n,t){const e=n.filters.concat([t]);return new el(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function tp(n,t,e){return new el(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Xf(n,t){return zp(Mi(n),Mi(t))&&n.limitType===t.limitType}function nA(n){return`${Up(Mi(n))}|lt:${n.limitType}`}function Ro(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>JS(a)).join(", ")}]`),Kf(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>Bo(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>Bo(a)).join(",")),`Target(${i})`}(Mi(n))}; limitType=${n.limitType})`}function Wf(n,t){return t.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):pt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,a){for(const o of Dc(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,t)&&function(i,a){return!(i.startAt&&!function(c,h,d){const m=Hb(c,h,d);return c.inclusive?m<=0:m<0}(i.startAt,Dc(i),a)||i.endAt&&!function(c,h,d){const m=Hb(c,h,d);return c.inclusive?m>=0:m>0}(i.endAt,Dc(i),a))}(n,t)}function fD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iA(n){return(t,e)=>{let i=!1;for(const a of Dc(n)){const o=dD(a,t,e);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function dD(n,t,e){const i=n.field.isKeyField()?pt.comparator(t.key,e.key):function(o,c,h){const d=c.data.field(o),m=h.data.field(o);return d!==null&&m!==null?jo(d,m):Tt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Tt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],t))return void(a[o]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Tr(this.inner,(e,i)=>{for(const[a,o]of i)t(a,o)})}isEmpty(){return jS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new fe(pt.comparator);function Ts(){return gD}const sA=new fe(pt.comparator);function bc(...n){let t=sA;for(const e of n)t=t.insert(e.key,e);return t}function rA(n){let t=sA;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function da(){return Mc()}function aA(){return Mc()}function Mc(){return new Ca(n=>n.toString(),(n,t)=>n.isEqual(t))}const mD=new fe(pt.comparator),pD=new ke(pt.comparator);function Vt(...n){let t=pD;for(const e of n)t=t.add(e);return t}const _D=new ke(Pt);function yD(){return _D}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(t)?"-0":t}}function oA(n){return{integerValue:""+n}}function vD(n,t){return Y2(t)?oA(t):Bp(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this._=void 0}}function bD(n,t,e){return n instanceof Cf?function(a,o){const c={fields:{[FS]:{stringValue:HS},[GS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Vp(o)&&(o=Qf(o)),o&&(c.fields[qS]=o),{mapValue:c}}(e,t):n instanceof Gc?cA(n,t):n instanceof Yc?uA(n,t):function(a,o){const c=lA(a,o),h=Yb(c)+Yb(a.Ae);return Wm(c)&&Wm(a.Ae)?oA(h):Bp(a.serializer,h)}(n,t)}function TD(n,t,e){return n instanceof Gc?cA(n,t):n instanceof Yc?uA(n,t):e}function lA(n,t){return n instanceof If?function(i){return Wm(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}class Cf extends $f{}class Gc extends $f{constructor(t){super(),this.elements=t}}function cA(n,t){const e=hA(t);for(const i of n.elements)e.some(a=>Li(a,i))||e.push(i);return{arrayValue:{values:e}}}class Yc extends $f{constructor(t){super(),this.elements=t}}function uA(n,t){let e=hA(t);for(const i of n.elements)e=e.filter(a=>!Li(a,i));return{arrayValue:{values:e}}}class If extends $f{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function Yb(n){return ve(n.integerValue||n.doubleValue)}function hA(n){return Lp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ED(n,t){return n.field.isEqual(t.field)&&function(i,a){return i instanceof Gc&&a instanceof Gc||i instanceof Yc&&a instanceof Yc?zo(i.elements,a.elements,Li):i instanceof If&&a instanceof If?Li(i.Ae,a.Ae):i instanceof Cf&&a instanceof Cf}(n.transform,t.transform)}class SD{constructor(t,e){this.version=t,this.transformResults=e}}class Oi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Oi}static exists(t){return new Oi(void 0,t)}static updateTime(t){return new Oi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Zf{}function fA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new gA(n.key,Oi.none()):new au(n.key,n.data,Oi.none());{const e=n.data,i=vn.empty();let a=new ke(We.comparator);for(let o of t.fields)if(!a.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),a=a.add(o)}return new Er(n.key,i,new Dn(a.toArray()),Oi.none())}}function AD(n,t,e){n instanceof au?function(a,o,c){const h=a.value.clone(),d=Qb(a.fieldTransforms,o,c.transformResults);h.setAll(d),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,t,e):n instanceof Er?function(a,o,c){if(!hf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=Qb(a.fieldTransforms,o,c.transformResults),d=o.data;d.setAll(dA(a)),d.setAll(h),o.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,t,e):function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,t,e)}function Oc(n,t,e,i){return n instanceof au?function(o,c,h,d){if(!hf(o.precondition,c))return h;const m=o.value.clone(),_=Xb(o.fieldTransforms,d,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,t,e,i):n instanceof Er?function(o,c,h,d){if(!hf(o.precondition,c))return h;const m=Xb(o.fieldTransforms,d,c),_=c.data;return _.setAll(dA(o)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(o,c,h){return hf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,t,e)}function wD(n,t){let e=null;for(const i of n.fieldTransforms){const a=t.data.field(i.field),o=lA(i.transform,a||null);o!=null&&(e===null&&(e=vn.empty()),e.set(i.field,o))}return e||null}function Kb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&zo(i,a,(o,c)=>ED(o,c))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class au extends Zf{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Er extends Zf{constructor(t,e,i,a,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dA(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function Qb(n,t,e){const i=new Map;Kt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let a=0;a<e.length;a++){const o=n[a],c=o.transform,h=t.data.field(o.field);i.set(o.field,TD(c,h,e[a]))}return i}function Xb(n,t,e){const i=new Map;for(const a of n){const o=a.transform,c=e.data.field(a.field);i.set(a.field,bD(o,c,t))}return i}class gA extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xD extends Zf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(t.key)&&AD(o,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Oc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Oc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=aA();return this.mutations.forEach(a=>{const o=t.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=e.has(a.key)?null:h;const d=fA(c,h);d!==null&&i.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(wt.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Vt())}isEqual(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,(e,i)=>Kb(e,i))&&zo(this.baseMutations,t.baseMutations,(e,i)=>Kb(e,i))}}class Hp{constructor(t,e,i,a){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=a}static from(t,e,i){Kt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let a=function(){return mD}();const o=t.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,i[c].version);return new Hp(t,e,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Bt;function DD(n){switch(n){case J.OK:return Tt(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Tt(15467,{code:n})}}function mA(n){if(n===void 0)return bs("GRPC error has no .code"),J.UNKNOWN;switch(n){case we.OK:return J.OK;case we.CANCELLED:return J.CANCELLED;case we.UNKNOWN:return J.UNKNOWN;case we.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case we.INTERNAL:return J.INTERNAL;case we.UNAVAILABLE:return J.UNAVAILABLE;case we.UNAUTHENTICATED:return J.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case we.NOT_FOUND:return J.NOT_FOUND;case we.ALREADY_EXISTS:return J.ALREADY_EXISTS;case we.PERMISSION_DENIED:return J.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case we.ABORTED:return J.ABORTED;case we.OUT_OF_RANGE:return J.OUT_OF_RANGE;case we.UNIMPLEMENTED:return J.UNIMPLEMENTED;case we.DATA_LOSS:return J.DATA_LOSS;default:return Tt(39323,{code:n})}}(Bt=we||(we={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new ur([4294967295,4294967295],0);function Wb(n){const t=MD().encode(n),e=new IS;return e.update(t),new Uint8Array(e.digest())}function $b(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ur([e,i],0),new ur([a,o],0)]}class Fp{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Tc(`Invalid padding: ${e}`);if(i<0)throw new Tc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=ur.fromNumber(this.ge)}ye(t,e,i){let a=t.add(e.multiply(ur.fromNumber(i)));return a.compare(OD)===1&&(a=new ur([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=Wb(t),[i,a]=$b(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new Fp(o,a,e);return i.forEach(h=>c.insert(h)),c}insert(t){if(this.ge===0)return;const e=Wb(t),[i,a]=$b(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,a,o);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,e,i,a,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,ou.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Jf(wt.min(),a,new fe(Pt),Ts(),Vt())}}class ou{constructor(t,e,i,a,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new ou(i,e,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,e,i,a){this.be=t,this.removedTargetIds=e,this.key=i,this.De=a}}class pA{constructor(t,e){this.targetId=t,this.Ce=e}}class _A{constructor(t,e,i=Ze.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class Zb{constructor(){this.ve=0,this.Fe=Jb(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),e=Vt(),i=Vt();return this.Fe.forEach((a,o)=>{switch(o){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:Tt(38017,{changeType:o})}}),new ou(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=Jb()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ND{constructor(t){this.Ge=t,this.ze=new Map,this.je=Ts(),this.Je=Bh(),this.He=Bh(),this.Ye=new fe(Pt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:Tt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach((i,a)=>{this.rt(a)&&e(a)})}st(t){const e=t.targetId,i=t.Ce.count,a=this.ot(e);if(a){const o=a.target;if(Zm(o))if(i===0){const c=new pt(o.path);this.et(e,c,an.newNoDocument(c,wt.min()))}else Kt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const h=this.ut(t),d=h?this.ct(h,t,c):1;if(d!==0){this.it(e);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,m)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=e;let c,h;try{c=pr(i).toUint8Array()}catch(d){if(d instanceof BS)return Uo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Fp(c,a,o)}catch(d){return Uo(d instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.ge===0?null:h}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let a=0;return i.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(h)||(this.et(e,o,null),a++)}),a}Tt(t){const e=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&Zm(h.target)){const d=new pt(h.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,an.newNoDocument(d,t))}o.Be&&(e.set(c,o.ke()),o.qe())}});let i=Vt();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(d=>{const m=this.ot(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.je.forEach((o,c)=>c.setReadTime(t));const a=new Jf(t,e,this.Ye,this.je,i);return this.je=Ts(),this.Je=Bh(),this.He=Bh(),this.Ye=new fe(Pt),a}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,e)?a.Qe(e,1):a.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new Zb,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new ke(Pt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new ke(Pt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ht("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Zb),this.Ge.getRemoteKeysForTarget(t).forEach(e=>{this.et(t,e,null)})}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Bh(){return new fe(pt.comparator)}function Jb(){return new fe(pt.comparator)}const kD={asc:"ASCENDING",desc:"DESCENDING"},PD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VD={and:"AND",or:"OR"};class LD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ep(n,t){return n.useProto3Json||Kf(t)?t:{value:t}}function Df(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function UD(n,t){return Df(n,t.toTimestamp())}function Ni(n){return Kt(!!n,49232),wt.fromTimestamp(function(e){const i=mr(e);return new le(i.seconds,i.nanos)}(n))}function qp(n,t){return np(n,t).canonicalString()}function np(n,t){const e=function(a){return new re(["projects",a.projectId,"databases",a.database])}(n).child("documents");return t===void 0?e:e.child(t)}function vA(n){const t=re.fromString(n);return Kt(AA(t),10190,{key:t.toString()}),t}function ip(n,t){return qp(n.databaseId,t.path)}function xm(n,t){const e=vA(t);if(e.get(1)!==n.databaseId.projectId)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ut(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new pt(TA(e))}function bA(n,t){return qp(n.databaseId,t)}function zD(n){const t=vA(n);return t.length===4?re.emptyPath():TA(t)}function sp(n){return new re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TA(n){return Kt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tT(n,t,e){return{name:ip(n,t),fields:e.value.mapValue.fields}}function jD(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Tt(39313,{state:m})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Kt(_===void 0||typeof _=="string",58123),Ze.fromBase64String(_||"")):(Kt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Ze.fromUint8Array(_||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,h=c&&function(m){const _=m.code===void 0?J.UNKNOWN:mA(m.code);return new ut(_,m.message||"")}(c);e=new _A(i,a,o,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=xm(n,i.document.name),o=Ni(i.document.updateTime),c=i.document.createTime?Ni(i.document.createTime):wt.min(),h=new vn({mapValue:{fields:i.document.fields}}),d=an.newFoundDocument(a,o,c,h),m=i.targetIds||[],_=i.removedTargetIds||[];e=new ff(m,_,d.key,d)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=xm(n,i.document),o=i.readTime?Ni(i.readTime):wt.min(),c=an.newNoDocument(a,o),h=i.removedTargetIds||[];e=new ff([],h,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=xm(n,i.document),o=i.removedTargetIds||[];e=new ff([],o,a,null)}else{if(!("filter"in t))return Tt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,c=new ID(a,o),h=i.targetId;e=new pA(h,c)}}return e}function BD(n,t){let e;if(t instanceof au)e={update:tT(n,t.key,t.value)};else if(t instanceof gA)e={delete:ip(n,t.key)};else if(t instanceof Er)e={update:tT(n,t.key,t.data),updateMask:WD(t.fieldMask)};else{if(!(t instanceof xD))return Tt(16599,{Vt:t.type});e={verify:ip(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,c){const h=c.transform;if(h instanceof Cf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Gc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Yc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof If)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Tt(20930,{transform:c.transform})}(0,i))),t.precondition.isNone||(e.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:UD(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Tt(27497)}(n,t.precondition)),e}function HD(n,t){return n&&n.length>0?(Kt(t!==void 0,14353),n.map(e=>function(a,o){let c=a.updateTime?Ni(a.updateTime):Ni(o);return c.isEqual(wt.min())&&(c=Ni(o)),new SD(c,a.transformResults||[])}(e,t))):[]}function FD(n,t){return{documents:[bA(n,t.path)]}}function qD(n,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=bA(n,a);const o=function(m){if(m.length!==0)return SA(ri.create(m,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const c=function(m){if(m.length!==0)return m.map(_=>function(T){return{field:Co(T.field),direction:KD(T.dir)}}(_))}(t.orderBy);c&&(e.structuredQuery.orderBy=c);const h=ep(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(t.endAt)),{ft:e,parent:a}}function GD(n){let t=zD(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){Kt(i===1,65062);const _=e.from[0];_.allDescendants?a=_.collectionId:t=t.child(_.collectionId)}let o=[];e.where&&(o=function(v){const T=EA(v);return T instanceof ri&&$S(T)?T.getFilters():[T]}(e.where));let c=[];e.orderBy&&(c=function(v){return v.map(T=>function(C){return new qc(Io(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(T))}(e.orderBy));let h=null;e.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,Kf(T)?null:T}(e.limit));let d=null;e.startAt&&(d=function(v){const T=!!v.before,A=v.values||[];return new Rf(A,T)}(e.startAt));let m=null;return e.endAt&&(m=function(v){const T=!v.before,A=v.values||[];return new Rf(A,T)}(e.endAt)),uD(t,a,c,o,h,"F",d,m)}function YD(n,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:a})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function EA(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Io(e.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Io(e.unaryFilter.field);return xe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Io(e.unaryFilter.field);return xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Io(e.unaryFilter.field);return xe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(n):n.fieldFilter!==void 0?function(e){return xe.create(Io(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ri.create(e.compositeFilter.filters.map(i=>EA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(e.compositeFilter.op))}(n):Tt(30097,{filter:n})}function KD(n){return kD[n]}function QD(n){return PD[n]}function XD(n){return VD[n]}function Co(n){return{fieldPath:n.canonicalString()}}function Io(n){return We.fromServerFormat(n.fieldPath)}function SA(n){return n instanceof xe?function(e){if(e.op==="=="){if(Bb(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NAN"}};if(jb(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Bb(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NOT_NAN"}};if(jb(e.value))return{unaryFilter:{field:Co(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(e.field),op:QD(e.op),value:e.value}}}(n):n instanceof ri?function(e){const i=e.getFilters().map(a=>SA(a));return i.length===1?i[0]:{compositeFilter:{op:XD(e.op),filters:i}}}(n):Tt(54877,{filter:n})}function WD(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function AA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,e,i,a,o=wt.min(),c=wt.min(),h=Ze.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(t){return new rr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(t){this.yt=t}}function ZD(n){const t=GD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.Cn=new tM}addToCollectionParentIndex(t,e){return this.Cn.add(e),nt.resolve()}getCollectionParents(t,e){return nt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return nt.resolve()}deleteFieldIndex(t,e){return nt.resolve()}deleteAllFieldIndexes(t){return nt.resolve()}createTargetIndexes(t,e){return nt.resolve()}getDocumentsMatchingTarget(t,e){return nt.resolve(null)}getIndexType(t,e){return nt.resolve(0)}getFieldIndexes(t,e){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,e){return nt.resolve(gr.min())}getMinOffsetFromCollectionGroup(t,e){return nt.resolve(gr.min())}updateCollectionGroup(t,e,i){return nt.resolve()}updateIndexEntries(t,e){return nt.resolve()}}class tM{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new ke(re.comparator),o=!a.has(i);return this.index[e]=a.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new ke(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wA=41943040;class yn{static withCacheSize(t){return new yn(t,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(wA,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ho(0)}static cr(){return new Ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="LruGarbageCollector",eM=1048576;function iT([n,t],[e,i]){const a=Pt(n,e);return a===0?Pt(t,i):a}class nM{constructor(t){this.Ir=t,this.buffer=new ke(iT),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();iT(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class iM{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ht(nT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){tl(e)?ht(nT,"Ignoring IndexedDB error during garbage collection: ",e):await Jo(e)}await this.Vr(3e5)})}}class sM{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return nt.resolve(Yf.ce);const i=new nM(e);return this.mr.forEachTarget(t,a=>i.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>i.Ar(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ht("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(eT)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ht("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eT):this.yr(t,e))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,a,o,c,h,d,m;const _=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ht("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(m=Date.now(),xo()<=kt.DEBUG&&ht("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${v} documents in `+(m-d)+`ms
Total Duration: ${m-_}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function rM(n,t){return new sM(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.changes=new Ca(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,an.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?nt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&Oc(i.mutation,a,Dn.empty(),le.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Vt()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Vt()){const a=da();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(o=>{let c=bc();return o.forEach((h,d)=>{c=c.insert(h,d.overlayedDocument)}),c}))}getOverlayedDocuments(t,e){const i=da();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Vt()))}populateOverlays(t,e,i){const a=[];return i.forEach(o=>{e.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(t,a).next(o=>{o.forEach((c,h)=>{e.set(c,h)})})}computeViews(t,e,i,a){let o=Ts();const c=Mc(),h=function(){return Mc()}();return e.forEach((d,m)=>{const _=i.get(m.key);a.has(m.key)&&(_===void 0||_.mutation instanceof Er)?o=o.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),Oc(_.mutation,m,_.mutation.getFieldMask(),le.now())):c.set(m.key,Dn.empty())}),this.recalculateAndSaveOverlays(t,o).next(d=>(d.forEach((m,_)=>c.set(m,_)),e.forEach((m,_)=>h.set(m,new oM(_,c.get(m)??null))),h))}recalculateAndSaveOverlays(t,e){const i=Mc();let a=new fe((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(c=>{for(const h of c)h.keys().forEach(d=>{const m=e.get(d);if(m===null)return;let _=i.get(d)||Dn.empty();_=h.applyToLocalView(m,_),i.set(d,_);const v=(a.get(h.batchId)||Vt()).add(d);a=a.insert(h.batchId,v)})}).next(()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,_=d.value,v=aA();_.forEach(T=>{if(!o.has(T)){const A=fA(e.get(T),i.get(T));A!==null&&v.set(T,A),o=o.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(t,m,v))}return nt.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(c){return pt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):eA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-o.size):nt.resolve(da());let h=jc,d=o;return c.next(m=>nt.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?nt.resolve():this.remoteDocumentCache.getEntry(t,_).next(T=>{d=d.insert(_,T)}))).next(()=>this.populateOverlays(t,m,o)).next(()=>this.computeViews(t,d,m,Vt())).next(_=>({batchId:h,changes:rA(_)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pt(e)).next(i=>{let a=bc();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const o=e.collectionGroup;let c=bc();return this.indexManager.getCollectionParents(t,o).next(h=>nt.forEach(h,d=>{const m=function(v,T){return new el(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,d.child(o));return this.getDocumentsMatchingCollectionQuery(t,m,i,a).next(_=>{_.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(t,e,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,a))).next(c=>{o.forEach((d,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,an.newInvalidDocument(_)))});let h=bc();return c.forEach((d,m)=>{const _=o.get(d);_!==void 0&&Oc(_.mutation,m,Dn.empty(),le.now()),Wf(e,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return nt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:Ni(a.createTime)}}(e)),nt.resolve()}getNamedQuery(t,e){return nt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,function(a){return{name:a.name,query:ZD(a.bundledQuery),readTime:Ni(a.readTime)}}(e)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.overlays=new fe(pt.comparator),this.qr=new Map}getOverlay(t,e){return nt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=da();return nt.forEach(e,a=>this.getOverlay(t,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,o)=>{this.St(t,e,o)}),nt.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),nt.resolve()}getOverlaysForCollection(t,e,i){const a=da(),o=e.length+1,c=new pt(e.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&a.set(d.getKey(),d)}return nt.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let o=new fe((m,_)=>m-_);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>i){let _=o.get(m.largestBatchId);_===null&&(_=da(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=da(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=a)););return nt.resolve(h)}St(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new CD(e,i));let o=this.qr.get(e);o===void 0&&(o=Vt(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(t){return nt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.Qr=new ke(Be.$r),this.Ur=new ke(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new Be(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Gr(new Be(t,e))}zr(t,e){t.forEach(i=>this.removeReference(i,e))}jr(t){const e=new pt(new re([])),i=new Be(e,t),a=new Be(e,t+1),o=[];return this.Ur.forEachInRange([i,a],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new pt(new re([])),i=new Be(e,t),a=new Be(e,t+1);let o=Vt();return this.Ur.forEachInRange([i,a],c=>{o=o.add(c.key)}),o}containsKey(t){const e=new Be(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Be{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return pt.comparator(t.key,e.key)||Pt(t.Yr,e.Yr)}static Kr(t,e){return Pt(t.Yr,e.Yr)||pt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new ke(Be.$r)}checkEmpty(t){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new RD(o,e,i,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new Be(h.key,o)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return nt.resolve(c)}lookupMutationBatch(t,e){return nt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.ei(i),o=a<0?0:a;return nt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?Pp:this.tr-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Be(e,0),a=new Be(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,a],c=>{const h=this.Xr(c.Yr);o.push(h)}),nt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new ke(Pt);return e.forEach(a=>{const o=new Be(a,0),c=new Be(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{i=i.add(h.Yr)})}),nt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let o=i;pt.isDocumentKey(o)||(o=o.child(""));const c=new Be(new pt(o),0);let h=new ke(Pt);return this.Zr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(d.Yr)),!0)},c),nt.resolve(this.ti(h))}ti(t){const e=[];return t.forEach(i=>{const a=this.Xr(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){Kt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return nt.forEach(e.mutations,a=>{const o=new Be(a.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=i})}ir(t){}containsKey(t,e){const i=new Be(e,0),a=this.Zr.firstAfterOrEqual(i);return nt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,nt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(t){this.ri=t,this.docs=function(){return new fe(pt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),o=a?a.size:0,c=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return nt.resolve(i?i.document.mutableCopy():an.newInvalidDocument(e))}getEntries(t,e){let i=Ts();return e.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():an.newInvalidDocument(a))}),nt.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let o=Ts();const c=e.path,h=new pt(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||H2(B2(_),i)<=0||(a.has(_.key)||Wf(e,_))&&(o=o.insert(_.key,_.mutableCopy()))}return nt.resolve(o)}getAllFromCollectionGroup(t,e,i,a){Tt(9500)}ii(t,e){return nt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new gM(this)}getSize(t){return nt.resolve(this.size)}}class gM extends aM{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(i)}),nt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(t){this.persistence=t,this.si=new Ca(e=>Up(e),zp),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=Ho.ur()}forEachTarget(t,e){return this.si.forEach((i,a)=>e(a)),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),nt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Ho(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,nt.resolve()}updateTargetData(t,e){return this.Pr(e),nt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,e,i){let a=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(t,h.targetId)),a++)}),nt.waitFor(o).next(()=>a)}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return nt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),nt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const a=this.persistence.referenceDelegate,o=[];return a&&e.forEach(c=>{o.push(a.markPotentiallyOrphaned(t,c))}),nt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),nt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return nt.resolve(i)}containsKey(t,e){return nt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,e){this.ui={},this.overlays={},this.ci=new Yf(0),this.li=!1,this.li=!0,this.hi=new hM,this.referenceDelegate=t(this),this.Pi=new mM(this),this.indexManager=new JD,this.remoteDocumentCache=function(a){return new dM(a)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new $D(e),this.Ii=new cM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new uM,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new fM(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){ht("MemoryPersistence","Starting transaction:",t);const a=new pM(this.ci.next());return this.referenceDelegate.Ei(),i(a).next(o=>this.referenceDelegate.di(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}Ai(t,e){return nt.or(Object.values(this.ui).map(i=>()=>i.containsKey(t,e)))}}class pM extends q2{constructor(t){super(),this.currentSequenceNumber=t}}class Yp{constructor(t){this.persistence=t,this.Ri=new Gp,this.Vi=null}static mi(t){return new Yp(t)}get fi(){if(this.Vi)return this.Vi;throw Tt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),nt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),nt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),nt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach(a=>this.fi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.fi,i=>{const a=pt.fromPath(i);return this.gi(t,a).next(o=>{o||e.removeEntry(a,wt.min())})}).next(()=>(this.Vi=null,e.apply(t)))}updateLimboDocument(t,e){return this.gi(t,e).next(i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())})}Ti(t){return 0}gi(t,e){return nt.or([()=>nt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Mf{constructor(t,e){this.persistence=t,this.pi=new Ca(i=>K2(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=rM(this,e)}static mi(t,e){return new Mf(t,e)}Ei(){}di(t){return nt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}wr(t){let e=0;return this.pr(t,i=>{e++}).next(()=>e)}pr(t,e){return nt.forEach(this.pi,(i,a)=>this.br(t,i,a).next(o=>o?nt.resolve():e(a)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(t,c=>this.br(t,c,e).next(h=>{h||(i++,o.removeEntry(c,wt.min()))})).next(()=>o.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),nt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),nt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),nt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),nt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=cf(t.data.value)),e}br(t,e,i){return nt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.pi.get(e);return nt.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=a}static As(t,e){let i=Vt(),a=Vt();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Kp(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uR()?8:G2(ln())>0?6:4}()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,a){const o={result:null};return this.ys(t,e).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(t,e,a,i).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new _M;return this.Ss(t,e,c).next(h=>{if(o.result=h,this.Vs)return this.bs(t,e,c,h.size)})}).next(()=>o.result)}bs(t,e,i,a){return i.documentReadCount<this.fs?(xo()<=kt.DEBUG&&ht("QueryEngine","SDK will not create cache indexes for query:",Ro(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),nt.resolve()):(xo()<=kt.DEBUG&&ht("QueryEngine","Query:",Ro(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(xo()<=kt.DEBUG&&ht("QueryEngine","The SDK decides to create cache indexes for query:",Ro(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mi(e))):nt.resolve())}ys(t,e){if(Gb(e))return nt.resolve(null);let i=Mi(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=tp(e,null,"F"),i=Mi(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{const c=Vt(...o);return this.ps.getDocuments(t,c).next(h=>this.indexManager.getMinOffset(t,i).next(d=>{const m=this.Ds(e,h);return this.Cs(e,m,c,d.readTime)?this.ys(t,tp(e,null,"F")):this.vs(t,m,e,d)}))})))}ws(t,e,i,a){return Gb(e)||a.isEqual(wt.min())?nt.resolve(null):this.ps.getDocuments(t,i).next(o=>{const c=this.Ds(e,o);return this.Cs(e,c,i,a)?nt.resolve(null):(xo()<=kt.DEBUG&&ht("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ro(e)),this.vs(t,c,e,j2(a,jc)).next(h=>h))})}Ds(t,e){let i=new ke(iA(t));return e.forEach((a,o)=>{Wf(t,o)&&(i=i.add(o))}),i}Cs(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(t,e,i){return xo()<=kt.DEBUG&&ht("QueryEngine","Using full collection scan to execute query:",Ro(e)),this.ps.getDocumentsMatchingQuery(t,e,gr.min(),i)}vs(t,e,i,a){return this.ps.getDocumentsMatchingQuery(t,i,a).next(o=>(e.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="LocalStore",vM=3e8;class bM{constructor(t,e,i,a){this.persistence=t,this.Fs=e,this.serializer=a,this.Ms=new fe(Pt),this.xs=new Ca(o=>Up(o),zp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ms))}}function TM(n,t,e,i){return new bM(n,t,e,i)}async function RA(n,t){const e=Rt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{const c=[],h=[];let d=Vt();for(const m of a){c.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return e.localDocuments.getDocuments(i,d).next(m=>({Ls:m,removedBatchIds:c,addedBatchIds:h}))})})}function EM(n,t){const e=Rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return function(h,d,m,_){const v=m.batch,T=v.keys();let A=nt.resolve();return T.forEach(C=>{A=A.next(()=>_.getEntry(d,C)).next(k=>{const M=m.docVersions.get(C);Kt(M!==null,48541),k.version.compareTo(M)<0&&(v.applyToRemoteDocument(k,m),k.isValidDocument()&&(k.setReadTime(m.commitVersion),_.addEntry(k)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(d,v))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,a,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Vt();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(t))).next(()=>e.localDocuments.getDocuments(i,a))})}function CA(n){const t=Rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function SM(n,t){const e=Rt(n),i=t.snapshotVersion;let a=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});a=e.Ms;const h=[];t.targetChanges.forEach((_,v)=>{const T=a.get(v);if(!T)return;h.push(e.Pi.removeMatchingKeys(o,_.removedDocuments,v).next(()=>e.Pi.addMatchingKeys(o,_.addedDocuments,v)));let A=T.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(v)!==null?A=A.withResumeToken(Ze.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),a=a.insert(v,A),function(k,M,G){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=vM?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(T,A,_)&&h.push(e.Pi.updateTargetData(o,A))});let d=Ts(),m=Vt();if(t.documentUpdates.forEach(_=>{t.resolvedLimboDocuments.has(_)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(AM(o,c,t.documentUpdates).next(_=>{d=_.ks,m=_.qs})),!i.isEqual(wt.min())){const _=e.Pi.getLastRemoteSnapshotVersion(o).next(v=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return nt.waitFor(h).next(()=>c.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(e.Ms=a,o))}function AM(n,t,e){let i=Vt(),a=Vt();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let c=Ts();return e.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),d.isNoDocument()&&d.version.isEqual(wt.min())?(t.removeEntry(h,d.readTime),c=c.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(d),c=c.insert(h,d)):ht(Qp,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{ks:c,qs:a}})}function wM(n,t){const e=Rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=Pp),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function xM(n,t){const e=Rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.Pi.getTargetData(i,t).next(o=>o?(a=o,nt.resolve(a)):e.Pi.allocateTargetId(i).next(c=>(a=new rr(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i})}async function rp(n,t,e){const i=Rt(n),a=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!tl(c))throw c;ht(Qp,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ms=i.Ms.remove(t),i.xs.delete(a.target)}function sT(n,t,e){const i=Rt(n);let a=wt.min(),o=Vt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(d,m,_){const v=Rt(d),T=v.xs.get(_);return T!==void 0?nt.resolve(v.Ms.get(T)):v.Pi.getTargetData(m,_)}(i,c,Mi(t)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,h.targetId).next(d=>{o=d})}).next(()=>i.Fs.getDocumentsMatchingQuery(c,t,e?a:wt.min(),e?o:Vt())).next(h=>(RM(i,fD(t),h),{documents:h,Qs:o})))}function RM(n,t,e){let i=n.Os.get(t)||wt.min();e.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Os.set(t,i)}class rT{constructor(){this.activeTargetIds=yD()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class CM{constructor(){this.Mo=new rT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new rT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="ConnectivityMonitor";class oT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ht(aT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ht(aT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function ap(){return Hh===null?Hh=function(){return 268435456+Math.round(2147483648*Math.random())}():Hh++,"0x"+Hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="RestConnection",DM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MM{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===wf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(t,e,i,a,o){const c=ap(),h=this.zo(t,e.toUriEncodedString());ht(Rm,`Sending RPC '${t}' ${c}:`,h,i);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,a,o);const{host:m}=new URL(h),_=Xo(m);return this.Jo(t,h,d,i,_).then(v=>(ht(Rm,`Received RPC '${t}' ${c}: `,v),v),v=>{throw Uo(Rm,`RPC '${t}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Ho(t,e,i,a,o,c){return this.Go(t,e,i,a,o)}jo(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,o)=>t[o]=a),i&&i.headers.forEach((a,o)=>t[o]=a)}zo(t,e){const i=DM[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class NM extends MM{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,a,o){const c=ap();return new Promise((h,d)=>{const m=new DS;m.setWithCredentials(!0),m.listenOnce(MS.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case lf.NO_ERROR:const v=m.getResponseJson();ht(nn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),h(v);break;case lf.TIMEOUT:ht(nn,`RPC '${t}' ${c} timed out`),d(new ut(J.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const T=m.getStatus();if(ht(nn,`RPC '${t}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const C=A?.error;if(C&&C.status&&C.message){const k=function(G){const $=G.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf($)>=0?$:J.UNKNOWN}(C.status);d(new ut(k,C.message))}else d(new ut(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new ut(J.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{l_:t,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ht(nn,`RPC '${t}' ${c} completed.`)}});const _=JSON.stringify(a);ht(nn,`RPC '${t}' ${c} sending request:`,a),m.send(e,"POST",_,i,15)})}T_(t,e,i){const a=ap(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=kS(),h=NS(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,e,i),d.encodeInitMessageHeaders=!0;const _=o.join("");ht(nn,`Creating RPC '${t}' stream ${a}: ${_}`,d);const v=c.createWebChannel(_,d);this.I_(v);let T=!1,A=!1;const C=new OM({Yo:M=>{A?ht(nn,`Not sending because RPC '${t}' stream ${a} is closed:`,M):(T||(ht(nn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),T=!0),ht(nn,`RPC '${t}' stream ${a} sending:`,M),v.send(M))},Zo:()=>v.close()}),k=(M,G,$)=>{M.listen(G,tt=>{try{$(tt)}catch(st){setTimeout(()=>{throw st},0)}})};return k(v,vc.EventType.OPEN,()=>{A||(ht(nn,`RPC '${t}' stream ${a} transport opened.`),C.o_())}),k(v,vc.EventType.CLOSE,()=>{A||(A=!0,ht(nn,`RPC '${t}' stream ${a} transport closed`),C.a_(),this.E_(v))}),k(v,vc.EventType.ERROR,M=>{A||(A=!0,Uo(nn,`RPC '${t}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),C.a_(new ut(J.UNAVAILABLE,"The operation could not be completed")))}),k(v,vc.EventType.MESSAGE,M=>{if(!A){const G=M.data[0];Kt(!!G,16349);const $=G,tt=$?.error||$[0]?.error;if(tt){ht(nn,`RPC '${t}' stream ${a} received error:`,tt);const st=tt.status;let X=function(x){const I=we[x];if(I!==void 0)return mA(I)}(st),ot=tt.message;X===void 0&&(X=J.INTERNAL,ot="Unknown error status: "+st+" with message "+tt.message),A=!0,C.a_(new ut(X,ot)),v.close()}else ht(nn,`RPC '${t}' stream ${a} received:`,G),C.u_(G)}}),k(h,OS.STAT_EVENT,M=>{M.stat===Km.PROXY?ht(nn,`RPC '${t}' stream ${a} detected buffering proxy`):M.stat===Km.NOPROXY&&ht(nn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(e=>e===t)}}function Cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n){return new LD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t,e,i=1e3,a=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,e-i);a>0&&ht("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="PersistentStream";class DA{constructor(t,e,i,a,o,c,h,d){this.Mi=t,this.S_=i,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new IA(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===J.RESOURCE_EXHAUSTED?(bs(e.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.D_===e&&this.G_(i,a)},i=>{t(()=>{const a=new ut(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)})})}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{i(()=>this.z_(a))}),this.stream.onMessage(a=>{i(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return ht(lT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget(()=>this.D_===t?e():(ht(lT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kM extends DA{constructor(t,e,i,a,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=jD(this.serializer,t),i=function(o){if(!("targetChange"in o))return wt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?wt.min():c.readTime?Ni(c.readTime):wt.min()}(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=sp(this.serializer),e.addTarget=function(o,c){let h;const d=c.target;if(h=Zm(d)?{documents:FD(o,d)}:{query:qD(o,d).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=yA(o,c.resumeToken);const m=ep(o,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(wt.min())>0){h.readTime=Df(o,c.snapshotVersion.toTimestamp());const m=ep(o,c.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,t);const i=YD(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=sp(this.serializer),e.removeTarget=t,this.q_(e)}}class PM extends DA{constructor(t,e,i,a,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Kt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Kt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Kt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=HD(t.writeResults,t.commitTime),i=Ni(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=sp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>BD(this.serializer,i))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{}class LM extends VM{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(t,np(e,i),a,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ut(J.UNKNOWN,o.toString())})}Ho(t,e,i,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(t,np(e,i),a,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(J.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class UM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bs(e),this.aa=!1):ht("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class zM{constructor(t,e,i,a,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{i.enqueueAndForget(async()=>{Ia(this)&&(ht(wa,"Restarting streams for network reachability change."),await async function(d){const m=Rt(d);m.Ea.add(4),await lu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ed(m)}(this))})}),this.Ra=new UM(i,a)}}async function ed(n){if(Ia(n))for(const t of n.da)await t(!0)}async function lu(n){for(const t of n.da)await t(!1)}function MA(n,t){const e=Rt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Zp(e)?$p(e):nl(e).O_()&&Wp(e,t))}function Xp(n,t){const e=Rt(n),i=nl(e);e.Ia.delete(t),i.O_()&&OA(e,t),e.Ia.size===0&&(i.O_()?i.L_():Ia(e)&&e.Ra.set("Unknown"))}function Wp(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}nl(n).Y_(t)}function OA(n,t){n.Va.Ue(t),nl(n).Z_(t)}function $p(n){n.Va=new ND({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.Ra.ua()}function Zp(n){return Ia(n)&&!nl(n).x_()&&n.Ia.size>0}function Ia(n){return Rt(n).Ea.size===0}function NA(n){n.Va=void 0}async function jM(n){n.Ra.set("Online")}async function BM(n){n.Ia.forEach((t,e)=>{Wp(n,t)})}async function HM(n,t){NA(n),Zp(n)?(n.Ra.ha(t),$p(n)):n.Ra.set("Unknown")}async function FM(n,t,e){if(n.Ra.set("Online"),t instanceof _A&&t.state===2&&t.cause)try{await async function(a,o){const c=o.cause;for(const h of o.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))}(n,t)}catch(i){ht(wa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Of(n,i)}else if(t instanceof ff?n.Va.Ze(t):t instanceof pA?n.Va.st(t):n.Va.tt(t),!e.isEqual(wt.min()))try{const i=await CA(n.localStore);e.compareTo(i)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.Ia.get(m);_&&o.Ia.set(m,_.withResumeToken(d.resumeToken,c))}}),h.targetMismatches.forEach((d,m)=>{const _=o.Ia.get(d);if(!_)return;o.Ia.set(d,_.withResumeToken(Ze.EMPTY_BYTE_STRING,_.snapshotVersion)),OA(o,d);const v=new rr(_.target,d,m,_.sequenceNumber);Wp(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ht(wa,"Failed to raise snapshot:",i),await Of(n,i)}}async function Of(n,t,e){if(!tl(t))throw t;n.Ea.add(1),await lu(n),n.Ra.set("Offline"),e||(e=()=>CA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ht(wa,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await ed(n)})}function kA(n,t){return t().catch(e=>Of(n,e,t))}async function nd(n){const t=Rt(n),e=yr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pp;for(;qM(t);)try{const a=await wM(t.localStore,i);if(a===null){t.Ta.length===0&&e.L_();break}i=a.batchId,GM(t,a)}catch(a){await Of(t,a)}PA(t)&&VA(t)}function qM(n){return Ia(n)&&n.Ta.length<10}function GM(n,t){n.Ta.push(t);const e=yr(n);e.O_()&&e.X_&&e.ea(t.mutations)}function PA(n){return Ia(n)&&!yr(n).x_()&&n.Ta.length>0}function VA(n){yr(n).start()}async function YM(n){yr(n).ra()}async function KM(n){const t=yr(n);for(const e of n.Ta)t.ea(e.mutations)}async function QM(n,t,e){const i=n.Ta.shift(),a=Hp.from(i,t,e);await kA(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await nd(n)}async function XM(n,t){t&&yr(n).X_&&await async function(i,a){if(function(c){return DD(c)&&c!==J.ABORTED}(a.code)){const o=i.Ta.shift();yr(i).B_(),await kA(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await nd(i)}}(n,t),PA(n)&&VA(n)}async function cT(n,t){const e=Rt(n);e.asyncQueue.verifyOperationInProgress(),ht(wa,"RemoteStore received new credentials");const i=Ia(e);e.Ea.add(3),await lu(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await ed(e)}async function WM(n,t){const e=Rt(n);t?(e.Ea.delete(2),await ed(e)):t||(e.Ea.add(2),await lu(e),e.Ra.set("Unknown"))}function nl(n){return n.ma||(n.ma=function(e,i,a){const o=Rt(e);return o.sa(),new kM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Xo:jM.bind(null,n),t_:BM.bind(null,n),r_:HM.bind(null,n),H_:FM.bind(null,n)}),n.da.push(async t=>{t?(n.ma.B_(),Zp(n)?$p(n):n.Ra.set("Unknown")):(await n.ma.stop(),NA(n))})),n.ma}function yr(n){return n.fa||(n.fa=function(e,i,a){const o=Rt(e);return o.sa(),new PM(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:YM.bind(null,n),r_:XM.bind(null,n),ta:KM.bind(null,n),na:QM.bind(null,n)}),n.da.push(async t=>{t?(n.fa.B_(),await nd(n)):(await n.fa.stop(),n.Ta.length>0&&(ht(wa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,e,i,a,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,o){const c=Date.now()+i,h=new Jp(t,e,c,a,o);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(J.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t_(n,t){if(bs("AsyncQueue",`${t}: ${n}`),tl(n))return new ut(J.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{static emptySet(t){return new ko(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||pt.comparator(e.key,i.key):(e,i)=>pt.comparator(e.key,i.key),this.keyedMap=bc(),this.sortedSet=new fe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new ko;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.ga=new fe(pt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):Tt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal((e,i)=>{t.push(i)}),t}}class Fo{constructor(t,e,i,a,o,c,h,d,m){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(t,e,i,a,o){const c=[];return e.forEach(h=>{c.push({type:0,doc:h})}),new Fo(t,e,ko.emptySet(e),c,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class ZM{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=Rt(e),o=a.queries;a.queries=hT(),o.forEach((c,h)=>{for(const d of h.Sa)d.onError(i)})})(this,new ut(J.ABORTED,"Firestore shutting down"))}}function hT(){return new Ca(n=>nA(n),Xf)}async function LA(n,t){const e=Rt(n);let i=3;const a=t.query;let o=e.queries.get(a);o?!o.ba()&&t.Da()&&(i=2):(o=new $M,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(a,!0);break;case 1:o.wa=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(c){const h=t_(c,`Initialization of query '${Ro(t.query)}' failed`);return void t.onError(h)}e.queries.set(a,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&e_(e)}async function UA(n,t){const e=Rt(n),i=t.query;let a=3;const o=e.queries.get(i);if(o){const c=o.Sa.indexOf(t);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=t.Da()?0:1:!o.ba()&&t.Da()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function JM(n,t){const e=Rt(n);let i=!1;for(const a of t){const o=a.query,c=e.queries.get(o);if(c){for(const h of c.Sa)h.Fa(a)&&(i=!0);c.wa=a}}i&&e_(e)}function tO(n,t,e){const i=Rt(n),a=i.queries.get(t);if(a)for(const o of a.Sa)o.onError(e);i.queries.delete(t)}function e_(n){n.Ca.forEach(t=>{t.next()})}var op,fT;(fT=op||(op={})).Ma="default",fT.Cache="cache";class zA{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new Fo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Fo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(t){this.key=t}}class BA{constructor(t){this.key=t}}class eO{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=iA(t),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new uT,a=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=a,h=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((_,v)=>{const T=a.get(_),A=Wf(this.query,v)?v:null,C=!!T&&this.mutatedKeys.has(T.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let M=!1;T&&A?T.data.isEqual(A.data)?C!==k&&(i.track({type:3,doc:A}),M=!0):this.su(T,A)||(i.track({type:2,doc:A}),M=!0,(d&&this.eu(A,d)>0||m&&this.eu(A,m)<0)&&(h=!0)):!T&&A?(i.track({type:0,doc:A}),M=!0):T&&!A&&(i.track({type:1,doc:T}),M=!0,(d||m)&&(h=!0)),M&&(A?(c=c.add(A),o=k?o.add(_):o.delete(_)):(c=c.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:h,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort((_,v)=>function(A,C){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{Rt:M})}};return k(A)-k(C)}(_.type,v.type)||this.eu(_.doc,v.doc)),this.ou(i),a=a??!1;const h=e&&!a?this._u():[],d=this.Xa.size===0&&this.current&&!a?1:0,m=d!==this.Za;return this.Za=d,c.length!==0||m?{snapshot:new Fo(this.query,t.tu,o,c,t.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const e=[];return t.forEach(i=>{this.Xa.has(i)||e.push(new BA(i))}),this.Xa.forEach(i=>{t.has(i)||e.push(new jA(i))}),e}cu(t){this.Ya=t.Qs,this.Xa=Vt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const n_="SyncEngine";class nO{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class iO{constructor(t){this.key=t,this.hu=!1}}class sO{constructor(t,e,i,a,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ca(h=>nA(h),Xf),this.Iu=new Map,this.Eu=new Set,this.du=new fe(pt.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=Ho.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rO(n,t,e=!0){const i=KA(n);let a;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await HA(i,t,e,!0),a}async function aO(n,t){const e=KA(n);await HA(e,t,!0,!1)}async function HA(n,t,e,i){const a=await xM(n.localStore,Mi(t)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let h;return i&&(h=await oO(n,t,o,c==="current",a.resumeToken)),n.isPrimaryClient&&e&&MA(n.remoteStore,a),h}async function oO(n,t,e,i,a){n.pu=(v,T,A)=>async function(k,M,G,$){let tt=M.view.ru(G);tt.Cs&&(tt=await sT(k.localStore,M.query,!1).then(({documents:O})=>M.view.ru(O,tt)));const st=$&&$.targetChanges.get(M.targetId),X=$&&$.targetMismatches.get(M.targetId)!=null,ot=M.view.applyChanges(tt,k.isPrimaryClient,st,X);return gT(k,M.targetId,ot.au),ot.snapshot}(n,v,T,A);const o=await sT(n.localStore,t,!0),c=new eO(t,o.Qs),h=c.ru(o.documents),d=ou.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",a),m=c.applyChanges(h,n.isPrimaryClient,d);gT(n,e,m.au);const _=new nO(t,e,c);return n.Tu.set(t,_),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),m.snapshot}async function lO(n,t,e){const i=Rt(n),a=i.Tu.get(t),o=i.Iu.get(a.targetId);if(o.length>1)return i.Iu.set(a.targetId,o.filter(c=>!Xf(c,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await rp(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&Xp(i.remoteStore,a.targetId),lp(i,a.targetId)}).catch(Jo)):(lp(i,a.targetId),await rp(i.localStore,a.targetId,!0))}async function cO(n,t){const e=Rt(n),i=e.Tu.get(t),a=e.Iu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Xp(e.remoteStore,i.targetId))}async function uO(n,t,e){const i=_O(n);try{const a=await function(c,h){const d=Rt(c),m=le.now(),_=h.reduce((A,C)=>A.add(C.key),Vt());let v,T;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let C=Ts(),k=Vt();return d.Ns.getEntries(A,_).next(M=>{C=M,C.forEach((G,$)=>{$.isValidDocument()||(k=k.add(G))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,C)).next(M=>{v=M;const G=[];for(const $ of h){const tt=wD($,v.get($.key).overlayedDocument);tt!=null&&G.push(new Er($.key,tt,QS(tt.value.mapValue),Oi.exists(!0)))}return d.mutationQueue.addMutationBatch(A,m,G,h)}).next(M=>{T=M;const G=M.applyToLocalDocumentSet(v,k);return d.documentOverlayCache.saveOverlays(A,M.batchId,G)})}).then(()=>({batchId:T.batchId,changes:rA(v)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(a.batchId),function(c,h,d){let m=c.Vu[c.currentUser.toKey()];m||(m=new fe(Pt)),m=m.insert(h,d),c.Vu[c.currentUser.toKey()]=m}(i,a.batchId,e),await cu(i,a.changes),await nd(i.remoteStore)}catch(a){const o=t_(a,"Failed to persist write");e.reject(o)}}async function FA(n,t){const e=Rt(n);try{const i=await SM(e.localStore,t);t.targetChanges.forEach((a,o)=>{const c=e.Au.get(o);c&&(Kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Kt(c.hu,14607):a.removedDocuments.size>0&&(Kt(c.hu,42227),c.hu=!1))}),await cu(e,i,t)}catch(i){await Jo(i)}}function dT(n,t,e){const i=Rt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.Tu.forEach((o,c)=>{const h=c.view.va(t);h.snapshot&&a.push(h.snapshot)}),function(c,h){const d=Rt(c);d.onlineState=h;let m=!1;d.queries.forEach((_,v)=>{for(const T of v.Sa)T.va(h)&&(m=!0)}),m&&e_(d)}(i.eventManager,t),a.length&&i.Pu.H_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function hO(n,t,e){const i=Rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Au.get(t),o=a&&a.key;if(o){let c=new fe(pt.comparator);c=c.insert(o,an.newNoDocument(o,wt.min()));const h=Vt().add(o),d=new Jf(wt.min(),new Map,new fe(Pt),c,h);await FA(i,d),i.du=i.du.remove(o),i.Au.delete(t),i_(i)}else await rp(i.localStore,t,!1).then(()=>lp(i,t,e)).catch(Jo)}async function fO(n,t){const e=Rt(n),i=t.batch.batchId;try{const a=await EM(e.localStore,t);GA(e,i,null),qA(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await cu(e,a)}catch(a){await Jo(a)}}async function dO(n,t,e){const i=Rt(n);try{const a=await function(c,h){const d=Rt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,h).next(v=>(Kt(v!==null,37113),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(i.localStore,t);GA(i,t,e),qA(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await cu(i,a)}catch(a){await Jo(a)}}function qA(n,t){(n.mu.get(t)||[]).forEach(e=>{e.resolve()}),n.mu.delete(t)}function GA(n,t,e){const i=Rt(n);let a=i.Vu[i.currentUser.toKey()];if(a){const o=a.get(t);o&&(e?o.reject(e):o.resolve(),a=a.remove(t)),i.Vu[i.currentUser.toKey()]=a}}function lp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach(i=>{n.Ru.containsKey(i)||YA(n,i)})}function YA(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Xp(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),i_(n))}function gT(n,t,e){for(const i of e)i instanceof jA?(n.Ru.addReference(i.key,t),gO(n,i)):i instanceof BA?(ht(n_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||YA(n,i.key)):Tt(19791,{wu:i})}function gO(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(ht(n_,"New document in limbo: "+e),n.Eu.add(i),i_(n))}function i_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new pt(re.fromString(t)),i=n.fu.next();n.Au.set(i,new iO(e)),n.du=n.du.insert(e,i),MA(n.remoteStore,new rr(Mi(jp(e.path)),i,"TargetPurposeLimboResolution",Yf.ce))}}async function cu(n,t,e){const i=Rt(n),a=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach((h,d)=>{c.push(i.pu(d,t,e).then(m=>{if((m||e)&&i.isPrimaryClient){const _=m?!m.fromCache:e?.targetChanges.get(d.targetId)?.current;i.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(m){a.push(m);const _=Kp.As(d.targetId,m);o.push(_)}}))}),await Promise.all(c),i.Pu.H_(a),await async function(d,m){const _=Rt(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>nt.forEach(m,T=>nt.forEach(T.Es,A=>_.persistence.referenceDelegate.addReference(v,T.targetId,A)).next(()=>nt.forEach(T.ds,A=>_.persistence.referenceDelegate.removeReference(v,T.targetId,A)))))}catch(v){if(!tl(v))throw v;ht(Qp,"Failed to update sequence numbers: "+v)}for(const v of m){const T=v.targetId;if(!v.fromCache){const A=_.Ms.get(T),C=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(C);_.Ms=_.Ms.insert(T,k)}}}(i.localStore,o))}async function mO(n,t){const e=Rt(n);if(!e.currentUser.isEqual(t)){ht(n_,"User change. New user:",t.toKey());const i=await RA(e.localStore,t);e.currentUser=t,function(o,c){o.mu.forEach(h=>{h.forEach(d=>{d.reject(new ut(J.CANCELLED,c))})}),o.mu.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await cu(e,i.Ls)}}function pO(n,t){const e=Rt(n),i=e.Au.get(t);if(i&&i.hu)return Vt().add(i.key);{let a=Vt();const o=e.Iu.get(t);if(!o)return a;for(const c of o){const h=e.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function KA(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=FA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hO.bind(null,t),t.Pu.H_=JM.bind(null,t.eventManager),t.Pu.yu=tO.bind(null,t.eventManager),t}function _O(n){const t=Rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dO.bind(null,t),t}class Nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=td(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return TM(this.persistence,new yM,t.initialUser,this.serializer)}Cu(t){return new xA(Yp.mi,this.serializer)}Du(t){return new CM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nf.provider={build:()=>new Nf};class yO extends Nf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Kt(this.persistence.referenceDelegate instanceof Mf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iM(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new xA(i=>Mf.mi(i,e),this.serializer)}}class cp{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mO.bind(null,this.syncEngine),await WM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ZM}()}createDatastore(t){const e=td(t.databaseInfo.databaseId),i=function(o){return new NM(o)}(t.databaseInfo);return function(o,c,h,d){return new LM(o,c,h,d)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,o,c,h){return new zM(i,a,o,c,h)}(this.localStore,this.datastore,t.asyncQueue,e=>dT(this.syncEngine,e,0),function(){return oT.v()?new oT:new IM}())}createSyncEngine(t,e){return function(a,o,c,h,d,m,_){const v=new sO(a,o,c,h,d,m);return _&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await async function(e){const i=Rt(e);ht(wa,"RemoteStore shutting down."),i.Ea.add(5),await lu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):bs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class vO{constructor(t,e,i,a,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=rn.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async c=>{ht(vr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ht(vr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=t_(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Im(n,t){n.asyncQueue.verifyOperationInProgress(),ht(vr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await RA(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function mT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await bO(n);ht(vr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>cT(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>cT(t.remoteStore,a)),n._onlineComponents=t}async function bO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ht(vr,"Using user provided OfflineComponentProvider");try{await Im(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===J.FAILED_PRECONDITION||a.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Uo("Error using user provided cache. Falling back to memory cache: "+e),await Im(n,new Nf)}}else ht(vr,"Using default OfflineComponentProvider"),await Im(n,new yO(void 0));return n._offlineComponents}async function XA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ht(vr,"Using user provided OnlineComponentProvider"),await mT(n,n._uninitializedComponentsProvider._online)):(ht(vr,"Using default OnlineComponentProvider"),await mT(n,new cp))),n._onlineComponents}function TO(n){return XA(n).then(t=>t.syncEngine)}async function up(n){const t=await XA(n),e=t.eventManager;return e.onListen=rO.bind(null,t.syncEngine),e.onUnlisten=lO.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=aO.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=cO.bind(null,t.syncEngine),e}function EO(n,t,e={}){const i=new hr;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,d,m){const _=new QA({next:T=>{_.Nu(),c.enqueueAndForget(()=>UA(o,v)),T.fromCache&&d.source==="server"?m.reject(new ut(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),v=new zA(h,_,{includeMetadataChanges:!0,qa:!0});return LA(o,v)}(await up(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="firestore.googleapis.com",_T=!0;class yT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ut(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$A,this.ssl=_T}else this.host=t.host,this.ssl=t.ssl??_T;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=wA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<eM)throw new ut(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}z2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WA(t.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ut(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class id{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new I2;switch(i.type){case"firstParty":return new N2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ut(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=pT.get(e);i&&(ht("ComponentProvider","Removing Datastore"),pT.delete(e),i.terminate())}(this),Promise.resolve()}}function SO(n,t,e,i={}){n=ps(n,id);const a=Xo(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${t}:${e}`;a&&(qE(`https://${h}`),GE("Firestore",!0)),o.host!==$A&&o.host!==h&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...o,host:h,ssl:a,emulatorOptions:i};if(!Ta(d,c)&&(n._setSettings(d),i.mockUserToken)){let m,_;if(typeof i.mockUserToken=="string")m=i.mockUserToken,_=rn.MOCK_USER;else{m=eR(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new ut(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new rn(v)}n._authCredentials=new D2(new VS(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Sr(this.firestore,t,this._query)}}class Ce{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(ru(e,Ce._jsonSchema))return new Ce(t,i||null,new pt(re.fromString(e.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Re("string",Ce._jsonSchemaVersion),referencePath:Re("string")};class fr extends Sr{constructor(t,e,i){super(t,e,jp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new pt(t))}withConverter(t){return new fr(this.firestore,t,this._path)}}function Qn(n,t,...e){if(n=$e(n),LS("collection","path",t),n instanceof id){const i=re.fromString(t,...e);return Mb(i),new fr(n,null,i)}{if(!(n instanceof Ce||n instanceof fr))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return Mb(i),new fr(n.firestore,null,i)}}function sd(n,t,...e){if(n=$e(n),arguments.length===1&&(t=kp.newId()),LS("doc","path",t),n instanceof id){const i=re.fromString(t,...e);return Db(i),new Ce(n,null,new pt(i))}{if(!(n instanceof Ce||n instanceof fr))throw new ut(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(re.fromString(t,...e));return Db(i),new Ce(n.firestore,n instanceof fr?n.converter:null,new pt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="AsyncQueue";class bT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new IA(this,"async_queue_retry"),this._c=()=>{const i=Cm();i&&ht(vT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=Cm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Cm();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const e=new hr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!tl(t))throw t;ht(vT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const e=this.ac.then(()=>(this.rc=!0,t().catch(i=>{throw this.nc=i,this.rc=!1,bs("INTERNAL UNHANDLED ERROR: ",TT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const a=Jp.createAndSchedule(this,t,e,i,o=>this.hc(o));return this.tc.push(a),a}uc(){this.nc&&Tt(47125,{Pc:TT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function TT(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n){return function(e,i){if(typeof e!="object"||e===null)return!1;const a=e;for(const o of i)if(o in a&&typeof a[o]=="function")return!0;return!1}(n,["next","error","complete"])}class qo extends id{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new bT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new bT(t),this._firestoreClient=void 0,await t}}}function AO(n,t){const e=typeof n=="object"?n:XE(),i=typeof n=="string"?n:wf,a=Sp(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=Jx("firestore");o&&SO(a,...o)}return a}function s_(n){if(n._terminated)throw new ut(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wO(n),n._firestoreClient}function wO(n){const t=n._freezeSettings(),e=function(a,o,c,h){return new W2(a,o,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new vO(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&function(a){const o=a?._online.build();return{_offline:a?._offline.build(o),_online:o}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gn(Ze.fromBase64String(t))}catch(e){throw new ut(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Gn(Ze.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ru(t,Gn._jsonSchema))return Gn.fromBase64String(t.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:Re("string",Gn._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ut(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ut(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ut(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(t){if(ru(t,ki._jsonSchema))return new ki(t.latitude,t.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:Re("string",ki._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ru(t,Pi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(e=>typeof e=="number"))return new Pi(t.vectorValues);throw new ut(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:Re("string",Pi._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^__.*__$/;class RO{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Er(t,this.data,this.fieldMask,e,this.fieldTransforms):new au(t,this.data,e,this.fieldTransforms)}}class ZA{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Er(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function JA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ac:n})}}class a_{constructor(t,e,i,a,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new a_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){const e=this.path?.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return kf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(JA(this.Ac)&&xO.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class CO{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||td(t)}Cc(t,e,i,a=!1){return new a_({Ac:t,methodName:e,Dc:i,path:We.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o_(n){const t=n._freezeSettings(),e=td(n._databaseId);return new CO(n._databaseId,!!t.ignoreUndefinedProperties,e)}function IO(n,t,e,i,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,t,e,a);l_("Data must be an object, but it was:",c,i);const h=t1(i,c);let d,m;if(o.merge)d=new Dn(c.fieldMask),m=c.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const T=hp(t,v,e);if(!c.contains(T))throw new ut(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);n1(_,T)||_.push(T)}d=new Dn(_),m=c.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=c.fieldTransforms;return new RO(new vn(h),d,m)}class ad extends r_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ad}}function DO(n,t,e,i){const a=n.Cc(1,t,e);l_("Data must be an object, but it was:",a,i);const o=[],c=vn.empty();Tr(i,(d,m)=>{const _=c_(t,d,e);m=$e(m);const v=a.yc(_);if(m instanceof ad)o.push(_);else{const T=uu(m,v);T!=null&&(o.push(_),c.set(_,T))}});const h=new Dn(o);return new ZA(c,h,a.fieldTransforms)}function MO(n,t,e,i,a,o){const c=n.Cc(1,t,e),h=[hp(t,i,e)],d=[a];if(o.length%2!=0)throw new ut(J.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(hp(t,o[T])),d.push(o[T+1]);const m=[],_=vn.empty();for(let T=h.length-1;T>=0;--T)if(!n1(m,h[T])){const A=h[T];let C=d[T];C=$e(C);const k=c.yc(A);if(C instanceof ad)m.push(A);else{const M=uu(C,k);M!=null&&(m.push(A),_.set(A,M))}}const v=new Dn(m);return new ZA(_,v,c.fieldTransforms)}function OO(n,t,e,i=!1){return uu(e,n.Cc(i?4:3,t))}function uu(n,t){if(e1(n=$e(n)))return l_("Unsupported field value:",t,n),t1(n,t);if(n instanceof r_)return function(i,a){if(!JA(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(i,a){const o=[];let c=0;for(const h of i){let d=uu(h,a.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),c++}return{arrayValue:{values:o}}}(n,t)}return function(i,a){if((i=$e(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vD(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=le.fromDate(i);return{timestampValue:Df(a.serializer,o)}}if(i instanceof le){const o=new le(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Df(a.serializer,o)}}if(i instanceof ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Gn)return{bytesValue:yA(a.serializer,i._byteString)};if(i instanceof Ce){const o=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qp(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Pi)return function(c,h){return{mapValue:{fields:{[YS]:{stringValue:KS},[xf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return Bp(h.serializer,m)})}}}}}}(i,a);throw a.Sc(`Unsupported field value: ${Gf(i)}`)}(n,t)}function t1(n,t){const e={};return jS(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tr(n,(i,a)=>{const o=uu(a,t.mc(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function e1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof le||n instanceof ki||n instanceof Gn||n instanceof Ce||n instanceof r_||n instanceof Pi)}function l_(n,t,e){if(!e1(e)||!US(e)){const i=Gf(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function hp(n,t,e){if((t=$e(t))instanceof rd)return t._internalPath;if(typeof t=="string")return c_(n,t);throw kf("Field path arguments must be of type string or ",n,!1,void 0,e)}const NO=new RegExp("[~\\*/\\[\\]]");function c_(n,t,e){if(t.search(NO)>=0)throw kf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new rd(...t.split("."))._internalPath}catch{throw kf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function kf(n,t,e,i,a){const o=i&&!i.isEmpty(),c=a!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||c)&&(d+=" (found",o&&(d+=` in field ${i}`),c&&(d+=` in document ${a}`),d+=")"),new ut(J.INVALID_ARGUMENT,h+n+d)}function n1(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t,e,i,a,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new kO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(od("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class kO extends i1{data(){return super.data()}}function od(n,t){return typeof t=="string"?c_(n,t):t instanceof rd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ut(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u_{}class r1 extends u_{}function Es(n,t,...e){let i=[];t instanceof u_&&i.push(t),i=i.concat(e),function(o){const c=o.filter(d=>d instanceof h_).length,h=o.filter(d=>d instanceof ld).length;if(c>1||c>0&&h>0)throw new ut(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class ld extends r1{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new ld(t,e,i)}_apply(t){const e=this._parse(t);return a1(t._query,e),new Sr(t.firestore,t.converter,Jm(t._query,e))}_parse(t){const e=o_(t.firestore);return function(o,c,h,d,m,_,v){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ut(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){AT(v,_);const C=[];for(const k of v)C.push(ST(d,o,k));T={arrayValue:{values:C}}}else T=ST(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||AT(v,_),T=OO(h,c,v,_==="in"||_==="not-in");return xe.create(m,_,T)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function Go(n,t,e){const i=t,a=od("where",n);return ld._create(a,i,e)}class h_ extends u_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new h_(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ri.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(a,o){let c=a;const h=o.getFlattenedFilters();for(const d of h)a1(c,d),c=Jm(c,d)}(t._query,e),new Sr(t.firestore,t.converter,Jm(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class f_ extends r1{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new f_(t,e)}_apply(t){const e=function(a,o,c){if(a.startAt!==null)throw new ut(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ut(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qc(o,c)}(t._query,this._field,this._direction);return new Sr(t.firestore,t.converter,function(a,o){const c=a.explicitOrderBy.concat([o]);return new el(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,e))}}function _a(n,t="asc"){const e=t,i=od("orderBy",n);return f_._create(i,e)}function ST(n,t,e){if(typeof(e=$e(e))=="string"){if(e==="")throw new ut(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eA(t)&&e.indexOf("/")!==-1)throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(re.fromString(e));if(!pt.isDocumentKey(i))throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zb(n,new pt(i))}if(e instanceof Ce)return zb(n,e._key);throw new ut(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gf(e)}.`)}function AT(n,t){if(!Array.isArray(n)||n.length===0)throw new ut(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function a1(n,t){const e=function(a,o){for(const c of a)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new ut(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ut(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class PO{convertValue(t,e="none"){switch(_r(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Tr(t,(a,o)=>{i[a]=this.convertValue(o,e)}),i}convertVectorValue(t){const e=t.fields?.[xf].arrayValue?.values?.map(i=>ve(i.doubleValue));return new Pi(e)}convertGeoPoint(t){return new ki(ve(t.latitude),ve(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Qf(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Bc(t));default:return null}}convertTimestamp(t){const e=mr(t);return new le(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=re.fromString(t);Kt(AA(i),9688,{name:t});const a=new Hc(i.get(1),i.get(3)),o=new pt(i.popFirst(5));return a.isEqual(e)||bs(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class Ec{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ya extends i1{constructor(t,e,i,a,o,c){super(t,e,i,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(od("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ya._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Re("string",ya._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class df extends ya{data(t={}){return super.data(t)}}class va{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Ec(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new df(this._firestore,this._userDataWriter,i.key,i,new Ec(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ut(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(h=>{const d=new df(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ec(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new df(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ec(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let m=-1,_=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:LO(h.type),doc:d,oldIndex:m,newIndex:_}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=va._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=kp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],a=[];return this.docs.forEach(o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function LO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:n})}}va._jsonSchemaVersion="firestore/querySnapshot/1.0",va._jsonSchema={type:Re("string",va._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class d_ extends PO{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,e)}}function o1(n){n=ps(n,Sr);const t=ps(n.firestore,qo),e=s_(t),i=new d_(t);return s1(n._query),EO(e,n._query).then(a=>new va(t,i,n,a))}function g_(n,t,e,...i){n=ps(n,Ce);const a=ps(n.firestore,qo),o=o_(a);let c;return c=typeof(t=$e(t))=="string"||t instanceof rd?MO(o,"updateDoc",n._key,t,e,i):DO(o,"updateDoc",n._key,t),l1(a,[c.toMutation(n._key,Oi.exists(!0))])}function m_(n,t){const e=ps(n.firestore,qo),i=sd(n),a=VO(n.converter,t);return l1(e,[IO(o_(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,Oi.exists(!1))]).then(()=>i)}function xa(n,...t){n=$e(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||ET(t[i])||(e=t[i++]);const a={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(ET(t[i])){const d=t[i];t[i]=d.next?.bind(d),t[i+1]=d.error?.bind(d),t[i+2]=d.complete?.bind(d)}let o,c,h;if(n instanceof Ce)c=ps(n.firestore,qo),h=jp(n._key.path),o={next:d=>{t[i]&&t[i](UO(c,n,d))},error:t[i+1],complete:t[i+2]};else{const d=ps(n,Sr);c=ps(d.firestore,qo),h=d._query;const m=new d_(c);o={next:_=>{t[i]&&t[i](new va(c,m,d,_))},error:t[i+1],complete:t[i+2]},s1(n._query)}return function(m,_,v,T){const A=new QA(T),C=new zA(_,A,v);return m.asyncQueue.enqueueAndForget(async()=>LA(await up(m),C)),()=>{A.Nu(),m.asyncQueue.enqueueAndForget(async()=>UA(await up(m),C))}}(s_(c),h,a,o)}function l1(n,t){return function(i,a){const o=new hr;return i.asyncQueue.enqueueAndForget(async()=>uO(await TO(i),a,o)),o.promise}(s_(n),t)}function UO(n,t,e){const i=e.docs.get(t._key),a=new d_(n);return new ya(n,a,t._key,i,new Ec(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(a){Zo=a})(Wo),Vo(new Ea("firestore",(i,{instanceIdentifier:a,options:o})=>{const c=i.getProvider("app").getImmediate(),h=new qo(new M2(i.getProvider("auth-internal")),new k2(c,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ut(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hc(m.options.projectId,_)}(c,a),c);return o={useFetchStreams:e,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),cr(xb,Rb,t),cr(xb,Rb,"esm2020")})();const zO={apiKey:"AIzaSyD5qQ2fQN7fZoQ4zvjDfsdzO1wTmI5oNF4",authDomain:"mi-app-medica-ef3fa.firebaseapp.com",projectId:"mi-app-medica-ef3fa",storageBucket:"mi-app-medica-ef3fa.firebasestorage.app",messagingSenderId:"713331216336",appId:"1:713331216336:web:db2026dfc8b98c60c133d5"},c1=QE(zO),Kc=R2(c1),dn=AO(c1),jO=({onLoginSuccess:n})=>{const[t,e]=St.useState(""),[i,a]=St.useState(""),[o,c]=St.useState(!1),h=async d=>{d.preventDefault(),c(!0),a("");const m=Es(Qn(dn,"personal"),Go("cedula","==",t.trim())),_=await o1(m);if(_.empty)a("Cdula no encontrada. Por favor, contacta a un administrador.");else{const v=_.docs[0].data();n(v)}c(!1)};return R.jsx("main",{className:"container",style:{maxWidth:"450px",marginTop:"5rem"},children:R.jsxs("article",{children:[R.jsx("h1",{align:"center",children:"Programa de Hospitalizacin Domiciliaria"}),R.jsxs("form",{onSubmit:h,children:[R.jsx("label",{children:"Ingresa tu Cdula para Continuar"}),R.jsx("input",{type:"text",value:t,onChange:d=>e(d.target.value),placeholder:"Nmero de Cdula",required:!0}),R.jsx("button",{type:"submit","aria-busy":o,children:o?"Verificando...":"Ingresar"})]}),i&&R.jsx("p",{style:{color:"var(--pico-color-red-500)"},children:i})]})})},u1=()=>{const[n,t]=St.useState(""),[e,i]=St.useState(""),[a,o]=St.useState(""),c=async h=>{if(h.preventDefault(),!n||!e||!a){alert("Por favor, llena todos los campos");return}try{await m_(Qn(dn,"patients"),{name:n,id:e,treatmentEndDate:new Date(a),createdAt:new Date,status:"Activo"}),alert("Paciente guardado con xito!"),t(""),i(""),o("")}catch(d){console.error("Error al aadir el documento: ",d),alert("Hubo un error al guardar el paciente.")}};return R.jsxs("article",{children:[R.jsx("h4",{children:"Aadir Nuevo Paciente"}),R.jsxs("form",{onSubmit:c,children:[R.jsx("label",{htmlFor:"patientName",children:"Nombre Completo"}),R.jsx("input",{type:"text",id:"patientName",value:n,onChange:h=>t(h.target.value),required:!0}),R.jsx("label",{htmlFor:"patientId",children:"Cdula"}),R.jsx("input",{type:"text",id:"patientId",value:e,onChange:h=>i(h.target.value),required:!0}),R.jsx("label",{htmlFor:"endDate",children:"Fecha de Fin de Tratamiento"}),R.jsx("input",{type:"date",id:"endDate",value:a,onChange:h=>o(h.target.value),required:!0}),R.jsx("button",{type:"submit",children:"Guardar Paciente"})]})]})},h1=({onPatientSelect:n})=>{const[t,e]=St.useState([]),[i,a]=St.useState([]);St.useEffect(()=>{const c=Es(Qn(dn,"patients"),Go("status","!=","Finalizado"),_a("status"),_a("createdAt","desc")),h=xa(c,_=>{e(_.docs.map(v=>({docId:v.id,...v.data()})))}),d=Es(Qn(dn,"patients"),Go("status","==","Finalizado"),_a("createdAt","desc")),m=xa(d,_=>{a(_.docs.map(v=>({docId:v.id,...v.data()})))});return()=>{h(),m()}},[]);const o=async(c,h)=>{if(window.confirm(`Seguro que quieres cambiar el estado a "${h}"?`)){const d=sd(dn,"patients",c);await g_(d,{status:h})}};return R.jsxs(R.Fragment,{children:[R.jsxs("article",{children:[R.jsx("h4",{children:"Pacientes Activos y Pendientes"}),R.jsx("div",{style:{overflowX:"auto"},children:R.jsxs("table",{role:"grid",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",children:"Nombre"}),R.jsx("th",{scope:"col",children:"Cdula"}),R.jsx("th",{scope:"col",children:"Estado"}),R.jsx("th",{scope:"col",children:"Acciones"})]})}),R.jsx("tbody",{children:t.map(c=>R.jsxs("tr",{children:[R.jsx("td",{children:c.name}),R.jsx("td",{children:R.jsx("a",{href:"#",onClick:h=>h.preventDefault(),children:c.id})}),R.jsx("td",{children:c.status||"N/A"}),R.jsx("td",{children:R.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.status==="Pendiente"&&R.jsx("button",{style:{"--pico-background-color":"#28a745","--pico-color":"white"},onClick:()=>o(c.docId,"Activo"),children:"Activar"}),c.status==="Activo"&&R.jsx("button",{style:{"--pico-background-color":"#dc3545","--pico-color":"white"},onClick:()=>o(c.docId,"Finalizado"),children:"Finalizar"}),R.jsx("button",{className:"secondary",onClick:()=>n(c),children:"Ver Detalles"})]})})]},c.docId))})]})})]}),R.jsxs("article",{children:[R.jsx("h4",{children:"Historial de Pacientes Finalizados"}),R.jsx("div",{style:{overflowX:"auto"},children:R.jsxs("table",{role:"grid",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",children:"Nombre"}),R.jsx("th",{scope:"col",children:"Cdula"}),R.jsx("th",{scope:"col",children:"Estado"}),R.jsx("th",{scope:"col",children:"Acciones"})]})}),R.jsx("tbody",{children:i.map(c=>R.jsxs("tr",{children:[R.jsx("td",{children:c.name}),R.jsx("td",{children:R.jsx("a",{href:"#",onClick:h=>h.preventDefault(),children:c.id})}),R.jsx("td",{children:c.status}),R.jsx("td",{children:R.jsx("button",{className:"secondary",onClick:()=>n(c),children:"Ver Detalles"})})]},c.docId))})]})})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function hu(n){return n+.5|0}const ar=(n,t,e)=>Math.max(Math.min(n,e),t);function Sc(n){return ar(hu(n*2.55),0,255)}function dr(n){return ar(hu(n*255),0,255)}function ds(n){return ar(hu(n/2.55)/100,0,1)}function wT(n){return ar(hu(n*100),0,100)}const qn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fp=[..."0123456789ABCDEF"],BO=n=>fp[n&15],HO=n=>fp[(n&240)>>4]+fp[n&15],Fh=n=>(n&240)>>4===(n&15),FO=n=>Fh(n.r)&&Fh(n.g)&&Fh(n.b)&&Fh(n.a);function qO(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&qn[n[1]]*17,g:255&qn[n[2]]*17,b:255&qn[n[3]]*17,a:t===5?qn[n[4]]*17:255}:(t===7||t===9)&&(e={r:qn[n[1]]<<4|qn[n[2]],g:qn[n[3]]<<4|qn[n[4]],b:qn[n[5]]<<4|qn[n[6]],a:t===9?qn[n[7]]<<4|qn[n[8]]:255})),e}const GO=(n,t)=>n<255?t(n):"";function YO(n){var t=FO(n)?BO:HO;return n?"#"+t(n.r)+t(n.g)+t(n.b)+GO(n.a,t):void 0}const KO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function f1(n,t,e){const i=t*Math.min(e,1-e),a=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[a(0),a(8),a(4)]}function QO(n,t,e){const i=(a,o=(a+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function XO(n,t,e){const i=f1(n,1,.5);let a;for(t+e>1&&(a=1/(t+e),t*=a,e*=a),a=0;a<3;a++)i[a]*=1-t-e,i[a]+=t;return i}function WO(n,t,e,i,a){return n===a?(t-e)/i+(t<e?6:0):t===a?(e-n)/i+2:(n-t)/i+4}function p_(n){const e=n.r/255,i=n.g/255,a=n.b/255,o=Math.max(e,i,a),c=Math.min(e,i,a),h=(o+c)/2;let d,m,_;return o!==c&&(_=o-c,m=h>.5?_/(2-o-c):_/(o+c),d=WO(e,i,a,_,o),d=d*60+.5),[d|0,m||0,h]}function __(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(dr)}function y_(n,t,e){return __(f1,n,t,e)}function $O(n,t,e){return __(XO,n,t,e)}function ZO(n,t,e){return __(QO,n,t,e)}function d1(n){return(n%360+360)%360}function JO(n){const t=KO.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Sc(+t[5]):dr(+t[5]));const a=d1(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=$O(a,o,c):t[1]==="hsv"?i=ZO(a,o,c):i=y_(a,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function tN(n,t){var e=p_(n);e[0]=d1(e[0]+t),e=y_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function eN(n){if(!n)return;const t=p_(n),e=t[0],i=wT(t[1]),a=wT(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${a}%, ${ds(n.a)})`:`hsl(${e}, ${i}%, ${a}%)`}const xT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},RT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nN(){const n={},t=Object.keys(RT),e=Object.keys(xT);let i,a,o,c,h;for(i=0;i<t.length;i++){for(c=h=t[i],a=0;a<e.length;a++)o=e[a],h=h.replace(o,xT[o]);o=parseInt(RT[c],16),n[h]=[o>>16&255,o>>8&255,o&255]}return n}let qh;function iN(n){qh||(qh=nN(),qh.transparent=[0,0,0,0]);const t=qh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const sN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rN(n){const t=sN.exec(n);let e=255,i,a,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Sc(c):ar(c*255,0,255)}return i=+t[1],a=+t[3],o=+t[5],i=255&(t[2]?Sc(i):ar(i,0,255)),a=255&(t[4]?Sc(a):ar(a,0,255)),o=255&(t[6]?Sc(o):ar(o,0,255)),{r:i,g:a,b:o,a:e}}}function aN(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ds(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Dm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,wo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function oN(n,t,e){const i=wo(ds(n.r)),a=wo(ds(n.g)),o=wo(ds(n.b));return{r:dr(Dm(i+e*(wo(ds(t.r))-i))),g:dr(Dm(a+e*(wo(ds(t.g))-a))),b:dr(Dm(o+e*(wo(ds(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Gh(n,t,e){if(n){let i=p_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=y_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function g1(n,t){return n&&Object.assign(t||{},n)}function CT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=dr(n[3]))):(t=g1(n,{r:0,g:0,b:0,a:1}),t.a=dr(t.a)),t}function lN(n){return n.charAt(0)==="r"?rN(n):JO(n)}class Qc{constructor(t){if(t instanceof Qc)return t;const e=typeof t;let i;e==="object"?i=CT(t):e==="string"&&(i=qO(t)||iN(t)||lN(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=g1(this._rgb);return t&&(t.a=ds(t.a)),t}set rgb(t){this._rgb=CT(t)}rgbString(){return this._valid?aN(this._rgb):void 0}hexString(){return this._valid?YO(this._rgb):void 0}hslString(){return this._valid?eN(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,a=t.rgb;let o;const c=e===o?.5:e,h=2*c-1,d=i.a-a.a,m=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-m,i.r=255&m*i.r+o*a.r+.5,i.g=255&m*i.g+o*a.g+.5,i.b=255&m*i.b+o*a.b+.5,i.a=c*i.a+(1-c)*a.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=oN(this._rgb,t._rgb,e)),this}clone(){return new Qc(this.rgb)}alpha(t){return this._rgb.a=dr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=hu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Gh(this._rgb,2,t),this}darken(t){return Gh(this._rgb,2,-t),this}saturate(t){return Gh(this._rgb,1,t),this}desaturate(t){return Gh(this._rgb,1,-t),this}rotate(t){return tN(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function us(){}const cN=(()=>{let n=0;return()=>n++})();function ae(n){return n==null}function He(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Gt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Xn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Si(n,t){return Xn(n)?n:t}function Ht(n,t){return typeof n>"u"?t:n}const uN=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function oe(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function $t(n,t,e,i){let a,o,c;if(He(n))for(o=n.length,a=0;a<o;a++)t.call(e,n[a],a);else if(Gt(n))for(c=Object.keys(n),o=c.length,a=0;a<o;a++)t.call(e,n[c[a]],c[a])}function Pf(n,t){let e,i,a,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(a=n[e],o=t[e],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Vf(n){if(He(n))return n.map(Vf);if(Gt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let a=0;for(;a<i;++a)t[e[a]]=Vf(n[e[a]]);return t}return n}function m1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function hN(n,t,e,i){if(!m1(n))return;const a=t[n],o=e[n];Gt(a)&&Gt(o)?Xc(a,o,i):t[n]=Vf(o)}function Xc(n,t,e){const i=He(t)?t:[t],a=i.length;if(!Gt(n))return n;e=e||{};const o=e.merger||hN;let c;for(let h=0;h<a;++h){if(c=i[h],!Gt(c))continue;const d=Object.keys(c);for(let m=0,_=d.length;m<_;++m)o(d[m],n,c,e)}return n}function Nc(n,t){return Xc(n,t,{merger:fN})}function fN(n,t,e){if(!m1(n))return;const i=t[n],a=e[n];Gt(i)&&Gt(a)?Nc(i,a):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Vf(a))}const IT={"":n=>n,x:n=>n.x,y:n=>n.y};function dN(n){const t=n.split("."),e=[];let i="";for(const a of t)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function gN(n){const t=dN(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Lf(n,t){return(IT[t]||(IT[t]=gN(t)))(n)}function v_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Uf=n=>typeof n<"u",br=n=>typeof n=="function",DT=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function mN(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Fe=Math.PI,Vi=2*Fe,pN=Vi+Fe,zf=Number.POSITIVE_INFINITY,_N=Fe/180,si=Fe/2,oa=Fe/4,MT=Fe*2/3,p1=Math.log10,Yo=Math.sign;function kc(n,t,e){return Math.abs(n-t)<e}function OT(n){const t=Math.round(n);n=kc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(p1(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function yN(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((a,o)=>a-o).pop(),t}function vN(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Wc(n){return!vN(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function bN(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function TN(n,t,e){let i,a,o;for(i=0,a=n.length;i<a;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ga(n){return n*(Fe/180)}function EN(n){return n*(180/Fe)}function NT(n){if(!Xn(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function SN(n,t){const e=t.x-n.x,i=t.y-n.y,a=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Fe&&(o+=Vi),{angle:o,distance:a}}function dp(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function AN(n,t){return(n-t+pN)%Vi-Fe}function tr(n){return(n%Vi+Vi)%Vi}function _1(n,t,e,i){const a=tr(n),o=tr(t),c=tr(e),h=tr(o-a),d=tr(c-a),m=tr(a-o),_=tr(a-c);return a===o||a===c||i&&o===c||h>d&&m<_}function Yn(n,t,e){return Math.max(t,Math.min(e,n))}function wN(n){return Yn(n,-32768,32767)}function Ac(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function b_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,e(o)?a=o:i=o;return{lo:a,hi:i}}const ma=(n,t,e,i)=>b_(n,e,i?a=>{const o=n[a][t];return o<e||o===e&&n[a+1][t]===e}:a=>n[a][t]<e),xN=(n,t,e)=>b_(n,e,i=>n[i][t]>=e);function RN(n,t,e){let i=0,a=n.length;for(;i<a&&n[i]<t;)i++;for(;a>i&&n[a-1]>e;)a--;return i>0||a<n.length?n.slice(i,a):n}const y1=["push","pop","shift","splice","unshift"];function CN(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),y1.forEach(e=>{const i="_onData"+v_(e),a=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=a.apply(this,o);return n._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...o)}),c}})})}function kT(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,a=i.indexOf(t);a!==-1&&i.splice(a,1),!(i.length>0)&&(y1.forEach(o=>{delete n[o]}),delete n._chartjs)}function IN(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const v1=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function b1(n,t){let e=[],i=!1;return function(...a){e=a,i||(i=!0,v1.call(window,()=>{i=!1,n.apply(t,e)}))}}function DN(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const T_=n=>n==="start"?"left":n==="end"?"right":"center",sn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,MN=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function ON(n,t,e){const i=t.length;let a=0,o=i;if(n._sorted){const{iScale:c,vScale:h,_parsed:d}=n,m=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,_=c.axis,{min:v,max:T,minDefined:A,maxDefined:C}=c.getUserBounds();if(A){if(a=Math.min(ma(d,_,v).lo,e?i:ma(t,_,c.getPixelForValue(v)).lo),m){const k=d.slice(0,a+1).reverse().findIndex(M=>!ae(M[h.axis]));a-=Math.max(0,k)}a=Yn(a,0,i-1)}if(C){let k=Math.max(ma(d,c.axis,T,!0).hi+1,e?0:ma(t,_,c.getPixelForValue(T),!0).hi+1);if(m){const M=d.slice(k-1).findIndex(G=>!ae(G[h.axis]));k+=Math.max(0,M)}o=Yn(k,a,i)-a}else o=i-a}return{start:a,count:o}}function NN(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,a={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=a,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,a),o}const Yh=n=>n===0||n===1,PT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Vi/e)),VT=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Vi/e)+1,Pc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*si)+1,easeOutSine:n=>Math.sin(n*si),easeInOutSine:n=>-.5*(Math.cos(Fe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Yh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Yh(n)?n:PT(n,.075,.3),easeOutElastic:n=>Yh(n)?n:VT(n,.075,.3),easeInOutElastic(n){return Yh(n)?n:n<.5?.5*PT(n*2,.1125,.45):.5+.5*VT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Pc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Pc.easeInBounce(n*2)*.5:Pc.easeOutBounce(n*2-1)*.5+.5};function E_(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function LT(n){return E_(n)?n:new Qc(n)}function Mm(n){return E_(n)?n:new Qc(n).saturate(.5).darken(.1).hexString()}const kN=["x","y","borderWidth","radius","tension"],PN=["color","borderColor","backgroundColor"];function VN(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:PN},numbers:{type:"number",properties:kN}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function LN(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const UT=new Map;function UN(n,t){t=t||{};const e=n+JSON.stringify(t);let i=UT.get(e);return i||(i=new Intl.NumberFormat(n,t),UT.set(e,i)),i}function T1(n,t,e){return UN(t,e).format(n)}const zN={values(n){return He(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let a,o=n;if(e.length>1){const m=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),o=jN(n,e)}const c=p1(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:a,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),T1(n,i,d)}};function jN(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var E1={formatters:zN};function BN(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:E1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ra=Object.create(null),gp=Object.create(null);function Vc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,a=e.length;i<a;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Om(n,t,e){return typeof t=="string"?Xc(Vc(n,t),e):Xc(Vc(n,""),t)}class HN{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Mm(a.backgroundColor),this.hoverBorderColor=(i,a)=>Mm(a.borderColor),this.hoverColor=(i,a)=>Mm(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Om(this,t,e)}get(t){return Vc(this,t)}describe(t,e){return Om(gp,t,e)}override(t,e){return Om(Ra,t,e)}route(t,e,i,a){const o=Vc(this,t),c=Vc(this,i),h="_"+e;Object.defineProperties(o,{[h]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const d=this[h],m=c[a];return Gt(d)?Object.assign({},m,d):Ht(d,m)},set(d){this[h]=d}}})}apply(t){t.forEach(e=>e(this))}}var be=new HN({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[VN,LN,BN]);function FN(n){return!n||ae(n.size)||ae(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function zT(n,t,e,i,a){let o=t[a];return o||(o=t[a]=n.measureText(a).width,e.push(a)),o>i&&(i=o),i}function la(n,t,e){const i=n.currentDevicePixelRatio,a=e!==0?Math.max(e/2,.5):0;return Math.round((t-a)*i)/i+a}function jT(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function mp(n,t,e,i){S1(n,t,e,i,null)}function S1(n,t,e,i,a){let o,c,h,d,m,_,v,T;const A=t.pointStyle,C=t.rotation,k=t.radius;let M=(C||0)*_N;if(A&&typeof A=="object"&&(o=A.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(M),n.drawImage(A,-A.width/2,-A.height/2,A.width,A.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),A){default:a?n.ellipse(e,i,a/2,k,0,0,Vi):n.arc(e,i,k,0,Vi),n.closePath();break;case"triangle":_=a?a/2:k,n.moveTo(e+Math.sin(M)*_,i-Math.cos(M)*k),M+=MT,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*k),M+=MT,n.lineTo(e+Math.sin(M)*_,i-Math.cos(M)*k),n.closePath();break;case"rectRounded":m=k*.516,d=k-m,c=Math.cos(M+oa)*d,v=Math.cos(M+oa)*(a?a/2-m:d),h=Math.sin(M+oa)*d,T=Math.sin(M+oa)*(a?a/2-m:d),n.arc(e-v,i-h,m,M-Fe,M-si),n.arc(e+T,i-c,m,M-si,M),n.arc(e+v,i+h,m,M,M+si),n.arc(e-T,i+c,m,M+si,M+Fe),n.closePath();break;case"rect":if(!C){d=Math.SQRT1_2*k,_=a?a/2:d,n.rect(e-_,i-d,2*_,2*d);break}M+=oa;case"rectRot":v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+T,i-c),n.lineTo(e+v,i+h),n.lineTo(e-T,i+c),n.closePath();break;case"crossRot":M+=oa;case"cross":v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c);break;case"star":v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c),M+=oa,v=Math.cos(M)*(a?a/2:k),c=Math.cos(M)*k,h=Math.sin(M)*k,T=Math.sin(M)*(a?a/2:k),n.moveTo(e-v,i-h),n.lineTo(e+v,i+h),n.moveTo(e+T,i-c),n.lineTo(e-T,i+c);break;case"line":c=a?a/2:Math.cos(M)*k,h=Math.sin(M)*k,n.moveTo(e-c,i-h),n.lineTo(e+c,i+h);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(M)*(a?a/2:k),i+Math.sin(M)*k);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function $c(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function S_(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function A_(n){n.restore()}function qN(n,t,e,i,a){if(!t)return n.lineTo(e.x,e.y);if(a==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else a==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function GN(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function YN(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ae(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function KN(n,t,e,i,a){if(a.strikethrough||a.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,h=t+o.actualBoundingBoxRight,d=e-o.actualBoundingBoxAscent,m=e+o.actualBoundingBoxDescent,_=a.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(c,_),n.lineTo(h,_),n.stroke()}}function QN(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Zc(n,t,e,i,a,o={}){const c=He(t)?t:[t],h=o.strokeWidth>0&&o.strokeColor!=="";let d,m;for(n.save(),n.font=a.string,YN(n,o),d=0;d<c.length;++d)m=c[d],o.backdrop&&QN(n,o.backdrop),h&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ae(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,e,i,o.maxWidth)),n.fillText(m,e,i,o.maxWidth),KN(n,e,i,m,o),i+=Number(a.lineHeight);n.restore()}function pp(n,t){const{x:e,y:i,w:a,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*Fe,Fe,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,Fe,si,!0),n.lineTo(e+a-c.bottomRight,i+o),n.arc(e+a-c.bottomRight,i+o-c.bottomRight,c.bottomRight,si,0,!0),n.lineTo(e+a,i+c.topRight),n.arc(e+a-c.topRight,i+c.topRight,c.topRight,0,-si,!0),n.lineTo(e+c.topLeft,i)}const XN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,WN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $N(n,t){const e=(""+n).match(XN);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const ZN=n=>+n||0;function A1(n,t){const e={},i=Gt(t),a=i?Object.keys(t):t,o=Gt(n)?i?c=>Ht(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of a)e[c]=ZN(o(c));return e}function JN(n){return A1(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Lc(n){return A1(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Wn(n){const t=JN(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function on(n,t){n=n||{},t=t||be.font;let e=Ht(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ht(n.style,t.style);i&&!(""+i).match(WN)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Ht(n.family,t.family),lineHeight:$N(Ht(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ht(n.weight,t.weight),string:""};return a.string=FN(a),a}function Kh(n,t,e,i){let a,o,c;for(a=0,o=n.length;a<o;++a)if(c=n[a],c!==void 0&&c!==void 0)return c}function tk(n,t,e){const{min:i,max:a}=n,o=uN(t,(a-i)/2),c=(h,d)=>e&&h===0?0:h+d;return{min:c(i,-Math.abs(o)),max:c(a,o)}}function Da(n,t){return Object.assign(Object.create(n),t)}function w_(n,t=[""],e,i,a=()=>n[0]){const o=e||n;typeof i>"u"&&(i=C1("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:a,override:h=>w_([h,...n],t,o,i)};return new Proxy(c,{deleteProperty(h,d){return delete h[d],delete h._keys,delete n[0][d],!0},get(h,d){return x1(h,d,()=>lk(d,t,n,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,d){return HT(h).includes(d)},ownKeys(h){return HT(h)},set(h,d,m){const _=h._storage||(h._storage=a());return h[d]=_[d]=m,delete h._keys,!0}})}function Ko(n,t,e,i){const a={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:w1(n,i),setContext:o=>Ko(n,o,e,i),override:o=>Ko(n.override(o),t,e,i)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,h){return x1(o,c,()=>nk(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,h){return n[c]=h,delete o[c],!0}})}function w1(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:a=t.allKeys}=n;return{allKeys:a,scriptable:e,indexable:i,isScriptable:br(e)?e:()=>e,isIndexable:br(i)?i:()=>i}}const ek=(n,t)=>n?n+v_(t):t,x_=(n,t)=>Gt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function x1(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function nk(n,t,e){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=n;let h=i[t];return br(h)&&c.isScriptable(t)&&(h=ik(t,h,n,e)),He(h)&&h.length&&(h=sk(t,h,n,c.isIndexable)),x_(t,h)&&(h=Ko(h,a,o&&o[t],c)),h}function ik(n,t,e,i){const{_proxy:a,_context:o,_subProxy:c,_stack:h}=e;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let d=t(o,c||i);return h.delete(n),x_(n,d)&&(d=R_(a._scopes,a,n,d)),d}function sk(n,t,e,i){const{_proxy:a,_context:o,_subProxy:c,_descriptors:h}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Gt(t[0])){const d=t,m=a._scopes.filter(_=>_!==d);t=[];for(const _ of d){const v=R_(m,a,n,_);t.push(Ko(v,o,c&&c[n],h))}}return t}function R1(n,t,e){return br(n)?n(t,e):n}const rk=(n,t)=>n===!0?t:typeof n=="string"?Lf(t,n):void 0;function ak(n,t,e,i,a){for(const o of t){const c=rk(e,o);if(c){n.add(c);const h=R1(c._fallback,e,a);if(typeof h<"u"&&h!==e&&h!==i)return h}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function R_(n,t,e,i){const a=t._rootScopes,o=R1(t._fallback,e,i),c=[...n,...a],h=new Set;h.add(i);let d=BT(h,c,e,o||e,i);return d===null||typeof o<"u"&&o!==e&&(d=BT(h,c,o,d,i),d===null)?!1:w_(Array.from(h),[""],a,o,()=>ok(t,e,i))}function BT(n,t,e,i,a){for(;e;)e=ak(n,t,e,i,a);return e}function ok(n,t,e){const i=n._getTarget();t in i||(i[t]={});const a=i[t];return He(a)&&Gt(e)?e:a||{}}function lk(n,t,e,i){let a;for(const o of t)if(a=C1(ek(o,n),e),typeof a<"u")return x_(n,a)?R_(e,i,n,a):a}function C1(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function HT(n){let t=n._keys;return t||(t=n._keys=ck(n._scopes)),t}function ck(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(a=>!a.startsWith("_")))t.add(i);return Array.from(t)}const uk=Number.EPSILON||1e-14,Qo=(n,t)=>t<n.length&&!n[t].skip&&n[t],I1=n=>n==="x"?"y":"x";function hk(n,t,e,i){const a=n.skip?t:n,o=t,c=e.skip?t:e,h=dp(o,a),d=dp(c,o);let m=h/(h+d),_=d/(h+d);m=isNaN(m)?0:m,_=isNaN(_)?0:_;const v=i*m,T=i*_;return{previous:{x:o.x-v*(c.x-a.x),y:o.y-v*(c.y-a.y)},next:{x:o.x+T*(c.x-a.x),y:o.y+T*(c.y-a.y)}}}function fk(n,t,e){const i=n.length;let a,o,c,h,d,m=Qo(n,0);for(let _=0;_<i-1;++_)if(d=m,m=Qo(n,_+1),!(!d||!m)){if(kc(t[_],0,uk)){e[_]=e[_+1]=0;continue}a=e[_]/t[_],o=e[_+1]/t[_],h=Math.pow(a,2)+Math.pow(o,2),!(h<=9)&&(c=3/Math.sqrt(h),e[_]=a*c*t[_],e[_+1]=o*c*t[_])}}function dk(n,t,e="x"){const i=I1(e),a=n.length;let o,c,h,d=Qo(n,0);for(let m=0;m<a;++m){if(c=h,h=d,d=Qo(n,m+1),!h)continue;const _=h[e],v=h[i];c&&(o=(_-c[e])/3,h[`cp1${e}`]=_-o,h[`cp1${i}`]=v-o*t[m]),d&&(o=(d[e]-_)/3,h[`cp2${e}`]=_+o,h[`cp2${i}`]=v+o*t[m])}}function gk(n,t="x"){const e=I1(t),i=n.length,a=Array(i).fill(0),o=Array(i);let c,h,d,m=Qo(n,0);for(c=0;c<i;++c)if(h=d,d=m,m=Qo(n,c+1),!!d){if(m){const _=m[t]-d[t];a[c]=_!==0?(m[e]-d[e])/_:0}o[c]=h?m?Yo(a[c-1])!==Yo(a[c])?0:(a[c-1]+a[c])/2:a[c-1]:a[c]}fk(n,a,o),dk(n,o,t)}function Qh(n,t,e){return Math.max(Math.min(n,e),t)}function mk(n,t){let e,i,a,o,c,h=$c(n[0],t);for(e=0,i=n.length;e<i;++e)c=o,o=h,h=e<i-1&&$c(n[e+1],t),o&&(a=n[e],c&&(a.cp1x=Qh(a.cp1x,t.left,t.right),a.cp1y=Qh(a.cp1y,t.top,t.bottom)),h&&(a.cp2x=Qh(a.cp2x,t.left,t.right),a.cp2y=Qh(a.cp2y,t.top,t.bottom)))}function pk(n,t,e,i,a){let o,c,h,d;if(t.spanGaps&&(n=n.filter(m=>!m.skip)),t.cubicInterpolationMode==="monotone")gk(n,a);else{let m=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)h=n[o],d=hk(m,h,n[Math.min(o+1,c-(i?0:1))%c],t.tension),h.cp1x=d.previous.x,h.cp1y=d.previous.y,h.cp2x=d.next.x,h.cp2y=d.next.y,m=h}t.capBezierPoints&&mk(n,e)}function C_(){return typeof window<"u"&&typeof document<"u"}function I_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function jf(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const cd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function _k(n,t){return cd(n).getPropertyValue(t)}const yk=["top","right","bottom","left"];function ba(n,t,e){const i={};e=e?"-"+e:"";for(let a=0;a<4;a++){const o=yk[a];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const vk=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function bk(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:a,offsetY:o}=i;let c=!1,h,d;if(vk(a,o,n.target))h=a,d=o;else{const m=t.getBoundingClientRect();h=i.clientX-m.left,d=i.clientY-m.top,c=!0}return{x:h,y:d,box:c}}function ha(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,a=cd(e),o=a.boxSizing==="border-box",c=ba(a,"padding"),h=ba(a,"border","width"),{x:d,y:m,box:_}=bk(n,e),v=c.left+(_&&h.left),T=c.top+(_&&h.top);let{width:A,height:C}=t;return o&&(A-=c.width+h.width,C-=c.height+h.height),{x:Math.round((d-v)/A*e.width/i),y:Math.round((m-T)/C*e.height/i)}}function Tk(n,t,e){let i,a;if(t===void 0||e===void 0){const o=n&&I_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),h=cd(o),d=ba(h,"border","width"),m=ba(h,"padding");t=c.width-m.width-d.width,e=c.height-m.height-d.height,i=jf(h.maxWidth,o,"clientWidth"),a=jf(h.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||zf,maxHeight:a||zf}}const Xh=n=>Math.round(n*10)/10;function Ek(n,t,e,i){const a=cd(n),o=ba(a,"margin"),c=jf(a.maxWidth,n,"clientWidth")||zf,h=jf(a.maxHeight,n,"clientHeight")||zf,d=Tk(n,t,e);let{width:m,height:_}=d;if(a.boxSizing==="content-box"){const T=ba(a,"border","width"),A=ba(a,"padding");m-=A.width+T.width,_-=A.height+T.height}return m=Math.max(0,m-o.width),_=Math.max(0,i?m/i:_-o.height),m=Xh(Math.min(m,c,d.maxWidth)),_=Xh(Math.min(_,h,d.maxHeight)),m&&!_&&(_=Xh(m/2)),(t!==void 0||e!==void 0)&&i&&d.height&&_>d.height&&(_=d.height,m=Xh(Math.floor(_*i))),{width:m,height:_}}function FT(n,t,e){const i=t||1,a=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==a||c.width!==o?(n.currentDevicePixelRatio=i,c.height=a,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Sk=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};C_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function qT(n,t){const e=_k(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fa(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Ak(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function wk(n,t,e,i){const a={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},c=fa(n,a,e),h=fa(a,o,e),d=fa(o,t,e),m=fa(c,h,e),_=fa(h,d,e);return fa(m,_,e)}const xk=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Rk=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Po(n,t,e){return n?xk(t,e):Rk()}function D1(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function M1(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function O1(n){return n==="angle"?{between:_1,compare:AN,normalize:tr}:{between:Ac,compare:(t,e)=>t-e,normalize:t=>t}}function GT({start:n,end:t,count:e,loop:i,style:a}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:a}}function Ck(n,t,e){const{property:i,start:a,end:o}=e,{between:c,normalize:h}=O1(i),d=t.length;let{start:m,end:_,loop:v}=n,T,A;if(v){for(m+=d,_+=d,T=0,A=d;T<A&&c(h(t[m%d][i]),a,o);++T)m--,_--;m%=d,_%=d}return _<m&&(_+=d),{start:m,end:_,loop:v,style:n.style}}function Ik(n,t,e){if(!e)return[n];const{property:i,start:a,end:o}=e,c=t.length,{compare:h,between:d,normalize:m}=O1(i),{start:_,end:v,loop:T,style:A}=Ck(n,t,e),C=[];let k=!1,M=null,G,$,tt;const st=()=>d(a,tt,G)&&h(a,tt)!==0,X=()=>h(o,G)===0||d(o,tt,G),ot=()=>k||st(),O=()=>!k||X();for(let x=_,I=_;x<=v;++x)$=t[x%c],!$.skip&&(G=m($[i]),G!==tt&&(k=d(G,a,o),M===null&&ot()&&(M=h(G,a)===0?x:I),M!==null&&O()&&(C.push(GT({start:M,end:x,loop:T,count:c,style:A})),M=null),I=x,tt=G));return M!==null&&C.push(GT({start:M,end:v,loop:T,count:c,style:A})),C}function Dk(n,t){const e=[],i=n.segments;for(let a=0;a<i.length;a++){const o=Ik(i[a],n.points,t);o.length&&e.push(...o)}return e}function Mk(n,t,e,i){let a=0,o=t-1;if(e&&!i)for(;a<t&&!n[a].skip;)a++;for(;a<t&&n[a].skip;)a++;for(a%=t,e&&(o+=a);o>a&&n[o%t].skip;)o--;return o%=t,{start:a,end:o}}function Ok(n,t,e,i){const a=n.length,o=[];let c=t,h=n[t],d;for(d=t+1;d<=e;++d){const m=n[d%a];m.skip||m.stop?h.skip||(i=!1,o.push({start:t%a,end:(d-1)%a,loop:i}),t=c=m.stop?d:null):(c=d,h.skip&&(t=d)),h=m}return c!==null&&o.push({start:t%a,end:c%a,loop:i}),o}function Nk(n,t){const e=n.points,i=n.options.spanGaps,a=e.length;if(!a)return[];const o=!!n._loop,{start:c,end:h}=Mk(e,a,o,i);if(i===!0)return YT(n,[{start:c,end:h,loop:o}],e,t);const d=h<c?h+a:h,m=!!n._fullLoop&&c===0&&h===a-1;return YT(n,Ok(e,c,d,m),e,t)}function YT(n,t,e,i){return!i||!i.setContext||!e?t:kk(n,t,e,i)}function kk(n,t,e,i){const a=n._chart.getContext(),o=KT(n.options),{_datasetIndex:c,options:{spanGaps:h}}=n,d=e.length,m=[];let _=o,v=t[0].start,T=v;function A(C,k,M,G){const $=h?-1:1;if(C!==k){for(C+=d;e[C%d].skip;)C-=$;for(;e[k%d].skip;)k+=$;C%d!==k%d&&(m.push({start:C%d,end:k%d,loop:M,style:G}),_=G,v=k%d)}}for(const C of t){v=h?v:C.start;let k=e[v%d],M;for(T=v+1;T<=C.end;T++){const G=e[T%d];M=KT(i.setContext(Da(a,{type:"segment",p0:k,p1:G,p0DataIndex:(T-1)%d,p1DataIndex:T%d,datasetIndex:c}))),Pk(M,_)&&A(v,T-1,C.loop,_),k=G,_=M}v<T-1&&A(v,T-1,C.loop,_)}return m}function KT(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Pk(n,t){if(!t)return!1;const e=[],i=function(a,o){return E_(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Wh(n,t,e){return n.options.clip?n[e]:t[e]}function Vk(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Wh(e,t,"left"),right:Wh(e,t,"right"),top:Wh(i,t,"top"),bottom:Wh(i,t,"bottom")}:t}function Lk(n,t){const e=t._clip;if(e.disabled)return!1;const i=Vk(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Uk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,a){const o=e.listeners[a],c=e.duration;o.forEach(h=>h({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=v1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,h=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>i.duration&&(i.duration=d._total),d.tick(t),h=!0):(o[c]=o[o.length-1],o.pop());h&&(a.draw(),this._notify(a,i,t,"progress")),o.length||(i.running=!1,this._notify(a,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var hs=new Uk;const QT="transparent",zk={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=LT(n||QT),a=i.valid&&LT(t||QT);return a&&a.valid?a.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class jk{constructor(t,e,i,a){const o=e[i];a=Kh([t.to,a,o,t.from]);const c=Kh([t.from,o,a]);this._active=!0,this._fn=t.fn||zk[t.type||typeof c],this._easing=Pc[t.easing]||Pc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=a,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Kh([t.to,e,a,t.from]),this._from=Kh([t.from,a,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,a=this._prop,o=this._from,c=this._loop,h=this._to;let d;if(this._active=o!==h&&(c||e<i),!this._active){this._target[a]=h,this._notify(!0);return}if(e<0){this._target[a]=o;return}d=e/i%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,h,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][e]()}}class N1{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Gt(t))return;const e=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const o=t[a];if(!Gt(o))return;const c={};for(const h of e)c[h]=o[h];(He(o.properties)&&o.properties||[a]).forEach(h=>{(h===a||!i.has(h))&&i.set(h,c)})})}_animateOptions(t,e){const i=e.options,a=Hk(t,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&Bk(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,a=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),h=Date.now();let d;for(d=c.length-1;d>=0;--d){const m=c[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(t,e));continue}const _=e[m];let v=o[m];const T=i.get(m);if(v)if(T&&v.active()){v.update(T,_,h);continue}else v.cancel();if(!T||!T.duration){t[m]=_;continue}o[m]=v=new jk(T,t,m,_),a.push(v)}return a}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return hs.add(this._chart,i),!0}}function Bk(n,t){const e=[],i=Object.keys(t);for(let a=0;a<i.length;a++){const o=n[i[a]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function Hk(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function XT(n,t){const e=n&&n.options||{},i=e.reverse,a=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:a,end:i?a:o}}function Fk(n,t,e){if(e===!1)return!1;const i=XT(n,e),a=XT(t,e);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function qk(n){let t,e,i,a;return Gt(n)?(t=n.top,e=n.right,i=n.bottom,a=n.left):t=e=i=a=n,{top:t,right:e,bottom:i,left:a,disabled:n===!1}}function k1(n,t){const e=[],i=n._getSortedDatasetMetas(t);let a,o;for(a=0,o=i.length;a<o;++a)e.push(i[a].index);return e}function WT(n,t,e,i={}){const a=n.keys,o=i.mode==="single";let c,h,d,m;if(t===null)return;let _=!1;for(c=0,h=a.length;c<h;++c){if(d=+a[c],d===e){if(_=!0,i.all)continue;break}m=n.values[d],Xn(m)&&(o||t===0||Yo(t)===Yo(m))&&(t+=m)}return!_&&!i.all?0:t}function Gk(n,t){const{iScale:e,vScale:i}=t,a=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),h=new Array(c.length);let d,m,_;for(d=0,m=c.length;d<m;++d)_=c[d],h[d]={[a]:_,[o]:n[_]};return h}function Nm(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Yk(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Kk(n){const{min:t,max:e,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:a?e:Number.POSITIVE_INFINITY}}function Qk(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function $T(n,t,e,i){for(const a of t.getMatchingVisibleMetas(i).reverse()){const o=n[a.index];if(e&&o>0||!e&&o<0)return a.index}return null}function ZT(n,t){const{chart:e,_cachedMeta:i}=n,a=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:h}=i,d=o.axis,m=c.axis,_=Yk(o,c,i),v=t.length;let T;for(let A=0;A<v;++A){const C=t[A],{[d]:k,[m]:M}=C,G=C._stacks||(C._stacks={});T=G[m]=Qk(a,_,k),T[h]=M,T._top=$T(T,c,!0,i.type),T._bottom=$T(T,c,!1,i.type);const $=T._visualValues||(T._visualValues={});$[h]=M}}function km(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Xk(n,t){return Da(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Wk(n,t,e){return Da(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function gc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const a of t){const o=a._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Pm=n=>n==="reset"||n==="none",JT=(n,t)=>t?n:Object.assign({},n),$k=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:k1(e,!0),values:null};class P1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Nm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),a=(v,T,A,C)=>v==="x"?T:v==="r"?C:A,o=e.xAxisID=Ht(i.xAxisID,km(t,"x")),c=e.yAxisID=Ht(i.yAxisID,km(t,"y")),h=e.rAxisID=Ht(i.rAxisID,km(t,"r")),d=e.indexAxis,m=e.iAxisID=a(d,o,c,h),_=e.vAxisID=a(d,c,o,h);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(h),e.iScale=this.getScaleForId(m),e.vScale=this.getScaleForId(_)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&kT(this._data,this),t._stacked&&gc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Gt(e)){const a=this._cachedMeta;this._data=Gk(e,a)}else if(i!==e){if(i){kT(i,this);const a=this._cachedMeta;gc(a),a._parsed=[]}e&&Object.isExtensible(e)&&CN(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=e._stacked;e._stacked=Nm(e.vScale,e),e.stack!==i.stack&&(a=!0,gc(e),e.stack=i.stack),this._resyncElements(t),(a||o!==e._stacked)&&(ZT(this,e._parsed),e._stacked=Nm(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:c}=i,h=o.axis;let d=t===0&&e===a.length?!0:i._sorted,m=t>0&&i._parsed[t-1],_,v,T;if(this._parsing===!1)i._parsed=a,i._sorted=!0,T=a;else{He(a[t])?T=this.parseArrayData(i,a,t,e):Gt(a[t])?T=this.parseObjectData(i,a,t,e):T=this.parsePrimitiveData(i,a,t,e);const A=()=>v[h]===null||m&&v[h]<m[h];for(_=0;_<e;++_)i._parsed[_+t]=v=T[_],d&&(A()&&(d=!1),m=v);i._sorted=d}c&&ZT(this,T)}parsePrimitiveData(t,e,i,a){const{iScale:o,vScale:c}=t,h=o.axis,d=c.axis,m=o.getLabels(),_=o===c,v=new Array(a);let T,A,C;for(T=0,A=a;T<A;++T)C=T+i,v[T]={[h]:_||o.parse(m[C],C),[d]:c.parse(e[C],C)};return v}parseArrayData(t,e,i,a){const{xScale:o,yScale:c}=t,h=new Array(a);let d,m,_,v;for(d=0,m=a;d<m;++d)_=d+i,v=e[_],h[d]={x:o.parse(v[0],_),y:c.parse(v[1],_)};return h}parseObjectData(t,e,i,a){const{xScale:o,yScale:c}=t,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let _,v,T,A;for(_=0,v=a;_<v;++_)T=_+i,A=e[T],m[_]={x:o.parse(Lf(A,h),T),y:c.parse(Lf(A,d),T)};return m}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const a=this.chart,o=this._cachedMeta,c=e[t.axis],h={keys:k1(a,!0),values:e._stacks[t.axis]._visualValues};return WT(h,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,a){const o=i[e.axis];let c=o===null?NaN:o;const h=a&&i._stacks[e.axis];a&&h&&(a.values=h,c=WT(a,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&t===i.iScale,c=a.length,h=this._getOtherScale(t),d=$k(e,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:_,max:v}=Kk(h);let T,A;function C(){A=a[T];const k=A[h.axis];return!Xn(A[t.axis])||_>k||v<k}for(T=0;T<c&&!(!C()&&(this.updateRangeFromParsed(m,t,A,d),o));++T);if(o){for(T=c-1;T>=0;--T)if(!C()){this.updateRangeFromParsed(m,t,A,d);break}}return m}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let a,o,c;for(a=0,o=e.length;a<o;++a)c=e[a][t.axis],Xn(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,a=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=qk(Ht(this.options.clip,Fk(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,a=i.data||[],o=e.chartArea,c=[],h=this._drawStart||0,d=this._drawCount||a.length-h,m=this.options.drawActiveElementsOnTop;let _;for(i.dataset&&i.dataset.draw(t,o,h,d),_=h;_<h+d;++_){const v=a[_];v.hidden||(v.active&&m?c.push(v):v.draw(t,o))}for(_=0;_<c.length;++_)c[_].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const a=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=Wk(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=a.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Xk(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const a=e==="active",o=this._cachedDataOpts,c=t+"-"+e,h=o[c],d=this.enableOptionSharing&&Uf(i);if(h)return JT(h,d);const m=this.chart.config,_=m.datasetElementScopeKeys(this._type,t),v=a?[`${t}Hover`,"hover",t,""]:[t,""],T=m.getOptionScopes(this.getDataset(),_),A=Object.keys(be.elements[t]),C=()=>this.getContext(i,a,e),k=m.resolveNamedOptions(T,A,C,v);return k.$shared&&(k.$shared=d,o[c]=Object.freeze(JT(k,d))),k}_resolveAnimations(t,e,i){const a=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,h=o[c];if(h)return h;let d;if(a.options.animation!==!1){const _=this.chart.config,v=_.datasetAnimationScopeKeys(this._type,e),T=_.getOptionScopes(this.getDataset(),v);d=_.createResolver(T,this.getContext(t,i,e))}const m=new N1(a,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(m)),m}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Pm(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),a=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==a;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,a){Pm(a)?Object.assign(t,i):this._resolveAnimations(e,a).update(t,i)}updateSharedOptions(t,e,i){t&&!Pm(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,a){t.active=a;const o=this.getStyle(e,a);this._resolveAnimations(e,i,a).update(t,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[h,d,m]of this._syncList)this[h](d,m);this._syncList=[];const a=i.length,o=e.length,c=Math.min(o,a);c&&this.parse(0,c),o>a?this._insertElements(a,o-a,t):o<a&&this._removeElements(o,a-o)}_insertElements(t,e,i=!0){const a=this._cachedMeta,o=a.data,c=t+e;let h;const d=m=>{for(m.length+=e,h=m.length-1;h>=c;h--)m[h]=m[h-e]};for(d(o),h=t;h<c;++h)o[h]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,a){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(t,e);i._stacked&&gc(i,a)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,a]=t;this[e](i,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Zk extends P1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:a=[],_dataset:o}=e,c=this.chart._animationsDisabled;let{start:h,count:d}=ON(e,a,c);this._drawStart=h,this._drawCount=d,NN(e)&&(h=0,d=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=a;const m=this.resolveDatasetElementOptions(t);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:m},t),this.updateElements(a,h,d,t)}updateElements(t,e,i,a){const o=a==="reset",{iScale:c,vScale:h,_stacked:d,_dataset:m}=this._cachedMeta,{sharedOptions:_,includeOptions:v}=this._getSharedOptions(e,a),T=c.axis,A=h.axis,{spanGaps:C,segment:k}=this.options,M=Wc(C)?C:Number.POSITIVE_INFINITY,G=this.chart._animationsDisabled||o||a==="none",$=e+i,tt=t.length;let st=e>0&&this.getParsed(e-1);for(let X=0;X<tt;++X){const ot=t[X],O=G?ot:{};if(X<e||X>=$){O.skip=!0;continue}const x=this.getParsed(X),I=ae(x[A]),V=O[T]=c.getPixelForValue(x[T],X),D=O[A]=o||I?h.getBasePixel():h.getPixelForValue(d?this.applyStack(h,x,d):x[A],X);O.skip=isNaN(V)||isNaN(D)||I,O.stop=X>0&&Math.abs(x[T]-st[T])>M,k&&(O.parsed=x,O.raw=m.data[X]),v&&(O.options=_||this.resolveDataElementOptions(X,ot.active?"active":a)),G||this.updateElement(ot,X,O,a),st=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,a=t.data||[];if(!a.length)return i;const o=a[0].size(this.resolveDataElementOptions(0)),c=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function ca(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class D_{static override(t){Object.assign(D_.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ca()}parse(){return ca()}format(){return ca()}add(){return ca()}diff(){return ca()}startOf(){return ca()}endOf(){return ca()}}var Jk={_date:D_};function tP(n,t,e,i){const{controller:a,data:o,_sorted:c}=n,h=a._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(h&&t===h.axis&&t!=="r"&&c&&o.length){const m=h._reversePixels?xN:ma;if(i){if(a._sharedOptions){const _=o[0],v=typeof _.getRange=="function"&&_.getRange(t);if(v){const T=m(o,t,e-v),A=m(o,t,e+v);return{lo:T.lo,hi:A.hi}}}}else{const _=m(o,t,e);if(d){const{vScale:v}=a._cachedMeta,{_parsed:T}=n,A=T.slice(0,_.lo+1).reverse().findIndex(k=>!ae(k[v.axis]));_.lo-=Math.max(0,A);const C=T.slice(_.hi).findIndex(k=>!ae(k[v.axis]));_.hi+=Math.max(0,C)}return _}}return{lo:0,hi:o.length-1}}function ud(n,t,e,i,a){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let h=0,d=o.length;h<d;++h){const{index:m,data:_}=o[h],{lo:v,hi:T}=tP(o[h],t,c,a);for(let A=v;A<=T;++A){const C=_[A];C.skip||i(C,m,A)}}}function eP(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,a){const o=t?Math.abs(i.x-a.x):0,c=e?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Vm(n,t,e,i,a){const o=[];return!a&&!n.isPointInArea(t)||ud(n,e,t,function(h,d,m){!a&&!$c(h,n.chartArea,0)||h.inRange(t.x,t.y,i)&&o.push({element:h,datasetIndex:d,index:m})},!0),o}function nP(n,t,e,i){let a=[];function o(c,h,d){const{startAngle:m,endAngle:_}=c.getProps(["startAngle","endAngle"],i),{angle:v}=SN(c,{x:t.x,y:t.y});_1(v,m,_)&&a.push({element:c,datasetIndex:h,index:d})}return ud(n,e,t,o),a}function iP(n,t,e,i,a,o){let c=[];const h=eP(e);let d=Number.POSITIVE_INFINITY;function m(_,v,T){const A=_.inRange(t.x,t.y,a);if(i&&!A)return;const C=_.getCenterPoint(a);if(!(!!o||n.isPointInArea(C))&&!A)return;const M=h(t,C);M<d?(c=[{element:_,datasetIndex:v,index:T}],d=M):M===d&&c.push({element:_,datasetIndex:v,index:T})}return ud(n,e,t,m),c}function Lm(n,t,e,i,a,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?nP(n,t,e,a):iP(n,t,e,i,a,o)}function tE(n,t,e,i,a){const o=[],c=e==="x"?"inXRange":"inYRange";let h=!1;return ud(n,e,t,(d,m,_)=>{d[c]&&d[c](t[e],a)&&(o.push({element:d,datasetIndex:m,index:_}),h=h||d.inRange(t.x,t.y,a))}),i&&!h?[]:o}var sP={modes:{index(n,t,e,i){const a=ha(t,n),o=e.axis||"x",c=e.includeInvisible||!1,h=e.intersect?Vm(n,a,o,i,c):Lm(n,a,o,!1,i,c),d=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const _=h[0].index,v=m.data[_];v&&!v.skip&&d.push({element:v,datasetIndex:m.index,index:_})}),d):[]},dataset(n,t,e,i){const a=ha(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let h=e.intersect?Vm(n,a,o,i,c):Lm(n,a,o,!1,i,c);if(h.length>0){const d=h[0].datasetIndex,m=n.getDatasetMeta(d).data;h=[];for(let _=0;_<m.length;++_)h.push({element:m[_],datasetIndex:d,index:_})}return h},point(n,t,e,i){const a=ha(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Vm(n,a,o,i,c)},nearest(n,t,e,i){const a=ha(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Lm(n,a,o,e.intersect,i,c)},x(n,t,e,i){const a=ha(t,n);return tE(n,a,"x",e.intersect,i)},y(n,t,e,i){const a=ha(t,n);return tE(n,a,"y",e.intersect,i)}}};const V1=["left","top","right","bottom"];function mc(n,t){return n.filter(e=>e.pos===t)}function eE(n,t){return n.filter(e=>V1.indexOf(e.pos)===-1&&e.box.axis===t)}function pc(n,t){return n.sort((e,i)=>{const a=t?i:e,o=t?e:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function rP(n){const t=[];let e,i,a,o,c,h;for(e=0,i=(n||[]).length;e<i;++e)a=n[e],{position:o,options:{stack:c,stackWeight:h=1}}=a,t.push({index:e,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:c&&o+c,stackWeight:h});return t}function aP(n){const t={};for(const e of n){const{stack:i,pos:a,stackWeight:o}=e;if(!i||!V1.includes(a))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function oP(n,t){const e=aP(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=t;let o,c,h;for(o=0,c=n.length;o<c;++o){h=n[o];const{fullSize:d}=h.box,m=e[h.stack],_=m&&h.stackWeight/m.weight;h.horizontal?(h.width=_?_*i:d&&t.availableWidth,h.height=a):(h.width=i,h.height=_?_*a:d&&t.availableHeight)}return e}function lP(n){const t=rP(n),e=pc(t.filter(m=>m.box.fullSize),!0),i=pc(mc(t,"left"),!0),a=pc(mc(t,"right")),o=pc(mc(t,"top"),!0),c=pc(mc(t,"bottom")),h=eE(t,"x"),d=eE(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:a.concat(d).concat(c).concat(h),chartArea:mc(t,"chartArea"),vertical:i.concat(a).concat(d),horizontal:o.concat(c).concat(h)}}function nE(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function L1(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function cP(n,t,e,i){const{pos:a,box:o}=e,c=n.maxPadding;if(!Gt(a)){e.size&&(n[a]-=e.size);const v=i[e.stack]||{size:0,count:1};v.size=Math.max(v.size,e.horizontal?o.height:o.width),e.size=v.size/v.count,n[a]+=e.size}o.getPadding&&L1(c,o.getPadding());const h=Math.max(0,t.outerWidth-nE(c,n,"left","right")),d=Math.max(0,t.outerHeight-nE(c,n,"top","bottom")),m=h!==n.w,_=d!==n.h;return n.w=h,n.h=d,e.horizontal?{same:m,other:_}:{same:_,other:m}}function uP(n){const t=n.maxPadding;function e(i){const a=Math.max(t[i]-n[i],0);return n[i]+=a,a}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function hP(n,t){const e=t.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function wc(n,t,e,i){const a=[];let o,c,h,d,m,_;for(o=0,c=n.length,m=0;o<c;++o){h=n[o],d=h.box,d.update(h.width||t.w,h.height||t.h,hP(h.horizontal,t));const{same:v,other:T}=cP(t,e,h,i);m|=v&&a.length,_=_||T,d.fullSize||a.push(h)}return m&&wc(a,t,e,i)||_}function $h(n,t,e,i,a){n.top=e,n.left=t,n.right=t+i,n.bottom=e+a,n.width=i,n.height=a}function iE(n,t,e,i){const a=e.padding;let{x:o,y:c}=t;for(const h of n){const d=h.box,m=i[h.stack]||{placed:0,weight:1},_=h.stackWeight/m.weight||1;if(h.horizontal){const v=t.w*_,T=m.size||d.height;Uf(m.start)&&(c=m.start),d.fullSize?$h(d,a.left,c,e.outerWidth-a.right-a.left,T):$h(d,t.left+m.placed,c,v,T),m.start=c,m.placed+=v,c=d.bottom}else{const v=t.h*_,T=m.size||d.width;Uf(m.start)&&(o=m.start),d.fullSize?$h(d,o,a.top,T,e.outerHeight-a.bottom-a.top):$h(d,o,t.top+m.placed,T,v),m.start=o,m.placed+=v,o=d.right}}t.x=o,t.y=c}var Kn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const a=Wn(n.options.layout.padding),o=Math.max(t-a.width,0),c=Math.max(e-a.height,0),h=lP(n.boxes),d=h.vertical,m=h.horizontal;$t(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const _=d.reduce((k,M)=>M.box.options&&M.box.options.display===!1?k:k+1,0)||1,v=Object.freeze({outerWidth:t,outerHeight:e,padding:a,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/_,hBoxMaxHeight:c/2}),T=Object.assign({},a);L1(T,Wn(i));const A=Object.assign({maxPadding:T,w:o,h:c,x:a.left,y:a.top},a),C=oP(d.concat(m),v);wc(h.fullSize,A,v,C),wc(d,A,v,C),wc(m,A,v,C)&&wc(d,A,v,C),uP(A),iE(h.leftAndTop,A,v,C),A.x+=A.w,A.y+=A.h,iE(h.rightAndBottom,A,v,C),n.chartArea={left:A.left,top:A.top,right:A.left+A.w,bottom:A.top+A.h,height:A.h,width:A.w},$t(h.chartArea,k=>{const M=k.box;Object.assign(M,n.chartArea),M.update(A.w,A.h,{left:0,top:0,right:0,bottom:0})})}};class U1{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,a){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,a?Math.floor(e/a):i)}}isAttached(t){return!0}updateConfig(t){}}class fP extends U1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gf="$chartjs",dP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sE=n=>n===null||n==="";function gP(n,t){const e=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[gf]={initial:{height:i,width:a,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",sE(a)){const o=qT(n,"width");o!==void 0&&(n.width=o)}if(sE(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=qT(n,"height");o!==void 0&&(n.height=o)}return n}const z1=Sk?{passive:!0}:!1;function mP(n,t,e){n&&n.addEventListener(t,e,z1)}function pP(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,z1)}function _P(n,t){const e=dP[n.type]||n.type,{x:i,y:a}=ha(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function Bf(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function yP(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Bf(h.addedNodes,i),c=c&&!Bf(h.removedNodes,i);c&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}function vP(n,t,e){const i=n.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Bf(h.removedNodes,i),c=c&&!Bf(h.addedNodes,i);c&&e()});return a.observe(document,{childList:!0,subtree:!0}),a}const Jc=new Map;let rE=0;function j1(){const n=window.devicePixelRatio;n!==rE&&(rE=n,Jc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function bP(n,t){Jc.size||window.addEventListener("resize",j1),Jc.set(n,t)}function TP(n){Jc.delete(n),Jc.size||window.removeEventListener("resize",j1)}function EP(n,t,e){const i=n.canvas,a=i&&I_(i);if(!a)return;const o=b1((h,d)=>{const m=a.clientWidth;e(h,d),m<a.clientWidth&&e()},window),c=new ResizeObserver(h=>{const d=h[0],m=d.contentRect.width,_=d.contentRect.height;m===0&&_===0||o(m,_)});return c.observe(a),bP(n,o),c}function Um(n,t,e){e&&e.disconnect(),t==="resize"&&TP(n)}function SP(n,t,e){const i=n.canvas,a=b1(o=>{n.ctx!==null&&e(_P(o,n))},n);return mP(i,t,a),a}class AP extends U1{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(gP(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[gf])return!1;const i=e[gf].initial;["height","width"].forEach(o=>{const c=i[o];ae(c)?e.removeAttribute(o):e.setAttribute(o,c)});const a=i.style||{};return Object.keys(a).forEach(o=>{e.style[o]=a[o]}),e.width=e.width,delete e[gf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const a=t.$proxies||(t.$proxies={}),c={attach:yP,detach:vP,resize:EP}[e]||SP;a[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),a=i[e];if(!a)return;({attach:Um,detach:Um,resize:Um}[e]||pP)(t,e,a),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,a){return Ek(t,e,i,a)}isAttached(t){const e=t&&I_(t);return!!(e&&e.isConnected)}}function wP(n){return!C_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?fP:AP}class Ma{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Wc(this.x)&&Wc(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const a={};return t.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}}function xP(n,t){const e=n.options.ticks,i=RP(n),a=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?IP(t):[],c=o.length,h=o[0],d=o[c-1],m=[];if(c>a)return DP(t,m,o,c/a),m;const _=CP(o,t,a);if(c>0){let v,T;const A=c>1?Math.round((d-h)/(c-1)):null;for(Zh(t,m,_,ae(A)?0:h-A,h),v=0,T=c-1;v<T;v++)Zh(t,m,_,o[v],o[v+1]);return Zh(t,m,_,d,ae(A)?t.length:d+A),m}return Zh(t,m,_),m}function RP(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),a=n._maxLength/e;return Math.floor(Math.min(i,a))}function CP(n,t,e){const i=MP(n),a=t.length/e;if(!i)return Math.max(a,1);const o=yN(i);for(let c=0,h=o.length-1;c<h;c++){const d=o[c];if(d>a)return d}return Math.max(a,1)}function IP(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function DP(n,t,e,i){let a=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),a++,o=e[a*i])}function Zh(n,t,e,i,a){const o=Ht(i,0),c=Math.min(Ht(a,n.length),n.length);let h=0,d,m,_;for(e=Math.ceil(e),a&&(d=a-i,e=d/Math.floor(d/e)),_=o;_<0;)h++,_=Math.round(o+h*e);for(m=Math.max(o,0);m<c;m++)m===_&&(t.push(n[m]),h++,_=Math.round(o+h*e))}function MP(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const OP=n=>n==="left"?"right":n==="right"?"left":n,aE=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,oE=(n,t)=>Math.min(t||n,n);function lE(n,t){const e=[],i=n.length/t,a=n.length;let o=0;for(;o<a;o+=i)e.push(n[Math.floor(o)]);return e}function NP(n,t,e){const i=n.ticks.length,a=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,h=1e-6;let d=n.getPixelForTick(a),m;if(!(e&&(i===1?m=Math.max(d-o,c-d):t===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(a-1))/2,d+=a<t?m:-m,d<o-h||d>c+h)))return d}function kP(n,t){$t(n,e=>{const i=e.gc,a=i.length/2;let o;if(a>t){for(o=0;o<a;++o)delete e.data[i[o]];i.splice(0,a)}})}function _c(n){return n.drawTicks?n.tickLength:0}function cE(n,t){if(!n.display)return 0;const e=on(n.font,t),i=Wn(n.padding);return(He(n.text)?n.text.length:1)*e.lineHeight+i.height}function PP(n,t){return Da(n,{scale:t,type:"scale"})}function VP(n,t,e){return Da(n,{tick:e,index:t,type:"tick"})}function LP(n,t,e){let i=T_(n);return(e&&t!=="right"||!e&&t==="right")&&(i=OP(i)),i}function UP(n,t,e,i){const{top:a,left:o,bottom:c,right:h,chart:d}=n,{chartArea:m,scales:_}=d;let v=0,T,A,C;const k=c-a,M=h-o;if(n.isHorizontal()){if(A=sn(i,o,h),Gt(e)){const G=Object.keys(e)[0],$=e[G];C=_[G].getPixelForValue($)+k-t}else e==="center"?C=(m.bottom+m.top)/2+k-t:C=aE(n,e,t);T=h-o}else{if(Gt(e)){const G=Object.keys(e)[0],$=e[G];A=_[G].getPixelForValue($)-M+t}else e==="center"?A=(m.left+m.right)/2-M+t:A=aE(n,e,t);C=sn(i,c,a),v=e==="left"?-si:si}return{titleX:A,titleY:C,maxWidth:T,rotation:v}}class il extends Ma{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:a}=this;return t=Si(t,Number.POSITIVE_INFINITY),e=Si(e,Number.NEGATIVE_INFINITY),i=Si(i,Number.POSITIVE_INFINITY),a=Si(a,Number.NEGATIVE_INFINITY),{min:Si(t,i),max:Si(e,a),minDefined:Xn(t),maxDefined:Xn(e)}}getMinMax(t){let{min:e,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),c;if(a&&o)return{min:e,max:i};const h=this.getMatchingVisibleMetas();for(let d=0,m=h.length;d<m;++d)c=h[d].controller.getMinMax(this,t),a||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=a&&e>i?e:i,{min:Si(e,Si(i,e)),max:Si(i,Si(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:a,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tk(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?lE(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=xP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),oe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,a,o;for(i=0,a=t.length;i<a;i++)o=t[i],o.label=oe(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=oE(this.ticks.length,t.ticks.maxTicksLimit),a=e.minRotation||0,o=e.maxRotation;let c=a,h,d,m;if(!this._isVisible()||!e.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const _=this._getLabelSizes(),v=_.widest.width,T=_.highest.height,A=Yn(this.chart.width-v,0,this.maxWidth);h=t.offset?this.maxWidth/i:A/(i-1),v+6>h&&(h=A/(i-(t.offset?.5:1)),d=this.maxHeight-_c(t.grid)-e.padding-cE(t.title,this.chart.options.font),m=Math.sqrt(v*v+T*T),c=EN(Math.min(Math.asin(Yn((_.highest.height+6)/h,-1,1)),Math.asin(Yn(d/m,-1,1))-Math.asin(Yn(T/m,-1,1)))),c=Math.max(a,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:a,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const d=cE(a,e.options.font);if(h?(t.width=this.maxWidth,t.height=_c(o)+d):(t.height=this.maxHeight,t.width=_c(o)+d),i.display&&this.ticks.length){const{first:m,last:_,widest:v,highest:T}=this._getLabelSizes(),A=i.padding*2,C=ga(this.labelRotation),k=Math.cos(C),M=Math.sin(C);if(h){const G=i.mirror?0:M*v.width+k*T.height;t.height=Math.min(this.maxHeight,t.height+G+A)}else{const G=i.mirror?0:k*v.width+M*T.height;t.width=Math.min(this.maxWidth,t.width+G+A)}this._calculatePadding(m,_,M,k)}}this._handleMargins(),h?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,a){const{ticks:{align:o,padding:c},position:h}=this.options,d=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const _=this.getPixelForTick(0)-this.left,v=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,A=0;d?m?(T=a*t.width,A=i*e.height):(T=i*t.height,A=a*e.width):o==="start"?A=e.width:o==="end"?T=t.width:o!=="inner"&&(T=t.width/2,A=e.width/2),this.paddingLeft=Math.max((T-_+c)*this.width/(this.width-_),0),this.paddingRight=Math.max((A-v+c)*this.width/(this.width-v),0)}else{let _=e.height/2,v=t.height/2;o==="start"?(_=0,v=t.height):o==="end"&&(_=e.height,v=0),this.paddingTop=_+c,this.paddingBottom=v+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ae(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=lE(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:a,_longestTextCache:o}=this,c=[],h=[],d=Math.floor(e/oE(e,i));let m=0,_=0,v,T,A,C,k,M,G,$,tt,st,X;for(v=0;v<e;v+=d){if(C=t[v].label,k=this._resolveTickFontOptions(v),a.font=M=k.string,G=o[M]=o[M]||{data:{},gc:[]},$=k.lineHeight,tt=st=0,!ae(C)&&!He(C))tt=zT(a,G.data,G.gc,tt,C),st=$;else if(He(C))for(T=0,A=C.length;T<A;++T)X=C[T],!ae(X)&&!He(X)&&(tt=zT(a,G.data,G.gc,tt,X),st+=$);c.push(tt),h.push(st),m=Math.max(tt,m),_=Math.max(st,_)}kP(o,e);const ot=c.indexOf(m),O=h.indexOf(_),x=I=>({width:c[I]||0,height:h[I]||0});return{first:x(0),last:x(e-1),widest:x(ot),highest:x(O),widths:c,heights:h}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return wN(this._alignToPixels?la(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=VP(this.getContext(),t,i))}return this.$context||(this.$context=PP(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ga(this.labelRotation),i=Math.abs(Math.cos(e)),a=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,h=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*i>h*a?h/i:d/a:d*a<h*i?d/i:h/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,a=this.options,{grid:o,position:c,border:h}=a,d=o.offset,m=this.isHorizontal(),v=this.ticks.length+(d?1:0),T=_c(o),A=[],C=h.setContext(this.getContext()),k=C.display?C.width:0,M=k/2,G=function(K){return la(i,K,k)};let $,tt,st,X,ot,O,x,I,V,D,L,N;if(c==="top")$=G(this.bottom),O=this.bottom-T,I=$-M,D=G(t.top)+M,N=t.bottom;else if(c==="bottom")$=G(this.top),D=t.top,N=G(t.bottom)-M,O=$+M,I=this.top+T;else if(c==="left")$=G(this.right),ot=this.right-T,x=$-M,V=G(t.left)+M,L=t.right;else if(c==="right")$=G(this.left),V=t.left,L=G(t.right)-M,ot=$+M,x=this.left+T;else if(e==="x"){if(c==="center")$=G((t.top+t.bottom)/2+.5);else if(Gt(c)){const K=Object.keys(c)[0],at=c[K];$=G(this.chart.scales[K].getPixelForValue(at))}D=t.top,N=t.bottom,O=$+M,I=O+T}else if(e==="y"){if(c==="center")$=G((t.left+t.right)/2);else if(Gt(c)){const K=Object.keys(c)[0],at=c[K];$=G(this.chart.scales[K].getPixelForValue(at))}ot=$-M,x=ot-T,V=t.left,L=t.right}const Lt=Ht(a.ticks.maxTicksLimit,v),bt=Math.max(1,Math.ceil(v/Lt));for(tt=0;tt<v;tt+=bt){const K=this.getContext(tt),at=o.setContext(K),gt=h.setContext(K),Nt=at.lineWidth,U=at.color,it=gt.dash||[],ct=gt.dashOffset,rt=at.tickWidth,dt=at.tickColor,xt=at.tickBorderDash||[],_t=at.tickBorderDashOffset;st=NP(this,tt,d),st!==void 0&&(X=la(i,st,Nt),m?ot=x=V=L=X:O=I=D=N=X,A.push({tx1:ot,ty1:O,tx2:x,ty2:I,x1:V,y1:D,x2:L,y2:N,width:Nt,color:U,borderDash:it,borderDashOffset:ct,tickWidth:rt,tickColor:dt,tickBorderDash:xt,tickBorderDashOffset:_t}))}return this._ticksLength=v,this._borderValue=$,A}_computeLabelItems(t){const e=this.axis,i=this.options,{position:a,ticks:o}=i,c=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:m,padding:_,mirror:v}=o,T=_c(i.grid),A=T+_,C=v?-_:A,k=-ga(this.labelRotation),M=[];let G,$,tt,st,X,ot,O,x,I,V,D,L,N="middle";if(a==="top")ot=this.bottom-C,O=this._getXAxisLabelAlignment();else if(a==="bottom")ot=this.top+C,O=this._getXAxisLabelAlignment();else if(a==="left"){const bt=this._getYAxisLabelAlignment(T);O=bt.textAlign,X=bt.x}else if(a==="right"){const bt=this._getYAxisLabelAlignment(T);O=bt.textAlign,X=bt.x}else if(e==="x"){if(a==="center")ot=(t.top+t.bottom)/2+A;else if(Gt(a)){const bt=Object.keys(a)[0],K=a[bt];ot=this.chart.scales[bt].getPixelForValue(K)+A}O=this._getXAxisLabelAlignment()}else if(e==="y"){if(a==="center")X=(t.left+t.right)/2-A;else if(Gt(a)){const bt=Object.keys(a)[0],K=a[bt];X=this.chart.scales[bt].getPixelForValue(K)}O=this._getYAxisLabelAlignment(T).textAlign}e==="y"&&(d==="start"?N="top":d==="end"&&(N="bottom"));const Lt=this._getLabelSizes();for(G=0,$=h.length;G<$;++G){tt=h[G],st=tt.label;const bt=o.setContext(this.getContext(G));x=this.getPixelForTick(G)+o.labelOffset,I=this._resolveTickFontOptions(G),V=I.lineHeight,D=He(st)?st.length:1;const K=D/2,at=bt.color,gt=bt.textStrokeColor,Nt=bt.textStrokeWidth;let U=O;c?(X=x,O==="inner"&&(G===$-1?U=this.options.reverse?"left":"right":G===0?U=this.options.reverse?"right":"left":U="center"),a==="top"?m==="near"||k!==0?L=-D*V+V/2:m==="center"?L=-Lt.highest.height/2-K*V+V:L=-Lt.highest.height+V/2:m==="near"||k!==0?L=V/2:m==="center"?L=Lt.highest.height/2-K*V:L=Lt.highest.height-D*V,v&&(L*=-1),k!==0&&!bt.showLabelBackdrop&&(X+=V/2*Math.sin(k))):(ot=x,L=(1-D)*V/2);let it;if(bt.showLabelBackdrop){const ct=Wn(bt.backdropPadding),rt=Lt.heights[G],dt=Lt.widths[G];let xt=L-ct.top,_t=0-ct.left;switch(N){case"middle":xt-=rt/2;break;case"bottom":xt-=rt;break}switch(O){case"center":_t-=dt/2;break;case"right":_t-=dt;break;case"inner":G===$-1?_t-=dt:G>0&&(_t-=dt/2);break}it={left:_t,top:xt,width:dt+ct.width,height:rt+ct.height,color:bt.backdropColor}}M.push({label:st,font:I,textOffset:L,options:{rotation:k,color:at,strokeColor:gt,strokeWidth:Nt,textAlign:U,textBaseline:N,translation:[X,ot],backdrop:it}})}return M}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ga(this.labelRotation))return t==="top"?"left":"right";let a="center";return e.align==="start"?a="left":e.align==="end"?a="right":e.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,c=this._getLabelSizes(),h=t+o,d=c.widest.width;let m,_;return e==="left"?a?(_=this.right+o,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_+=d)):(_=this.right-h,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_=this.left)):e==="right"?a?(_=this.left+o,i==="near"?m="right":i==="center"?(m="center",_-=d/2):(m="left",_-=d)):(_=this.left+h,i==="near"?m="left":i==="center"?(m="center",_+=d/2):(m="right",_=this.right)):m="right",{textAlign:m,x:_}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:a,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,a,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const a=this.ticks.findIndex(o=>o.value===t);return a>=0?e.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const h=(d,m,_)=>{!_.width||!_.color||(i.save(),i.lineWidth=_.width,i.strokeStyle=_.color,i.setLineDash(_.borderDash||[]),i.lineDashOffset=_.borderDashOffset,i.beginPath(),i.moveTo(d.x,d.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=a.length;o<c;++o){const d=a[o];e.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),e.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const h=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,_,v,T;this.isHorizontal()?(m=la(t,this.left,c)-c/2,_=la(t,this.right,h)+h/2,v=T=d):(v=la(t,this.top,c)-c/2,T=la(t,this.bottom,h)+h/2,m=_=d),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(m,v),e.lineTo(_,T),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&S_(i,a);const o=this.getLabelItems(t);for(const c of o){const h=c.options,d=c.font,m=c.label,_=c.textOffset;Zc(i,m,0,_,d,h)}a&&A_(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:a}}=this;if(!i.display)return;const o=on(i.font),c=Wn(i.padding),h=i.align;let d=o.lineHeight/2;e==="bottom"||e==="center"||Gt(e)?(d+=c.bottom,He(i.text)&&(d+=o.lineHeight*(i.text.length-1))):d+=c.top;const{titleX:m,titleY:_,maxWidth:v,rotation:T}=UP(this,d,e,h);Zc(t,i.text,0,0,o,{color:i.color,maxWidth:v,rotation:T,textAlign:LP(h,e,a),textBaseline:"middle",translation:[m,_]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Ht(t.grid&&t.grid.z,-1),a=Ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==il.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,c;for(o=0,c=e.length;o<c;++o){const h=e[o];h[i]===this.id&&(!t||h.type===t)&&a.push(h)}return a}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return on(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Jh{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;BP(e)&&(i=this.register(e));const a=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in a||(a[o]=t,zP(t,c,i),this.override&&be.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,a=this.scope;i in e&&delete e[i],a&&i in be[a]&&(delete be[a][i],this.override&&delete Ra[i])}}function zP(n,t,e){const i=Xc(Object.create(null),[e?be.get(e):{},be.get(t),n.defaults]);be.set(t,i),n.defaultRoutes&&jP(t,n.defaultRoutes),n.descriptors&&be.describe(t,n.descriptors)}function jP(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),a=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),h=c.pop(),d=c.join(".");be.route(o,a,d,h)})}function BP(n){return"id"in n&&"defaults"in n}class HP{constructor(){this.controllers=new Jh(P1,"datasets",!0),this.elements=new Jh(Ma,"elements"),this.plugins=new Jh(Object,"plugins"),this.scales=new Jh(il,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(t,o,a):$t(a,c=>{const h=i||this._getRegistryForType(c);this._exec(t,h,c)})})}_exec(t,e,i){const a=v_(t);oe(i["before"+a],[],i),e[t](i),oe(i["after"+a],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const a=e.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return a}}var wi=new HP;class FP{constructor(){this._init=[]}notify(t,e,i,a){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=a?this._descriptors(t).filter(a):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,a){a=a||{};for(const o of t){const c=o.plugin,h=c[i],d=[e,a,o.options];if(oe(h,d,c)===!1&&a.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,a=Ht(i.options&&i.options.plugins,{}),o=qP(i);return a===!1&&!e?[]:YP(t,o,a,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,a=(o,c)=>o.filter(h=>!c.some(d=>h.plugin.id===d.plugin.id));this._notify(a(e,i),t,"stop"),this._notify(a(i,e),t,"start")}}function qP(n){const t={},e=[],i=Object.keys(wi.plugins.items);for(let o=0;o<i.length;o++)e.push(wi.getPlugin(i[o]));const a=n.plugins||[];for(let o=0;o<a.length;o++){const c=a[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function GP(n,t){return!t&&n===!1?null:n===!0?{}:n}function YP(n,{plugins:t,localIds:e},i,a){const o=[],c=n.getContext();for(const h of t){const d=h.id,m=GP(i[d],a);m!==null&&o.push({plugin:h,options:KP(n.config,{plugin:h,local:e[d]},m,c)})}return o}function KP(n,{plugin:t,local:e},i,a){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _p(n,t){const e=be.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function QP(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function XP(n,t){return n===t?"_index_":"_value_"}function uE(n){if(n==="x"||n==="y"||n==="r")return n}function WP(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function yp(n,...t){if(uE(n))return n;for(const e of t){const i=e.axis||WP(e.position)||n.length>1&&uE(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function hE(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function $P(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return hE(n,"x",e[0])||hE(n,"y",e[0])}return{}}function ZP(n,t){const e=Ra[n.type]||{scales:{}},i=t.scales||{},a=_p(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const h=i[c];if(!Gt(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=yp(c,h,$P(c,n),be.scales[h.type]),m=XP(d,a),_=e.scales||{};o[c]=Nc(Object.create(null),[{axis:d},h,_[d],_[m]])}),n.data.datasets.forEach(c=>{const h=c.type||n.type,d=c.indexAxis||_p(h,t),_=(Ra[h]||{}).scales||{};Object.keys(_).forEach(v=>{const T=QP(v,d),A=c[T+"AxisID"]||T;o[A]=o[A]||Object.create(null),Nc(o[A],[{axis:T},i[A],_[v]])})}),Object.keys(o).forEach(c=>{const h=o[c];Nc(h,[be.scales[h.type],be.scale])}),o}function B1(n){const t=n.options||(n.options={});t.plugins=Ht(t.plugins,{}),t.scales=ZP(n,t)}function H1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function JP(n){return n=n||{},n.data=H1(n.data),B1(n),n}const fE=new Map,F1=new Set;function tf(n,t){let e=fE.get(n);return e||(e=t(),fE.set(n,e),F1.add(e)),e}const yc=(n,t,e)=>{const i=Lf(t,e);i!==void 0&&n.add(i)};class tV{constructor(t){this._config=JP(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=H1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),B1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return tf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return tf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return tf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return tf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let a=i.get(t);return(!a||e)&&(a=new Map,i.set(t,a)),a}getOptionScopes(t,e,i){const{options:a,type:o}=this,c=this._cachedScopes(t,i),h=c.get(e);if(h)return h;const d=new Set;e.forEach(_=>{t&&(d.add(t),_.forEach(v=>yc(d,t,v))),_.forEach(v=>yc(d,a,v)),_.forEach(v=>yc(d,Ra[o]||{},v)),_.forEach(v=>yc(d,be,v)),_.forEach(v=>yc(d,gp,v))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),F1.has(e)&&c.set(e,m),m}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ra[e]||{},be.datasets[e]||{},{type:e},be,gp]}resolveNamedOptions(t,e,i,a=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=dE(this._resolverCache,t,a);let d=c;if(nV(c,e)){o.$shared=!1,i=br(i)?i():i;const m=this.createResolver(t,i,h);d=Ko(c,i,m)}for(const m of e)o[m]=d[m];return o}createResolver(t,e,i=[""],a){const{resolver:o}=dE(this._resolverCache,t,i);return Gt(e)?Ko(o,e,void 0,a):o}}function dE(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const a=e.join();let o=i.get(a);return o||(o={resolver:w_(t,e),subPrefixes:e.filter(h=>!h.toLowerCase().includes("hover"))},i.set(a,o)),o}const eV=n=>Gt(n)&&Object.getOwnPropertyNames(n).some(t=>br(n[t]));function nV(n,t){const{isScriptable:e,isIndexable:i}=w1(n);for(const a of t){const o=e(a),c=i(a),h=(c||o)&&n[a];if(o&&(br(h)||eV(h))||c&&He(h))return!0}return!1}var iV="4.5.0";const sV=["top","bottom","left","right","chartArea"];function gE(n,t){return n==="top"||n==="bottom"||sV.indexOf(n)===-1&&t==="x"}function mE(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function pE(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),oe(e&&e.onComplete,[n],t)}function rV(n){const t=n.chart,e=t.options.animation;oe(e&&e.onProgress,[n],t)}function q1(n){return C_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const mf={},_E=n=>{const t=q1(n);return Object.values(mf).filter(e=>e.canvas===t).pop()};function aV(n,t,e){const i=Object.keys(n);for(const a of i){const o=+a;if(o>=t){const c=n[a];delete n[a],(e>0||o>t)&&(n[o+e]=c)}}}function oV(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let fu=class{static defaults=be;static instances=mf;static overrides=Ra;static registry=wi;static version=iV;static getChart=_E;static register(...t){wi.add(...t),yE()}static unregister(...t){wi.remove(...t),yE()}constructor(t,e){const i=this.config=new tV(e),a=q1(t),o=_E(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||wP(a)),this.platform.updateConfig(i);const h=this.platform.acquireContext(a,c.aspectRatio),d=h&&h.canvas,m=d&&d.height,_=d&&d.width;if(this.id=cN(),this.ctx=h,this.canvas=d,this.width=_,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=DN(v=>this.update(v),c.resizeDelay||0),this._dataChanges=[],mf[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}hs.listen(this,"complete",pE),hs.listen(this,"progress",rV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:a,_aspectRatio:o}=this;return ae(t)?e&&o?o:a?i/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():FT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return jT(this.canvas,this.ctx),this}stop(){return hs.stop(this),this}resize(t,e){hs.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(a,t,e,o),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,FT(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),oe(i.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};$t(e,(i,a)=>{i.id=a})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,a=Object.keys(i).reduce((c,h)=>(c[h]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const h=e[c],d=yp(c,h),m=d==="r",_=d==="x";return{options:h,dposition:m?"chartArea":_?"bottom":"left",dtype:m?"radialLinear":_?"category":"linear"}}))),$t(o,c=>{const h=c.options,d=h.id,m=yp(d,h),_=Ht(h.type,c.dtype);(h.position===void 0||gE(h.position,m)!==gE(c.dposition))&&(h.position=c.dposition),a[d]=!0;let v=null;if(d in i&&i[d].type===_)v=i[d];else{const T=wi.getScale(_);v=new T({id:d,type:_,ctx:this.ctx,chart:this}),i[v.id]=v}v.init(h,t)}),$t(a,(c,h)=>{c||delete i[h]}),$t(i,c=>{Kn.configure(this,c,c.options),Kn.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((a,o)=>a.index-o.index),i>e){for(let a=e;a<i;++a)this._destroyDatasetMeta(a);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(mE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,a)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=e.length;i<a;i++){const o=e[i];let c=this.getDatasetMeta(i);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=h,c.indexAxis=o.indexAxis||_p(h,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const d=wi.getController(h),{datasetElementType:m,dataElementType:_}=be.datasets[h];Object.assign(d,{dataElementType:wi.getElement(_),datasetElementType:m&&wi.getElement(m)}),c.controller=new d(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){$t(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,_=this.data.datasets.length;m<_;m++){const{controller:v}=this.getDatasetMeta(m),T=!a&&o.indexOf(v)===-1;v.buildOrUpdateElements(T),c=Math.max(+v.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),a||$t(o,m=>{m.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(mE("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){$t(this.scales,t=>{Kn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!DT(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of e){const c=i==="_removeElements"?-o:o;aV(t,a,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),a=i(0);for(let o=1;o<e;o++)if(!DT(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Kn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],$t(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,br(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),a={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(e),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hs.has(this)?this.attached&&!hs.running(this)&&hs.start(this):(this.draw(),pE({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let a,o;for(a=0,o=e.length;a<o;++a){const c=e[a];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},a=Lk(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&S_(e,a),t.controller.draw(),a&&A_(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return $c(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,a){const o=sP.modes[e];return typeof o=="function"?o(this,t,i,a):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let a=i.filter(o=>o&&o._dataset===e).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=Da(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const a=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,a);Uf(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(h=>h.datasetIndex===t?a:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),hs.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),jT(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete mf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},a=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};$t(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(d,m)=>{e.addEventListener(this,d,m),t[d]=m},a=(d,m)=>{t[d]&&(e.removeEventListener(this,d,m),delete t[d])},o=(d,m)=>{this.canvas&&this.resize(d,m)};let c;const h=()=>{a("attach",h),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",h)},e.isAttached(this.canvas)?h():c()}unbindEvents(){$t(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},$t(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const a=i?"set":"remove";let o,c,h,d;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),h=0,d=t.length;h<d;++h){c=t[h];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[a+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!Pf(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const a=this.options.hover,o=(d,m)=>d.filter(_=>!m.some(v=>_.datasetIndex===v.datasetIndex&&_.index===v.index)),c=o(e,t),h=i?t:o(t,e);c.length&&this.updateHoverStyle(c,a.mode,!1),h.length&&a.mode&&this.updateHoverStyle(h,a.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},a=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:a=[],options:o}=this,c=e,h=this._getActiveElements(t,a,i,c),d=mN(t),m=oV(t,this._lastEvent,i,d);i&&(this._lastEvent=null,oe(o.onHover,[t,h,this],this),d&&oe(o.onClick,[t,h,this],this));const _=!Pf(h,a);return(_||e)&&(this._active=h,this._updateHoverStyles(h,a,e)),this._lastEvent=m,_}_getActiveElements(t,e,i,a){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,a)}};function yE(){return $t(fu.instances,n=>n._plugins.invalidate())}function G1(n,t,e=t){n.lineCap=Ht(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ht(e.borderDash,t.borderDash)),n.lineDashOffset=Ht(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ht(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ht(e.borderWidth,t.borderWidth),n.strokeStyle=Ht(e.borderColor,t.borderColor)}function lV(n,t,e){n.lineTo(e.x,e.y)}function cV(n){return n.stepped?qN:n.tension||n.cubicInterpolationMode==="monotone"?GN:lV}function Y1(n,t,e={}){const i=n.length,{start:a=0,end:o=i-1}=e,{start:c,end:h}=t,d=Math.max(a,c),m=Math.min(o,h),_=a<c&&o<c||a>h&&o>h;return{count:i,start:d,loop:t.loop,ilen:m<d&&!_?i+m-d:m-d}}function uV(n,t,e,i){const{points:a,options:o}=t,{count:c,start:h,loop:d,ilen:m}=Y1(a,e,i),_=cV(o);let{move:v=!0,reverse:T}=i||{},A,C,k;for(A=0;A<=m;++A)C=a[(h+(T?m-A:A))%c],!C.skip&&(v?(n.moveTo(C.x,C.y),v=!1):_(n,k,C,T,o.stepped),k=C);return d&&(C=a[(h+(T?m:0))%c],_(n,k,C,T,o.stepped)),!!d}function hV(n,t,e,i){const a=t.points,{count:o,start:c,ilen:h}=Y1(a,e,i),{move:d=!0,reverse:m}=i||{};let _=0,v=0,T,A,C,k,M,G;const $=st=>(c+(m?h-st:st))%o,tt=()=>{k!==M&&(n.lineTo(_,M),n.lineTo(_,k),n.lineTo(_,G))};for(d&&(A=a[$(0)],n.moveTo(A.x,A.y)),T=0;T<=h;++T){if(A=a[$(T)],A.skip)continue;const st=A.x,X=A.y,ot=st|0;ot===C?(X<k?k=X:X>M&&(M=X),_=(v*_+st)/++v):(tt(),n.lineTo(st,X),C=ot,v=0,k=M=X),G=X}tt()}function vp(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?hV:uV}function fV(n){return n.stepped?Ak:n.tension||n.cubicInterpolationMode==="monotone"?wk:fa}function dV(n,t,e,i){let a=t._path;a||(a=t._path=new Path2D,t.path(a,e,i)&&a.closePath()),G1(n,t.options),n.stroke(a)}function gV(n,t,e,i){const{segments:a,options:o}=t,c=vp(t);for(const h of a)G1(n,o,h.style),n.beginPath(),c(n,t,h,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const mV=typeof Path2D=="function";function pV(n,t,e,i){mV&&!t.options.segment?dV(n,t,e,i):gV(n,t,e,i)}class K1 extends Ma{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;pk(this._points,i,t,a,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Nk(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,a=t[e],o=this.points,c=Dk(this,{property:e,start:a,end:a});if(!c.length)return;const h=[],d=fV(i);let m,_;for(m=0,_=c.length;m<_;++m){const{start:v,end:T}=c[m],A=o[v],C=o[T];if(A===C){h.push(A);continue}const k=Math.abs((a-A[e])/(C[e]-A[e])),M=d(A,C,k,i.stepped);M[e]=t[e],h.push(M)}return h.length===1?h[0]:h}pathSegment(t,e,i){return vp(this)(t,this,e,i)}path(t,e,i){const a=this.segments,o=vp(this);let c=this._loop;e=e||0,i=i||this.points.length-e;for(const h of a)c&=o(t,this,h,{start:e,end:e+i-1});return!!c}draw(t,e,i,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),pV(t,this,i,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function vE(n,t,e,i){const a=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<a.radius+a.hitRadius}class Q1 extends Ma{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const a=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-c,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,e){return vE(this,t,"x",e)}inYRange(t,e){return vE(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!$c(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,mp(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const bE=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},_V=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class TE extends Ma{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=oe(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,a)=>t.sort(i,a,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,a=on(i.font),o=a.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=bE(i,o);let m,_;e.font=a.string,this.isHorizontal()?(m=this.maxWidth,_=this._fitRows(c,o,h,d)+10):(_=this.maxHeight,m=this._fitCols(c,a,h,d)+10),this.width=Math.min(m,t.maxWidth||this.maxWidth),this.height=Math.min(_,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,a){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],_=a+h;let v=t;o.textAlign="left",o.textBaseline="middle";let T=-1,A=-_;return this.legendItems.forEach((C,k)=>{const M=i+e/2+o.measureText(C.text).width;(k===0||m[m.length-1]+M+2*h>c)&&(v+=_,m[m.length-(k>0?0:1)]=0,A+=_,T++),d[k]={left:0,top:A,row:T,width:M,height:a},m[m.length-1]+=M+h}),v}_fitCols(t,e,i,a){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],_=c-t;let v=h,T=0,A=0,C=0,k=0;return this.legendItems.forEach((M,G)=>{const{itemWidth:$,itemHeight:tt}=yV(i,e,o,M,a);G>0&&A+tt+2*h>_&&(v+=T+h,m.push({width:T,height:A}),C+=T+h,k++,T=A=0),d[G]={left:C,top:A,col:k,width:$,height:tt},T=Math.max(T,$),A+=tt+h}),v+=T,m.push({width:T,height:A}),v}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:a},rtl:o}}=this,c=Po(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=sn(i,this.left+a,this.right-this.lineWidths[h]);for(const m of e)h!==m.row&&(h=m.row,d=sn(i,this.left+a,this.right-this.lineWidths[h])),m.top+=this.top+t+a,m.left=c.leftForLtr(c.x(d),m.width),d+=m.width+a}else{let h=0,d=sn(i,this.top+t+a,this.bottom-this.columnSizes[h].height);for(const m of e)m.col!==h&&(h=m.col,d=sn(i,this.top+t+a,this.bottom-this.columnSizes[h].height)),m.top=d,m.left+=this.left+a,m.left=c.leftForLtr(c.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;S_(t,this),this._draw(),A_(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:a}=this,{align:o,labels:c}=t,h=be.color,d=Po(t.rtl,this.left,this.width),m=on(c.font),{padding:_}=c,v=m.size,T=v/2;let A;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:C,boxHeight:k,itemHeight:M}=bE(c,v),G=function(ot,O,x){if(isNaN(C)||C<=0||isNaN(k)||k<0)return;a.save();const I=Ht(x.lineWidth,1);if(a.fillStyle=Ht(x.fillStyle,h),a.lineCap=Ht(x.lineCap,"butt"),a.lineDashOffset=Ht(x.lineDashOffset,0),a.lineJoin=Ht(x.lineJoin,"miter"),a.lineWidth=I,a.strokeStyle=Ht(x.strokeStyle,h),a.setLineDash(Ht(x.lineDash,[])),c.usePointStyle){const V={radius:k*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},D=d.xPlus(ot,C/2),L=O+T;S1(a,V,D,L,c.pointStyleWidth&&C)}else{const V=O+Math.max((v-k)/2,0),D=d.leftForLtr(ot,C),L=Lc(x.borderRadius);a.beginPath(),Object.values(L).some(N=>N!==0)?pp(a,{x:D,y:V,w:C,h:k,radius:L}):a.rect(D,V,C,k),a.fill(),I!==0&&a.stroke()}a.restore()},$=function(ot,O,x){Zc(a,x.text,ot,O+M/2,m,{strikethrough:x.hidden,textAlign:d.textAlign(x.textAlign)})},tt=this.isHorizontal(),st=this._computeTitleHeight();tt?A={x:sn(o,this.left+_,this.right-i[0]),y:this.top+_+st,line:0}:A={x:this.left+_,y:sn(o,this.top+st+_,this.bottom-e[0].height),line:0},D1(this.ctx,t.textDirection);const X=M+_;this.legendItems.forEach((ot,O)=>{a.strokeStyle=ot.fontColor,a.fillStyle=ot.fontColor;const x=a.measureText(ot.text).width,I=d.textAlign(ot.textAlign||(ot.textAlign=c.textAlign)),V=C+T+x;let D=A.x,L=A.y;d.setWidth(this.width),tt?O>0&&D+V+_>this.right&&(L=A.y+=X,A.line++,D=A.x=sn(o,this.left+_,this.right-i[A.line])):O>0&&L+X>this.bottom&&(D=A.x=D+e[A.line].width+_,A.line++,L=A.y=sn(o,this.top+st+_,this.bottom-e[A.line].height));const N=d.x(D);if(G(N,L,ot),D=MN(I,D+C+T,tt?D+V:this.right,t.rtl),$(d.x(D),L,ot),tt)A.x+=V+_;else if(typeof ot.text!="string"){const Lt=m.lineHeight;A.y+=X1(ot,Lt)+_}else A.y+=X}),M1(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=on(e.font),a=Wn(e.padding);if(!e.display)return;const o=Po(t.rtl,this.left,this.width),c=this.ctx,h=e.position,d=i.size/2,m=a.top+d;let _,v=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),_=this.top+m,v=sn(t.align,v,this.right-T);else{const C=this.columnSizes.reduce((k,M)=>Math.max(k,M.height),0);_=m+sn(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const A=sn(h,v,v+T);c.textAlign=o.textAlign(T_(h)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Zc(c,e.text,A,_,i)}_computeTitleHeight(){const t=this.options.title,e=on(t.font),i=Wn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,a,o;if(Ac(t,this.left,this.right)&&Ac(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],Ac(t,a.left,a.left+a.width)&&Ac(e,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!TV(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,o=_V(a,i);a&&!o&&oe(e.onLeave,[t,a,this],this),this._hoveredItem=i,i&&!o&&oe(e.onHover,[t,i,this],this)}else i&&oe(e.onClick,[t,i,this],this)}}function yV(n,t,e,i,a){const o=vV(i,n,t,e),c=bV(a,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function vV(n,t,e,i){let a=n.text;return a&&typeof a!="string"&&(a=a.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(a).width}function bV(n,t,e){let i=n;return typeof t.text!="string"&&(i=X1(t,e)),i}function X1(n,t){const e=n.text?n.text.length:0;return t*e}function TV(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var W1={id:"legend",_element:TE,start(n,t,e){const i=n.legend=new TE({ctx:n.ctx,options:e,chart:n});Kn.configure(n,i,e),Kn.addBox(n,i)},stop(n){Kn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Kn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,a=e.chart;a.isDatasetVisible(i)?(a.hide(i),t.hidden=!0):(a.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:a,color:o,useBorderRadius:c,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(e?0:void 0),_=Wn(m.borderWidth);return{text:t[d.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(_.width+_.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:c&&(h||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class $1 extends Ma{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const a=He(i.text)?i.text.length:1;this._padding=Wn(i.padding);const o=a*on(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:a,right:o,options:c}=this,h=c.align;let d=0,m,_,v;return this.isHorizontal()?(_=sn(h,i,o),v=e+t,m=o-i):(c.position==="left"?(_=i+t,v=sn(h,a,e),d=Fe*-.5):(_=o-t,v=sn(h,e,a),d=Fe*.5),m=a-e),{titleX:_,titleY:v,maxWidth:m,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=on(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:d,rotation:m}=this._drawArgs(o);Zc(t,e.text,0,0,i,{color:e.color,maxWidth:d,rotation:m,textAlign:T_(e.align),textBaseline:"middle",translation:[c,h]})}}function EV(n,t){const e=new $1({ctx:n.ctx,options:t,chart:n});Kn.configure(n,e,t),Kn.addBox(n,e),n.titleBlock=e}var Z1={id:"title",_element:$1,start(n,t,e){EV(n,e)},stop(n){const t=n.titleBlock;Kn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Kn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xc={average(n){if(!n.length)return!1;let t,e,i=new Set,a=0,o=0;for(t=0,e=n.length;t<e;++t){const h=n[t].element;if(h&&h.hasValue()){const d=h.tooltipPosition();i.add(d.x),a+=d.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((h,d)=>h+d)/i.size,y:a/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,a=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=n.length;o<c;++o){const d=n[o].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),_=dp(t,m);_<a&&(a=_,h=d)}}if(h){const d=h.tooltipPosition();e=d.x,i=d.y}return{x:e,y:i}}};function Ai(n,t){return t&&(He(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function fs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function SV(n,t){const{element:e,datasetIndex:i,index:a}=t,o=n.getDatasetMeta(i).controller,{label:c,value:h}=o.getLabelAndValue(a);return{chart:n,label:c,parsed:o.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:h,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:e}}function EE(n,t){const e=n.chart.ctx,{body:i,footer:a,title:o}=n,{boxWidth:c,boxHeight:h}=t,d=on(t.bodyFont),m=on(t.titleFont),_=on(t.footerFont),v=o.length,T=a.length,A=i.length,C=Wn(t.padding);let k=C.height,M=0,G=i.reduce((st,X)=>st+X.before.length+X.lines.length+X.after.length,0);if(G+=n.beforeBody.length+n.afterBody.length,v&&(k+=v*m.lineHeight+(v-1)*t.titleSpacing+t.titleMarginBottom),G){const st=t.displayColors?Math.max(h,d.lineHeight):d.lineHeight;k+=A*st+(G-A)*d.lineHeight+(G-1)*t.bodySpacing}T&&(k+=t.footerMarginTop+T*_.lineHeight+(T-1)*t.footerSpacing);let $=0;const tt=function(st){M=Math.max(M,e.measureText(st).width+$)};return e.save(),e.font=m.string,$t(n.title,tt),e.font=d.string,$t(n.beforeBody.concat(n.afterBody),tt),$=t.displayColors?c+2+t.boxPadding:0,$t(i,st=>{$t(st.before,tt),$t(st.lines,tt),$t(st.after,tt)}),$=0,e.font=_.string,$t(n.footer,tt),e.restore(),M+=C.width,{width:M,height:k}}function AV(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function wV(n,t,e,i){const{x:a,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&a+o+c>t.width||n==="right"&&a-o-c<0)return!0}function xV(n,t,e,i){const{x:a,width:o}=e,{width:c,chartArea:{left:h,right:d}}=n;let m="center";return i==="center"?m=a<=(h+d)/2?"left":"right":a<=o/2?m="left":a>=c-o/2&&(m="right"),wV(m,n,t,e)&&(m="center"),m}function SE(n,t,e){const i=e.yAlign||t.yAlign||AV(n,e);return{xAlign:e.xAlign||t.xAlign||xV(n,t,e,i),yAlign:i}}function RV(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function CV(n,t,e){let{y:i,height:a}=n;return t==="top"?i+=e:t==="bottom"?i-=a+e:i-=a/2,i}function AE(n,t,e,i){const{caretSize:a,caretPadding:o,cornerRadius:c}=n,{xAlign:h,yAlign:d}=e,m=a+o,{topLeft:_,topRight:v,bottomLeft:T,bottomRight:A}=Lc(c);let C=RV(t,h);const k=CV(t,d,m);return d==="center"?h==="left"?C+=m:h==="right"&&(C-=m):h==="left"?C-=Math.max(_,T)+a:h==="right"&&(C+=Math.max(v,A)+a),{x:Yn(C,0,i.width-t.width),y:Yn(k,0,i.height-t.height)}}function ef(n,t,e){const i=Wn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function wE(n){return Ai([],fs(n))}function IV(n,t,e){return Da(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function xE(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const J1={beforeTitle:us,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:us,beforeBody:us,beforeLabel:us,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ae(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:us,afterBody:us,beforeFooter:us,footer:us,afterFooter:us};function _n(n,t,e,i){const a=n[t].call(e,i);return typeof a>"u"?J1[t].call(e,i):a}class RE extends Ma{static positioners=xc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&e.options.animation&&i.animations,o=new N1(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=IV(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,a=_n(i,"beforeTitle",this,t),o=_n(i,"title",this,t),c=_n(i,"afterTitle",this,t);let h=[];return h=Ai(h,fs(a)),h=Ai(h,fs(o)),h=Ai(h,fs(c)),h}getBeforeBody(t,e){return wE(_n(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,a=[];return $t(t,o=>{const c={before:[],lines:[],after:[]},h=xE(i,o);Ai(c.before,fs(_n(h,"beforeLabel",this,o))),Ai(c.lines,_n(h,"label",this,o)),Ai(c.after,fs(_n(h,"afterLabel",this,o))),a.push(c)}),a}getAfterBody(t,e){return wE(_n(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,a=_n(i,"beforeFooter",this,t),o=_n(i,"footer",this,t),c=_n(i,"afterFooter",this,t);let h=[];return h=Ai(h,fs(a)),h=Ai(h,fs(o)),h=Ai(h,fs(c)),h}_createItems(t){const e=this._active,i=this.chart.data,a=[],o=[],c=[];let h=[],d,m;for(d=0,m=e.length;d<m;++d)h.push(SV(this.chart,e[d]));return t.filter&&(h=h.filter((_,v,T)=>t.filter(_,v,T,i))),t.itemSort&&(h=h.sort((_,v)=>t.itemSort(_,v,i))),$t(h,_=>{const v=xE(t.callbacks,_);a.push(_n(v,"labelColor",this,_)),o.push(_n(v,"labelPointStyle",this,_)),c.push(_n(v,"labelTextColor",this,_))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),a=this._active;let o,c=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const h=xc[i.position].call(this,a,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const d=this._size=EE(this,i),m=Object.assign({},h,d),_=SE(this.chart,i,m),v=AE(i,m,_,this.chart);this.xAlign=_.xAlign,this.yAlign=_.yAlign,o={opacity:1,x:v.x,y:v.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,a){const o=this.getCaretPosition(t,i,a);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:a,yAlign:o}=this,{caretSize:c,cornerRadius:h}=i,{topLeft:d,topRight:m,bottomLeft:_,bottomRight:v}=Lc(h),{x:T,y:A}=t,{width:C,height:k}=e;let M,G,$,tt,st,X;return o==="center"?(st=A+k/2,a==="left"?(M=T,G=M-c,tt=st+c,X=st-c):(M=T+C,G=M+c,tt=st-c,X=st+c),$=M):(a==="left"?G=T+Math.max(d,_)+c:a==="right"?G=T+C-Math.max(m,v)-c:G=this.caretX,o==="top"?(tt=A,st=tt-c,M=G-c,$=G+c):(tt=A+k,st=tt+c,M=G+c,$=G-c),X=tt),{x1:M,x2:G,x3:$,y1:tt,y2:st,y3:X}}drawTitle(t,e,i){const a=this.title,o=a.length;let c,h,d;if(o){const m=Po(i.rtl,this.x,this.width);for(t.x=ef(this,i.titleAlign,i),e.textAlign=m.textAlign(i.titleAlign),e.textBaseline="middle",c=on(i.titleFont),h=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,d=0;d<o;++d)e.fillText(a[d],m.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+h,d+1===o&&(t.y+=i.titleMarginBottom-h)}}_drawColorBox(t,e,i,a,o){const c=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:d,boxWidth:m}=o,_=on(o.bodyFont),v=ef(this,"left",o),T=a.x(v),A=d<_.lineHeight?(_.lineHeight-d)/2:0,C=e.y+A;if(o.usePointStyle){const k={radius:Math.min(m,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},M=a.leftForLtr(T,m)+m/2,G=C+d/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,mp(t,k,M,G),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,mp(t,k,M,G)}else{t.lineWidth=Gt(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const k=a.leftForLtr(T,m),M=a.leftForLtr(a.xPlus(T,1),m-2),G=Lc(c.borderRadius);Object.values(G).some($=>$!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,pp(t,{x:k,y:C,w:m,h:d,radius:G}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),pp(t,{x:M,y:C+1,w:m-2,h:d-2,radius:G}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(k,C,m,d),t.strokeRect(k,C,m,d),t.fillStyle=c.backgroundColor,t.fillRect(M,C+1,m-2,d-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:a}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:d,boxWidth:m,boxPadding:_}=i,v=on(i.bodyFont);let T=v.lineHeight,A=0;const C=Po(i.rtl,this.x,this.width),k=function(x){e.fillText(x,C.x(t.x+A),t.y+T/2),t.y+=T+o},M=C.textAlign(c);let G,$,tt,st,X,ot,O;for(e.textAlign=c,e.textBaseline="middle",e.font=v.string,t.x=ef(this,M,i),e.fillStyle=i.bodyColor,$t(this.beforeBody,k),A=h&&M!=="right"?c==="center"?m/2+_:m+2+_:0,st=0,ot=a.length;st<ot;++st){for(G=a[st],$=this.labelTextColors[st],e.fillStyle=$,$t(G.before,k),tt=G.lines,h&&tt.length&&(this._drawColorBox(e,t,st,C,i),T=Math.max(v.lineHeight,d)),X=0,O=tt.length;X<O;++X)k(tt[X]),T=v.lineHeight;$t(G.after,k)}A=0,T=v.lineHeight,$t(this.afterBody,k),t.y-=o}drawFooter(t,e,i){const a=this.footer,o=a.length;let c,h;if(o){const d=Po(i.rtl,this.x,this.width);for(t.x=ef(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=d.textAlign(i.footerAlign),e.textBaseline="middle",c=on(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,h=0;h<o;++h)e.fillText(a[h],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,a){const{xAlign:o,yAlign:c}=this,{x:h,y:d}=t,{width:m,height:_}=i,{topLeft:v,topRight:T,bottomLeft:A,bottomRight:C}=Lc(a.cornerRadius);e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.beginPath(),e.moveTo(h+v,d),c==="top"&&this.drawCaret(t,e,i,a),e.lineTo(h+m-T,d),e.quadraticCurveTo(h+m,d,h+m,d+T),c==="center"&&o==="right"&&this.drawCaret(t,e,i,a),e.lineTo(h+m,d+_-C),e.quadraticCurveTo(h+m,d+_,h+m-C,d+_),c==="bottom"&&this.drawCaret(t,e,i,a),e.lineTo(h+A,d+_),e.quadraticCurveTo(h,d+_,h,d+_-A),c==="center"&&o==="left"&&this.drawCaret(t,e,i,a),e.lineTo(h,d+v),e.quadraticCurveTo(h,d,h+v,d),e.closePath(),e.fill(),a.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const c=xc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=EE(this,t),d=Object.assign({},c,this._size),m=SE(e,t,d),_=AE(t,d,m,e);(a._to!==_.x||o._to!==_.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,_))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=Wn(e.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&h&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,a,e),D1(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),M1(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,a=t.map(({datasetIndex:h,index:d})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[d],index:d}}),o=!Pf(i,a),c=this._positionChanged(a,e);(o||c)&&(this._active=a,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),h=this._positionChanged(c,t),d=e||!Pf(c,o)||h;return d&&(this._active=c,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),d}_getActiveElements(t,e,i,a){const o=this.options;if(t.type==="mouseout")return[];if(!a)return e.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:a,options:o}=this,c=xc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||a!==c.y)}}var tw={id:"tooltip",_element:RE,positioners:xc,afterInit(n,t,e){e&&(n.tooltip=new RE({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:J1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const DV=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function MV(n,t,e,i){const a=n.indexOf(t);if(a===-1)return DV(n,t,e,i);const o=n.lastIndexOf(t);return a!==o?e:a}const OV=(n,t)=>n===null?null:Yn(Math.round(n),0,t);function CE(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class ew extends il{static id="category";static defaults={ticks:{callback:CE}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:a,label:o}of e)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ae(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:MV(i,t,Ht(e,t),this._addedLabels),OV(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)a.push({value:c});return a}getLabelForValue(t){return CE.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function NV(n,t){const e=[],{bounds:a,step:o,min:c,max:h,precision:d,count:m,maxTicks:_,maxDigits:v,includeBounds:T}=n,A=o||1,C=_-1,{min:k,max:M}=t,G=!ae(c),$=!ae(h),tt=!ae(m),st=(M-k)/(v+1);let X=OT((M-k)/C/A)*A,ot,O,x,I;if(X<1e-14&&!G&&!$)return[{value:k},{value:M}];I=Math.ceil(M/X)-Math.floor(k/X),I>C&&(X=OT(I*X/C/A)*A),ae(d)||(ot=Math.pow(10,d),X=Math.ceil(X*ot)/ot),a==="ticks"?(O=Math.floor(k/X)*X,x=Math.ceil(M/X)*X):(O=k,x=M),G&&$&&o&&bN((h-c)/o,X/1e3)?(I=Math.round(Math.min((h-c)/X,_)),X=(h-c)/I,O=c,x=h):tt?(O=G?c:O,x=$?h:x,I=m-1,X=(x-O)/I):(I=(x-O)/X,kc(I,Math.round(I),X/1e3)?I=Math.round(I):I=Math.ceil(I));const V=Math.max(NT(X),NT(O));ot=Math.pow(10,ae(d)?V:d),O=Math.round(O*ot)/ot,x=Math.round(x*ot)/ot;let D=0;for(G&&(T&&O!==c?(e.push({value:c}),O<c&&D++,kc(Math.round((O+D*X)*ot)/ot,c,IE(c,st,n))&&D++):O<c&&D++);D<I;++D){const L=Math.round((O+D*X)*ot)/ot;if($&&L>h)break;e.push({value:L})}return $&&T&&x!==h?e.length&&kc(e[e.length-1].value,h,IE(h,st,n))?e[e.length-1].value=h:e.push({value:h}):(!$||x===h)&&e.push({value:x}),e}function IE(n,t,{horizontal:e,minRotation:i}){const a=ga(i),o=(e?Math.sin(a):Math.cos(a))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class kV extends il{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const c=d=>a=e?a:d,h=d=>o=i?o:d;if(t){const d=Yo(a),m=Yo(o);d<0&&m<0?h(0):d>0&&m>0&&c(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);h(o+d),t||c(a-d)}this.min=a,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),e=e||11),e&&(a=Math.min(e,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=NV(a,o);return t.bounds==="ticks"&&TN(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const a=(i-e)/Math.max(t.length-1,1)/2;e-=a,i+=a}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return T1(t,this.chart.options.locale,this.options.ticks.format)}}class nw extends kV{static id="linear";static defaults={ticks:{callback:E1.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xn(t)?t:0,this.max=Xn(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ga(this.options.ticks.minRotation),a=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const hd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bn=Object.keys(hd);function DE(n,t){return n-t}function ME(n,t){if(ae(t))return null;const e=n._adapter,{parser:i,round:a,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Xn(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(a&&(c=a==="week"&&(Wc(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,a)),+c)}function OE(n,t,e,i){const a=bn.length;for(let o=bn.indexOf(n);o<a-1;++o){const c=hd[bn[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(h*c.size))<=i)return bn[o]}return bn[a-1]}function PV(n,t,e,i,a){for(let o=bn.length-1;o>=bn.indexOf(e);o--){const c=bn[o];if(hd[c].common&&n._adapter.diff(a,i,c)>=t-1)return c}return bn[e?bn.indexOf(e):0]}function VV(n){for(let t=bn.indexOf(n)+1,e=bn.length;t<e;++t)if(hd[bn[t]].common)return bn[t]}function NE(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:a}=b_(e,t),o=e[i]>=t?e[i]:e[a];n[o]=!0}}function LV(n,t,e,i){const a=n._adapter,o=+a.startOf(t[0].value,i),c=t[t.length-1].value;let h,d;for(h=o;h<=c;h=+a.add(h,1,i))d=e[h],d>=0&&(t[d].major=!0);return t}function kE(n,t,e){const i=[],a={},o=t.length;let c,h;for(c=0;c<o;++c)h=t[c],a[h]=c,i.push({value:h,major:!1});return o===0||!e?i:LV(n,i,a,e)}class PE extends il{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),a=this._adapter=new Jk._date(t.adapters.date);a.init(e),Nc(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ME(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:a,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function d(m){!c&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!h&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!c||!h)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Xn(a)&&!isNaN(a)?a:+e.startOf(Date.now(),i),o=Xn(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,c=this.max,h=RN(a,o,c);return this._unit=e.unit||(i.autoSkip?OE(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):PV(this,h.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:VV(this._unit),this.initOffsets(a),t.reverse&&h.reverse(),kE(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,a,o;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?e=1-a:e=(this.getDecimalForValue(t[1])-a)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=Yn(e,0,c),i=Yn(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,a=this.options,o=a.time,c=o.unit||OE(o.minUnit,e,i,this._getLabelCapacity(e)),h=Ht(a.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,m=Wc(d)||d===!0,_={};let v=e,T,A;if(m&&(v=+t.startOf(v,"isoWeek",d)),v=+t.startOf(v,m?"day":c),t.diff(i,e,c)>1e5*h)throw new Error(e+" and "+i+" are too far apart with stepSize of "+h+" "+c);const C=a.ticks.source==="data"&&this.getDataTimestamps();for(T=v,A=0;T<i;T=+t.add(T,h,c),A++)NE(_,T,C);return(T===i||a.bounds==="ticks"||A===1)&&NE(_,T,C),Object.keys(_).sort(DE).map(k=>+k)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const a=this.options.time.displayFormats,o=this._unit,c=e||a[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,a){const o=this.options,c=o.ticks.callback;if(c)return oe(c,[t,e,i],this);const h=o.time.displayFormats,d=this._unit,m=this._majorUnit,_=d&&h[d],v=m&&h[m],T=i[e],A=m&&v&&T&&T.major;return this._adapter.format(t,a||(A?v:_))}generateTickLabels(t){let e,i,a;for(e=0,i=t.length;e<i;++e)a=t[e],a.label=this._tickFormatFunction(a.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,a=ga(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(a),c=Math.sin(a),h=this._resolveTickFontOptions(0).size;return{w:i*o+h*c,h:i*c+h*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,a=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,kE(this,[t],this._majorUnit),a),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,i=a.length;e<i;++e)t=t.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const a=this.getLabels();for(e=0,i=a.length;e<i;++e)t.push(ME(this,a[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return IN(t.sort(DE))}}function nf(n,t,e){let i=0,a=n.length-1,o,c,h,d;e?(t>=n[i].pos&&t<=n[a].pos&&({lo:i,hi:a}=ma(n,"pos",t)),{pos:o,time:h}=n[i],{pos:c,time:d}=n[a]):(t>=n[i].time&&t<=n[a].time&&({lo:i,hi:a}=ma(n,"time",t)),{time:o,pos:h}=n[i],{time:c,pos:d}=n[a]);const m=c-o;return m?h+(d-h)*(t-o)/m:h}class ZV extends PE{static id="timeseries";static defaults=PE.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=nf(e,this.min),this._tableRange=nf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,a=[],o=[];let c,h,d,m,_;for(c=0,h=t.length;c<h;++c)m=t[c],m>=e&&m<=i&&a.push(m);if(a.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,h=a.length;c<h;++c)_=a[c+1],d=a[c-1],m=a[c],Math.round((_+d)/2)!==m&&o.push({time:m,pos:c/(h-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(nf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return nf(this._table,i*this._tableRange+this._minPos,!0)}}const iw="label";function VE(n,t){typeof n=="function"?n(t):n&&(n.current=t)}function UV(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function sw(n,t){n.labels=t}function rw(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iw;const i=[];n.datasets=t.map(a=>{const o=n.datasets.find(c=>c[e]===a[e]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function zV(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:iw;const e={labels:[],datasets:[]};return sw(e,n.labels),rw(e,n.datasets,t),e}function jV(n,t){const{height:e=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:c,data:h,options:d,plugins:m=[],fallbackContent:_,updateMode:v,...T}=n,A=St.useRef(null),C=St.useRef(null),k=()=>{A.current&&(C.current=new fu(A.current,{type:c,data:zV(h,o),options:d&&{...d},plugins:m}),VE(t,C.current))},M=()=>{VE(t,null),C.current&&(C.current.destroy(),C.current=null)};return St.useEffect(()=>{!a&&C.current&&d&&UV(C.current,d)},[a,d]),St.useEffect(()=>{!a&&C.current&&sw(C.current.config.data,h.labels)},[a,h.labels]),St.useEffect(()=>{!a&&C.current&&h.datasets&&rw(C.current.config.data,h.datasets,o)},[a,h.datasets]),St.useEffect(()=>{C.current&&(a?(M(),setTimeout(k)):C.current.update(v))},[a,d,h.labels,h.datasets,v]),St.useEffect(()=>{C.current&&(M(),setTimeout(k))},[c]),St.useEffect(()=>(k(),()=>M()),[]),LE.createElement("canvas",{ref:A,role:"img",height:e,width:i,...T},_)}const BV=St.forwardRef(jV);function HV(n,t){return fu.register(t),St.forwardRef((e,i)=>LE.createElement(BV,{...e,ref:i,type:n}))}const Ci=HV("line",Zk);fu.register(ew,nw,Q1,K1,Z1,tw,W1);const aw=({patient:n,onBack:t})=>{const[e,i]=St.useState([]);St.useEffect(()=>{const v=Qn(dn,"patients",n.docId,"vitals"),T=Es(v,_a("timestamp","asc")),A=xa(T,C=>{const k=C.docs.map(M=>({id:M.id,...M.data()}));i(k)});return()=>A()},[n.docId]);const a=e.map(v=>new Date(v.timestamp.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),o=v=>({responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:v}}}),c={labels:a,datasets:[{label:"Temperatura (C)",data:e.map(v=>v.temperature),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},h={labels:a,datasets:[{label:"Frecuencia Cardaca (lpm)",data:e.map(v=>v.heartRate),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]},d={labels:a,datasets:[{label:"Sistlica",data:e.map(v=>v.bloodPressure.split("/")[0]),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Diastlica",data:e.map(v=>v.bloodPressure.split("/")[1]),borderColor:"rgb(153, 102, 255)",backgroundColor:"rgba(153, 102, 255, 0.5)"}]},m={labels:a,datasets:[{label:"Frecuencia Respiratoria (rpm)",data:e.map(v=>v.respiratoryRate),borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)"}]},_={labels:a,datasets:[{label:"Saturacin (%)",data:e.map(v=>v.saturation),borderColor:"rgb(99, 255, 132)",backgroundColor:"rgba(99, 255, 132, 0.5)"}]};return R.jsxs("main",{className:"container",children:[R.jsxs("nav",{children:[R.jsx("ul",{children:R.jsx("li",{children:R.jsx("button",{className:"secondary outline",onClick:t,children:" Volver a la lista"})})}),R.jsx("ul",{children:R.jsx("li",{children:R.jsxs("h2",{children:["Historial de: ",n.name]})})})]}),e.length>1&&R.jsxs("div",{className:"grid",children:[R.jsxs("article",{children:[R.jsx("h4",{children:"Temperatura"}),R.jsx(Ci,{options:o(""),data:c})]}),R.jsxs("article",{children:[R.jsx("h4",{children:"Frecuencia Cardaca"}),R.jsx(Ci,{options:o(""),data:h})]}),R.jsxs("article",{children:[R.jsx("h4",{children:"Frecuencia Respiratoria"}),R.jsx(Ci,{options:o(""),data:m})]}),R.jsxs("article",{children:[R.jsx("h4",{children:"Saturacin"}),R.jsx(Ci,{options:o(""),data:_})]})]}),e.length>1&&R.jsxs("article",{children:[R.jsx("h4",{children:"Presin Arterial"}),R.jsx(Ci,{options:o(""),data:d})]}),R.jsx("figure",{children:R.jsxs("table",{children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",children:"Fecha y Hora"}),R.jsx("th",{scope:"col",children:"Frec. Cardaca"}),R.jsx("th",{scope:"col",children:"Frec. Respiratoria"}),R.jsx("th",{scope:"col",children:"Presin Arterial"}),R.jsx("th",{scope:"col",children:"Saturacin"}),R.jsx("th",{scope:"col",children:"Temperatura"}),R.jsx("th",{scope:"col",children:"Nota"})]})}),R.jsx("tbody",{children:e.map(v=>R.jsxs("tr",{children:[R.jsx("td",{children:new Date(v.timestamp.seconds*1e3).toLocaleString("es-CO")}),R.jsxs("td",{children:[v.heartRate," lpm"]}),R.jsxs("td",{children:[v.respiratoryRate," rpm"]}),R.jsx("td",{children:v.bloodPressure}),R.jsxs("td",{children:[v.saturation," %"]}),R.jsxs("td",{children:[v.temperature," C"]}),R.jsx("td",{children:v.note})]},v.id)).reverse()})]})})]})},ow=({usuario:n,handleLogout:t})=>{const[e,i]=St.useState([]),[a,o]=St.useState(null);St.useEffect(()=>{const h=Es(Qn(dn,"patients"),Go("status","==","Activo"),_a("createdAt","desc")),d=xa(h,m=>{const _=m.docs.map(v=>({docId:v.id,...v.data()}));i(_)});return()=>d()},[]);const c=async h=>{if(window.confirm("Seguro que quieres finalizar este tratamiento?")){const d=sd(dn,"patients",h);await g_(d,{status:"Finalizado"})}};return a?R.jsx(aw,{patient:a,onBack:()=>o(null)}):R.jsxs("div",{className:"container",children:[R.jsxs("nav",{children:[R.jsx("ul",{children:R.jsx("li",{children:R.jsx("strong",{children:"Panel de Mdico"})})}),R.jsxs("ul",{children:[R.jsx("li",{children:n.email}),R.jsx("li",{children:R.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),R.jsxs("main",{children:[R.jsx("h3",{children:"Lista de Pacientes Activos"}),R.jsx("div",{style:{overflowX:"auto"},children:R.jsxs("table",{role:"grid",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",children:"Nombre"}),R.jsx("th",{scope:"col",children:"Cdula"}),R.jsx("th",{scope:"col",children:"Estado"}),R.jsx("th",{scope:"col",children:"Acciones"})]})}),R.jsx("tbody",{children:e.map(h=>R.jsxs("tr",{children:[R.jsx("td",{children:h.name}),R.jsx("td",{children:R.jsx("a",{href:"#",onClick:d=>d.preventDefault(),children:h.id})}),R.jsx("td",{children:h.status}),R.jsx("td",{children:R.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[R.jsx("button",{onClick:()=>o(h),children:"Ver Historial"}),R.jsx("button",{style:{"--pico-background-color":"#dc3545","--pico-color":"white"},onClick:()=>c(h.docId),children:"Finalizar"})]})})]},h.docId))})]})})]})]})},FV=({patientId:n})=>{const[t,e]=St.useState(""),[i,a]=St.useState([]);St.useEffect(()=>{const c=Qn(dn,"patients",n,"notes"),h=Es(c,_a("timestamp","desc")),d=xa(h,m=>{const _=m.docs.map(v=>({id:v.id,...v.data()}));a(_)});return()=>d()},[n]);const o=async c=>{if(c.preventDefault(),!!t.trim())try{await m_(Qn(dn,"patients",n,"notes"),{text:t,author:Kc.currentUser.displayName||Kc.currentUser.email,timestamp:new Date}),e("")}catch(h){console.error("Error al guardar la nota: ",h)}};return R.jsxs("section",{children:[R.jsx("h4",{children:"Notas de Enfermera"}),R.jsx("article",{children:R.jsxs("form",{onSubmit:o,children:[R.jsx("textarea",{value:t,onChange:c=>e(c.target.value),placeholder:"Escribe una nueva nota general...",required:!0}),R.jsx("button",{type:"submit",children:"Aadir Nota"})]})}),i.map(c=>R.jsxs("article",{children:[R.jsx("p",{children:c.text}),R.jsx("footer",{children:R.jsxs("small",{children:["Por ",c.author," el ",new Date(c.timestamp.seconds*1e3).toLocaleString("es-CO")]})})]},c.id))]})},qV=({patient:n,onBack:t})=>R.jsxs("main",{className:"container",children:[R.jsxs("nav",{children:[R.jsx("ul",{children:R.jsx("li",{children:R.jsx("button",{className:"secondary outline",onClick:t,children:" Volver al Historial"})})}),R.jsx("ul",{children:R.jsx("li",{children:R.jsxs("h2",{children:["Notas de Enfermera de: ",n.name]})})})]}),R.jsx(FV,{patientId:n.docId})]});fu.register(ew,nw,Q1,K1,Z1,tw,W1);const lw=({patient:n,onBack:t})=>{const[e,i]=St.useState(!1),[a,o]=St.useState(""),[c,h]=St.useState(""),[d,m]=St.useState(""),[_,v]=St.useState(""),[T,A]=St.useState(""),[C,k]=St.useState(""),[M,G]=St.useState([]);St.useEffect(()=>{const D=Qn(dn,"patients",n.docId,"vitals"),L=Es(D,_a("timestamp","asc")),N=xa(L,Lt=>{const bt=Lt.docs.map(K=>({id:K.id,...K.data()}));G(bt)});return()=>N()},[n.docId]);const $=async D=>{if(D.preventDefault(),!a||!c||!d||!_||!T){alert("Por favor, llena todos los campos de signos vitales.");return}const L=c.replace(/\D/g,"");let N=c;if(L.length>=3&&L.length<=6){const Lt=L.length>4?3:2,bt=L.slice(0,Lt),K=L.slice(Lt);bt&&K&&(N=`${bt}/${K}`)}else if(!c.includes("/")){alert("Por favor, ingresa la presin arterial en un formato reconocible (ej: 120/80, 12080).");return}try{await m_(Qn(dn,"patients",n.docId,"vitals"),{temperature:a,bloodPressure:N,heartRate:d,respiratoryRate:_,saturation:T,note:C,author:Kc.currentUser.displayName||Kc.currentUser.email,timestamp:new Date}),alert("Signos y nota guardados con xito!"),o(""),h(""),m(""),v(""),A(""),k("")}catch(Lt){console.error("Error al guardar: ",Lt),alert("Hubo un error al guardar.")}},tt=async()=>{if(window.confirm(`Seguro que quieres finalizar el tratamiento para ${n.name}?`)){const D=sd(dn,"patients",n.docId);try{await g_(D,{status:"Finalizado"}),alert("Tratamiento finalizado."),t()}catch(L){console.error("Error al finalizar:",L),alert("Hubo un error.")}}},st=M.map(D=>new Date(D.timestamp.seconds*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),X=D=>({responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:D}}}),ot={labels:st,datasets:[{label:"Temperatura (C)",data:M.map(D=>D.temperature),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]},O={labels:st,datasets:[{label:"Frecuencia Cardaca (lpm)",data:M.map(D=>D.heartRate),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]},x={labels:st,datasets:[{label:"Sistlica",data:M.map(D=>D.bloodPressure.split("/")[0]),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Diastlica",data:M.map(D=>D.bloodPressure.split("/")[1]),borderColor:"rgb(153, 102, 255)",backgroundColor:"rgba(153, 102, 255, 0.5)"}]},I={labels:st,datasets:[{label:"Frecuencia Respiratoria (rpm)",data:M.map(D=>D.respiratoryRate),borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.5)"}]},V={labels:st,datasets:[{label:"Saturacin (%)",data:M.map(D=>D.saturation),borderColor:"rgb(99, 255, 132)",backgroundColor:"rgba(99, 255, 132, 0.5)"}]};return e?R.jsx(qV,{patient:n,onBack:()=>i(!1)}):R.jsxs("main",{className:"container",children:[R.jsxs("nav",{children:[R.jsxs("ul",{children:[R.jsx("li",{children:R.jsx("button",{className:"secondary outline",onClick:t,children:" Volver a la lista"})}),n.status==="Activo"&&R.jsx("li",{children:R.jsx("button",{className:"contrast",onClick:tt,children:"Finalizar Tratamiento"})})]}),R.jsx("ul",{children:R.jsx("li",{children:R.jsxs("h2",{children:["Historial de: ",n.name]})})})]}),R.jsx("article",{children:R.jsxs("form",{onSubmit:$,children:[R.jsx("h4",{children:"Aadir Signos Vitales y Nota"}),R.jsxs("div",{className:"grid",children:[R.jsxs("label",{children:["Frec. Cardaca (lpm)",R.jsx("input",{type:"number",value:d,onChange:D=>m(D.target.value)})]}),R.jsxs("label",{children:["Frec. Respiratoria (rpm)",R.jsx("input",{type:"number",value:_,onChange:D=>v(D.target.value)})]})]}),R.jsxs("div",{className:"grid",children:[R.jsxs("label",{children:["Presin Arterial (Sist/Dias)",R.jsx("input",{type:"text",value:c,onChange:D=>h(D.target.value)})]}),R.jsxs("label",{children:["Saturacin (%)",R.jsx("input",{type:"number",value:T,onChange:D=>A(D.target.value)})]}),R.jsxs("label",{children:["Temperatura (C)",R.jsx("input",{type:"number",step:"0.1",value:a,onChange:D=>o(D.target.value)})]})]}),R.jsx("label",{children:"Nota de Enfermera"}),R.jsx("textarea",{value:C,onChange:D=>k(D.target.value),placeholder:"Aade una nota sobre la toma..."}),R.jsx("button",{type:"submit",children:"Guardar Signos y Nota"})]})}),R.jsx("button",{className:"contrast",onClick:()=>i(!0),style:{width:"100%",marginTop:"1rem"},children:"Ver / Aadir Notas de Enfermera Generales"}),M.length>1&&R.jsxs("section",{children:[" ",R.jsx("h4",{children:"Grficas de Evolucin"})," ",R.jsxs("div",{className:"grid",children:[" ",R.jsxs("article",{children:[R.jsx("h6",{children:"Temperatura"}),R.jsx(Ci,{options:X(""),data:ot})]})," ",R.jsxs("article",{children:[R.jsx("h6",{children:"Frecuencia Cardaca"}),R.jsx(Ci,{options:X(""),data:O})]})," ",R.jsxs("article",{children:[R.jsx("h6",{children:"Frecuencia Respiratoria"}),R.jsx(Ci,{options:X(""),data:I})]})," ",R.jsxs("article",{children:[R.jsx("h6",{children:"Saturacin"}),R.jsx(Ci,{options:X(""),data:V})]})," "]})," ",R.jsx("article",{children:R.jsx(Ci,{options:X("Evolucin de Presin Arterial"),data:x})})," "]}),R.jsx("figure",{children:R.jsxs("table",{role:"grid",children:[R.jsx("thead",{children:R.jsxs("tr",{children:[R.jsx("th",{children:"Fecha y Hora"}),R.jsx("th",{children:"Frec. Cardaca"}),R.jsx("th",{children:"Frec. Respiratoria"}),R.jsx("th",{children:"Presin Arterial"}),R.jsx("th",{children:"Saturacin"}),R.jsx("th",{children:"Temperatura"}),R.jsx("th",{children:"Nota de la Toma"})]})}),R.jsx("tbody",{children:M.map(D=>R.jsxs("tr",{children:[R.jsx("td",{children:new Date(D.timestamp.seconds*1e3).toLocaleString("es-CO")}),R.jsxs("td",{children:[D.heartRate," lpm"]}),R.jsxs("td",{children:[D.respiratoryRate," rpm"]}),R.jsx("td",{children:D.bloodPressure}),R.jsxs("td",{children:[D.saturation," %"]}),R.jsxs("td",{children:[D.temperature," C"]}),R.jsx("td",{children:D.note})]},D.id)).reverse()})]})})]})},GV=()=>{const[n,t]=St.useState(""),[e,i]=St.useState(null),[a,o]=St.useState(!1),[c,h]=St.useState(!1),d=async m=>{if(m.preventDefault(),!n.trim())return;h(!0),o(!1),i(null);const _=Es(Qn(dn,"patients"),Go("id","==",n.trim()));try{const v=await o1(_);if(v.empty)o(!0);else{const T={docId:v.docs[0].id,...v.docs[0].data()};i(T)}}catch{alert("Hubo un error al buscar.")}h(!1)};return e?R.jsx(lw,{patient:e,onBack:()=>{i(null),t("")}}):R.jsxs("article",{children:[R.jsx("h4",{children:"Buscar Paciente por Cdula"}),R.jsxs("form",{onSubmit:d,children:[R.jsx("input",{type:"text",value:n,onChange:m=>t(m.target.value),placeholder:"Ingresa el nmero de cdula...",required:!0}),R.jsx("button",{type:"submit","aria-busy":c,children:c?"Buscando...":"Buscar Paciente"})]}),a&&R.jsx("p",{style:{color:"var(--pico-color-red-500)"},children:"Paciente no encontrado."})]})},cw=({usuario:n,handleLogout:t})=>R.jsxs("div",{className:"container",children:[R.jsxs("nav",{children:[R.jsx("ul",{children:R.jsx("li",{children:R.jsx("strong",{children:"Panel de Auxiliar"})})}),R.jsxs("ul",{children:[R.jsx("li",{children:n.email}),R.jsx("li",{children:R.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),R.jsx("main",{children:R.jsx(GV,{})})]}),YV=({usuario:n,handleLogout:t})=>{const[e,i]=St.useState("admin"),[a,o]=St.useState(null);if(a)return R.jsx(aw,{patient:a,onBack:()=>o(null)});const c=()=>{switch(e){case"medico":return R.jsx(ow,{usuario:n,handleLogout:t});case"auxiliar":return R.jsx(cw,{usuario:n,handleLogout:t});case"admin":default:return R.jsx("main",{children:R.jsxs("section",{children:[R.jsx("h2",{children:"Gestin de Pacientes"}),R.jsx(u1,{}),R.jsx(h1,{onPatientSelect:h=>o(h)})]})})}};return R.jsxs("div",{className:"container",children:[R.jsxs("nav",{children:[R.jsx("ul",{children:R.jsx("li",{children:R.jsx("strong",{children:"Panel de Super-Administrador"})})}),R.jsxs("ul",{children:[R.jsx("li",{children:n.email}),R.jsx("li",{children:R.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),R.jsx("nav",{children:R.jsxs("ul",{children:[R.jsx("li",{children:R.jsx("strong",{children:"Simular Vista Como:"})}),R.jsx("li",{children:R.jsx("button",{className:e==="admin"?"":"secondary",onClick:()=>i("admin"),children:"Administrador"})}),R.jsx("li",{children:R.jsx("button",{className:e==="medico"?"":"secondary",onClick:()=>i("medico"),children:"Mdico"})}),R.jsx("li",{children:R.jsx("button",{className:e==="auxiliar"?"":"secondary",onClick:()=>i("auxiliar"),children:"Auxiliar"})})]})}),c()]})},KV=({usuario:n,handleLogout:t})=>{const[e,i]=St.useState(null);return e?R.jsx(lw,{patient:e,onBack:()=>i(null)}):R.jsxs("div",{className:"container",children:[R.jsxs("nav",{children:[R.jsx("ul",{children:R.jsx("li",{children:R.jsx("strong",{children:"Panel de Administracin"})})}),R.jsxs("ul",{children:[R.jsx("li",{children:n.email}),R.jsx("li",{children:R.jsx("button",{className:"secondary",onClick:t,children:"Cerrar Sesin"})})]})]}),R.jsx("main",{children:R.jsxs("section",{children:[R.jsx("h2",{children:"Gestin de Pacientes"}),R.jsx(u1,{}),R.jsx(h1,{onPatientSelect:a=>i(a)})]})})]})},QV=({usuario:n})=>{const[t,e]=St.useState(null);St.useEffect(()=>{if(n){const a=Es(Qn(dn,"personal"),Go("email","==",n.email)),o=xa(a,c=>{c.empty?e(null):e(c.docs[0].data())});return()=>o()}},[n]);const i=async()=>{try{await pI(Kc)}catch(a){console.error("Error al cerrar sesin",a)}};if(!t)return R.jsx("div",{children:"Verificando permisos..."});switch(t.rol){case"Mdico":return R.jsx(YV,{usuario:n,handleLogout:i});case"Jefe de Enfermera":case"Auxiliar Admin":return R.jsx(KV,{usuario:n,handleLogout:i});case"Auxiliar":return R.jsx(cw,{usuario:n,handleLogout:i});default:return t.rol==="Medico"?R.jsx(ow,{usuario:n,handleLogout:i}):R.jsxs("div",{children:[R.jsx("h1",{children:"Acceso Denegado"}),R.jsx("p",{children:"Tu rol no est reconocido o an no ha sido asignado. Por favor, contacta a un administrador."}),R.jsx("button",{onClick:i,children:"Cerrar Sesin"})]})}};function XV(){const[n,t]=St.useState(null),e=a=>{t(a)},i=()=>{t(null)};return n?R.jsx(QV,{usuario:n,handleLogout:i}):R.jsx(jO,{onLoginSuccess:e})}qx.createRoot(document.getElementById("root")).render(R.jsx(St.StrictMode,{children:R.jsx(XV,{})}));
